import{i as cO,a1 as TF,l as EF,D as Aj,ae as Oj,af as cU,X as hZ,ag as Dj,j as iO,ah as Rj,ai as iZ,k as aO,aj as Mj,ak as Nj,al as $j,am as Bj,an as sU,x as uT,d as zf,v as zd,U as iU,o as yu,c as $0,T as Hf,a as Nm,w as ad,K as fU,b as B0,n as wu,f as bo,t as iT,P as gU,ao as hU,m as _F,S as pZ,y as f1,ap as Pj,aq as rU,ar as Fj,as as bZ,C as lZ,at as Ij,e as N0,ad as vZ,N as lU,L as $C,p as pU,au as Lj,V as Hj,av as yZ,Z as uZ,r as $m,aw as zj,I as Vj,q as Uj,ax as Wj,ay as uU,az as Zj,aA as dZ,J as jj,aB as Gj,aC as qj,aD as Kj,aE as Yj,aF as Xj,aG as Jj,aH as mZ,aI as Qj,aJ as eG,F as wZ,Y as tG,aK as nG,aL as oG,z as fZ,aM as CZ,aN as gZ,h as sG,aO as rG,aP as SZ,aQ as aG,u as cG,aR as iG,g as aU}from"./index-8e5f22ce.js";import{E as lG}from"./el-button-91f59bb0.js";import{E as uG}from"./el-input-4a527ce3.js";import{u as dG}from"./index-deeeb02a.js";import{U as xZ}from"./event-9519ab40.js";import{u as mG}from"./index-4bef480d.js";let xF;const fG=_t=>{var It;if(!cO)return 0;if(xF!==void 0)return xF;const gt=document.createElement("div");gt.className=`${_t}-scrollbar__wrap`,gt.style.visibility="hidden",gt.style.width="100px",gt.style.position="absolute",gt.style.top="-9999px",document.body.appendChild(gt);const Ut=gt.offsetWidth;gt.style.overflow="scroll";const $t=document.createElement("div");$t.style.width="100%",gt.appendChild($t);const en=$t.offsetWidth;return(It=gt.parentNode)==null||It.removeChild(gt),xF=Ut-en,xF},gG=(..._t)=>It=>{_t.forEach(gt=>{TF(gt)?gt(It):gt.value=It})},kZ=Symbol("dialogInjectionKey"),hG=(_t,It,gt)=>{let Ut={offsetX:0,offsetY:0};const $t=Tt=>{const Et=Tt.clientX,rt=Tt.clientY,{offsetX:mn,offsetY:Nn}=Ut,Ot=_t.value.getBoundingClientRect(),ct=Ot.left,Bt=Ot.top,cn=Ot.width,Ze=Ot.height,et=document.documentElement.clientWidth,Ee=document.documentElement.clientHeight,te=-ct+mn,Je=-Bt+Nn,Ht=et-ct-cn+mn,yt=Ee-Bt-Ze+Nn,K=En=>{const St=Math.min(Math.max(mn+En.clientX-Et,te),Ht),he=Math.min(Math.max(Nn+En.clientY-rt,Je),yt);Ut={offsetX:St,offsetY:he},_t.value.style.transform=`translate(${cU(St)}, ${cU(he)})`},xt=()=>{document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",xt)};document.addEventListener("mousemove",K),document.addEventListener("mouseup",xt)},en=()=>{It.value&&_t.value&&It.value.addEventListener("mousedown",$t)},Gt=()=>{It.value&&_t.value&&It.value.removeEventListener("mousedown",$t)};EF(()=>{Aj(()=>{gt.value?en():Gt()})}),Oj(()=>{Gt()})},pG=_t=>{hZ(_t)||Dj("[useLockscreen]","You need to pass a ref param to this function");const It=iO("popup"),gt=Rj(()=>It.bm("parent","hidden"));if(!cO||iZ(document.body,gt.value))return;let Ut=0,$t=!1,en="0";const Gt=()=>{setTimeout(()=>{Bj(document==null?void 0:document.body,gt.value),$t&&document&&(document.body.style.width=en)},200)};aO(_t,Tt=>{if(!Tt){Gt();return}$t=!iZ(document.body,gt.value),$t&&(en=document.body.style.width),Ut=fG(It.namespace.value);const Et=document.documentElement.clientHeight<document.body.scrollHeight,rt=Mj(document.body,"overflowY");Ut>0&&(Et||rt==="scroll")&&$t&&(document.body.style.width=`calc(100% - ${Ut}px)`),Nj(document.body,gt.value)}),$j(()=>Gt())},TZ=_t=>{if(!_t)return{onClick:sU,onMousedown:sU,onMouseup:sU};let It=!1,gt=!1;return{onClick:Gt=>{It&&gt&&_t(Gt),It=gt=!1},onMousedown:Gt=>{It=Gt.target===Gt.currentTarget},onMouseup:Gt=>{gt=Gt.target===Gt.currentTarget}}},bG=uT({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),vG=["textContent"],yG=zf({name:"ElBadge"}),wG=zf({...yG,props:bG,setup(_t,{expose:It}){const gt=_t,Ut=iO("badge"),$t=zd(()=>gt.isDot?"":iU(gt.value)&&iU(gt.max)?gt.max<gt.value?`${gt.max}+`:`${gt.value}`:`${gt.value}`);return It({content:$t}),(en,Gt)=>(yu(),$0("div",{class:wu(bo(Ut).b())},[Hf(en.$slots,"default"),Nm(hU,{name:`${bo(Ut).namespace.value}-zoom-in-center`,persisted:""},{default:ad(()=>[fU(B0("sup",{class:wu([bo(Ut).e("content"),bo(Ut).em("content",en.type),bo(Ut).is("fixed",!!en.$slots.default),bo(Ut).is("dot",en.isDot)]),textContent:iT(bo($t))},null,10,vG),[[gU,!en.hidden&&(bo($t)||en.isDot)]])]),_:1},8,["name"])],2))}});var CG=_F(wG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const SG=pZ(CG),dU={},xG=uT({a11y:{type:Boolean,default:!0},locale:{type:f1(Object)},size:mG,button:{type:f1(Object)},experimentalFeatures:{type:f1(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:f1(Object)},zIndex:Number,namespace:{type:String,default:"el"}});zf({name:"ElConfigProvider",props:xG,setup(_t,{slots:It}){aO(()=>_t.message,Ut=>{Object.assign(dU,Ut??{})},{immediate:!0,deep:!0});const gt=Pj(_t);return()=>Hf(It,"default",{config:gt==null?void 0:gt.value})}});const kG=uT({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:f1([String,Array,Object])},zIndex:{type:f1([String,Number])}}),TG={click:_t=>_t instanceof MouseEvent};var EG=zf({name:"ElOverlay",props:kG,emits:TG,setup(_t,{slots:It,emit:gt}){const Ut=iO("overlay"),$t=Et=>{gt("click",Et)},{onClick:en,onMousedown:Gt,onMouseup:Tt}=TZ(_t.customMaskEvent?void 0:$t);return()=>_t.mask?Nm("div",{class:[Ut.b(),_t.overlayClass],style:{zIndex:_t.zIndex},onClick:en,onMousedown:Gt,onMouseup:Tt},[Hf(It,"default")],rU.STYLE|rU.CLASS|rU.PROPS,["onClick","onMouseup","onMousedown"]):Fj("div",{class:_t.overlayClass,style:{zIndex:_t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Hf(It,"default")])}});const _G=EG,EZ=uT({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:bZ},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),AG={close:()=>!0},OG=["aria-label"],DG=["id"],RG=zf({name:"ElDialogContent"}),MG=zf({...RG,props:EZ,emits:AG,setup(_t){const It=_t,{t:gt}=dG(),{Close:Ut}=Lj,{dialogRef:$t,headerRef:en,bodyId:Gt,ns:Tt,style:Et}=lZ(kZ),{focusTrapRef:rt}=lZ(Ij),mn=gG(rt,$t),Nn=zd(()=>It.draggable);return hG($t,en,Nn),(Ot,ct)=>(yu(),$0("div",{ref:bo(mn),class:wu([bo(Tt).b(),bo(Tt).is("fullscreen",Ot.fullscreen),bo(Tt).is("draggable",bo(Nn)),bo(Tt).is("align-center",Ot.alignCenter),{[bo(Tt).m("center")]:Ot.center},Ot.customClass]),style:pU(bo(Et)),tabindex:"-1"},[B0("header",{ref_key:"headerRef",ref:en,class:wu(bo(Tt).e("header"))},[Hf(Ot.$slots,"header",{},()=>[B0("span",{role:"heading",class:wu(bo(Tt).e("title"))},iT(Ot.title),3)]),Ot.showClose?(yu(),$0("button",{key:0,"aria-label":bo(gt)("el.dialog.close"),class:wu(bo(Tt).e("headerbtn")),type:"button",onClick:ct[0]||(ct[0]=Bt=>Ot.$emit("close"))},[Nm(bo(lU),{class:wu(bo(Tt).e("close"))},{default:ad(()=>[(yu(),N0(vZ(Ot.closeIcon||bo(Ut))))]),_:1},8,["class"])],10,OG)):$C("v-if",!0)],2),B0("div",{id:bo(Gt),class:wu(bo(Tt).e("body"))},[Hf(Ot.$slots,"default")],10,DG),Ot.$slots.footer?(yu(),$0("footer",{key:0,class:wu(bo(Tt).e("footer"))},[Hf(Ot.$slots,"footer")],2)):$C("v-if",!0)],6))}});var NG=_F(MG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const $G=uT({...EZ,appendToBody:{type:Boolean,default:!1},beforeClose:{type:f1(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),BG={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[xZ]:_t=>Hj(_t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},PG=(_t,It)=>{const Ut=Uj().emit,{nextZIndex:$t}=yZ();let en="";const Gt=uZ(),Tt=uZ(),Et=$m(!1),rt=$m(!1),mn=$m(!1),Nn=$m(_t.zIndex||$t());let Ot,ct;const Bt=zj("namespace",Wj),cn=zd(()=>{const Me={},De=`--${Bt.value}-dialog`;return _t.fullscreen||(_t.top&&(Me[`${De}-margin-top`]=_t.top),_t.width&&(Me[`${De}-width`]=cU(_t.width))),Me}),Ze=zd(()=>_t.alignCenter?{display:"flex"}:{});function et(){Ut("opened")}function Ee(){Ut("closed"),Ut(xZ,!1),_t.destroyOnClose&&(mn.value=!1)}function te(){Ut("close")}function Je(){ct==null||ct(),Ot==null||Ot(),_t.openDelay&&_t.openDelay>0?{stop:Ot}=uU(()=>xt(),_t.openDelay):xt()}function Ht(){Ot==null||Ot(),ct==null||ct(),_t.closeDelay&&_t.closeDelay>0?{stop:ct}=uU(()=>En(),_t.closeDelay):En()}function yt(){function Me(De){De||(rt.value=!0,Et.value=!1)}_t.beforeClose?_t.beforeClose(Me):Ht()}function K(){_t.closeOnClickModal&&yt()}function xt(){cO&&(Et.value=!0)}function En(){Et.value=!1}function St(){Ut("openAutoFocus")}function he(){Ut("closeAutoFocus")}function Q(Me){var De;((De=Me.detail)==null?void 0:De.focusReason)==="pointer"&&Me.preventDefault()}_t.lockScroll&&pG(Et);function it(){_t.closeOnPressEscape&&yt()}return aO(()=>_t.modelValue,Me=>{Me?(rt.value=!1,Je(),mn.value=!0,Nn.value=_t.zIndex?Nn.value++:$t(),Vj(()=>{Ut("open"),It.value&&(It.value.scrollTop=0)})):Et.value&&Ht()}),aO(()=>_t.fullscreen,Me=>{It.value&&(Me?(en=It.value.style.transform,It.value.style.transform=""):It.value.style.transform=en)}),EF(()=>{_t.modelValue&&(Et.value=!0,mn.value=!0,Je())}),{afterEnter:et,afterLeave:Ee,beforeLeave:te,handleClose:yt,onModalClick:K,close:Ht,doClose:En,onOpenAutoFocus:St,onCloseAutoFocus:he,onCloseRequested:it,onFocusoutPrevented:Q,titleId:Gt,bodyId:Tt,closed:rt,style:cn,overlayDialogStyle:Ze,rendered:mn,visible:Et,zIndex:Nn}},FG=["aria-label","aria-labelledby","aria-describedby"],IG=zf({name:"ElDialog",inheritAttrs:!1}),LG=zf({...IG,props:$G,emits:BG,setup(_t,{expose:It}){const gt=_t,Ut=Zj();dZ({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},zd(()=>!!Ut.title)),dZ({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},zd(()=>!!gt.customClass));const $t=iO("dialog"),en=$m(),Gt=$m(),Tt=$m(),{visible:Et,titleId:rt,bodyId:mn,style:Nn,overlayDialogStyle:Ot,rendered:ct,zIndex:Bt,afterEnter:cn,afterLeave:Ze,beforeLeave:et,handleClose:Ee,onModalClick:te,onOpenAutoFocus:Je,onCloseAutoFocus:Ht,onCloseRequested:yt,onFocusoutPrevented:K}=PG(gt,en);jj(kZ,{dialogRef:en,headerRef:Gt,bodyId:mn,ns:$t,rendered:ct,style:Nn});const xt=TZ(te),En=zd(()=>gt.draggable&&!gt.fullscreen);return It({visible:Et,dialogContentRef:Tt}),(St,he)=>(yu(),N0(Yj,{to:"body",disabled:!St.appendToBody},[Nm(hU,{name:"dialog-fade",onAfterEnter:bo(cn),onAfterLeave:bo(Ze),onBeforeLeave:bo(et),persisted:""},{default:ad(()=>[fU(Nm(bo(_G),{"custom-mask-event":"",mask:St.modal,"overlay-class":St.modalClass,"z-index":bo(Bt)},{default:ad(()=>[B0("div",{role:"dialog","aria-modal":"true","aria-label":St.title||void 0,"aria-labelledby":St.title?void 0:bo(rt),"aria-describedby":bo(mn),class:wu(`${bo($t).namespace.value}-overlay-dialog`),style:pU(bo(Ot)),onClick:he[0]||(he[0]=(...Q)=>bo(xt).onClick&&bo(xt).onClick(...Q)),onMousedown:he[1]||(he[1]=(...Q)=>bo(xt).onMousedown&&bo(xt).onMousedown(...Q)),onMouseup:he[2]||(he[2]=(...Q)=>bo(xt).onMouseup&&bo(xt).onMouseup(...Q))},[Nm(bo(Gj),{loop:"",trapped:bo(Et),"focus-start-el":"container",onFocusAfterTrapped:bo(Je),onFocusAfterReleased:bo(Ht),onFocusoutPrevented:bo(K),onReleaseRequested:bo(yt)},{default:ad(()=>[bo(ct)?(yu(),N0(NG,qj({key:0,ref_key:"dialogContentRef",ref:Tt},St.$attrs,{"custom-class":St.customClass,center:St.center,"align-center":St.alignCenter,"close-icon":St.closeIcon,draggable:bo(En),fullscreen:St.fullscreen,"show-close":St.showClose,title:St.title,onClose:bo(Ee)}),Kj({header:ad(()=>[St.$slots.title?Hf(St.$slots,"title",{key:1}):Hf(St.$slots,"header",{key:0,close:bo(Ee),titleId:bo(rt),titleClass:bo($t).e("title")})]),default:ad(()=>[Hf(St.$slots,"default")]),_:2},[St.$slots.footer?{name:"footer",fn:ad(()=>[Hf(St.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):$C("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,FG)]),_:3},8,["mask","overlay-class","z-index"]),[[gU,bo(Et)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var HG=_F(LG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const zG=pZ(HG),_Z=["success","info","warning","error"],Hd=Xj({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:cO?document.body:void 0}),VG=uT({customClass:{type:String,default:Hd.customClass},center:{type:Boolean,default:Hd.center},dangerouslyUseHTMLString:{type:Boolean,default:Hd.dangerouslyUseHTMLString},duration:{type:Number,default:Hd.duration},icon:{type:bZ,default:Hd.icon},id:{type:String,default:Hd.id},message:{type:f1([String,Object,Function]),default:Hd.message},onClose:{type:f1(Function),required:!1},showClose:{type:Boolean,default:Hd.showClose},type:{type:String,values:_Z,default:Hd.type},offset:{type:Number,default:Hd.offset},zIndex:{type:Number,default:Hd.zIndex},grouping:{type:Boolean,default:Hd.grouping},repeatNum:{type:Number,default:Hd.repeatNum}}),UG={destroy:()=>!0},Jg=Jj([]),WG=_t=>{const It=Jg.findIndex($t=>$t.id===_t),gt=Jg[It];let Ut;return It>0&&(Ut=Jg[It-1]),{current:gt,prev:Ut}},ZG=_t=>{const{prev:It}=WG(_t);return It?It.vm.exposed.bottom.value:0},jG=(_t,It)=>Jg.findIndex(Ut=>Ut.id===_t)>0?20:It,GG=["id"],qG=["innerHTML"],KG=zf({name:"ElMessage"}),YG=zf({...KG,props:VG,emits:UG,setup(_t,{expose:It}){const gt=_t,{Close:Ut}=nG,$t=iO("message"),en=$m(),Gt=$m(!1),Tt=$m(0);let Et;const rt=zd(()=>gt.type?gt.type==="error"?"danger":gt.type:"info"),mn=zd(()=>{const Je=gt.type;return{[$t.bm("icon",Je)]:Je&&mZ[Je]}}),Nn=zd(()=>gt.icon||mZ[gt.type]||""),Ot=zd(()=>ZG(gt.id)),ct=zd(()=>jG(gt.id,gt.offset)+Ot.value),Bt=zd(()=>Tt.value+ct.value),cn=zd(()=>({top:`${ct.value}px`,zIndex:gt.zIndex}));function Ze(){gt.duration!==0&&({stop:Et}=uU(()=>{Ee()},gt.duration))}function et(){Et==null||Et()}function Ee(){Gt.value=!1}function te({code:Je}){Je===oG.esc&&Ee()}return EF(()=>{Ze(),Gt.value=!0}),aO(()=>gt.repeatNum,()=>{et(),Ze()}),Qj(document,"keydown",te),eG(en,()=>{Tt.value=en.value.getBoundingClientRect().height}),It({visible:Gt,bottom:Bt,close:Ee}),(Je,Ht)=>(yu(),N0(hU,{name:bo($t).b("fade"),onBeforeLeave:Je.onClose,onAfterLeave:Ht[0]||(Ht[0]=yt=>Je.$emit("destroy")),persisted:""},{default:ad(()=>[fU(B0("div",{id:Je.id,ref_key:"messageRef",ref:en,class:wu([bo($t).b(),{[bo($t).m(Je.type)]:Je.type&&!Je.icon},bo($t).is("center",Je.center),bo($t).is("closable",Je.showClose),Je.customClass]),style:pU(bo(cn)),role:"alert",onMouseenter:et,onMouseleave:Ze},[Je.repeatNum>1?(yu(),N0(bo(SG),{key:0,value:Je.repeatNum,type:bo(rt),class:wu(bo($t).e("badge"))},null,8,["value","type","class"])):$C("v-if",!0),bo(Nn)?(yu(),N0(bo(lU),{key:1,class:wu([bo($t).e("icon"),bo(mn)])},{default:ad(()=>[(yu(),N0(vZ(bo(Nn))))]),_:1},8,["class"])):$C("v-if",!0),Hf(Je.$slots,"default",{},()=>[Je.dangerouslyUseHTMLString?(yu(),$0(wZ,{key:1},[$C(" Caution here, message could've been compromised, never use user's input as message "),B0("p",{class:wu(bo($t).e("content")),innerHTML:Je.message},null,10,qG)],2112)):(yu(),$0("p",{key:0,class:wu(bo($t).e("content"))},iT(Je.message),3))]),Je.showClose?(yu(),N0(bo(lU),{key:2,class:wu(bo($t).e("closeBtn")),onClick:tG(Ee,["stop"])},{default:ad(()=>[Nm(bo(Ut))]),_:1},8,["class","onClick"])):$C("v-if",!0)],46,GG),[[gU,Gt.value]])]),_:3},8,["name","onBeforeLeave"]))}});var XG=_F(YG,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let JG=1;const AZ=_t=>{const It=!_t||fZ(_t)||CZ(_t)||TF(_t)?{message:_t}:_t,gt={...Hd,...It};if(!gt.appendTo)gt.appendTo=document.body;else if(fZ(gt.appendTo)){let Ut=document.querySelector(gt.appendTo);sG(Ut)||(Ut=document.body),gt.appendTo=Ut}return gt},QG=_t=>{const It=Jg.indexOf(_t);if(It===-1)return;Jg.splice(It,1);const{handler:gt}=_t;gt.close()},eq=({appendTo:_t,...It},gt)=>{const{nextZIndex:Ut}=yZ(),$t=`message_${JG++}`,en=It.onClose,Gt=document.createElement("div"),Tt={...It,zIndex:Ut()+It.zIndex,id:$t,onClose:()=>{en==null||en(),QG(Nn)},onDestroy:()=>{gZ(null,Gt)}},Et=Nm(XG,Tt,TF(Tt.message)||CZ(Tt.message)?{default:TF(Tt.message)?Tt.message:()=>Tt.message}:null);Et.appContext=gt||lT._context,gZ(Et,Gt),_t.appendChild(Gt.firstElementChild);const rt=Et.component,Nn={id:$t,vnode:Et,vm:rt,handler:{close:()=>{rt.exposed.visible.value=!1}},props:Et.component.props};return Nn},lT=(_t={},It)=>{if(!cO)return{close:()=>{}};if(iU(dU.max)&&Jg.length>=dU.max)return{close:()=>{}};const gt=AZ(_t);if(gt.grouping&&Jg.length){const $t=Jg.find(({vnode:en})=>{var Gt;return((Gt=en.props)==null?void 0:Gt.message)===gt.message});if($t)return $t.props.repeatNum+=1,$t.props.type=gt.type,$t.handler}const Ut=eq(gt,It);return Jg.push(Ut),Ut.handler};_Z.forEach(_t=>{lT[_t]=(It={},gt)=>{const Ut=AZ(It);return lT({...Ut,type:_t},gt)}});function tq(_t){for(const It of Jg)(!_t||_t===It.props.type)&&It.handler.close()}lT.closeAll=tq;lT._context=null;const nq=rG(lT,"$message");var mU={},oq={get exports(){return mU},set exports(_t){mU=_t}};(function(_t){(function(){var It=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},gt=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Ut=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},$t=function(e,n){return en(function(o,r){return e.eq(n(o),n(r))})},en=function(e){return{eq:e}},Gt=en(function(e,n){return e===n}),Tt=Gt,Et=function(e){return en(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},rt=function(e,n){return $t(Et(e),function(o){return Ut(o,n)})},mn=function(e){return en(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!rt(Tt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Nn=en(function(e,n){if(e===n)return!0;var o=It(e),r=It(n);return o!==r?!1:gt(o)?e===n:o==="array"?Et(Nn).eq(e,n):o==="object"?mn(Nn).eq(e,n):!1});const Ot=Object.getPrototypeOf,ct=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Bt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&ct(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},cn=e=>n=>Bt(n)===e,Ze=e=>n=>typeof n===e,et=e=>n=>e===n,Ee=(e,n)=>Je(e)&&ct(e,n,(o,r)=>Ot(o)===r),te=cn("string"),Je=cn("object"),Ht=e=>Ee(e,Object),yt=cn("array"),K=et(null),xt=Ze("boolean"),En=et(void 0),St=e=>e==null,he=e=>!St(e),Q=Ze("function"),it=Ze("number"),Me=(e,n)=>{if(yt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},De=()=>{},Ft=(e,n)=>(...o)=>e(n.apply(null,o)),_=(e,n)=>o=>e(n(o)),ge=e=>()=>e,Ue=e=>e,Ie=(e,n)=>e===n;function Ae(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const tn=e=>n=>!e(n),dn=e=>()=>{throw new Error(e)},ze=e=>e(),jt=e=>{e()},Nt=ge(!1),Ve=ge(!0);class R{constructor(n,o){this.tag=n,this.value=o}static some(n){return new R(!0,n)}static none(){return R.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?R.some(n(this.value)):R.none()}bind(n){return this.tag?n(this.value):R.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:R.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return he(n)?R.some(n):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const qn=Array.prototype.slice,_e=Array.prototype.indexOf,xe=Array.prototype.push,We=(e,n)=>_e.call(e,n),ke=(e,n)=>{const o=We(e,n);return o===-1?R.none():R.some(o)},ae=(e,n)=>We(e,n)>-1,se=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},re=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},z=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Y=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},H=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},Z=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Be=(e,n,o)=>(Y(e,(r,c)=>{o=n(o,r,c)}),o),Pe=(e,n,o)=>(z(e,(r,c)=>{o=n(o,r,c)}),o),Yt=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return R.some(u);if(o(u,r))break}return R.none()},rn=(e,n)=>Yt(e,n,Nt),ro=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return R.some(o)}return R.none()},uo=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!yt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);xe.apply(n,e[o])}return n},Qn=(e,n)=>uo(re(e,n)),kn=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},ao=e=>{const n=qn.call(e,0);return n.reverse(),n},Re=(e,n)=>Z(e,o=>!ae(n,o)),Ye=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Lt=(e,n)=>{const o=qn.call(e,0);return o.sort(n),o},fn=(e,n)=>n>=0&&n<e.length?R.some(e[n]):R.none(),On=e=>fn(e,0),Tn=e=>fn(e,e.length-1),Ro=Q(Array.from)?Array.from:e=>qn.call(e),ks=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return R.none()},qe=(e,n)=>{const o=[],r=Q(n)?c=>se(o,u=>n(u,c)):c=>ae(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},Le=Object.keys,un=Object.hasOwnProperty,ln=(e,n)=>{const o=Le(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},Jt=(e,n)=>Kn(e,(o,r)=>({k:r,v:n(o,r)})),Kn=(e,n)=>{const o={};return ln(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},Ts=e=>(n,o)=>{e[o]=n},Tr=(e,n,o,r)=>{ln(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},ma=(e,n)=>{const o={},r={};return Tr(e,n,Ts(o),Ts(r)),{t:o,f:r}},bs=(e,n)=>{const o={};return Tr(e,n,Ts(o),De),o},vc=(e,n)=>{const o=[];return ln(e,(r,c)=>{o.push(n(r,c))}),o},ys=e=>vc(e,Ue),cs=(e,n)=>go(e,n)?R.from(e[n]):R.none(),go=(e,n)=>un.call(e,n),mr=(e,n)=>go(e,n)&&e[n]!==void 0&&e[n]!==null,Zr=(e,n,o=Nn)=>mn(o).eq(e,n),Is=e=>{const n={};return z(e,o=>{n[o]={}}),Le(n)},fa=e=>e.length!==void 0,jr=Array.isArray,rc=e=>{if(jr(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Xs=(e,n,o)=>{if(!e)return!1;if(o=o||e,fa(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(go(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Ta=(e,n)=>{const o=[];return Xs(e,(r,c)=>{o.push(n(r,c,e))}),o},ye=(e,n)=>{const o=[];return Xs(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},q=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},lt=(e,n,o,r)=>{let c=En(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},wt=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Zn=e=>e[e.length-1],eo=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},In=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!y,M=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,P=!x&&!y&&!M;return{isiPad:ge(c),isiPhone:ge(u),isTablet:ge(y),isPhone:ge(x),isTouch:ge(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ge(M),isDesktop:ge(P)}},is=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},ts=(e,n)=>{const o=is(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Wt(r(1),r(2))},ko=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ar():ts(e,o)},ar=()=>Wt(0,0),Wt=(e,n)=>({major:e,minor:n}),fe={nu:Wt,detect:ko,unknown:ar},be=(e,n)=>ks(n.brands,o=>{const r=o.brand.toLowerCase();return rn(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:fe.nu(parseInt(o.version,10),0)}))}),Rt=(e,n)=>{const o=String(n).toLowerCase();return rn(e,r=>r.search(o))},an=(e,n)=>Rt(e,n).map(o=>{const r=fe.detect(o.versionRegexes,n);return{current:o.name,version:r}}),hn=(e,n)=>Rt(e,n).map(o=>{const r=fe.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Pn=(e,n)=>e.substring(n),yn=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Hn=(e,n)=>Co(e,n)?Pn(e,n.length):e,no=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?En(r)?!0:c+n.length<=r:!1},Co=(e,n)=>yn(e,n,0),Os=(e,n)=>yn(e,n,e.length-n.length),fr=e=>n=>n.replace(e,""),qo=fr(/^\s+|\s+$/g),Kc=fr(/^\s+/g),ls=fr(/\s+$/g),Cs=e=>e.length>0,xs=e=>!Cs(e),Fr=(e,n)=>n<=0?"":new Array(n+1).join(e),Mr=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?R.none():R.some(o)},Bc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Fa=e=>n=>no(n,e),Yc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>no(e,"edge/")&&no(e,"chrome")&&no(e,"safari")&&no(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bc],search:e=>no(e,"chrome")&&!no(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>no(e,"msie")||no(e,"trident")},{name:"Opera",versionRegexes:[Bc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Fa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Fa("firefox")},{name:"Safari",versionRegexes:[Bc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(no(e,"safari")||no(e,"mobile/"))&&no(e,"applewebkit")}],Ti=[{name:"Windows",search:Fa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>no(e,"iphone")||no(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Fa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Fa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Fa("linux"),versionRegexes:[]},{name:"Solaris",search:Fa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Fa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Fa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Xc={browsers:ge(Yc),oses:ge(Ti)},Li="Edge",zs="Chromium",mi="IE",ga="Opera",ac="Firefox",fi="Safari",Pc=()=>sa({current:void 0,version:fe.unknown()}),sa=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Li),isChromium:r(zs),isIE:r(mi),isOpera:r(ga),isFirefox:r(ac),isSafari:r(fi)}},Ei={unknown:Pc,nu:sa,edge:ge(Li),chromium:ge(zs),ie:ge(mi),opera:ge(ga),firefox:ge(ac),safari:ge(fi)},yc="Windows",Hi="iOS",Js="Android",ha="Linux",X="macOS",Ce="Solaris",Fe="FreeBSD",Ct="ChromeOS",Xt=()=>mo({current:void 0,version:fe.unknown()}),mo=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(yc),isiOS:r(Hi),isAndroid:r(Js),isMacOS:r(X),isLinux:r(ha),isSolaris:r(Ce),isFreeBSD:r(Fe),isChromeOS:r(Ct)}},Ko={unknown:Xt,nu:mo,windows:ge(yc),ios:ge(Hi),android:ge(Js),linux:ge(ha),macos:ge(X),solaris:ge(Ce),freebsd:ge(Fe),chromeos:ge(Ct)},Ls={detect:(e,n,o)=>{const r=Xc.browsers(),c=Xc.oses(),u=n.bind(y=>be(r,y)).orThunk(()=>an(r,e)).fold(Ei.unknown,Ei.nu),f=hn(c,e).fold(Ko.unknown,Ko.nu),b=In(f,u,e,o);return{browser:u,os:f,deviceType:b}}},Nr=e=>window.matchMedia(e).matches;let _r=eo(()=>Ls.detect(navigator.userAgent,R.from(navigator.userAgentData),Nr));const $r=()=>_r(),Ia=navigator.userAgent,Gr=$r(),Qr=Gr.browser,Jc=Gr.os,Qc=Gr.deviceType,To=Ia.indexOf("Windows Phone")!==-1,us={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Qr.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Qr.isIE(),windowsPhone:To,browser:{current:Qr.current,version:Qr.version,isChromium:Qr.isChromium,isEdge:Qr.isEdge,isFirefox:Qr.isFirefox,isIE:Qr.isIE,isOpera:Qr.isOpera,isSafari:Qr.isSafari},os:{current:Jc.current,version:Jc.version,isAndroid:Jc.isAndroid,isChromeOS:Jc.isChromeOS,isFreeBSD:Jc.isFreeBSD,isiOS:Jc.isiOS,isLinux:Jc.isLinux,isMacOS:Jc.isMacOS,isSolaris:Jc.isSolaris,isWindows:Jc.isWindows},deviceType:{isDesktop:Qc.isDesktop,isiPad:Qc.isiPad,isiPhone:Qc.isiPhone,isPhone:Qc.isPhone,isTablet:Qc.isTablet,isTouch:Qc.isTouch,isWebView:Qc.isWebView}},sr=/^\s*|\s*$/g,B=e=>St(e)?"":(""+e).replace(sr,""),J=(e,n)=>n?n==="array"&&jr(e)?!0:typeof e===n:e!==void 0,de=(e,n,o={})=>{const r=te(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Xe=go,$n=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(go(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Mo=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Xs(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Mo(c,n,o,r),!0)))},Pt={trim:B,isArray:jr,is:J,toArray:rc,makeMap:de,each:Xs,map:Ta,grep:ye,inArray:q,hasOwn:Xe,extend:$n,walk:Mo,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>yt(e)?e:e===""?[]:Ta(e.split(n||","),B),_addCacheSuffix:e=>{const n=us.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},ra=(e,n,o=Ie)=>e.exists(r=>o(r,n)),Qs=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Ur=(e,n,o)=>e.isSome()&&n.isSome()?R.some(o(e.getOrDie(),n.getOrDie())):R.none(),nl=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?R.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):R.none(),Po=(e,n)=>e?R.some(n):R.none();typeof window<"u"||Function("return this;")();const ne=8,me=9,tt=11,ft=1,Vn=3,oo=e=>e.dom.nodeName.toLowerCase(),qs=e=>e.dom.nodeType,Yo=e=>n=>qs(n)===e,zi=e=>qs(e)===ne||oo(e)==="#comment",Qo=Yo(ft),Ds=Yo(Vn),Ea=Yo(me),cc=Yo(tt),Vi=e=>n=>Qo(n)&&oo(n)===e,hr=(e,n,o)=>{if(te(o)||xt(o)||it(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},or=(e,n,o)=>{hr(e.dom,n,o)},Rs=(e,n)=>{const o=e.dom;ln(n,(r,c)=>{hr(o,c,r)})},Lr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},wc=(e,n)=>R.from(Lr(e,n)),El=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},qr=(e,n)=>{e.dom.removeAttribute(n)},Gl=e=>{const n=e.dom.attributes;return n==null||n.length===0},Cu=e=>Pe(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),ic=(e,n)=>{const o=Lr(e,n);return o===void 0||o===""?[]:o.split(" ")},Su=(e,n,o)=>{const c=ic(e,n).concat([o]);return or(e,n,c.join(" ")),!0},Qg=(e,n,o)=>{const r=Z(ic(e,n),c=>c!==o);return r.length>0?or(e,n,r.join(" ")):qr(e,n),!1},Fc=e=>e.dom.classList!==void 0,_l=e=>ic(e,"class"),cd=(e,n)=>Su(e,"class",n),La=(e,n)=>Qg(e,"class",n),ol=(e,n)=>ae(_l(e),n)?La(e,n):cd(e,n),xu=(e,n)=>{Fc(e)?e.dom.classList.add(n):cd(e,n)},Vd=e=>{(Fc(e)?e.dom.classList:_l(e)).length===0&&qr(e,"class")},ql=(e,n)=>{Fc(e)?e.dom.classList.remove(n):La(e,n),Vd(e)},Bm=(e,n)=>{const o=Fc(e)?e.dom.classList.toggle(n):ol(e,n);return Vd(e),o},Ud=(e,n)=>Fc(e)&&e.dom.classList.contains(n),_i=e=>e.style!==void 0&&Q(e.style.getPropertyValue),eh=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Wd(r.childNodes[0])},Pm=(e,n)=>{const r=(n||document).createElement(e);return Wd(r)},ku=(e,n)=>{const r=(n||document).createTextNode(e);return Wd(r)},Wd=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ve={fromHtml:eh,fromTag:Pm,fromText:ku,fromDom:Wd,fromPoint:(e,n,o)=>R.from(e.dom.elementFromPoint(n,o)).map(Wd)},Kl=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Oi=(e,n)=>{const o=e.dom;if(o.nodeType!==ft)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Fm=e=>e.nodeType!==ft&&e.nodeType!==me&&e.nodeType!==tt||e.childElementCount===0,Im=(e,n)=>{const o=n===void 0?document:n.dom;return Fm(o)?[]:re(o.querySelectorAll(e),ve.fromDom)},th=(e,n)=>{const o=n===void 0?document:n.dom;return Fm(o)?R.none():R.from(o.querySelector(e)).map(ve.fromDom)},Bs=(e,n)=>e.dom===n.dom,qa=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Vf=e=>ve.fromDom(e.dom.ownerDocument),Ui=e=>Ea(e)?e:Vf(e),Lm=e=>ve.fromDom(Ui(e).dom.documentElement),Tu=e=>ve.fromDom(Ui(e).dom.defaultView),Cc=e=>R.from(e.dom.parentNode).map(ve.fromDom),Uf=e=>R.from(e.dom.parentElement).map(ve.fromDom),id=(e,n)=>{const o=Q(n)?n:Nt;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ve.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},nh=e=>{const n=o=>Z(o,r=>!Bs(e,r));return Cc(e).map(pa).map(n).getOr([])},Ic=e=>R.from(e.dom.previousSibling).map(ve.fromDom),Zd=e=>R.from(e.dom.nextSibling).map(ve.fromDom),Hm=e=>ao(Kl(e,Ic)),ld=e=>Kl(e,Zd),pa=e=>re(e.dom.childNodes,ve.fromDom),jd=(e,n)=>{const o=e.dom.childNodes;return R.from(o[n]).map(ve.fromDom)},Wf=e=>jd(e,0),zm=e=>jd(e,e.dom.childNodes.length-1),Eu=e=>e.dom.childNodes.length,oh=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ve.fromDom(n)},Vm=e=>cc(e)&&he(e.dom.host),Sc=Q(Element.prototype.attachShadow)&&Q(Node.prototype.getRootNode),sh=ge(Sc),sl=Sc?e=>ve.fromDom(e.dom.getRootNode()):Ui,ud=e=>Vm(e)?e:oh(Ui(e)),Yl=e=>Vm(e)?e:ve.fromDom(Ui(e).dom.body),Wi=e=>{const n=sl(e);return Vm(n)?R.some(n):R.none()},rh=e=>ve.fromDom(e.dom.host),ah=e=>{if(sh()&&he(e.target)){const n=ve.fromDom(e.target);if(Qo(n)&&Zf(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return On(o)}}return R.from(e.target)},Zf=e=>he(e.dom.shadowRoot),rl=e=>{const n=Ds(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Wi(ve.fromDom(n)).fold(()=>o.body.contains(n),_(rl,rh))},E=(e,n,o)=>{if(!te(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);_i(e)&&e.style.setProperty(n,o)},$=(e,n)=>{_i(e)&&e.style.removeProperty(n)},j=(e,n,o)=>{const r=e.dom;E(r,n,o)},Se=(e,n)=>{const o=e.dom;ln(n,(r,c)=>{E(o,c,r)})},He=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!rl(e)?wn(o,n):c},wn=(e,n)=>_i(e)?e.style.getPropertyValue(n):"",So=(e,n)=>{const o=e.dom,r=wn(o,n);return R.from(r).filter(c=>c.length>0)},ns=e=>{const n={},o=e.dom;if(_i(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},jo=(e,n)=>{const o=e.dom;$(o,n),ra(wc(e,"style").map(qo),"")&&qr(e,"style")},to=e=>e.dom.offsetWidth,os=(e,n)=>{Cc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Ar=(e,n)=>{Zd(e).fold(()=>{Cc(e).each(c=>{ea(c,n)})},r=>{os(r,n)})},Ka=(e,n)=>{Wf(e).fold(()=>{ea(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},ea=(e,n)=>{e.dom.appendChild(n.dom)},Um=(e,n)=>{os(e,n),ea(n,e)},P0=(e,n)=>{z(n,(o,r)=>{const c=r===0?e:n[r-1];Ar(c,o)})},Fo=(e,n)=>{z(n,o=>{ea(e,o)})},Hr=e=>{e.dom.textContent="",z(pa(e),n=>{Ps(n)})},Ps=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},lc=e=>{const n=pa(e);n.length>0&&P0(e,n),Ps(e)},Ha=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,pa(ve.fromDom(r))},jf=e=>re(e,ve.fromDom),Gf=e=>e.dom.innerHTML,ch=(e,n)=>{const r=Vf(e).dom,c=ve.fromDom(r.createDocumentFragment()),u=Ha(n,r);Fo(c,u),Hr(e),ea(e,c)},Xl=e=>{const n=ve.fromTag("div"),o=ve.fromDom(e.dom.cloneNode(!0));return ea(n,o),Gf(n)},qf=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),F0=e=>{const n=ve.fromDom(ah(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=Ft(r,o);return qf(n,e.clientX,e.clientY,o,r,c,e)},BC=(e,n)=>o=>{e(o)&&n(F0(o))},Kr=(e,n,o,r,c)=>{const u=BC(o,r);return e.dom.addEventListener(n,u,c),{unbind:Ae(g1,e,n,u,c)}},ih=(e,n,o,r)=>Kr(e,n,o,r,!1),g1=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Tp=(e,n)=>({left:e,top:n,translate:(r,c)=>Tp(e+r,n+c)}),Kf=Tp,h1=e=>{const n=e.getBoundingClientRect();return Kf(n.left,n.top)},dd=(e,n)=>e!==void 0?e:n!==void 0?n:0,pr=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return Kf(o.offsetLeft,o.offsetTop);const u=dd(r==null?void 0:r.pageYOffset,c.scrollTop),f=dd(r==null?void 0:r.pageXOffset,c.scrollLeft),b=dd(c.clientTop,o.clientTop),y=dd(c.clientLeft,o.clientLeft);return Ho(e).translate(f-y,u-b)},Ho=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Kf(r.offsetLeft,r.offsetTop):rl(e)?h1(n):Kf(0,0)},uc=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Kf(o,r)},Jl=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},_u=(e,n)=>{$r().browser.isSafari()&&Q(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},lh=e=>{const n=e===void 0?window:e;return $r().browser.isFirefox()?R.none():R.from(n.visualViewport)},Wm=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),p1=e=>{const n=e===void 0?window:e,o=n.document,r=uc(ve.fromDom(o));return lh(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return Wm(r.left,r.top,u,f)},c=>Wm(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},b1=(e,n)=>Z(pa(e),n),Zm=(e,n)=>{let o=[];return z(pa(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Zm(r,n))}),o};var uh=(e,n,o,r,c)=>e(o,r)?R.some(o):Q(c)&&c(o)?R.none():n(o,r,c);const jm=(e,n,o)=>{let r=e.dom;const c=Q(o)?o:Nt;for(;r.parentNode;){r=r.parentNode;const u=ve.fromDom(r);if(n(u))return R.some(u);if(c(u))break}return R.none()},Al=(e,n,o)=>uh((c,u)=>u(c),jm,e,n,o),Ol=(e,n)=>{const o=e.dom;return o.parentNode?I0(ve.fromDom(o.parentNode),r=>!Bs(e,r)&&n(r)):R.none()},I0=(e,n)=>{const o=c=>n(ve.fromDom(c));return rn(e.dom.childNodes,o).map(ve.fromDom)},md=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=ve.fromDom(r.childNodes[c]);if(n(u))return R.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return R.none()};return o(e.dom)},Au=(e,n,o)=>jm(e,r=>Oi(r,n),o),Yf=(e,n)=>th(n,e),fd=(e,n,o)=>uh((c,u)=>Oi(c,u),Au,e,n,o),dh=(e,n,o)=>Au(e,n,o).isSome();class ba{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Zi=e=>n=>!!n&&n.nodeType===e,Gm=e=>!!e&&!Object.getPrototypeOf(e),Bn=Zi(1),qm=e=>{const n=e.toLowerCase();return o=>he(o)&&o.nodeName.toLowerCase()===n},al=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return ae(n,r)}return!1}},mh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Bn(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},fh=e=>n=>Bn(n)&&n.hasAttribute(e),PC=(e,n)=>o=>Bn(o)&&o.getAttribute(e)===n,Ou=e=>Bn(e)&&e.hasAttribute("data-mce-bogus"),dT=e=>Bn(e)&&e.getAttribute("data-mce-bogus")==="all",Ya=e=>Bn(e)&&e.tagName==="TABLE",lo=e=>n=>!!(Bn(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ei=al(["textarea","input"]),qt=Zi(3),v1=Zi(4),y1=Zi(7),cl=Zi(8),ti=Zi(9),Km=Zi(11),Wr=qm("br"),_a=qm("img"),ni=lo("true"),cr=lo("false"),Du=al(["td","th"]),w1=al(["td","th","caption"]),Ql=al(["video","audio","object","embed"]),gh=qm("li"),Ym="\uFEFF",aa="Â ",hh=e=>e===Ym,Xm=e=>e.replace(/\uFEFF/g,""),Ms=(e,n)=>Im(n,e),xc=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?R.from(u.dom.nodeValue):R.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Ds,"text"),tu=e=>xc.get(e),gi=e=>xc.getOption(e),C1=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Xa=["td","th"],kc=["thead","tbody","tfoot"],Ep=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Mt=["h1","h2","h3","h4","h5","h6"],Di=["li","dd","dt"],L0=["ul","ol","dl"],ca=["pre","script","textarea","style"],Xf=["pre"].concat(Mt),gd=e=>{let n;return o=>(n=n||Ye(e,Ve),go(n,oo(o)))},va=gd(C1),H0=e=>oo(e)==="table",il=e=>Qo(e)&&!va(e),nu=e=>Qo(e)&&oo(e)==="br",hi=gd(Ep),Ns=gd(L0),ji=gd(Di),Gd=gd(kc),Ja=gd(Xa),Jf=gd(ca),Qf=gd(Xf),eg=e=>Qf(e)||il(e),pi=e=>{const n=[];let o=e.dom;for(;o;)n.push(ve.fromDom(o)),o=o.lastChild;return n},_p=e=>{const n=Ms(e,"br"),o=Z(pi(e).slice(-1),nu);n.length===o.length&&z(o,Ps)},Ke=()=>{const e=ve.fromTag("br");return or(e,"data-mce-bogus","1"),e},Aa=e=>{Hr(e),ea(e,Ke())},S1=e=>{zm(e).each(n=>{Ic(n).each(o=>{va(e)&&nu(n)&&va(o)&&Ps(n)})})},wr=Ym,ll=hh,Oa=Xm,Da=Bn,C=qt,k=e=>(C(e)&&(e=e.parentNode),Da(e)&&e.hasAttribute("data-mce-caret")),I=e=>C(e)&&ll(e.data),V=e=>k(e)||I(e),Te=e=>e.firstChild!==e.lastChild||!Wr(e.firstChild),ht=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(wr),u=e.parentNode;if(n){const f=e.previousSibling;if(C(f)){if(V(f))return f;if(ir(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(C(f)){if(V(f))return f;if(Go(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},Kt=e=>{const n=e.container();return qt(n)?n.data.charAt(e.offset())===wr||e.isAtStart()&&I(n.previousSibling):!1},Mn=e=>{const n=e.container();return qt(n)?n.data.charAt(e.offset()-1)===wr||e.isAtEnd()&&I(n.nextSibling):!1},Lo=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Ke().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Go=e=>C(e)&&e.data[0]===wr,ir=e=>C(e)&&e.data[e.data.length-1]===wr,Ws=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Ou(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},er=e=>e&&e.hasAttribute("data-mce-caret")?(Ws(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,oi=e=>k(e.startContainer),ul=ni,Ru=cr,hd=Wr,ph=qt,pd=al(["script","style","textarea"]),Mu=al(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Jm=al(["table"]),Nu=V,bi=e=>Nu(e)?!1:ph(e)?!pd(e.parentNode):Mu(e)||hd(e)||Jm(e)||Ap(e),bh=e=>Bn(e)&&e.getAttribute("unselectable")==="true",Ap=e=>!bh(e)&&Ru(e),z0=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Ap(o))return!1;if(ul(o))return!0}return!0},Ao=e=>Ap(e)?!Pe(Ro(e.getElementsByTagName("*")),(n,o)=>n||ul(o),!1):!1,tr=e=>Mu(e)||Ao(e),za=(e,n)=>bi(e)&&z0(e,n),Lc=/^[ \t\r\n]*$/,Dl=e=>Lc.test(e),Hc=e=>" \f	\v".indexOf(e)!==-1,Ri=e=>e===`
`||e==="\r",$u=(e,n)=>n<e.length&&n>=0?Ri(e[n]):!1,Op=(e,n=4,o=!0,r=!0)=>{const c=Fr(" ",n),u=e.replace(/\t/g,c);return Pe(u,(b,y)=>Hc(y)||y===aa?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||$u(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+aa}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Ri(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},qd=(e,n)=>{const o=ve.fromDom(n),r=ve.fromDom(e);return dh(r,"pre,code",Ae(Bs,o))},Qm=(e,n)=>qt(e)&&Dl(e.data)&&!qd(e,n),mT=e=>Bn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),ef=(e,n)=>bi(e)&&!Qm(e,n)||mT(e)||fT(e),fT=fh("data-mce-bookmark"),tg=fh("data-mce-bogus"),Dp=PC("data-mce-bogus","all"),Rp=(e,n)=>{let o=0;if(ef(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new ba(r,e);do{if(n){if(Dp(r)){r=c.next(!0);continue}if(tg(r)){r=c.next();continue}}if(Wr(r)){o++,r=c.next();continue}if(ef(r,e))return!1;r=c.next()}while(r);return o<=1}},ya=(e,n=!0)=>Rp(e.dom,n),Kd="data-mce-block",gT=e=>Z(Le(e),n=>!/[A-Z]/.test(n)),x1=e=>gT(e).join(","),ta=(e,n)=>he(n.querySelector(e))?(n.setAttribute(Kd,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Kd),!1),FC=(e,n)=>{const o=x1(e.getTransparentElements()),r=x1(e.getBlockElements());return Z(n.querySelectorAll(o),c=>ta(r,c))},Yd=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(ya(ve.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},Mp=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();Yd(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Yd(u,!1),ya(ve.fromDom(c))||r.insertBefore(c,e),ya(ve.fromDom(n))||r.insertBefore(n,e),ya(ve.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},V0=(e,n,o)=>{const r=e.getBlockElements(),c=ve.fromDom(n),u=b=>oo(b)in r,f=b=>Bs(b,c);z(jf(o),b=>{jm(b,u,f).each(y=>{const x=b1(b,M=>u(M)&&!e.isValidChild(oo(y),oo(M)));if(x.length>0){const M=Uf(y);z(x,P=>{jm(P,u,f).each(L=>{Mp(L.dom,P.dom)})}),M.each(P=>FC(e,P.dom))}})})},ou=(e,n)=>{const o=FC(e,n);V0(e,n,o)},dl=(e,n)=>{if(Np(e,n)){const o=x1(e.getBlockElements());ta(o,n)}},tf=(e,n,o)=>{const r=u=>Bs(u,ve.fromDom(n)),c=id(ve.fromDom(o),r);fn(c,c.length-2).filter(Qo).fold(()=>ou(e,n),u=>ou(e,u.dom))},vh=e=>e.hasAttribute(Kd),k1=(e,n)=>go(e.getTransparentElements(),n),Np=(e,n)=>Bn(n)&&k1(e,n.nodeName),ng=(e,n)=>Np(e,n)&&vh(n),T1=(e,n)=>n.type===1&&k1(e,n.name)&&te(n.attr(Kd)),IC=(e,n)=>n.type===1&&k1(e,n.name)&&En(n.attr(Kd)),hT=$r().browser,E1=e=>rn(e,Qo),$p=e=>hT.isFirefox()&&oo(e)==="table"?E1(pa(e)).filter(n=>oo(n)==="caption").bind(n=>E1(ld(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,bd=(e,n)=>e.children&&ae(e.children,n),yh=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&He(ve.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!bd(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!bd(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=$p(ve.fromDom(n))}return{x:r,y:c}},Xd=(e,n={})=>{let o=0;const r={},c=ve.fromDom(e),u=Ui(c),f=ee=>{n.referrerPolicy=ee},b=ee=>{n.contentCssCors=ee},y=ee=>{ea(ud(c),ee)},x=ee=>{const ue=ud(c);Yf(ue,"#"+ee).each(Ps)},M=ee=>cs(r,ee).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),P=ee=>new Promise((ue,Ne)=>{let Oe;const Ge=Pt._addCacheSuffix(ee),nt=M(Ge);r[Ge]=nt,nt.count++;const Dt=(Qe,Rn)=>{z(Qe,jt),nt.status=Rn,nt.passed=[],nt.failed=[],Oe&&(Oe.onload=null,Oe.onerror=null,Oe=null)},vn=()=>Dt(nt.passed,2),sn=()=>Dt(nt.failed,3);if(ue&&nt.passed.push(ue),Ne&&nt.failed.push(Ne),nt.status===1)return;if(nt.status===2){vn();return}if(nt.status===3){sn();return}nt.status=1;const mt=ve.fromTag("link",u.dom);Rs(mt,{rel:"stylesheet",type:"text/css",id:nt.id}),n.contentCssCors&&or(mt,"crossOrigin","anonymous"),n.referrerPolicy&&or(mt,"referrerpolicy",n.referrerPolicy),Oe=mt.dom,Oe.onload=vn,Oe.onerror=sn,y(mt),or(mt,"href",Ge)}),L=ee=>Promise.allSettled(re(ee,Ne=>P(Ne).then(ge(Ne)))).then(Ne=>{const Oe=H(Ne,Ge=>Ge.status==="fulfilled");return Oe.fail.length>0?Promise.reject(re(Oe.fail,Ge=>Ge.reason)):re(Oe.pass,Ge=>Ge.value)}),ce=ee=>{const ue=Pt._addCacheSuffix(ee);cs(r,ue).each(Ne=>{--Ne.count===0&&(delete r[ue],x(Ne.id))})};return{load:P,loadAll:L,unload:ce,unloadAll:ee=>{z(ee,ue=>{ce(ue)})},_setReferrerPolicy:f,_setContentCssCors:b}},Bp=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=sl(o).dom;return R.from(e.get(u)).getOrThunk(()=>{const f=Xd(u,r);return e.set(u,f),f})}}})(),U0=e=>e.nodeName.toLowerCase()==="span",A1=(e,n)=>he(e)&&(ef(e,n)||il(ve.fromDom(e))),LC=(e,n)=>{const o=new ba(e,n).prev(!1),r=new ba(e,n).next(!1),c=En(o)||A1(o,n),u=En(r)||A1(r,n);return c&&u},W0=e=>U0(e)&&e.getAttribute("data-mce-type")==="bookmark",O1=(e,n)=>qt(e)&&e.data.length>0&&LC(e,n),Vs=e=>Bn(e)?e.childNodes.length>0:!1,yo=e=>Km(e)||ti(e),Jd=(e,n,o)=>{var r;const c=o||n;if(Bn(n)&&W0(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)Jd(e,u[f],c);if(Bn(n)){const f=n.childNodes;f.length===1&&W0(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!yo(n)&&!ef(n,c)&&!Vs(n)&&!O1(n,c)&&e.remove(n),n},Z0=Pt.makeMap,Qd=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,D1=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,HC=/[<>&\"\']/g,lr=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,zC={128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"},em={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},VC={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Zt=e=>{const n=ve.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},vd=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!em[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},wh=vd("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Pp=(e,n)=>e.replace(n?Qd:D1,o=>em[o]||o),pT=e=>(""+e).replace(HC,n=>em[n]||n),og=(e,n)=>e.replace(n?Qd:D1,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":em[o]||"&#"+o.charCodeAt(0)+";"),Ch=(e,n,o)=>{const r=o||wh;return e.replace(n?Qd:D1,c=>em[c]||r[c]||c)},Qa={encodeRaw:Pp,encodeAllRaw:pT,encodeNumeric:og,encodeNamed:Ch,getEncodeFunc:(e,n)=>{const o=vd(n)||wh,r=(f,b)=>f.replace(b?Qd:D1,y=>em[y]!==void 0?em[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>Ch(f,b,o),u=Z0(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:Ch:u.numeric?og:Pp},decode:e=>e.replace(lr,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):zC[o]||String.fromCharCode(o)):VC[n]||wh[n]||Zt(n))},zr={},Rl={},bT={},ml=Pt.makeMap,si=Pt.each,tm=Pt.extend,nf=Pt.explode,WC=Pt.inArray,Tc=(e,n)=>(e=Pt.trim(e),e?e.split(n||" "):[]),ZC=(e,n={})=>{const o=ml(e," ",ml(e.toUpperCase()," "));return tm(o,n)},jC=e=>ZC("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),of=e=>{const n={};let o,r,c,u;const f=(y,x="",M="")=>{const P=Tc(M),L=Tc(y);let ce=L.length;for(;ce--;){const ie=Tc([o,x].join(" "));n[L[ce]]={attributes:Ye(ie,()=>({})),attributesOrder:ie,children:Ye(P,ge(bT))}}},b=(y,x)=>{const M=Tc(y),P=Tc(x);let L=M.length;for(;L--;){const ce=n[M[L]];for(let ie=0,ee=P.length;ie<ee;ie++)ce.attributes[P[ie]]={},ce.attributesOrder.push(P[ie])}};if(zr[e])return zr[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const y="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+y,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";c=[c,y].join(" "),si(Tc(y),M=>{f(M,"",c)});const x="center dir isindex noframes";r=[r,x].join(" "),u=[r,c].join(" "),si(Tc(x),M=>{f(M,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&z([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),si(Tc("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,zr[e]=n,n},j0=(e,n)=>{if(e){const o={};return te(e)&&(e={"*":e}),si(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?ml(r,/[, ]/):nf(r,/[, ]/)}),o}else return},Bu=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(No,Fs,ka)=>{const yr=e[No];if(yr)return ml(yr,/[, ]/,ml(yr.toUpperCase(),/[, ]/));{let Xr=Rl[No];return Xr||(Xr=ZC(Fs,ka),Rl[No]=Xr),Xr}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",x=of(y);e.verify_html===!1&&(e.valid_elements="*[*]");const M=j0(e.valid_styles),P=j0(e.invalid_styles,"map"),L=j0(e.valid_classes,"map"),ce=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ie=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),ee=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ue=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Ne="td th iframe video audio object script code",Oe=b("non_empty_elements",Ne+" pre",ee),Ge=b("move_caret_before_on_enter_elements",Ne+" table",ee),nt=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Dt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",nt),vn=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),sn=b("transparent_elements","a ins del canvas map");si("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),No=>{f[No]=new RegExp("</"+No+"[^>]*>","gi")});const mt=No=>new RegExp("^"+No.replace(/([?+*])/g,".$1")+"$"),Qe=No=>{const Fs=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,ka=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,yr=/[*?+]/;if(No){const Xr=Tc(No,",");let da,Pr;o["@"]&&(da=o["@"].attributes,Pr=o["@"].attributesOrder);for(let Ba=0,hu=Xr.length;Ba<hu;Ba++){let di=Fs.exec(Xr[Ba]);if(di){const Am=di[1],pu=di[2],c1=di[3],i1=di[5],Om={},Id=[],Jr={attributes:Om,attributesOrder:Id};if(Am==="#"&&(Jr.paddEmpty=!0),Am==="-"&&(Jr.removeEmpty=!0),di[4]==="!"&&(Jr.removeEmptyAttrs=!0),da&&(ln(da,(td,Dm)=>{Om[Dm]=td}),Pr&&Id.push(...Pr)),i1){const td=Tc(i1,"|");for(let Dm=0,nd=td.length;Dm<nd;Dm++)if(di=ka.exec(td[Dm]),di){const od={},Rm=di[1],$c=di[2].replace(/[\\:]:/g,":"),Mm=di[3],Lf=di[4];if(Rm==="!"&&(Jr.attributesRequired=Jr.attributesRequired||[],Jr.attributesRequired.push($c),od.required=!0),Rm==="-"){delete Om[$c],Id.splice(WC(Id,$c),1);continue}if(Mm&&(Mm==="="&&(Jr.attributesDefault=Jr.attributesDefault||[],Jr.attributesDefault.push({name:$c,value:Lf}),od.defaultValue=Lf),Mm==="~"&&(Jr.attributesForced=Jr.attributesForced||[],Jr.attributesForced.push({name:$c,value:Lf}),od.forcedValue=Lf),Mm==="<"&&(od.validValues=ml(Lf,"?"))),yr.test($c)){const sd=od;Jr.attributePatterns=Jr.attributePatterns||[],sd.pattern=mt($c),Jr.attributePatterns.push(sd)}else Om[$c]||Id.push($c),Om[$c]=od}}if(!da&&pu==="@"&&(da=Om,Pr=Id),c1&&(Jr.outputName=pu,o[c1]=Jr),yr.test(pu)){const td=Jr;td.pattern=mt(pu),c.push(td)}else o[pu]=Jr}}}},Rn=No=>{c=[],z(Le(o),Fs=>{delete o[Fs]}),Qe(No),si(x,(Fs,ka)=>{r[ka]=Fs.children})},co=No=>{const Fs=/^(~)?(.+)$/;No&&(delete Rl.text_block_elements,delete Rl.block_elements,si(Tc(No,","),ka=>{const yr=Fs.exec(ka);if(yr){const Xr=yr[1]==="~",da=Xr?"span":"div",Pr=yr[2];if(r[Pr]=r[da],u[Pr]=da,Oe[Pr.toUpperCase()]={},Oe[Pr]={},Xr||(Dt[Pr.toUpperCase()]={},Dt[Pr]={}),!o[Pr]){let Ba=o[da];Ba=tm({},Ba),delete Ba.removeEmptyAttrs,delete Ba.removeEmpty,o[Pr]=Ba}si(r,(Ba,hu)=>{Ba[da]&&(r[hu]=Ba=tm({},r[hu]),Ba[Pr]=Ba[da])})}}))},fo=No=>{const Fs=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete zr[y],No&&si(Tc(No,","),ka=>{const yr=Fs.exec(ka);if(yr){const Xr=yr[1];let da;Xr?da=r[yr[2]]:da=r[yr[2]]={"#comment":{}},da=r[yr[2]],si(Tc(yr[3],"|"),Pr=>{Xr==="-"?delete da[Pr]:da[Pr]={}})}})},Uo=No=>{const Fs=o[No];if(Fs)return Fs;let ka=c.length;for(;ka--;){const yr=c[ka];if(yr.pattern.test(No))return yr}};e.valid_elements?Rn(e.valid_elements):(si(x,(No,Fs)=>{o[Fs]={attributes:No.attributes,attributesOrder:No.attributesOrder},r[Fs]=No.children}),si(Tc("strong/b em/i"),No=>{const Fs=Tc(No,"/");o[Fs[1]].outputName=Fs[0]}),si(vn,(No,Fs)=>{o[Fs]&&(e.padd_empty_block_inline_children&&(o[Fs].paddInEmptyBlock=!0),o[Fs].removeEmpty=!0)}),si(Tc("ol ul blockquote a table tbody"),No=>{o[No]&&(o[No].removeEmpty=!0)}),si(Tc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),No=>{o[No].paddEmpty=!0}),si(Tc("span"),No=>{o[No].removeEmptyAttrs=!0})),co(e.custom_elements),fo(e.valid_children),Qe(e.extended_valid_elements),fo("+ol[ul|ol],+ul[ul|ol]"),si({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(No,Fs)=>{o[Fs]&&(o[Fs].parentsRequired=Tc(No))}),e.invalid_elements&&si(nf(e.invalid_elements),No=>{o[No]&&delete o[No]}),Uo("span")||Qe("span[!data-mce-type|*]");const vs=ge(M),Gs=ge(P),Zs=ge(L),$a=ge(ue),xi=ge(Dt),nn=ge(nt),Wo=ge(vn),po=ge(Object.seal(ee)),Dr=ge(ie),Dn=ge(Oe),Do=ge(Ge),xo=ge(ce),xn=ge(sn),gs=ge(Object.seal(f)),as=(No,Fs)=>{const ka=r[No.toLowerCase()];return!!(ka&&ka[Fs.toLowerCase()])},sc=(No,Fs)=>{const ka=Uo(No);if(ka)if(Fs){if(ka.attributes[Fs])return!0;const yr=ka.attributePatterns;if(yr){let Xr=yr.length;for(;Xr--;)if(yr[Xr].pattern.test(Fs))return!0}}else return!0;return!1},xr=ge(u);return{type:y,children:r,elements:o,getValidStyles:vs,getValidClasses:Zs,getBlockElements:xi,getInvalidStyles:Gs,getVoidElements:po,getTextBlockElements:nn,getTextInlineElements:Wo,getBoolAttrs:$a,getElementRule:Uo,getSelfClosingElements:Dr,getNonEmptyElements:Dn,getMoveCaretBeforeOnEnterElements:Do,getWhitespaceElements:xo,getTransparentElements:xn,getSpecialElements:gs,isValidChild:as,isValid:sc,getCustomElements:xr,addValidElements:Qe,setValidElements:Rn,addCustomElements:co,addValidChildren:fo}},R1=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=Ym;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let P=0;P<x.length;P++)u[x[P]]=y+P,u[y+P]=x[P];const M={parse:P=>{const L={};let ce=!1;const ie=e.url_converter,ee=e.url_converter_scope||M,ue=(mt,Qe,Rn)=>{const co=L[mt+"-top"+Qe];if(!co)return;const fo=L[mt+"-right"+Qe];if(!fo)return;const Uo=L[mt+"-bottom"+Qe];if(!Uo)return;const vs=L[mt+"-left"+Qe];if(!vs)return;const Gs=[co,fo,Uo,vs];let Zs=Gs.length-1;for(;Zs--&&Gs[Zs]===Gs[Zs+1];);Zs>-1&&Rn||(L[mt+Qe]=Zs===-1?Gs[0]:Gs.join(" "),delete L[mt+"-top"+Qe],delete L[mt+"-right"+Qe],delete L[mt+"-bottom"+Qe],delete L[mt+"-left"+Qe])},Ne=mt=>{const Qe=L[mt];if(!Qe)return;const Rn=Qe.split(" ");let co=Rn.length;for(;co--;)if(Rn[co]!==Rn[0])return!1;return L[mt]=Rn[0],!0},Oe=(mt,Qe,Rn,co)=>{Ne(Qe)&&Ne(Rn)&&Ne(co)&&(L[mt]=L[Qe]+" "+L[Rn]+" "+L[co],delete L[Qe],delete L[Rn],delete L[co])},Ge=mt=>(ce=!0,u[mt]),nt=(mt,Qe)=>(ce&&(mt=mt.replace(/\uFEFF[0-9]/g,Rn=>u[Rn])),Qe||(mt=mt.replace(/\\([\'\";:])/g,"$1")),mt),Dt=mt=>String.fromCharCode(parseInt(mt.slice(1),16)),vn=mt=>mt.replace(/\\[0-9a-f]+/gi,Dt),sn=(mt,Qe,Rn,co,fo,Uo)=>{if(fo=fo||Uo,fo)return fo=nt(fo),"'"+fo.replace(/\'/g,"\\'")+"'";if(Qe=nt(Qe||Rn||co||""),!e.allow_script_urls){const vs=Qe.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(vs)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(vs))return""}return ie&&(Qe=ie.call(ee,Qe,"style")),"url('"+Qe.replace(/\'/g,"\\'")+"')"};if(P){P=P.replace(/[\u0000-\u001F]/g,""),P=P.replace(/\\[\"\';:\uFEFF]/g,Ge).replace(/\"[^\"]+\"|\'[^\']+\'/g,Qe=>Qe.replace(/[;:]/g,Ge));let mt;for(;mt=r.exec(P);){r.lastIndex=mt.index+mt[0].length;let Qe=mt[1].replace(c,"").toLowerCase(),Rn=mt[2].replace(c,"");if(Qe&&Rn){if(Qe=vn(Qe),Rn=vn(Rn),Qe.indexOf(y)!==-1||Qe.indexOf('"')!==-1||!e.allow_script_urls&&(Qe==="behavior"||/expression\s*\(|\/\*|\*\//.test(Rn)))continue;Qe==="font-weight"&&Rn==="700"?Rn="bold":(Qe==="color"||Qe==="background-color")&&(Rn=Rn.toLowerCase()),Rn=Rn.replace(o,sn),L[Qe]=ce?nt(Rn,!0):Rn}}ue("border","",!0),ue("border","-width"),ue("border","-color"),ue("border","-style"),ue("padding",""),ue("margin",""),Oe("border","border-width","border-style","border-color"),L.border==="medium none"&&delete L.border,L["border-image"]==="none"&&delete L["border-image"]}return L},serialize:(P,L)=>{let ce="";const ie=(ue,Ne)=>{const Oe=Ne[ue];if(Oe)for(let Ge=0,nt=Oe.length;Ge<nt;Ge++){const Dt=Oe[Ge],vn=P[Dt];vn&&(ce+=(ce.length>0?" ":"")+Dt+": "+vn+";")}},ee=(ue,Ne)=>{if(!b||!Ne)return!0;let Oe=b["*"];return Oe&&Oe[ue]?!1:(Oe=b[Ne],!(Oe&&Oe[ue]))};return L&&f?(ie("*",f),ie(L,f)):ln(P,(ue,Ne)=>{ue&&ee(Ne,L)&&(ce+=(ce.length>0?" ":"")+Ne+": "+ue+";")}),ce}};return M},G0={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Yn=e=>e instanceof Event||Q(e.initEvent),vT=e=>e.isDefaultPrevented===Ve||e.isDefaultPrevented===Nt,GC=e=>St(e.preventDefault)||Yn(e),M1=(e,n)=>{const o=n??{};for(const r in e)go(G0,r)||(o[r]=e[r]);return he(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},xh=(e,n,o,r)=>{var c;const u=M1(n,r);return u.type=e,St(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),GC(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Ve,Q(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Ve,Q(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Ve,u.stopPropagation()},vT(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Ve:Nt,u.isPropagationStopped=u.cancelBubble===!0?Ve:Nt,u.isImmediatePropagationStopped=Nt)),u},N1="mce-data-",kh=/^(?:mouse|contextmenu)|click/,sg=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},yd=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},q0=e=>he(e)&&kh.test(e.type),sf=(e,n)=>{const o=xh(e.type,e,document,n);if(q0(e)&&En(e.pageX)&&!En(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},yT=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{yd(e,"DOMContentLoaded",f),yd(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():sg(e,"DOMContentLoaded",f),o.domLoaded||sg(e,"load",f)};class nm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=N1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=L=>{u.executeHandlers(sf(L||b.event),x)};if(!n||qt(n)||cl(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),c=c||n;const M=o.split(" ");let P=M.length;for(;P--;){let L=M[P],ce=y,ie=!1,ee=!1;if(L==="DOMContentLoaded"&&(L="ready"),u.domLoaded&&L==="ready"&&n.readyState==="complete"){r.call(c,sf({type:L}));continue}!u.hasFocusIn&&(L==="focusin"||L==="focusout")&&(ie=!0,ee=L==="focusin"?"focus":"blur",ce=ue=>{const Ne=sf(ue||b.event);Ne.type=Ne.type==="focus"?"focusin":"focusout",u.executeHandlers(Ne,x)}),f=u.events[x][L],f?L==="ready"&&u.domLoaded?r(sf({type:L})):f.push({func:r,scope:c}):(u.events[x][L]=f=[{func:r,scope:c}],f.fakeName=ee,f.capture=ie,f.nativeHandler=ce,L==="ready"?yT(n,ce,u):sg(n,ee||L,ce,ie))}return n=f=null,r}unbind(n,o,r){if(!n||qt(n)||cl(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],x=u[y];if(x){if(r){let M=x.length;for(;M--;)if(x[M].func===r){const P=x.nativeHandler,L=x.fakeName,ce=x.capture,ie=x.slice(0,M).concat(x.slice(M+1));ie.nativeHandler=P,ie.fakeName=L,ie.capture=ce,u[y]=ie}}(!r||x.length===0)&&(delete u[y],yd(n,x.fakeName||y,x.nativeHandler,x.capture))}}}else ln(u,(f,b)=>{yd(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(go(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||qt(n)||cl(n))return this;const c=sf({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||qt(n)||cl(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}nm.Event=new nm;const rg=Pt.each,$1=Pt.grep,B1="data-mce-style",Fp=Pt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ip=(e,n,o)=>{St(o)||o===""?qr(e,n):or(e,n,o)},wT=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Pu=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&qt(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},Th=(e,n)=>{const o=Lr(n,"style"),r=e.serialize(e.parse(o),oo(n));Ip(n,B1,r)},su=(e,n)=>it(e)?go(Fp,n)?e+"":e+"px":e,Mi=(e,n,o)=>{const r=wT(n);St(o)||o===""?jo(e,r):j(e,r,su(o,r))},Lp=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const x=ve.fromDom(f);Q(n.url_converter)&&he(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const M="data-mce-"+y;Ip(x,M,b),Ip(x,y,b)},get:(f,b)=>{const y=ve.fromDom(f);return Lr(y,"data-mce-"+b)||Lr(y,b)}},u={style:{set:(f,b)=>{const y=ve.fromDom(f);r&&Ip(y,B1,b),qr(y,"style"),te(b)&&Se(y,e.parse(b))},get:f=>{const b=ve.fromDom(f),y=Lr(b,B1)||Lr(b,"style");return e.serialize(e.parse(y),oo(b))}}};return r&&(u.href=u.src=c),u},br=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=Bp.forElement(ve.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],M=n.schema?n.schema:Bu({}),P=R1({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),L=n.ownEvents?new nm:nm.Event,ce=M.getBlockElements(),ie=ot=>te(ot)?go(ce,ot):Bn(ot)&&(go(ce,ot.nodeName)||ng(M,ot)),ee=ot=>ot&&e&&te(ot)?e.getElementById(ot):ot,ue=ot=>{const ut=ee(ot);return he(ut)?ve.fromDom(ut):null},Ne=(ot,ut,Qt="")=>{let Vt;const so=ue(ot);if(he(so)&&Qo(so)){const _s=kp[ut];_s&&_s.get?Vt=_s.get(so.dom,ut):Vt=Lr(so,ut)}return he(Vt)?Vt:Qt},Oe=ot=>{const ut=ee(ot);return St(ut)?[]:ut.attributes},Ge=(ot,ut,Qt)=>{po(ot,Vt=>{if(Bn(Vt)){const so=ve.fromDom(Vt),_s=Qt===""?null:Qt,Br=Lr(so,ut),nr=kp[ut];nr&&nr.set?nr.set(so.dom,_s,ut):Ip(so,ut,_s),Br!==_s&&n.onSetAttrib&&n.onSetAttrib({attrElm:so.dom,attrName:ut,attrValue:_s})}})},nt=(ot,ut)=>ot.cloneNode(ut),Dt=()=>n.root_element||e.body,vn=ot=>{const ut=p1(ot);return{x:ut.x,y:ut.y,w:ut.width,h:ut.height}},sn=(ot,ut)=>yh(e.body,ee(ot),ut),mt=(ot,ut,Qt)=>{po(ot,Vt=>{const so=ve.fromDom(Vt);Mi(so,ut,Qt),n.update_styles&&Th(P,so)})},Qe=(ot,ut)=>{po(ot,Qt=>{const Vt=ve.fromDom(Qt);ln(ut,(so,_s)=>{Mi(Vt,_s,so)}),n.update_styles&&Th(P,Vt)})},Rn=(ot,ut,Qt)=>{const Vt=ee(ot);if(!(St(Vt)||!Bn(Vt)))return Qt?He(ve.fromDom(Vt),wT(ut)):(ut=ut.replace(/-(\D)/g,(so,_s)=>_s.toUpperCase()),ut==="float"&&(ut="cssFloat"),Vt.style?Vt.style[ut]:void 0)},co=ot=>{const ut=ee(ot);if(!ut)return{w:0,h:0};let Qt=Rn(ut,"width"),Vt=Rn(ut,"height");return(!Qt||Qt.indexOf("px")===-1)&&(Qt="0"),(!Vt||Vt.indexOf("px")===-1)&&(Vt="0"),{w:parseInt(Qt,10)||ut.offsetWidth||ut.clientWidth,h:parseInt(Vt,10)||ut.offsetHeight||ut.clientHeight}},fo=ot=>{const ut=ee(ot),Qt=sn(ut),Vt=co(ut);return{x:Qt.x,y:Qt.y,w:Vt.w,h:Vt.h}},Uo=(ot,ut)=>{if(!ot)return!1;const Qt=yt(ot)?ot:[ot];return se(Qt,Vt=>Oi(ve.fromDom(Vt),ut))},vs=(ot,ut,Qt,Vt)=>{const so=[];let _s=ee(ot);Vt=Vt===void 0;const Br=Qt||(Dt().nodeName!=="BODY"?Dt().parentNode:null);if(te(ut))if(ut==="*")ut=Bn;else{const nr=ut;ut=bu=>Uo(bu,nr)}for(;_s&&!(_s===Br||St(_s.nodeType)||ti(_s)||Km(_s));){if(!ut||ut(_s))if(Vt)so.push(_s);else return[_s];_s=_s.parentNode}return Vt?so:null},Gs=(ot,ut,Qt)=>{const Vt=vs(ot,ut,Qt,!1);return Vt&&Vt.length>0?Vt[0]:null},Zs=(ot,ut,Qt)=>{let Vt=ut;if(ot){te(ut)&&(Vt=so=>Uo(so,ut));for(let so=ot[Qt];so;so=so[Qt])if(Q(Vt)&&Vt(so))return so}return null},$a=(ot,ut)=>Zs(ot,ut,"nextSibling"),xi=(ot,ut)=>Zs(ot,ut,"previousSibling"),nn=ot=>Q(ot.querySelectorAll),Wo=(ot,ut)=>{var Qt,Vt;const so=(Vt=(Qt=ee(ut))!==null&&Qt!==void 0?Qt:n.root_element)!==null&&Vt!==void 0?Vt:e;return nn(so)?Ro(so.querySelectorAll(ot)):[]},po=function(ot,ut,Qt){const Vt=Qt??this;if(yt(ot)){const so=[];return rg(ot,(_s,Br)=>{const nr=ee(_s);nr&&so.push(ut.call(Vt,nr,Br))}),so}else{const so=ee(ot);return so?ut.call(Vt,so):!1}},Dr=(ot,ut)=>{po(ot,Qt=>{ln(ut,(Vt,so)=>{Ge(Qt,so,Vt)})})},Dn=(ot,ut)=>{po(ot,Qt=>{const Vt=ve.fromDom(Qt);ch(Vt,ut)})},Do=(ot,ut,Qt,Vt,so)=>po(ot,_s=>{const Br=te(ut)?e.createElement(ut):ut;return he(Qt)&&Dr(Br,Qt),Vt&&(!te(Vt)&&Vt.nodeType?Br.appendChild(Vt):te(Vt)&&Dn(Br,Vt)),so?Br:_s.appendChild(Br)}),xo=(ot,ut,Qt)=>Do(e.createElement(ot),ot,ut,Qt,!0),xn=Qa.decode,gs=Qa.encodeAllRaw,as=(ot,ut,Qt="")=>{let Vt="<"+ot;for(const so in ut)mr(ut,so)&&(Vt+=" "+so+'="'+gs(ut[so])+'"');return xs(Qt)&&go(M.getVoidElements(),ot)?Vt+" />":Vt+">"+Qt+"</"+ot+">"},sc=ot=>{const ut=e.createElement("div"),Qt=e.createDocumentFragment();Qt.appendChild(ut),ot&&(ut.innerHTML=ot);let Vt;for(;Vt=ut.firstChild;)Qt.appendChild(Vt);return Qt.removeChild(ut),Qt},xr=(ot,ut)=>po(ot,Qt=>{const Vt=ve.fromDom(Qt);return ut&&z(pa(Vt),so=>{Ds(so)&&so.dom.length===0?Ps(so):os(Vt,so)}),Ps(Vt),Vt.dom}),No=ot=>po(ot,ut=>{const Qt=ut.attributes;for(let Vt=Qt.length-1;Vt>=0;Vt--)ut.removeAttributeNode(Qt.item(Vt))}),Fs=ot=>P.parse(ot),ka=(ot,ut)=>P.serialize(ot,ut),yr=ot=>{if(Kg!==br.DOM&&e===document){if(o[ot])return;o[ot]=!0}let ut=e.getElementById("mceDefaultStyles");if(!ut){ut=e.createElement("style"),ut.id="mceDefaultStyles",ut.type="text/css";const Qt=e.head;Qt.firstChild?Qt.insertBefore(ut,Qt.firstChild):Qt.appendChild(ut)}ut.styleSheet?ut.styleSheet.cssText+=ot:ut.appendChild(e.createTextNode(ot))},Xr=ot=>{ot||(ot=""),z(ot.split(","),ut=>{c[ut]=!0,y.load(ut).catch(De)})},da=(ot,ut,Qt)=>{po(ot,Vt=>{if(Bn(Vt)){const so=ve.fromDom(Vt),_s=ut.split(" ");z(_s,Br=>{he(Qt)?(Qt?xu:ql)(so,Br):Bm(so,Br)})}})},Pr=(ot,ut)=>{da(ot,ut,!0)},Ba=(ot,ut)=>{da(ot,ut,!1)},hu=(ot,ut)=>{const Qt=ue(ot),Vt=ut.split(" ");return he(Qt)&&kn(Vt,so=>Ud(Qt,so))},di=ot=>{po(ot,ut=>jo(ve.fromDom(ut),"display"))},Am=ot=>{po(ot,ut=>j(ve.fromDom(ut),"display","none"))},pu=ot=>{const ut=ue(ot);return he(ut)&&ra(So(ut,"display"),"none")},c1=ot=>(ot||"mce_")+u++,i1=ot=>{const ut=ue(ot);return he(ut)?Bn(ut.dom)?ut.dom.outerHTML:Xl(ut):""},Om=(ot,ut)=>{po(ot,Qt=>{Bn(Qt)&&(Qt.outerHTML=ut)})},Id=(ot,ut)=>{const Qt=ee(ut);return po(ot,Vt=>{const so=Qt==null?void 0:Qt.parentNode,_s=Qt==null?void 0:Qt.nextSibling;return so&&(_s?so.insertBefore(Vt,_s):so.appendChild(Vt)),Vt})},Jr=(ot,ut,Qt)=>po(ut,Vt=>{var so;const _s=yt(ut)?ot.cloneNode(!0):ot;return Qt&&rg($1(Vt.childNodes),Br=>{_s.appendChild(Br)}),(so=Vt.parentNode)===null||so===void 0||so.replaceChild(_s,Vt),Vt}),td=(ot,ut)=>{if(ot.nodeName!==ut.toUpperCase()){const Qt=xo(ut);return rg(Oe(ot),Vt=>{Ge(Qt,Vt.nodeName,Ne(ot,Vt.nodeName))}),Jr(Qt,ot,!0),Qt}else return ot},Dm=(ot,ut)=>{let Qt=ot;for(;Qt;){let Vt=ut;for(;Vt&&Qt!==Vt;)Vt=Vt.parentNode;if(Qt===Vt)break;Qt=Qt.parentNode}return!Qt&&ot.ownerDocument?ot.ownerDocument.documentElement:Qt},nd=ot=>{if(Bn(ot)){const ut=ot.nodeName.toLowerCase()==="a"&&!Ne(ot,"href")&&Ne(ot,"id");if(Ne(ot,"name")||Ne(ot,"data-mce-bookmark")||ut)return!0}return!1},od=(ot,ut)=>{let Qt=0;if(nd(ot))return!1;const Vt=ot.firstChild;if(Vt){const so=new ba(Vt,ot),_s=M?M.getWhitespaceElements():{},Br=ut||(M?M.getNonEmptyElements():null);let nr=Vt;do{if(Bn(nr)){const bu=nr.getAttribute("data-mce-bogus");if(bu){nr=so.next(bu==="all");continue}const AC=nr.nodeName.toLowerCase();if(Br&&Br[AC]){if(AC==="br"){Qt++,nr=so.next();continue}return!1}if(nd(nr))return!1}if(cl(nr)||qt(nr)&&!Dl(nr.data)||qt(nr)&&nr.parentNode&&_s[nr.parentNode.nodeName]&&Dl(nr.data))return!1;nr=so.next()}while(nr)}return Qt<=1},Rm=()=>e.createRange(),$c=(ot,ut,Qt)=>{let Vt=Rm(),so,_s;if(ot&&ut&&ot.parentNode&&ut.parentNode){const Br=ot.parentNode;return Vt.setStart(Br,Pu(ot)),Vt.setEnd(ut.parentNode,Pu(ut)),so=Vt.extractContents(),Vt=Rm(),Vt.setStart(ut.parentNode,Pu(ut)+1),Vt.setEnd(Br,Pu(ot)+1),_s=Vt.extractContents(),Br.insertBefore(Jd(Kg,so),ot),Qt?Br.insertBefore(Qt,ot):Br.insertBefore(ut,ot),Br.insertBefore(Jd(Kg,_s),ot),xr(ot),Qt||ut}else return},Mm=(ot,ut,Qt,Vt)=>{if(yt(ot)){let so=ot.length;const _s=[];for(;so--;)_s[so]=Mm(ot[so],ut,Qt,Vt);return _s}else return n.collect&&(ot===e||ot===r)&&x.push([ot,ut,Qt,Vt]),L.bind(ot,ut,Qt,Vt||Kg)},Lf=(ot,ut,Qt)=>{if(yt(ot)){let Vt=ot.length;const so=[];for(;Vt--;)so[Vt]=Lf(ot[Vt],ut,Qt);return so}else{if(x.length>0&&(ot===e||ot===r)){let Vt=x.length;for(;Vt--;){const[so,_s,Br]=x[Vt];ot===so&&(!ut||ut===_s)&&(!Qt||Qt===Br)&&L.unbind(so,_s,Br)}}return L.unbind(ot,ut,Qt)}},sd=(ot,ut,Qt)=>L.dispatch(ot,ut,Qt),qg=(ot,ut,Qt)=>L.dispatch(ot,ut,Qt),Jk=ot=>{if(ot&&Bn(ot)){const ut=ot.getAttribute("data-mce-contenteditable");return ut&&ut!=="inherit"?ut:ot.contentEditable!=="inherit"?ot.contentEditable:null}else return null},Kg={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:x,styles:P,schema:M,events:L,isBlock:ie,root:null,clone:nt,getRoot:Dt,getViewPort:vn,getRect:fo,getSize:co,getParent:Gs,getParents:vs,get:ee,getNext:$a,getPrev:xi,select:Wo,is:Uo,add:Do,create:xo,createHTML:as,createFragment:sc,remove:xr,setStyle:mt,getStyle:Rn,setStyles:Qe,removeAllAttribs:No,setAttrib:Ge,setAttribs:Dr,getAttrib:Ne,getPos:sn,parseStyle:Fs,serializeStyle:ka,addStyle:yr,loadCSS:Xr,addClass:Pr,removeClass:Ba,hasClass:hu,toggleClass:da,show:di,hide:Am,isHidden:pu,uniqueId:c1,setHTML:Dn,getOuterHTML:i1,setOuterHTML:Om,decode:xn,encode:gs,insertAfter:Id,replace:Jr,rename:td,findCommonAncestor:Dm,run:po,getAttribs:Oe,isEmpty:od,createRng:Rm,nodeIndex:Pu,split:$c,bind:Mm,unbind:Lf,fire:qg,dispatch:sd,getContentEditable:Jk,getContentEditableParent:ot=>{const ut=Dt();let Qt=null;for(let Vt=ot;Vt&&Vt!==ut&&(Qt=Jk(Vt),Qt===null);Vt=Vt.parentNode);return Qt},destroy:()=>{if(x.length>0){let ot=x.length;for(;ot--;){const[ut,Qt,Vt]=x[ot];L.unbind(ut,Qt,Vt)}}ln(c,(ot,ut)=>{y.unload(ut),delete c[ut]})},isChildOf:(ot,ut)=>ot===ut||ut.contains(ot),dumpRng:ot=>"startContainer: "+ot.startContainer.nodeName+", startOffset: "+ot.startOffset+", endContainer: "+ot.endContainer.nodeName+", endOffset: "+ot.endOffset},kp=Lp(P,n,ge(Kg));return Kg};br.DOM=br(document),br.nodeIndex=Pu;const CT=br.DOM,qC=0,ru=1,P1=2,KC=3;class wd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=CT;let u;const f=()=>{c.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},x=c.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=Pt._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===P1}markDone(n){this.states[n]=P1}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=qC),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,x)=>{cs(o.scriptLoadedCallbacks,x).each(M=>{z(M,P=>P[y](x))}),delete o.scriptLoadedCallbacks[x]},c=y=>{const x=Z(y,M=>M.status==="rejected");return x.length>0?Promise.reject(Qn(x,({reason:M})=>yt(M)?M:[M])):Promise.resolve()},u=y=>Promise.allSettled(re(y,x=>o.states[x]===P1?(r("resolve",x),Promise.resolve()):o.states[x]===KC?(r("reject",x),Promise.reject(x)):(o.states[x]=ru,o.loadScript(x).then(()=>{o.states[x]=P1,r("resolve",x);const M=o.queue;return M.length>0?(o.queue=[],u(M).then(c)):Promise.resolve()},()=>(o.states[x]=KC,r("reject",x),Promise.reject(x)))))),f=y=>(o.loading=!0,u(y).then(x=>{o.loading=!1;const M=o.queueLoadedCallbacks.shift();return R.from(M).each(jt),c(x)})),b=Is(n);return o.loading?new Promise((y,x)=>{o.queueLoadedCallbacks.push(()=>f(b).then(y,x))}):f(b)}}wd.ScriptLoader=new wd;const dc=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},ST=e=>Je(e)&&go(e,"raw"),Hp=e=>yt(e)&&e.length>1,ag={},Eh=dc("en"),F1=()=>cs(ag,Eh.get()),Vc={getData:()=>Jt(ag,e=>({...e})),setCode:e=>{e&&Eh.set(e)},getCode:()=>Eh.get(),add:(e,n)=>{let o=ag[e];o||(ag[e]=o={}),ln(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=F1().getOr({}),o=f=>Q(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return cs(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(ST(e))return o(e.raw);if(Hp(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,x)=>go(f,x)?o(f[x]):y);return u(b)}return u(c(e))},isRtl:()=>F1().bind(e=>cs(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>go(ag,e)},vi=()=>{const e=[],n={},o={},r=[],c=(ee,ue)=>{const Ne=Z(r,Oe=>Oe.name===ee&&Oe.state===ue);z(Ne,Oe=>Oe.resolve())},u=ee=>go(n,ee),f=ee=>go(o,ee),b=ee=>{if(o[ee])return o[ee].instance},y=(ee,ue)=>{const Ne=Vc.getCode(),Oe=","+(ue||"")+",";!Ne||ue&&Oe.indexOf(","+Ne+",")===-1||wd.ScriptLoader.add(n[ee]+"/langs/"+Ne+".js")},x=(ee,ue)=>{vi.languageLoad!==!1&&(u(ee)?y(ee,ue):ie(ee,"loaded").then(()=>y(ee,ue)))},M=(ee,ue)=>(e.push(ue),o[ee]={instance:ue},c(ee,"added"),ue),P=ee=>{delete n[ee],delete o[ee]},L=(ee,ue)=>te(ue)?te(ee)?{prefix:"",resource:ue,suffix:""}:{prefix:ee.prefix,resource:ue,suffix:ee.suffix}:ue,ce=(ee,ue)=>{if(n[ee])return Promise.resolve();let Ne=te(ue)?ue:ue.prefix+ue.resource+ue.suffix;Ne.indexOf("/")!==0&&Ne.indexOf("://")===-1&&(Ne=vi.baseURL+"/"+Ne),n[ee]=Ne.substring(0,Ne.lastIndexOf("/"));const Oe=()=>(c(ee,"loaded"),Promise.resolve());return o[ee]?Oe():wd.ScriptLoader.add(Ne).then(Oe)},ie=(ee,ue="added")=>ue==="added"&&f(ee)||ue==="loaded"&&u(ee)?Promise.resolve():new Promise(Ne=>{r.push({name:ee,state:ue,resolve:Ne})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:M,remove:P,createUrl:L,load:ce,waitFor:ie}};vi.languageLoad=!0,vi.baseURL="",vi.PluginManager=vi(),vi.ThemeManager=vi(),vi.ModelManager=vi();const JC=e=>{const n=dc(R.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(R.some(b))}}},xT=e=>{const n=dc(R.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(R.some(setInterval(b,e)))}}},rf=()=>{const e=JC(De);return{...e,on:o=>e.get().each(o)}},_h=(e,n)=>{let o=null;return{cancel:()=>{K(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{K(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},I1=(e,n)=>{let o=null;const r=()=>{K(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},zp=ge("mce-annotation"),Fu=ge("data-mce-annotation"),cg=ge("data-mce-annotation-uid"),Ah=ge("data-mce-annotation-active"),Oh=ge("data-mce-annotation-classes"),wa=ge("data-mce-annotation-attrs"),Vp=e=>n=>Bs(n,e),ia=(e,n)=>{const o=e.selection.getRng(),r=ve.fromDom(o.startContainer),c=ve.fromDom(e.getBody()),u=n.fold(()=>"."+zp(),y=>`[${Fu()}="${y}"]`),f=jd(r,o.startOffset).getOr(r);return fd(f,u,Vp(c)).bind(y=>wc(y,`${cg()}`).bind(x=>wc(y,`${Fu()}`).map(M=>{const P=gl(e,x);return{uid:x,name:M,elements:P}})))},Gi=e=>Qo(e)&&Ud(e,zp()),om=(e,n)=>El(e,"data-mce-bogus")||dh(e,'[data-mce-bogus="all"]',Vp(n)),gl=(e,n)=>{const o=ve.fromDom(e.getBody()),r=Ms(o,`[${cg()}="${n}"]`);return Z(r,c=>!om(c,o))},QC=(e,n)=>{const o=ve.fromDom(e.getBody()),r=Ms(o,`[${Fu()}="${n}"]`),c={};return z(r,u=>{if(!om(u,o)){const f=Lr(u,cg()),b=cs(c,f).getOr([]);c[f]=b.concat([u])}}),c},kT=(e,n)=>{const o=dc({}),r=()=>({listeners:[],previous:rf()}),c=(P,L)=>{u(P,ce=>(L(ce),ce))},u=(P,L)=>{const ce=o.get(),ie=cs(ce,P).getOrThunk(r),ee=L(ie);ce[P]=ee,o.set(ce)},f=(P,L,ce)=>{c(P,ie=>{z(ie.listeners,ee=>ee(!0,P,{uid:L,nodes:re(ce,ue=>ue.dom)}))})},b=P=>{c(P,L=>{z(L.listeners,ce=>ce(!1,P))})},y=(P,L)=>{z(gl(e,P),ce=>{L?or(ce,Ah(),"true"):qr(ce,Ah())})},x=I1(()=>{const P=Lt(n.getNames());z(P,L=>{u(L,ce=>{const ie=ce.previous.get();return ia(e,R.some(L)).fold(()=>{ie.each(ee=>{b(L),ce.previous.clear(),y(ee,!1)})},({uid:ee,name:ue,elements:Ne})=>{ra(ie,ee)||(ie.each(Oe=>y(Oe,!1)),f(ue,ee,Ne),ce.previous.set(ee),y(ee,!0))}),{previous:ce.previous,listeners:ce.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(P,L)=>{u(P,ce=>({previous:ce.previous,listeners:ce.listeners.concat([L])}))}}},TT=(e,n)=>{const o=Fu(),r=u=>R.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(cg(),null),u.attr(Fu(),null),u.attr(Ah(),null);const y=R.from(u.attr(wa())).map(L=>L.split(",")).getOr([]),x=R.from(u.attr(Oh())).map(L=>L.split(",")).getOr([]);z(y,L=>u.attr(L,null));const M=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],P=Re(M,[zp()].concat(x));u.attr("class",P.length>0?P.join(" "):null),u.attr(Oh(),null),u.attr(wa(),null)};e.serializer.addTempAttr(Ah()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},hl=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>cs(e,c).map(u=>u.settings),getNames:()=>Le(e)}};let af=0;const e2=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return af++,e+"_"+r+af+String(o)},t2=(e,n)=>{z(n,o=>{xu(e,o)})},K0=(e,n)=>{z(n,o=>{ql(e,o)})},Y0=(e,n)=>ve.fromDom(e.dom.cloneNode(n)),ig=e=>Y0(e,!1),X0=e=>Y0(e,!0),n2=(e,n)=>{const o=ve.fromTag(n),r=Cu(e);return Rs(o,r),o},o2=(e,n)=>{const o=n2(e,n);Ar(e,o);const r=pa(e);return Fo(o,r),Ps(e),o},s2=(e,n,o=Nt)=>{const r=new ba(e,n),c=u=>{let f;do f=r[u]();while(f&&!qt(f)&&!o(f));return R.from(f).filter(qt)};return{current:()=>R.from(r.current()).filter(qt),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},cf=(e,n)=>{const o=n||(f=>e.isBlock(f)||Wr(f)||cr(f)),r=(f,b,y,x)=>{if(qt(f)){const M=x(f,b,f.data);if(M!==-1)return R.some({container:f,offset:M})}return y().bind(M=>r(M.container,M.offset,y,x))};return{backwards:(f,b,y,x)=>{const M=s2(f,x??e.getRoot(),o);return r(f,b,()=>M.prev().map(P=>({container:P,offset:P.length})),y).getOrNull()},forwards:(f,b,y,x)=>{const M=s2(f,x??e.getRoot(),o);return r(f,b,()=>M.next().map(P=>({container:P,offset:0})),y).getOrNull()}}},Dh=Math.round,lg=e=>e?{left:Dh(e.left),top:Dh(e.top),bottom:Dh(e.bottom),right:Dh(e.right),width:Dh(e.width),height:Dh(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},r2=(e,n)=>(e=lg(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),ET=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,J0=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Up=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:J0(n.top-e.bottom,e,n)},Wp=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:J0(n.bottom-e.top,e,n),a2=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,_T=e=>Pe(e,(n,o)=>n.fold(()=>R.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return R.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),R.none()),c2=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},Va=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),L1=(e,n,o)=>Math.min(Math.max(e,n),o),Zp=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},lf=(e,n)=>{if(Bn(e)&&e.hasChildNodes()){const o=e.childNodes,r=L1(n,0,o.length-1);return o[r]}else return e},H1=(e,n)=>{if(!(n<0&&Bn(e)&&e.hasChildNodes()))return lf(e,n)},yi=new RegExp("[Ì-Í¯Ò-ÒÒ-ÒÖ-Ö½Ö¿×-××-××Ø-ØÙ-ÙÙ°Û-ÛÛ-Û¤Û§-Û¨Ûª-Û­ÜÜ°-ÝÞ¦-Þ°ß«-ß³à -à à -à £à ¥-à §à ©-à ­à¡-à¡à££-à¤à¤ºà¤¼à¥-à¥à¥à¥-à¥à¥¢-à¥£à¦à¦¼à¦¾à§-à§à§à§à§¢-à§£à¨-à¨à¨¼à©-à©à©-à©à©-à©à©à©°-à©±à©µàª-àªàª¼à«-à«à«-à«à«à«¢-à«£à¬à¬¼à¬¾à¬¿à­-à­à­à­à­à­¢-à­£à®à®¾à¯à¯à¯à°à°¾-à±à±-à±à±-à±à±-à±à±¢-à±£à²à²¼à²¿à³à³à³-à³à³-à³à³¢-à³£à´à´¾àµ-àµàµàµàµ¢-àµ£à·à·à·-à·à·à·à¸±à¸´-à¸ºà¹-à¹àº±àº´-àº¹àº»-àº¼à»-à»à¼-à¼à¼µà¼·à¼¹à½±-à½¾à¾-à¾à¾-à¾à¾-à¾à¾-à¾¼à¿á­-á°á²-á·á¹-áºá½-á¾á-áá-á á±-á´áá-áááá-áá-áá²-á´á-áá²-á³á´-áµá·-á½áá-ááá -á á¢©á¤ -á¤¢á¤§-á¤¨á¤²á¤¹-á¤»á¨-á¨á¨á©á©-á©á© á©¢á©¥-á©¬á©³-á©¼á©¿áª°-áª½áª¾á¬-á¬á¬´á¬¶-á¬ºá¬¼á­á­«-á­³á®-á®á®¢-á®¥á®¨-á®©á®«-á®­á¯¦á¯¨-á¯©á¯­á¯¯-á¯±á°¬-á°³á°¶-á°·á³-á³á³-á³ á³¢-á³¨á³­á³´á³¸-á³¹á·-á·µá·¼-á·¿â-ââ-ââ-â â¡â¢-â¤â¥-â°â³¯-â³±âµ¿â· -â·¿ãª-ã­ã®-ã¯ã-ãê¯ê°-ê²ê´-ê½ê-êê°-ê±ê ê ê ê ¥-ê ¦ê£ê£ -ê£±ê¤¦-ê¤­ê¥-ê¥ê¦-ê¦ê¦³ê¦¶-ê¦¹ê¦¼ê§¥ê¨©-ê¨®ê¨±-ê¨²ê¨µ-ê¨¶ê©ê©ê©¼êª°êª²-êª´êª·-êª¸êª¾-êª¿ê«ê«¬-ê«­ê«¶ê¯¥ê¯¨ê¯­ï¬ï¸-ï¸ï¸ -ï¸¯ï¾-ï¾]"),pl=e=>te(e)&&e.charCodeAt(0)>=768&&yi.test(e),AT=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},uf=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},i2=Bn,Rh=bi,l2=mh("display","block table"),u2=mh("float","left right"),sm=uf(i2,Rh,tn(u2)),OT=tn(mh("white-space","pre pre-line pre-wrap")),la=qt,Ml=Wr,Mh=br.nodeIndex,z1=H1,V1=e=>e?e.createRange():br.DOM.createRng(),jp=e=>te(e)&&/[\r\n\t ]/.test(e),rm=e=>!!e.setStart&&!!e.setEnd,U1=e=>{const n=e.startContainer,o=e.startOffset;if(jp(e.toString())&&OT(n.parentNode)&&qt(n)){const r=n.data;if(jp(r[o-1])||jp(r[o+1]))return!0}return!1},Nh=e=>{const n=e.ownerDocument,o=V1(n),r=n.createTextNode(aa),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=lg(o.getBoundingClientRect());return c.removeChild(r),u},Q0=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&qt(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),am(u)}else return null},ug=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,am=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=lg(r[0]):o=lg(e.getBoundingClientRect()),!rm(e)&&Ml(e)&&ug(o)?Nh(e):ug(o)&&rm(e)&&(n=Q0(e))!==null&&n!==void 0?n:o},df=(e,n)=>{const o=r2(e,n);return o.width=1,o.right=o.left+1,o},d2=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&ET(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=V1(f.ownerDocument);if(b<f.data.length){if(pl(f.data[b]))return;if(pl(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!U1(y))){o(df(am(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),U1(y)||o(df(am(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),U1(y)||o(df(am(y),!0)))},c=e.container(),u=e.offset();if(la(c))return r(c,u),n;if(i2(c))if(e.isAtEnd()){const f=z1(c,u);la(f)&&r(f,f.data.length),sm(f)&&!Ml(f)&&o(df(am(f),!1))}else{const f=z1(c,u);if(la(f)&&r(f,0),sm(f)&&e.isAtEnd())return o(df(am(f),!1)),n;const b=z1(e.container(),e.offset()-1);sm(b)&&!Ml(b)&&(l2(b)||l2(f)||!sm(f))&&o(df(am(b),!1)),sm(f)&&o(df(am(f),!0))}return n},vt=(e,n,o)=>{const r=()=>(la(e),n===0),c=()=>la(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const M=V1(e.ownerDocument);return M.setStart(e,n),M.setEnd(e,n),M},f=()=>(o||(o=d2(vt(e,n))),o),b=()=>f().length>0,y=M=>M&&e===M.container()&&n===M.offset(),x=M=>z1(e,M?n-1:n);return{container:ge(e),offset:ge(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:x}};vt.fromRangeStart=e=>vt(e.startContainer,e.startOffset),vt.fromRangeEnd=e=>vt(e.endContainer,e.endOffset),vt.after=e=>vt(e.parentNode,Mh(e)+1),vt.before=e=>vt(e.parentNode,Mh(e)),vt.isAbove=(e,n)=>Ur(On(n.getClientRects()),Tn(e.getClientRects()),Up).getOr(!1),vt.isBelow=(e,n)=>Ur(Tn(n.getClientRects()),On(e.getClientRects()),Wp).getOr(!1),vt.isAtStart=e=>e?e.isAtStart():!1,vt.isAtEnd=e=>e?e.isAtEnd():!1,vt.isTextPosition=e=>e?qt(e.container()):!1,vt.isElementPosition=e=>!vt.isTextPosition(e);const $h=(e,n)=>{qt(n)&&n.data.length===0&&e.remove(n)},DT=(e,n,o)=>{n.insertNode(o),$h(e,o.previousSibling),$h(e,o.nextSibling)},ey=(e,n,o)=>{const r=R.from(o.firstChild),c=R.from(o.lastChild);n.insertNode(o),r.each(u=>$h(e,u.previousSibling)),c.each(u=>$h(e,u.nextSibling))},W1=(e,n,o)=>{Km(o)?ey(e,n,o):DT(e,n,o)},Ca=qt,m2=Ou,f2=br.nodeIndex,Gp=e=>{const n=e.parentNode;return m2(n)?Gp(n):n},cm=e=>e?lt(e.childNodes,(n,o)=>(m2(o)&&o.nodeName!=="BR"?n=n.concat(cm(o)):n.push(o),n),[]):[],Bh=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&Ca(o);)n+=o.data.length;return n},ds=e=>n=>e===n,qi=e=>{let n,o;n=cm(Gp(e)),o=wt(n,ds(e),e),n=n.slice(0,o+1);const r=lt(n,(c,u,f)=>(Ca(u)&&Ca(n[f-1])&&c++,c),0);return n=ye(n,al([e.nodeName])),o=wt(n,ds(e),e),o-r},mf=e=>(Ca(e)?"text()":e.nodeName.toLowerCase())+"["+qi(e)+"]",ty=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},vr=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(Ca(r))u=Bh(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(mf(r));let f=ty(e,r);return f=ye(f,tn(Ou)),o=o.concat(Ta(f,b=>mf(b))),o.reverse().join("/")+","+u},ny=(e,n,o)=>{let r=cm(e);return r=ye(r,(c,u)=>!Ca(c)||!Ca(r[u-1])),r=ye(r,al([n])),r[o]},qp=(e,n)=>{let o=e,r=0;for(;Ca(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!Ca(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return Ca(e)&&n>e.data.length&&(n=e.data.length),vt(e,n)},mc=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=lt(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),ny(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!Ca(u)&&u.parentNode){let f;return c==="after"?f=f2(u)+1:f=f2(u),vt(u.parentNode,f)}return qp(u,parseInt(c,10))},Iu=cr,Ni=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&qt(c);c=c.previousSibling)r+=e(c.data).length;return r},Kp=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(qt(u))b.push(o?Ni(n,u,f):f);else{let x=0;const M=u.childNodes;f>=M.length&&M.length&&(x=1,f=Math.max(0,M.length-1)),b.push(e.nodeIndex(M[f],o)+x)}for(let x=u;x&&x!==y;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},RT=(e,n,o,r)=>{const c=n.dom,u=Kp(c,e,o,r,!0),f=n.isForward(),b=oi(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=Kp(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},Ph=(e,n,o)=>{let r=0;return Pt.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},Z1=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Bn(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},j1=e=>(Z1(e,!0),Z1(e,!1),e),G1=(e,n)=>{if(Bn(e)&&(e=lf(e,n),Iu(e)))return e;if(V(e)){qt(e)&&k(e)&&(e=e.parentNode);let o=e.previousSibling;if(Iu(o)||(o=e.nextSibling,Iu(o)))return o}},g2=e=>G1(e.startContainer,e.startOffset)||G1(e.endContainer,e.endOffset),oy=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Iu(r)){const f=r.nodeName;return{name:f,index:Ph(o.dom,f,r)}}const u=g2(c);if(u){const f=u.tagName;return{name:f,index:Ph(o.dom,f,u)}}return RT(e,o,n,c)},h2=e=>{const n=e.getRng();return{start:vr(e.dom.getRoot(),vt.fromRangeStart(n)),end:vr(e.dom.getRoot(),vt.fromRangeEnd(n)),forward:e.isForward()}},q1=e=>({rng:e.getRng(),forward:e.isForward()}),dg=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},bl=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:Ph(o,b,f)};const x=j1(r.cloneRange());if(!u){x.collapse(!1);const P=dg(o,c+"_end",n);W1(o,x,P)}r=j1(r),r.collapse(!0);const M=dg(o,c+"_start",n);return W1(o,r,M),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},MT=(e,n,o=!1)=>n===2?oy(Oa,o,e):n===3?h2(e):n?q1(e):bl(e,!1),ec=Ae(oy,Ue,!0),p2=e=>{const n=u=>u(e),o=ge(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Ve,isError:Nt,map:u=>wi.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>R.some(e)};return c},im=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:Nt,isError:Ve,map:n,mapError:r=>wi.error(r(e)),bind:n,exists:Nt,forall:Ve,getOr:Ue,or:Ue,getOrThunk:ze,orThunk:ze,getOrDie:dn(String(e)),each:De,toOptional:R.none};return o},wi={value:p2,error:im,fromOption:(e,n)=>e.fold(()=>im(n),p2)},au={generate:e=>{if(!yt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return z(e,(r,c)=>{const u=Le(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!yt(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const x=y.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...P)=>{if(P.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+P.length);return P[c].apply(null,y)},match:P=>{const L=Le(P);if(n.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+L.join(","));if(!kn(n,ie=>ae(L,ie)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+n.join(", "));return P[f].apply(null,y)},log:P=>{console.log(P,{constructors:n,constructor:f,params:y})}}}}),o}};au.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const sy=e=>{const n=[],o=[];return z(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},b2=e=>e.type==="inline-command"||e.type==="inline-format",$T=e=>e.type==="block-command"||e.type==="block-format",BT=e=>{const n=r=>wi.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(yt(e.format)){if(!kn(e.format,te))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(te(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return wi.value(c(f))}else return e.cmd!==void 0?te(e.cmd)?wi.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Je(e))return n("Raw pattern is not an object");if(!te(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!te(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?te(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):wi.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},Ec=e=>Z(e,$T),_c=e=>Z(e,b2),ri=(e,n)=>({inlinePatterns:_c(e),blockPatterns:Ec(e),dynamicPatternsLookup:n}),Uc=e=>{const n=sy(re(e,BT));return z(n.errors,o=>console.error(o.message,o.pattern)),n.values},Ki=e=>n=>{const o=e(n);return Uc(o)},Ua=$r().deviceType,Y1=Ua.isTouch(),X1=br.DOM,v2=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Pe(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[qo(u)]=qo(f),o},{})},J1=e=>Ee(e,RegExp),Un=e=>n=>n.options.get(e),mg=e=>te(e)||Je(e),Q1=(e,n="")=>o=>{const r=te(o);if(r)if(o.indexOf("=")!==-1){const c=v2(o);return{value:cs(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},ry=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:Q1(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:Q1(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=te(o)&&Cs(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=ae(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>xt(o)?{valid:!0,value:o}:te(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||te(o)||Me(o,te);return r?te(o)?{value:re(o.split(","),qo),valid:r}:yt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:dy(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=te(o)||Me(o,te);return r?{value:yt(o)?o:re(o.split(","),qo),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=xt(o)||te(o);return r?o===!1||Ua.isiPhone()||Ua.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Y1}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||te(o)||Q(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||te(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:mg}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:mg}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:mg}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>te(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Me(o,Je)||o===!1?{value:Uc(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>Q(o)?{value:Ki(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Me(o,J1)?{value:o,valid:!0}:J1(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Vc.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:X1.getAttrib(e.getElement(),"placeholder")})})},PT=Un("iframe_attrs"),mO=Un("doctype"),y2=Un("document_base_url"),FT=Un("body_id"),IT=Un("body_class"),ev=Un("content_security_policy"),LT=Un("br_in_pre"),vl=Un("forced_root_block"),Yp=Un("forced_root_block_attrs"),HT=Un("newline_behavior"),w2=Un("br_newline_selector"),pn=Un("no_newline_selector"),zT=Un("keep_styles"),fc=Un("end_container_on_empty_block"),C2=Un("automatic_uploads"),ay=Un("images_reuse_filename"),VT=Un("images_replace_blob_uris"),Nl=Un("icons"),fO=Un("icons_url"),UT=Un("images_upload_url"),lm=Un("images_upload_base_path"),S2=Un("images_upload_credentials"),cy=Un("images_upload_handler"),Yi=Un("content_css_cors"),$l=Un("referrer_policy"),tv=Un("language"),Lu=Un("language_url"),x2=Un("indent_use_margin"),Xp=Un("indentation"),Wa=Un("content_css"),k2=Un("content_style"),ff=Un("font_css"),nv=Un("directionality"),T2=Un("inline_boundaries_selector"),iy=Un("object_resizing"),WT=Un("resize_img_proportional"),ZT=Un("placeholder"),ly=Un("event_root"),jT=Un("service_message"),fg=Un("theme"),Jp=Un("theme_url"),ov=Un("model"),uy=Un("model_url"),gg=Un("inline_boundaries"),hg=Un("formats"),Fh=Un("preview_styles"),Qp=Un("format_empty_lines"),GT=Un("format_noneditable_selector"),E2=Un("custom_ui_selector"),dy=Un("inline"),my=Un("hidden_input"),qT=Un("submit_patch"),pg=Un("add_form_submit_trigger"),Vr=Un("add_unload_trigger"),fy=Un("custom_undo_redo_levels"),ai=Un("disable_nodechange"),gy=Un("readonly"),hy=Un("content_css_cors"),eb=Un("plugins"),sv=Un("external_plugins"),tb=Un("block_unsupported_drop"),_2=Un("visual"),gO=Un("visual_table_class"),gf=Un("visual_anchor_class"),KT=Un("iframe_aria_text"),YT=Un("setup"),XT=Un("init_instance_callback"),JT=Un("urlconverter_callback"),A2=Un("auto_focus"),py=Un("browser_spellcheck"),QT=Un("protect"),eE=Un("paste_block_drop"),rv=Un("paste_data_images"),tE=Un("paste_preprocess"),O2=Un("paste_postprocess"),nE=Un("paste_webkit_styles"),nb=Un("paste_remove_styles_if_webkit"),by=Un("paste_merge_formats"),D2=Un("smart_paste"),R2=Un("paste_as_text"),M2=Un("paste_tab_spaces"),bg=Un("allow_html_data_urls"),vg=Un("text_patterns"),hf=Un("text_patterns_lookup"),Ih=Un("noneditable_class"),N2=Un("editable_class"),um=Un("noneditable_regexp"),vy=Un("preserve_cdata"),oE=e=>e.options.isSet("text_patterns_lookup"),pf=e=>Pt.explode(e.options.get("font_size_style_values")),av=e=>Pt.explode(e.options.get("font_size_classes")),sE=e=>e.options.get("encoding")==="xml",yy=e=>Pt.explode(e.options.get("images_file_types")),rE=Un("table_tab_navigation"),aE=Bn,wy=qt,$2=e=>{const n=e.parentNode;n&&n.removeChild(e)},B2=e=>{const n=Oa(e);return{count:e.length-n.length,text:n}},Cy=e=>{let n;for(;(n=e.data.lastIndexOf(wr))!==-1;)e.deleteData(n,1)},P2=(e,n)=>(Cd(e),n),F2=(e,n)=>{const o=B2(e.data.substr(0,n.offset())),r=B2(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Cy(e),vt(e,n.offset()-o.count)):n},cE=(e,n)=>{const o=n.container(),r=ke(Ro(o.childNodes),e).map(c=>c<n.offset()?vt(o,n.offset()-1):n).getOr(n);return Cd(e),r},cv=(e,n)=>wy(e)&&n.container()===e?F2(e,n):P2(e,n),I2=(e,n)=>n.container()===e.parentNode?cE(e,n):P2(e,n),iv=(e,n)=>vt.isTextPosition(n)?cv(e,n):I2(e,n),Cd=e=>{aE(e)&&V(e)&&(Te(e)?e.removeAttribute("data-mce-caret"):$2(e)),wy(e)&&(Cy(e),e.data.length===0&&$2(e))},Sy=cr,xy=Ql,L2=Du,H2="*[contentEditable=false],video,audio,embed,object",ky=(e,n,o)=>{const r=r2(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},hO=e=>{var n,o;const r=Ms(ve.fromDom(e),H2);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(ir(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Go(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},lv=(e,n,o,r)=>{const c=rf();let u,f;const b=vl(e),y=e.dom,x=(ee,ue)=>{let Ne;if(M(),L2(ue))return null;if(o(ue)){const Oe=Lo(b,ue,ee),Ge=ky(n,ue,ee);y.setStyle(Oe,"top",Ge.top),f=Oe;const nt=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(nt,{...Ge}),y.add(n,nt),c.set({caret:nt,element:ue,before:ee}),ee&&y.addClass(nt,"mce-visual-caret-before"),P(),Ne=ue.ownerDocument.createRange(),Ne.setStart(Oe,0),Ne.setEnd(Oe,0)}else return f=ht(ue,ee),Ne=ue.ownerDocument.createRange(),sb(f.nextSibling)?(Ne.setStart(f,0),Ne.setEnd(f,0)):(Ne.setStart(f,1),Ne.setEnd(f,1)),Ne;return Ne},M=()=>{hO(n),f&&(Cd(f),f=null),c.on(ee=>{y.remove(ee.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},P=()=>{u=setInterval(()=>{c.on(ee=>{r()?y.toggleClass(ee.caret,"mce-visual-caret-hidden"):y.addClass(ee.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:M,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(ee=>{const ue=ky(n,ee.element,ee.before);y.setStyles(ee.caret,{...ue})})},destroy:()=>clearInterval(u)}},ob=()=>us.browser.isFirefox(),sb=e=>Sy(e)||xy(e),yg=e=>sb(e)||Ya(e)&&ob(),iE=ni,Ty=cr,lE=Ql,uv=mh("display","block table table-cell table-caption list-item"),rb=V,z2=k,uE=Bn,dE=qt,mE=bi,tc=e=>e>0,Lh=e=>e<0,dm=(e,n)=>{let o;for(;o=e(n);)if(!z2(o))return o;return null},mm=(e,n,o,r,c)=>{const u=new ba(e,r),f=Ty(e)||z2(e);let b;if(Lh(n)){if(f&&(b=dm(u.prev.bind(u),!0),o(b)))return b;for(;b=dm(u.prev.bind(u),c);)if(o(b))return b}if(tc(n)){if(f&&(b=dm(u.next.bind(u),!0),o(b)))return b;for(;b=dm(u.next.bind(u),c);)if(o(b))return b}return null},fE=(e,n)=>{const o=c=>iE(c.dom),r=c=>c.dom===n;return jm(ve.fromDom(e),o,r).map(c=>c.dom).getOr(n)},bf=(e,n)=>{for(;e&&e!==n;){if(uv(e))return e;e=e.parentNode}return null},Hu=(e,n,o)=>bf(e.container(),o)===bf(n.container(),o),dv=(e,n)=>{if(!n)return R.none();const o=n.container(),r=n.offset();return uE(o)?R.from(o.childNodes[r+e]):R.none()},mv=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},Ey=(e,n,o)=>bf(n,e)===bf(o,e),V2=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&rb(u)&&(u=u[r]),Ty(u)||lE(u)){if(Ey(n,u,c))return u;break}if(mE(u))break;c=c.parentNode}return null},fm=Ae(mv,!0),Sd=Ae(mv,!1),fv=(e,n,o)=>{let r;const c=Ae(V2,!0,n),u=Ae(V2,!1,n),f=o.startContainer,b=o.startOffset;if(k(f)){const y=dE(f)?f.parentNode:f,x=y.getAttribute("data-mce-caret");if(x==="before"&&(r=y.nextSibling,yg(r)))return fm(r);if(x==="after"&&(r=y.previousSibling,yg(r)))return Sd(r)}if(!o.collapsed)return o;if(qt(f)){if(rb(f)){if(e===1){if(r=u(f),r)return fm(r);if(r=c(f),r)return Sd(r)}if(e===-1){if(r=c(f),r)return Sd(r);if(r=u(f),r)return fm(r)}return o}if(ir(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?fm(r):o;if(Go(f)&&b<=1)return e===-1&&(r=c(f),r)?Sd(r):o;if(b===f.data.length)return r=u(f),r?fm(r):o;if(b===0)return r=c(f),r?Sd(r):o}return o},U2=(e,n)=>dv(e?0:-1,n).filter(Ty),ab=(e,n,o)=>{const r=fv(e,n,o);return e===-1?vt.fromRangeStart(r):vt.fromRangeEnd(r)},Hh=e=>R.from(e.getNode()).map(ve.fromDom),Wc=e=>R.from(e.getNode(!0)).map(ve.fromDom),W2=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},vf=(e,n)=>{const o=Hu(e,n);return!o&&Wr(e.getNode())?!0:o};var Ac;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Ac||(Ac={}));const _y=cr,zu=qt,cb=Bn,gv=Wr,wg=bi,gE=tr,zh=za,Z2=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},xd=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Vh=(e,n)=>{if(tc(e)){if(wg(n.previousSibling)&&!zu(n.previousSibling))return vt.before(n);if(zu(n))return vt(n,0)}if(Lh(e)){if(wg(n.nextSibling)&&!zu(n.nextSibling))return vt.after(n);if(zu(n))return vt(n,n.data.length)}return Lh(e)?gv(n)?vt.before(n):vt.after(n):vt.before(n)},j2=(e,n)=>{const o=n.nextSibling;return o&&wg(o)?zu(o)?vt(o,0):vt.before(o):ib(Ac.Forwards,vt.after(n),e)},ib=(e,n,o)=>{let r,c,u,f;if(!cb(o)||!n)return null;if(n.isEqual(vt.after(o))&&o.lastChild){if(f=vt.after(o.lastChild),Lh(e)&&wg(o.lastChild)&&cb(o.lastChild))return gv(o.lastChild)?vt.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(zu(b)){if(Lh(e)&&y>0)return vt(b,--y);if(tc(e)&&y<b.length)return vt(b,++y);r=b}else{if(Lh(e)&&y>0&&(c=xd(b,y-1),wg(c)))return!gE(c)&&(u=mm(c,e,zh,c),u)?zu(u)?vt(u,u.data.length):vt.after(u):zu(c)?vt(c,c.data.length):vt.before(c);if(tc(e)&&y<b.childNodes.length&&(c=xd(b,y),wg(c)))return gv(c)?j2(o,c):!gE(c)&&(u=mm(c,e,zh,c),u)?zu(u)?vt(u,0):vt.before(u):zu(c)?vt(c,0):vt.after(c);r=c||f.getNode()}if(r&&(tc(e)&&f.isAtEnd()||Lh(e)&&f.isAtStart())&&(r=mm(r,e,Ve,o,!0),zh(r,o)))return Vh(e,r);c=r&&mm(r,e,zh,o);const x=Zn(Z(Z2(b,o),_y));return x&&(!c||!x.contains(c))?(tc(e)?f=vt.after(x):f=vt.before(x),f):c?Vh(e,c):null},gm=e=>({next:n=>ib(Ac.Forwards,n,e),prev:n=>ib(Ac.Backwards,n,e)}),pO=(e,n,o)=>{const r=e?vt.before(o):vt.after(o);return yl(e,n,r)},lb=e=>Wr(e)?vt.before(e):vt.after(e),ub=e=>vt.isTextPosition(e)?e.offset()===0:bi(e.getNode()),Ay=e=>{if(vt.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return bi(e.getNode(!0))},Oy=(e,n)=>!vt.isTextPosition(e)&&!vt.isTextPosition(n)&&e.getNode()===n.getNode(!0),Dy=e=>!vt.isTextPosition(e)&&Wr(e.getNode()),G2=(e,n,o)=>e?!Oy(n,o)&&!Dy(n)&&Ay(n)&&ub(o):!Oy(o,n)&&ub(n)&&Ay(o),yl=(e,n,o)=>{const r=gm(n);return R.from(e?r.next(o):r.prev(o))},Uh=(e,n,o)=>yl(e,n,o).bind(r=>Hu(o,r,n)&&G2(e,o,r)?yl(e,n,r):R.some(r)),hv=(e,n,o,r)=>Uh(e,n,o).bind(c=>r(c)?hv(e,n,c,r):R.some(c)),kd=(e,n)=>{const o=e?n.firstChild:n.lastChild;return qt(o)?R.some(vt(o,e?0:o.data.length)):o?bi(o)?R.some(e?vt.before(o):lb(o)):pO(e,n,o):R.none()},Ci=Ae(yl,!0),wl=Ae(yl,!1),$i=Ae(kd,!0),Td=Ae(kd,!1),Ry="_mce_caret",Cl=e=>Bn(e)&&e.id===Ry,Cg=(e,n)=>{let o=n;for(;o&&o!==e;){if(Cl(o))return o;o=o.parentNode}return null},hE=e=>te(e.start),bO=e=>go(e,"rng"),vO=e=>go(e,"id"),Sg=e=>go(e,"name"),My=e=>Pt.isArray(e.start),db=e=>!Sg(e)&&xt(e.forward)?e.forward:!0,pE=(e,n)=>(Bn(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),q2=(e,n)=>{const o=R.from(mc(e.getRoot(),n.start)),r=R.from(mc(e.getRoot(),n.end));return Ur(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:db(n)}})},Ny=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(wr);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},yO=e=>!e.hasChildNodes(),bE=(e,n)=>Td(e).fold(Nt,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),ci=(e,n,o)=>yO(n)&&Cg(e,n)?(Ny(n,o),!0):!1,pv=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const x=f.childNodes;if(ci(u,f,r))return!0;if(c[y]>x.length-1)return ci(u,f,r)?!0:bE(f,r);f=x[c[y]]}qt(f)&&(b=Math.min(c[0],f.data.length)),Bn(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},xg=e=>qt(e)&&e.data.length>0,hm=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):xg(r.nextSibling)?(f=r.nextSibling,b=0):xg(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):xg(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,x=r.nextSibling;Pt.each(Pt.grep(r.childNodes),P=>{qt(P)&&(P.data=P.data.replace(/\uFEFF/g,""))});let M;for(;M=e.get(o.id+"_"+n);)e.remove(M,!0);if(qt(x)&&qt(y)&&!us.browser.isOpera()){const P=y.data.length;y.appendData(x.data),e.remove(x),f=y,b=P}}return R.some(vt(f,b))}else return R.none()},mb=(e,n)=>{const o=e.createRng();return pv(e,!0,n,o)&&pv(e,!1,n,o)?R.some({range:o,forward:db(n)}):R.none()},bv=(e,n)=>{const o=hm(e,"start",n),r=hm(e,"end",n);return Ur(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(pE(e,c.container()),c.offset()),f.setEnd(pE(e,u.container()),u.offset()),{range:f,forward:db(n)}})},K2=(e,n)=>R.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),vE=(e,n)=>{const o=e.dom;if(n){if(My(n))return mb(o,n);if(hE(n))return q2(o,n);if(vO(n))return bv(o,n);if(Sg(n))return K2(o,n);if(bO(n))return R.some({range:n.rng,forward:db(n)})}return R.none()},yE=(e,n,o)=>MT(e,n,o),vv=(e,n)=>{vE(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Oc=e=>Bn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Wh=(e=>n=>e===n)(aa),Dc=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,yv=e=>!Dc(e)&&!Wh(e)&&!hh(e),cu=e=>({value:e}),$y=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},By=e=>{const n=$y(e.red)+$y(e.green)+$y(e.blue);return cu(n)},wE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,CE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Py=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),X2=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Py(c,u,f,b)},SE=e=>{if(e==="transparent")return R.some(Py(0,0,0,0));const n=wE.exec(e);if(n!==null)return R.some(X2(n[1],n[2],n[3],"1"));const o=CE.exec(e);return o!==null?R.some(X2(o[1],o[2],o[3],o[4])):R.none()},fb=e=>SE(e).map(By).map(n=>"#"+n.value).getOr(e),Zh=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},xE=e=>Qn(e,n=>{const o=Zp(n);return o?[ve.fromDom(o)]:[]}),J2=e=>Zh(e).length>1,Fy=e=>Z(xE(e),Ja),kE=e=>Ms(e,"td[data-mce-selected],th[data-mce-selected]"),Iy=(e,n)=>{const o=kE(n);return o.length>0?o:Fy(e)},yf=e=>Iy(Zh(e.selection.getSel()),ve.fromDom(e.getBody())),kg=(e,n)=>Au(e,"table",n),Q2=e=>{const n=e.startContainer,o=e.startOffset;return qt(n)?o===0?R.some(ve.fromDom(n)):R.none():R.from(n.childNodes[o]).map(ve.fromDom)},wO=e=>{const n=e.endContainer,o=e.endOffset;return qt(n)?o===n.data.length?R.some(ve.fromDom(n)):R.none():R.from(n.childNodes[o-1]).map(ve.fromDom)},eS=e=>Wf(e).fold(ge([e]),n=>[e].concat(eS(n))),Ly=e=>zm(e).fold(ge([e]),n=>oo(n)==="br"?Ic(n).map(o=>[e].concat(Ly(o))).getOr([]):[e].concat(Ly(n))),Hy=(e,n)=>Ur(Q2(n),wO(n),(o,r)=>{const c=rn(eS(e),Ae(Bs,o)),u=rn(Ly(e),Ae(Bs,r));return c.isSome()&&u.isSome()}).getOr(!1),wv=(e,n,o,r)=>{const c=o,u=new ba(o,c),f=bs(e.schema.getMoveCaretBeforeOnEnterElements(),(y,x)=>!ae(["td","th","table"],x.toLowerCase()));let b=o;do{if(qt(b)&&Pt.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},ms=e=>{const n=e.selection.getSel();return he(n)&&n.rangeCount>0},Ed=(e,n)=>{const o=yf(e);o.length>0?z(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},wf=(e,n,o)=>{const r=bl(e,n);o(r),e.moveToBookmark(r)},Cf=e=>it(e==null?void 0:e.nodeType),zy=e=>Bn(e)&&!Oc(e)&&!Cl(e)&&!Ou(e),jh=(e,n)=>{if(zy(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Sf=e=>e.isContentEditable===!0,Cv=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=cr(u);wf(r,!0,()=>{n()}),f&&cr(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&Sv(c,r)},Sv=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!jh(e,b)&&Bn(u)){const y=u.childNodes,x=e.getRoot();let M;if(f<y.length){const P=y[f];M=new ba(P,(o=e.getParent(P,e.isBlock))!==null&&o!==void 0?o:x)}else{const P=y[y.length-1];M=new ba(P,(r=e.getParent(P,e.isBlock))!==null&&r!==void 0?r:x),M.next(!0)}for(let P=M.current();P;P=M.next()){if(e.getContentEditable(P)==="false")return;if(qt(P)&&!gb(P)){c.setStart(P,0),n.setRng(c);return}}}},xv=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(Bn(e)||!gb(e))return e}},Tg=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ng(e,n),Eg=(e,n,o)=>e.schema.isValidChild(n,o),gb=(e,n=!1)=>{if(he(e)&&qt(e)){const o=n?e.data.replace(/ /g,"Â "):e.data;return Dl(o)}else return!1},kv=e=>he(e)&&qt(e)&&e.length===0,CO=(e,n)=>{const o="[data-mce-cef-wrappable]",r=GT(e),c=xs(r)?o:`${o},${r}`;return Oi(ve.fromDom(n),c)},tS=(e,n)=>{const o=e.dom;return zy(n)&&o.getContentEditable(n)==="false"&&CO(e,n)&&o.select('[contenteditable="true"]',n).length===0},pm=(e,n)=>Q(e)?e(n):(he(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Vy=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),_g=(e,n)=>{if(St(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=fb(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Uy=(e,n,o)=>{const r=e.getStyle(n,o);return _g(r,o)},nS=(e,n)=>{let o;return e.getParent(n,r=>Bn(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},hb=(e,n,o)=>e.getParents(n,o,e.getRoot()),Wy=(e,n,o)=>{const r=e.formatter.get(n);return he(r)&&se(r,o)},TE=(e,n)=>Wy(e,n,r=>{const c=u=>Q(u)||u.length>1&&u.charAt(0)==="%";return se(["styles","attributes"],u=>cs(r,u).exists(f=>{const b=yt(f)?f:ys(f);return se(b,c)}))}),EE=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>bs(u,(f,b)=>se(r,y=>y===b));return Wy(e,n,u=>{const f=c(u);return Wy(e,o,b=>{const y=c(b);return Zr(f,y)})})},_d=e=>mr(e,"block"),Gh=e=>_d(e)&&e.wrapper===!0,_E=e=>_d(e)&&e.wrapper!==!0,Bl=e=>mr(e,"selector"),nc=e=>mr(e,"inline"),AE=e=>Bl(e)&&nc(e)&&ra(cs(e,"mixed"),!0),qh=e=>Bl(e)&&e.expand!==!1&&!nc(e),Kh=Oc,oS=hb,sS=gb,OE=Tg,_n=e=>Wr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Ra=(e,n)=>{let o=n;for(;o;){if(Bn(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Ag=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},gc=(e,n,o)=>Ag(e,n,o,r=>Wh(r)||Dc(r)),Pl=(e,n,o)=>Ag(e,n,o,yv),Tv=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(M,P,L)=>{const ce=cf(e),ie=c?ce.backwards:ce.forwards;return R.from(ie(M,P,(ee,ue)=>Kh(ee.parentNode)?-1:(f=ee,L(c,ee,ue)),b))};return y(o,r,gc).bind(M=>u?y(M.container,M.offset+(c?-1:0),Pl):R.some(M)).orThunk(()=>f?R.some({container:f,offset:c?0:f.length}):R.none())},Yh=(e,n,o,r,c)=>{const u=r[c];qt(r)&&xs(r.data)&&u&&(r=u);const f=oS(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const x=n[y];if(!(he(x.collapsed)&&x.collapsed!==o.collapsed)&&Bl(x)&&e.is(f[b],x.selector))return f[b]}return r},pb=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(_d(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(qt(o)?o.parentNode:o,x=>x!==f&&OE(e.schema,x),y)}if(u&&_d(b)&&b.wrapper&&(u=oS(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Vy(u,"br")););return u||o},rS=(e,n,o,r)=>{const c=o.parentNode;return he(o[r])?!1:c===n||St(c)||e.isBlock(c)?!0:rS(e,n,c,r)},bb=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(qt(o)&&!sS(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const x=qt(y)&&!rS(e,b,y,f);if(!Kh(y)&&!_n(y)&&!sS(y,x))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Zy=e=>Kh(e.parentNode)||Kh(e),xf=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return Bn(c)&&c.hasChildNodes()&&(c=lf(c,u),qt(c)&&(u=0)),Bn(f)&&f.hasChildNodes()&&(f=lf(f,n.collapsed?b:b-1),qt(f)&&(b=f.data.length)),c=Ra(e,c),f=Ra(e,f),Zy(c)&&(c=Kh(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,qt(c)&&(u=n.collapsed?c.length:0)),Zy(f)&&(f=Kh(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,qt(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(Tv(e,e.getRoot(),c,u,!0,r).each(({container:P,offset:L})=>{c=P,u=L}),Tv(e,e.getRoot(),f,b,!1,r).each(({container:P,offset:L})=>{f=P,b=L})),(nc(y)||y.block_expand)&&((!nc(y)||!qt(c)||u===0)&&(c=bb(e,o,c,u,!0)),(!nc(y)||!qt(f)||b===f.data.length)&&(f=bb(e,o,f,b,!1))),qh(y)&&(c=Yh(e,o,n,c,"previousSibling"),f=Yh(e,o,n,f,"nextSibling")),(_d(y)||Bl(y))&&(c=pb(e,o,c,"previousSibling"),f=pb(e,o,f,"nextSibling"),_d(y)&&(e.isBlock(c)||(c=bb(e,o,c,u,!0)),e.isBlock(f)||(f=bb(e,o,f,b,!1)))),Bn(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),Bn(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},vb=(e,n,o)=>{var r;const c=n.startOffset,u=lf(n.startContainer,c),f=n.endOffset,b=lf(n.endContainer,f-1),y=ue=>{const Ne=ue[0];qt(Ne)&&Ne===u&&c>=Ne.data.length&&ue.splice(0,1);const Oe=ue[ue.length-1];return f===0&&ue.length>0&&Oe===b&&qt(Oe)&&ue.splice(ue.length-1,1),ue},x=(ue,Ne,Oe)=>{const Ge=[];for(;ue&&ue!==Oe;ue=ue[Ne])Ge.push(ue);return Ge},M=(ue,Ne)=>e.getParent(ue,Oe=>Oe.parentNode===Ne,Ne),P=(ue,Ne,Oe)=>{const Ge=Oe?"nextSibling":"previousSibling";for(let nt=ue,Dt=nt.parentNode;nt&&nt!==Ne;nt=Dt){Dt=nt.parentNode;const vn=x(nt===ue?nt:nt[Ge],Ge);vn.length&&(Oe||vn.reverse(),o(y(vn)))}};if(u===b)return o(y([u]));const L=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return P(u,L,!0);if(e.isChildOf(b,u))return P(b,L);const ce=M(u,L)||u,ie=M(b,L)||b;P(u,ce,!0);const ee=x(ce===u?ce:ce.nextSibling,"nextSibling",ie===b?ie.nextSibling:ie);ee.length&&o(y(ee)),P(b,ie)},DE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],aS=e=>Ds(e)&&tu(e)===wr,jy=(e,n,o,r)=>Cc(n).fold(()=>"skipping",c=>r==="br"||aS(n)?"valid":Gi(n)?"existing":Cl(n.dom)?"caret":se(DE,u=>Oi(n,u))?"valid-block":!Eg(e,o,r)||!Eg(e,oo(c),o)?"invalid-child":"valid"),Og=(e,n)=>{const o=xf(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},yb=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;xu(e,zp()),or(e,`${cg()}`,f),or(e,`${Fu()}`,r);const{attributes:y={},classes:x=[]}=c(f,b);if(Rs(e,y),t2(e,x),u){x.length>0&&or(e,`${Oh()}`,x.join(","));const M=Le(y);M.length>0&&or(e,`${wa()}`,M.join(","))}},Ev=e=>{ql(e,zp()),qr(e,`${cg()}`),qr(e,`${Fu()}`),qr(e,`${Ah()}`);const n=wc(e,`${wa()}`).map(r=>r.split(",")).getOr([]),o=wc(e,`${Oh()}`).map(r=>r.split(",")).getOr([]);z(n,r=>qr(e,r)),K0(e,o),qr(e,`${Oh()}`),qr(e,`${wa()}`)},_v=(e,n,o,r,c)=>{const u=ve.fromTag("span",e);return yb(u,n,o,r,c,!1),u},Xh=(e,n,o,r,c,u)=>{const f=[],b=_v(e.getDoc(),o,u,r,c),y=rf(),x=()=>{y.clear()},M=()=>y.get().getOrThunk(()=>{const ie=ig(b);return f.push(ie),y.set(ie),ie}),P=ie=>{z(ie,L)},L=ie=>{switch(jy(e,ie,"span",oo(ie))){case"invalid-child":{x();const ue=pa(ie);P(ue),x();break}case"valid-block":{x(),yb(ie,o,u,r,c,!0);break}case"valid":{const ue=M();Um(ie,ue);break}}},ce=ie=>{const ee=re(ie,ve.fromDom);P(ee)};return vb(e.dom,n,ie=>{x(),ce(ie)}),f},Gy=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=yf(e).length>0,b=e2("mce-annotation");if(u.collapsed&&!f&&Og(e,u),c.getRng().collapsed&&!f){const y=_v(e.getDoc(),b,r,n,o.decorate);ch(y,aa),c.getRng().insertNode(y.dom),c.select(y.dom)}else wf(c,!1,()=>{Ed(e,y=>{Xh(e,y,b,n,o.decorate,r)})})})},cS=e=>{const n=hl();TT(e,n);const o=kT(e,n),r=Vi("span"),c=u=>{z(u,f=>{r(f)?lc(f):Ev(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Gy(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{const f=e.selection.getBookmark();ia(e,R.some(u)).each(({elements:b})=>{c(b)}),e.selection.moveToBookmark(f)},removeAll:u=>{const f=e.selection.getBookmark();ln(QC(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=QC(e,u);return Jt(f,b=>re(b,y=>y.dom))}}},Vu=e=>({getBookmark:Ae(yE,e),moveToBookmark:Ae(vv,e)});Vu.isBookmarkNode=Oc;const wb=(e,n,o)=>o.collapsed?!1:se(o.getClientRects(),r=>a2(r,e,n)),RE=(e,n)=>e.dispatch("PreProcess",n),ME=(e,n)=>e.dispatch("PostProcess",n),bm=e=>{e.dispatch("remove")},NE=e=>{e.dispatch("detach")},iS=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},Av=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},$E=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},Ov=e=>{e.dispatch("PreInit")},Zc=e=>{e.dispatch("PostRender")},Uu=e=>{e.dispatch("Init")},iu=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Cb=(e,n,o)=>{e.dispatch(n,o)},Dv=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},lS=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},qy=(e,n)=>e.dispatch("BeforeSetContent",n),uS=(e,n)=>e.dispatch("SetContent",n),Ky=(e,n)=>e.dispatch("BeforeGetContent",n),dS=(e,n)=>e.dispatch("GetContent",n),Yy=(e,n)=>{e.dispatch("AutocompleterStart",n)},mS=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},fS=e=>{e.dispatch("AutocompleterEnd")},Rv=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Xy=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),rr=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Wn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Wn.metaKeyPressed(e),metaKeyPressed:e=>us.os.isMacOS()||us.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},kf="data-mce-selected",gS="table,img,figure.image,hr,video,span.mce-preview-object",Tf=Math.abs,Ad=Math.round,Jh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Jy=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Fl=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,x,M,P,L,ce,ie,ee,ue,Ne,Oe,Ge,nt,Dt,vn;const sn=xn=>he(xn)&&(_a(xn)||o.is(xn,"figure.image")),mt=xn=>Ql(xn)||o.hasClass(xn,"mce-preview-object"),Qe=(xn,gs)=>{if(Jy(xn)){const as=xn.touches[0];return sn(xn.target)&&!wb(as.clientX,as.clientY,gs)}else return sn(xn.target)&&!wb(xn.clientX,xn.clientY,gs)},Rn=xn=>{const gs=xn.target;Qe(xn,n.selection.getRng())&&!xn.isDefaultPrevented()&&n.selection.select(gs)},co=xn=>o.hasClass(xn,"mce-preview-object")&&he(xn.firstElementChild)?[xn,xn.firstElementChild]:o.is(xn,"figure.image")?[xn.querySelector("img")]:[xn],fo=xn=>{const gs=iy(n);return!gs||xn.getAttribute("data-mce-resize")==="false"||xn===n.getBody()?!1:o.hasClass(xn,"mce-preview-object")&&he(xn.firstElementChild)?Oi(ve.fromDom(xn.firstElementChild),gs):Oi(ve.fromDom(xn),gs)},Uo=xn=>mt(xn)?o.create("img",{src:us.transparentSrc}):xn.cloneNode(!0),vs=(xn,gs,as)=>{if(he(as)){const sc=co(xn);z(sc,xr=>{xr.style[gs]||!n.schema.isValid(xr.nodeName.toLowerCase(),gs)?o.setStyle(xr,gs,as):o.setAttrib(xr,gs,""+as)})}},Gs=(xn,gs,as)=>{vs(xn,"width",gs),vs(xn,"height",as)},Zs=xn=>{let gs,as,sc,xr,No;gs=xn.screenX-P,as=xn.screenY-L,Ge=gs*x[2]+ee,nt=as*x[3]+ue,Ge=Ge<5?5:Ge,nt=nt<5?5:nt,(sn(f)||mt(f))&&WT(n)!==!1?sc=!Wn.modifierPressed(xn):sc=Wn.modifierPressed(xn),sc&&(Tf(gs)>Tf(as)?(nt=Ad(Ge*Ne),Ge=Ad(nt/Ne)):(Ge=Ad(nt/Ne),nt=Ad(Ge*Ne))),Gs(b,Ge,nt),xr=x.startPos.x+gs,No=x.startPos.y+as,xr=xr>0?xr:0,No=No>0?No:0,o.setStyles(y,{left:xr,top:No,display:"block"}),y.innerHTML=Ge+" &times; "+nt,x[2]<0&&b.clientWidth<=Ge&&o.setStyle(b,"left",ce+(ee-Ge)),x[3]<0&&b.clientHeight<=nt&&o.setStyle(b,"top",ie+(ue-nt)),gs=u.scrollWidth-Dt,as=u.scrollHeight-vn,gs+as!==0&&o.setStyles(y,{left:xr-gs,top:No-as}),Oe||(Av(n,f,ee,ue,"corner-"+x.name),Oe=!0)},$a=()=>{const xn=Oe;Oe=!1,xn&&(vs(f,"width",Ge),vs(f,"height",nt)),o.unbind(r,"mousemove",Zs),o.unbind(r,"mouseup",$a),c!==r&&(o.unbind(c,"mousemove",Zs),o.unbind(c,"mouseup",$a)),o.remove(b),o.remove(y),o.remove(M),xi(f),xn&&($E(n,f,Ge,nt,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},xi=xn=>{Dn();const gs=o.getPos(xn,u),as=gs.x,sc=gs.y,xr=xn.getBoundingClientRect(),No=xr.width||xr.right-xr.left,Fs=xr.height||xr.bottom-xr.top;f!==xn&&(Wo(),f=xn,Ge=nt=0);const ka=n.dispatch("ObjectSelected",{target:xn});fo(xn)&&!ka.isDefaultPrevented()?ln(Jh,(yr,Xr)=>{const da=Ba=>{const hu=co(f)[0];P=Ba.screenX,L=Ba.screenY,ee=hu.clientWidth,ue=hu.clientHeight,Ne=ue/ee,x=yr,x.name=Xr,x.startPos={x:No*yr[0]+as,y:Fs*yr[1]+sc},Dt=u.scrollWidth,vn=u.scrollHeight,M=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Uo(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:as,top:sc,margin:0}),Gs(b,No,Fs),b.removeAttribute(kf),u.appendChild(b),o.bind(r,"mousemove",Zs),o.bind(r,"mouseup",$a),c!==r&&(o.bind(c,"mousemove",Zs),o.bind(c,"mouseup",$a)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},ee+" &times; "+ue)};let Pr=o.get("mceResizeHandle"+Xr);Pr&&o.remove(Pr),Pr=o.add(u,"div",{id:"mceResizeHandle"+Xr,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Xr+"-resize; margin:0; padding:0"}),o.bind(Pr,"mousedown",Ba=>{Ba.stopImmediatePropagation(),Ba.preventDefault(),da(Ba)}),yr.elm=Pr,o.setStyles(Pr,{left:No*yr[0]+as-Pr.offsetWidth/2,top:Fs*yr[1]+sc-Pr.offsetHeight/2})}):Wo(!1)},nn=_h(xi,0),Wo=(xn=!0)=>{nn.cancel(),Dn(),f&&xn&&f.removeAttribute(kf),ln(Jh,(gs,as)=>{const sc=o.get("mceResizeHandle"+as);sc&&(o.unbind(sc),o.remove(sc))})},po=(xn,gs)=>o.isChildOf(xn,gs),Dr=xn=>{if(Oe||n.removed||n.composing)return;const gs=xn.type==="mousedown"?xn.target:e.getNode(),as=fd(ve.fromDom(gs),gS).map(xr=>xr.dom).getOrUndefined(),sc=he(as)?o.getAttrib(as,kf,"1"):"1";if(z(o.select(`img[${kf}],hr[${kf}]`),xr=>{xr.removeAttribute(kf)}),he(as)&&po(as,u)){Do();const xr=e.getStart(!0);if(po(xr,as)&&po(e.getEnd(!0),as)){o.setAttrib(as,kf,sc),nn.throttle(as);return}}Wo()},Dn=()=>{ln(Jh,xn=>{xn.elm&&(o.unbind(xn.elm),delete xn.elm)})},Do=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Do(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Dr),n.on("keyup compositionend",xn=>{f&&f.nodeName==="TABLE"&&Dr(xn)}),n.on("hide blur",Wo),n.on("contextmenu longpress",Rn,!0)}),n.on("remove",Dn),{isResizable:fo,showResizeRect:xi,hideResizeRect:Wo,updateResizeRect:Dr,destroy:()=>{nn.cancel(),f=b=M=null}}},Dg=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},hS=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Qh=(e,n,o)=>{const r=e.document.createRange();return Dg(r,n),hS(r,o),r},Sb=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},xb=au.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Qy=(e,n,o)=>n(ve.fromDom(o.startContainer),o.startOffset,ve.fromDom(o.endContainer),o.endOffset),BE=(e,n)=>n.match({domRange:o=>({ltr:ge(o),rtl:R.none}),relative:(o,r)=>({ltr:eo(()=>Qh(e,o,r)),rtl:eo(()=>R.some(Qh(e,r,o)))}),exact:(o,r,c,u)=>({ltr:eo(()=>Sb(e,o,r,c,u)),rtl:eo(()=>R.some(Sb(e,c,u,o,r)))})}),PE=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>xb.rtl(ve.fromDom(c.endContainer),c.endOffset,ve.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>Qy(e,xb.ltr,o)):Qy(e,xb.ltr,o)},FE=(e,n)=>{const o=BE(e,n);return PE(e,o)};xb.ltr,xb.rtl;const jc={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Ef=(e,n,o)=>{var r,c;return R.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return R.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),R.some(f)})},SO=(e,n,o)=>{var r,c;return R.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},IE=(()=>document.caretPositionFromPoint?Ef:document.caretRangeFromPoint?SO:R.none)(),LE=(e,n,o)=>{const r=ve.fromDom(e.document);return IE(r,n,o).map(c=>jc.create(ve.fromDom(c.startContainer),c.startOffset,ve.fromDom(c.endContainer),c.endOffset))},ss=au.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),HE=(e,n,o,r)=>e.fold(n,o,r),pS=e=>e.fold(Ue,Ue,Ue),ew=ss.before,bS=ss.on,xO=ss.after,Od={before:ew,on:bS,after:xO,cata:HE,getStart:pS},Mv=au.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),kO=e=>Mv.exact(e.start,e.soffset,e.finish,e.foffset),TO=e=>e.match({domRange:n=>ve.fromDom(n.startContainer),relative:(n,o)=>Od.getStart(n),exact:(n,o,r,c)=>n}),vS=Mv.domRange,yS=Mv.relative,wS=Mv.exact,EO=e=>{const n=TO(e);return Tu(n)},_O=jc.create,_f={domRange:vS,relative:yS,exact:wS,exactFromRange:kO,getWin:EO,range:_O},tw=(e,n)=>{const o=oo(e);return o==="input"?Od.after(e):ae(["br","img"],o)?n===0?Od.before(e):Od.after(e):Od.on(e,n)},zE=(e,n)=>{const o=e.fold(Od.before,tw,Od.after),r=n.fold(Od.before,tw,Od.after);return _f.relative(o,r)},CS=(e,n,o,r)=>{const c=tw(e,n),u=tw(o,r);return _f.relative(c,u)},Eo=e=>e.match({domRange:n=>{const o=ve.fromDom(n.startContainer),r=ve.fromDom(n.endContainer);return CS(o,n.startOffset,r,n.endOffset)},relative:zE,exact:CS}),ep=(e,n)=>{const r=(n||document).createDocumentFragment();return z(e,c=>{r.appendChild(c.dom)}),ve.fromDom(r)},SS=e=>{const n=_f.getWin(e).dom,o=(c,u,f,b)=>Sb(n,c,u,f,b),r=Eo(e);return FE(n,r).match({ltr:o,rtl:o})},xS=(e,n,o)=>LE(e,n,o),Rg=(e,n,o)=>{const r=Tu(ve.fromDom(o));return xS(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},nw=(e,n)=>he(e)&&he(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,VE=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Nv=(e,n,o)=>VE(e,n,o)!==null,kS=(e,n,o)=>Nv(e,n,r=>r.nodeName===o),ow=(e,n)=>V(e)&&!Nv(e,n,Cl),TS=(e,n,o)=>{const r=n.parentNode;if(r){const c=new ba(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Wr(u))return!0}return!1},UE=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},$v=(e,n)=>{let o=n;for(;o&&o!==e;){if(cr(o))return!0;o=o.parentNode}return!1},kb=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,x;if(!b)return R.none();const M=e.getParent(b,e.isBlock)||u;if(r&&Wr(c)&&n&&e.isEmpty(M))return R.some(vt(b,e.nodeIndex(c)));const P=new ba(c,M);for(;x=P[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||ow(x,u))return R.none();if(qt(x)&&x.data.length>0)return kS(x,u,"A")?R.none():R.some(vt(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return R.none();y=x}return cl(y)?R.none():o&&y?R.some(vt(y,0)):R.none()},sw=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const x=Bn(b)&&y===b.childNodes.length,M=e.schema.getNonEmptyElements();let P=o;if(V(b))return R.none();if(Bn(b)&&y>b.childNodes.length-1&&(P=!1),ti(b)&&(b=c,y=0),b===c){if(P&&(u=b.childNodes[y>0?y-1:0],u&&(V(u)||M[u.nodeName]||Ya(u))))return R.none();if(b.hasChildNodes()){if(y=Math.min(!P&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=qt(b)&&x?b.data.length:0,!n&&b===c.lastChild&&Ya(b)||$v(c,b)||V(b))return R.none();if(b.hasChildNodes()&&!Ya(b)){u=b;const L=new ba(b,c);do{if(cr(u)||V(u)){f=!1;break}if(qt(u)&&u.data.length>0){y=P?0:u.data.length,b=u,f=!0;break}if(M[u.nodeName.toLowerCase()]&&!w1(u)){y=e.nodeIndex(u),b=u.parentNode,P||y++,f=!0;break}}while(u=P?L.next():L.prev())}}}return n&&(qt(b)&&y===0&&kb(e,x,n,!0,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),Bn(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&Wr(u)&&!UE(u,"A")&&!TS(e,u,!1)&&!TS(e,u,!0)&&kb(e,x,n,!0,u).each(L=>{b=L.container(),y=L.offset(),f=!0}))),P&&!n&&qt(b)&&y===b.data.length&&kb(e,x,n,!1,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),f&&b?R.some(vt(b,y)):R.none()},Bv=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=vt.fromRangeStart(n);return sw(e,o,!0,r).each(u=>{(!o||!vt.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||sw(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),nw(n,r)?R.none():R.some(r)},Pv=(e,n)=>e.splitText(n),Tb=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&qt(n)){if(o>0&&o<n.data.length)if(r=Pv(n,o),n=r.previousSibling,c>o){c=c-o;const u=Pv(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(qt(n)&&o>0&&o<n.data.length&&(n=Pv(n,o),o=0),qt(r)&&c>0&&c<r.data.length){const u=Pv(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Mg=e=>({walk:(u,f)=>vb(e,u,f),split:Tb,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=xf(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>Bv(e,u).fold(Nt,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Mg.compareRanges=nw,Mg.getCaretRangeFromPoint=Rg,Mg.getSelectedNode=Zp,Mg.getNode=lf;const Hs=((e,n)=>{const o=(b,y)=>{if(!it(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const x=b.dom;_i(x)&&(x.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const x=He(b,e);return parseFloat(x)||0}return y},c=r,u=(b,y)=>Pe(y,(x,M)=>{const P=He(b,M),L=P===void 0?0:parseInt(P,10);return isNaN(L)?x:x+L},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,x)=>{const M=u(b,x);return y>M?y-M:0}}})("height",e=>{const n=e.dom;return rl(e)?n.getBoundingClientRect().height:n.offsetHeight}),WE=e=>Hs.get(e),Af=()=>ve.fromDom(document),Dd=(e,n)=>e.view(n).fold(ge([]),r=>{const c=e.owner(r),u=Dd(e,c);return[r].concat(u)}),rw=(e,n)=>{const o=n.owner(e);return Dd(n,o)};var Eb=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?R.none():R.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ve.fromDom)},owner:e=>Ui(e)});const Fv=e=>{const n=Af(),o=uc(n),r=rw(e,Eb),c=Ho(e),u=Be(r,(f,b)=>{const y=Ho(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return Kf(u.left+c.left+o.left,u.top+c.top+o.top)},vm=e=>oo(e)==="textarea",cw=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),ZE=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},jE=(e,n)=>{const o=pa(e);if(o.length===0||vm(e))return{element:e,offset:n};if(n<o.length&&!vm(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return vm(r)?{element:e,offset:n}:oo(r)==="img"?{element:r,offset:1}:Ds(r)?{element:r,offset:tu(r).length}:{element:r,offset:pa(r).length}}},ES=(e,n)=>{const o=pr(e),r=WE(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Ss=(e,n)=>{const o=jE(e,n),r=ve.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+wr+"</span>");return os(o.element,r),ES(r,()=>Ps(r))},Wu=e=>ES(ve.fromDom(e),De),Ng=(e,n,o,r)=>{v(e,(c,u)=>m(e,n,o,r),o)},l=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(cw(e,u))return;const f=uc(n).top;o(n,f,r,c),ZE(e,u)},m=(e,n,o,r)=>{const c=ve.fromDom(e.getBody()),u=ve.fromDom(e.getDoc());to(c);const f=Ss(ve.fromDom(o.startContainer),o.startOffset);l(e,u,n,f,r),f.cleanup()},h=(e,n,o,r)=>{const c=ve.fromDom(e.getDoc());l(e,c,o,Wu(n),r)},v=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(ve.fromDom(r),ve.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},S=(e,n,o,r)=>{const c=e.pos;if(o)Jl(c.left,c.top,r);else{const u=c.top-n+e.height;Jl(c.left,u,r)}},O=(e,n,o,r,c)=>{const u=o+n,f=r.pos.top,b=r.bottom,y=b-f>=o;f<n?S(r,o,c!==!1,e):f>u?S(r,o,y?c!==!1:c===!0,e):b>u&&!y&&S(r,o,c===!0,e)},F=(e,n,o,r)=>{const c=Tu(e).dom.innerHeight;O(e,n,c,o,r)},G=(e,n,o,r)=>{const c=Tu(e).dom.innerHeight;O(e,n,c,o,r);const u=Fv(o.element),f=p1(window);u.top<f.y?_u(o.element,r!==!1):u.top>f.bottom&&_u(o.element,r===!0)},oe=(e,n,o)=>Ng(e,F,n,o),we=(e,n,o)=>h(e,n,F,o),je=(e,n,o)=>Ng(e,G,n,o),zt=(e,n,o)=>h(e,n,G,o),bn=(e,n,o)=>{(e.inline?we:zt)(e,n,o)},on=(e,n,o)=>{(e.inline?oe:je)(e,n,o)},kt=e=>e.dom.focus(),Cn=e=>{const n=sl(e).dom;return e.dom===n.activeElement},At=(e=Af())=>R.from(e.dom.activeElement).map(ve.fromDom),Xn=e=>At(sl(e)).filter(n=>e.dom.contains(n.dom)),_o=(e,n)=>{const o=Ds(n)?tu(n).length:pa(n).length+1;return e>o?o:e<0?0:e},Vo=e=>_f.range(e.start,_o(e.soffset,e.start),e.finish,_o(e.foffset,e.finish)),Or=(e,n)=>!Gm(n.dom)&&(qa(e,n)||Bs(e,n)),hc=e=>n=>Or(e,n.start)&&Or(e,n.finish),ua=e=>e.inline||us.browser.isFirefox(),Bi=e=>_f.range(ve.fromDom(e.startContainer),e.startOffset,ve.fromDom(e.endContainer),e.endOffset),Of=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?R.none():R.from(n.getRangeAt(0))).map(Bi)},_b=e=>{const n=Tu(e);return Of(n.dom).filter(hc(e))},Iv=(e,n)=>R.from(n).filter(hc(e)).map(Vo),Lv=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),R.some(n)}catch{return R.none()}},Ks=e=>{const n=ua(e)?_b(ve.fromDom(e.getBody())):R.none();e.bookmark=n.isSome()?n:e.bookmark},Rc=e=>(e.bookmark?e.bookmark:R.none()).bind(o=>Iv(ve.fromDom(e.getBody()),o)).bind(Lv),Mc=e=>{Rc(e).each(n=>e.selection.setRng(n))},Ji={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},tp=(e,n)=>(it(n)||(n=0),setTimeout(e,n)),ii=(e,n)=>(it(n)||(n=0),setInterval(e,n)),Pi={setEditorTimeout:(e,n,o)=>tp(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=ii(()=>{e.removed?clearInterval(r):n()},o);return r}},np=e=>e.type==="nodechange"&&e.selectionChange,ju=(e,n)=>{const o=()=>{n.throttle()};br.DOM.bind(document,"mouseup",o),e.on("remove",()=>{br.DOM.unbind(document,"mouseup",o)})},Nc=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},GE=(e,n)=>{Nc(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{np(o)||Ks(e)})},qE=e=>{const n=_h(()=>{Ks(e)},0);e.on("init",()=>{e.inline&&ju(e,n),GE(e,n)}),e.on("remove",()=>{n.cancel()})};let op;const iw=br.DOM,KE=e=>Bn(e)&&Ji.isEditorUIElement(e),lw=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Hv=(e,n)=>{const o=E2(e);return iw.getParent(n,c=>KE(c)||(o?e.dom.is(c,o):!1))!==null},Ab=e=>{try{const n=sl(ve.fromDom(e.getElement()));return At(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},_S=(e,n)=>{const o=n.editor;qE(o),o.on("focusin",()=>{const r=e.focusedEditor;r!==o&&(r&&r.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:r}),o.focus(!0))}),o.on("focusout",()=>{Pi.setEditorTimeout(o,()=>{const r=e.focusedEditor;!Hv(o,Ab(o))&&r===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),op||(op=r=>{const c=e.activeEditor;c&&ah(r).each(u=>{const f=u;f.ownerDocument===document&&f!==document.body&&!Hv(c,f)&&e.focusedEditor===c&&(c.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},iw.bind(document,"focusin",op))},OO=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&op&&(iw.unbind(document,"focusin",op),op=null)},AF=e=>{e.on("AddEditor",Ae(_S,e)),e.on("RemoveEditor",Ae(OO,e))},DO=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),RO=e=>e.collapsed?R.from(lf(e.startContainer,e.startOffset)).map(ve.fromDom):R.none(),OF=(e,n)=>RO(n).bind(o=>Gd(o)?R.some(o):qa(e,o)?R.none():R.some(e)),MO=(e,n)=>{OF(ve.fromDom(e.getBody()),n).bind(o=>$i(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},YE=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},DF=e=>Cn(e)||Xn(e).isSome(),RF=e=>he(e.iframeElement)&&Cn(ve.fromDom(e.iframeElement)),AS=e=>{const n=e.getBody();return n&&DF(ve.fromDom(n))},MF=e=>{const n=sl(ve.fromDom(e.getElement()));return At(n).filter(o=>!lw(o.dom)&&Hv(e,o.dom)).isSome()},Ob=e=>e.inline?AS(e):RF(e),XE=e=>Ob(e)||MF(e),NF=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),he(e.bookmark)&&!Ob(e)&&Rc(e).each(u=>{e.selection.setRng(u),r=u});const c=DO(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){YE(c),MO(e,r),OS(e);return}e.inline||(us.browser.isOpera()||YE(o),e.getWin().focus()),(us.browser.isFirefox()||e.inline)&&(YE(o),MO(e,r)),OS(e)},OS=e=>e.editorManager.setActive(e),NO=(e,n)=>{e.removed||(n?OS(e):NF(e))},JE=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return R.from(u).map(ve.fromDom).map(b=>!r||!n.collapsed?jd(b,c(b,f)).getOr(b):b).bind(b=>Qo(b)?R.some(b):Cc(b).filter(Qo)).map(b=>b.dom).getOr(e)},$O=(e,n,o=!1)=>JE(e,n,!0,o,(r,c)=>Math.min(Eu(r),c)),BO=(e,n,o=!1)=>JE(e,n,!1,o,(r,c)=>c>0?c-1:c),PO=(e,n)=>{const o=e;for(;e&&qt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},$F=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),qt(o)&&qt(r)&&(o.length===c?o=PO(o.nextSibling,!0):o=o.parentNode,u===0?r=PO(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=qt(f)?f.parentNode:f;return Bn(b)?b:e},DS=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||$O(u,n,n.collapsed),e.isBlock),b=e.getParent(r||BO(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y=f;const x=new ba(f,u);for(;(y=x.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},FO=(e,n,o)=>R.from(n).bind(r=>R.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(wv(e,f,r,!0),wv(e,f,r,!1)),f})),RS=(e,n)=>re(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),IO=e=>oo(e)==="img"?1:gi(e).fold(()=>pa(e).length,n=>n.length),LO=e=>gi(e).filter(n=>n.trim().length!==0||n.indexOf(aa)>-1).isSome(),BF=["img","br"],HO=e=>LO(e)||ae(BF,oo(e)),PF=e=>md(e,HO),FF=e=>IF(e,HO),IF=(e,n)=>{const o=r=>{const c=pa(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return R.some(f);const b=o(f);if(b.isSome())return b}return R.none()};return o(e)},zO="[data-mce-autocompleter]",LF=(e,n)=>{if(VO(ve.fromDom(e.getBody())).isNone()){const o=ve.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());ea(o,ve.fromDom(n.extractContents())),n.insertNode(o.dom),Cc(o).each(r=>r.dom.normalize()),FF(o).map(r=>{e.selection.setCursorLocation(r.dom,IO(r))})}},HF=e=>fd(e,zO),VO=e=>Yf(e,zO),zF=(e,n)=>VO(n).each(o=>{const r=e.selection.getBookmark();lc(o),e.selection.moveToBookmark(r)}),VF={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},MS=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},NS=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Dl(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},QE=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Qi{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new Qi(n,VF[n]||1);return o&&ln(o,(c,u)=>{r.attr(u,c)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!te(n))return he(n)&&ln(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Qi(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=MS(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=MS(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(QE(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||QE(f))return!1}if(f.type===8||f.type===3&&!NS(f)||f.type===3&&f.parent&&o[f.parent.name]&&Dl((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=MS(f,u));return!0}walk(n){return MS(this,null,n)}}const UF=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),UO=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&UF(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},WF=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const y=r.exec(n);if(y===null)return b;if(y[1]==="!"){Co(y[2],"--")?b=UO(n,!1,y.index+3):b=UO(n,!0,y.index+1);break}else{c.lastIndex=r.lastIndex;const x=c.exec(n);if(K(x)||x.index!==r.lastIndex)continue;y[1]==="/"?f-=1:go(u,y[2])||(f+=1),b=r.lastIndex+x[0].length;break}}return b},ZF=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},WO=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=ZF(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,y=f[0].length;let x;u[f[1]]?x=b:x=WF(r,c,b),c=c.substring(0,b-y)+c.substring(x),o.lastIndex=b-y}return Oa(c)},jF=WO,e_=e=>{const n=Ms(e,"[data-mce-bogus]");z(n,o=>{Lr(o,"data-mce-bogus")==="all"?Ps(o):nu(o)?(os(o,ve.fromText(Ym)),Ps(o)):lc(o)})},ZO=e=>{const n=Ms(e,"input");z(n,o=>{qr(o,"name")})},jO=(e,n)=>{const o=vl(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s|Â |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},GO=(e,n)=>{const o=e.getDoc(),r=sl(ve.fromDom(e.getBody())),c=ve.fromTag("div",o);or(c,"data-mce-bogus","all"),Se(c,{position:"fixed",left:"-9999999px",top:"0"}),ch(c,n.innerHTML),e_(c),ZO(c);const u=Yl(r);ea(u,c);const f=Oa(c.dom.innerText);return Ps(c),f},GF=(e,n,o)=>{let r;return n.format==="raw"?r=Pt.trim(jF(e.serializer,o.innerHTML)):n.format==="text"?r=GO(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=jO(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Jf(ve.fromDom(o))&&te(r)?Pt.trim(r):r},qF=(e,n)=>R.from(e.getBody()).fold(ge(n.format==="tree"?new Qi("body",11):""),o=>GF(e,n,o)),qO=Pt.makeMap,KO=e=>{const n=[];e=e||{};const o=e.indent,r=qO(e.indent_before||""),c=qO(e.indent_after||""),u=Qa.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,x)=>{if(o&&r[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let M=0,P=y.length;M<P;M++){const L=y[M];n.push(" ",L.name,'="',u(L.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&c[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},sp=(e={},n=Bu())=>{const o=KO(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var x;o.text((x=y.value)!==null&&x!==void 0?x:"",y.raw)},8:y=>{var x;o.comment((x=y.value)!==null&&x!==void 0?x:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var x;o.doctype((x=y.value)!==null&&x!==void 0?x:"")},4:y=>{var x;o.cdata((x=y.value)!==null&&x!==void 0?x:"")},11:y=>{let x=y;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=y=>{var x;const M=f[y.type];if(M)M(y);else{const P=y.name,L=P in n.getVoidElements();let ce=y.attributes;if(u&&ce&&ce.length>1){const ie=[];ie.map={};const ee=n.getElementRule(y.name);if(ee){for(let ue=0,Ne=ee.attributesOrder.length;ue<Ne;ue++){const Oe=ee.attributesOrder[ue];if(Oe in ce.map){const Ge=ce.map[Oe];ie.map[Oe]=Ge,ie.push({name:Oe,value:Ge})}}for(let ue=0,Ne=ce.length;ue<Ne;ue++){const Oe=ce[ue].name;if(!(Oe in ie.map)){const Ge=ce.map[Oe];ie.map[Oe]=Ge,ie.push({name:Oe,value:Ge})}}ce=ie}}if(o.start(P,ce,L),!L){let ie=y.firstChild;if(ie){(P==="pre"||P==="textarea")&&ie.type===3&&((x=ie.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(ie);while(ie=ie.next)}o.end(P)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},YO=new Set;z(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{YO.add(n)});const XO=["font","text-decoration","text-emphasis"],t_=(e,n)=>Le(e.parseStyle(e.getAttrib(n,"style"))),KF=e=>YO.has(e),YF=(e,n)=>kn(t_(e,n),o=>!KF(o)),XF=e=>Z(e,n=>se(XO,o=>Co(n,o))),JF=(e,n,o)=>{const r=t_(e,n),c=t_(e,o),u=f=>{var b,y;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",M=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return Cs(x)&&Cs(M)&&x!==M};return se(r,f=>{const b=y=>se(y,x=>x===f);if(!b(c)&&b(XO)){const y=XF(c);return se(y,u)}else return u(f)})},JO=(e,n,o)=>R.from(o.container()).filter(qt).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),n_=Ae(JO,!0,Dc),o_=Ae(JO,!1,Dc),QF=e=>{const n=e.container();return qt(n)&&(n.data.length===0||ll(n.data)&&Vu.isBookmarkNode(n.parentNode))},rp=(e,n)=>o=>dv(e?0:-1,o).filter(n).isSome(),QO=e=>_a(e)&&He(ve.fromDom(e),"display")==="block",eD=e=>cr(e)&&!dT(e),ho=rp(!0,QO),tD=rp(!1,QO),zv=rp(!0,Ql),uw=rp(!1,Ql),$S=rp(!0,Ya),nD=rp(!1,Ya),ap=rp(!0,eD),cp=rp(!1,eD),e5=e=>e.slice(0,-1),t5=(e,n,o)=>qa(n,e)?e5(id(e,r=>o(r)||Bs(r,n))):[],dw=(e,n)=>t5(e,n,Nt),Df=(e,n)=>[e].concat(dw(e,n)),oD=(e,n,o)=>hv(e,n,o,QF),sD=(e,n)=>rn(Df(ve.fromDom(n.container()),e),va),zo=(e,n,o)=>oD(e,n.dom,o).forall(r=>sD(n,o).fold(()=>!Hu(r,o,n.dom),c=>!Hu(r,o,n.dom)&&qa(c,ve.fromDom(r.container())))),rD=(e,n,o)=>sD(n,o).fold(()=>oD(e,n.dom,o).forall(r=>!Hu(r,o,n.dom)),r=>oD(e,r.dom,o).isNone()),fs=Ae(rD,!1),s_=Ae(rD,!0),bU=Ae(zo,!1),vU=Ae(zo,!0),n5=e=>Hh(e).exists(nu),r_=(e,n,o)=>{const r=Z(Df(ve.fromDom(o.container()),n),va),c=On(r).getOr(n);return yl(e,c.dom,o).filter(n5)},aD=(e,n)=>Hh(n).exists(nu)||r_(!0,e,n).isSome(),a_=(e,n)=>Wc(n).exists(nu)||r_(!1,e,n).isSome(),o5=Ae(r_,!1),Oo=Ae(r_,!0),cD=e=>vt.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),iD=(e,n)=>{const o=Z(Df(ve.fromDom(n.container()),e),va);return On(o).getOr(e)},lD=(e,n)=>cD(n)?o_(n):o_(n)||wl(iD(e,n).dom,n).exists(o_),Vv=(e,n)=>cD(n)?n_(n):n_(n)||Ci(iD(e,n).dom,n).exists(n_),uD=e=>ae(["pre","pre-wrap"],e),c_=e=>Hh(e).bind(n=>Al(n,Qo)).exists(n=>uD(He(n,"white-space"))),s5=(e,n)=>wl(e.dom,n).isNone(),r5=(e,n)=>Ci(e.dom,n).isNone(),dD=(e,n)=>s5(e,n)||r5(e,n)||fs(e,n)||s_(e,n)||a_(e,n)||aD(e,n),a5=e=>he(e)&&cr(e)&&uv(e),c5=(e,n)=>o=>a5(new ba(o,e)[n]()),yU=(e,n)=>{const o=Ci(e.dom,n).getOr(n),r=c5(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},i5=(e,n)=>{const o=wl(e.dom,n).getOr(n),r=c5(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},l5=(e,n)=>c_(n)?!1:dD(e,n)||lD(e,n)||Vv(e,n),mw=(e,n)=>c_(n)?!1:fs(e,n)||bU(e,n)||a_(e,n)||lD(e,n)||i5(e,n),u5=e=>{const n=e.container(),o=e.offset();return qt(n)&&o<n.data.length?vt(n,o+1):e},Uv=(e,n)=>c_(n)?!1:s_(e,n)||vU(e,n)||aD(e,n)||Vv(e,n)||yU(e,n),i_=(e,n)=>mw(e,n)||Uv(e,u5(n)),Es=(e,n)=>Wh(e.charAt(n)),l_=(e,n)=>Dc(e.charAt(n)),BS=e=>{const n=e.container();return qt(n)&&no(n.data,aa)},mD=e=>{const n=e.split("");return re(n,(o,r)=>Wh(o)&&r>0&&r<n.length-1&&yv(n[r-1])&&yv(n[r+1])?" ":o).join("")},u_=(e,n,o)=>{const r=n.data,c=vt(n,0);return!o&&Es(r,0)&&!i_(e,c)?(n.data=" "+r.slice(1),!0):o&&l_(r,0)&&mw(e,c)?(n.data=aa+r.slice(1),!0):!1},fD=e=>{const n=e.data,o=mD(n);return o!==n?(e.data=o,!0):!1},d_=(e,n,o)=>{const r=n.data,c=vt(n,r.length-1);return!o&&Es(r,r.length-1)&&!i_(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&l_(r,r.length-1)&&Uv(e,c)?(n.data=r.slice(0,-1)+aa,!0):!1},gD=(e,n)=>{const o=n.container();if(!qt(o))return R.none();if(BS(n)){const r=u_(e,o,!1)||fD(o)||d_(e,o,!1);return Po(r,n)}else if(i_(e,n)){const r=u_(e,o,!0)||d_(e,o,!0);return Po(r,n)}else return R.none()},d5=e=>{const n=ve.fromDom(e.getBody());e.selection.isCollapsed()&&gD(n,vt.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},m_=(e,n,o)=>{if(o===0)return;const r=ve.fromDom(e),c=jm(r,va).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&Uv(c,vt(e,e.data.length)),b=n===0&&mw(c,vt(e,0));e.replaceData(n,o,Op(u,4,b,f))},PS=(e,n)=>{const o=e.data.slice(n),r=o.length-Kc(o).length;m_(e,n,r)},f_=(e,n)=>{const o=e.data.slice(0,n),r=o.length-ls(o).length;m_(e,n-r,r)},g_=(e,n,o,r=!0)=>{const c=ls(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Ps(ve.fromDom(f)),o&&PS(u,c),u},m5=(e,n)=>{const o=e.container(),r=e.offset();return!vt.isTextPosition(e)&&o===n.parentNode&&r>vt.before(n).offset()},f5=(e,n)=>m5(n,e)?vt(n.container(),n.offset()-1):n,g5=e=>qt(e)?vt(e,0):vt.before(e),h5=e=>qt(e)?vt(e,e.data.length):vt.after(e),hD=e=>bi(e.previousSibling)?R.some(h5(e.previousSibling)):e.previousSibling?Td(e.previousSibling):R.none(),FS=e=>bi(e.nextSibling)?R.some(g5(e.nextSibling)):e.nextSibling?$i(e.nextSibling):R.none(),h_=(e,n)=>R.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>wl(e,vt.before(o))).orThunk(()=>Ci(e,vt.after(n))),p5=(e,n)=>Ci(e,vt.after(n)).orThunk(()=>wl(e,vt.before(n))),b5=(e,n)=>hD(n).orThunk(()=>FS(n)).orThunk(()=>h_(e,n)),v5=(e,n)=>FS(n).orThunk(()=>hD(n)).orThunk(()=>p5(e,n)),y5=(e,n,o)=>e?v5(n,o):b5(n,o),w5=(e,n,o)=>y5(e,n,o).map(Ae(f5,o)),pD=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},C5=e=>n=>n.dom===e,S5=(e,n)=>n&&go(e.schema.getBlockElements(),oo(n)),bD=e=>{if(ya(e)){const n=ve.fromHtml('<br data-mce-bogus="1">');return Hr(e),ea(e,n),R.some(vt.before(n.dom))}else return R.none()},x5=(e,n,o)=>{const r=Ic(e).filter(Ds),c=Zd(e).filter(Ds);return Ps(e),nl(r,c,n,(u,f,b)=>{const y=u.dom,x=f.dom,M=y.data.length;return g_(y,x,o),b.container()===x?vt(y,M):b}).orThunk(()=>(o&&(r.each(u=>f_(u.dom,u.dom.length)),c.each(u=>PS(u.dom,0))),n))},k5=(e,n)=>go(e.schema.getTextInlineElements(),oo(n)),Gu=(e,n,o,r=!0)=>{const c=w5(n,e.getBody(),o.dom),u=jm(o,Ae(S5,e),C5(e.getBody())),f=x5(o,c,k5(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(bD).fold(()=>{r&&pD(e,n,f)},b=>{r&&pD(e,n,R.some(b))})},T5=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,vD=e=>T5.test(e),Db=(e,n)=>Oi(ve.fromDom(n),T2(e))&&!ng(e.schema,n),E5=e=>{var n;return br.DOM.getStyle(e,"direction",!0)==="rtl"||vD((n=e.textContent)!==null&&n!==void 0?n:"")},yD=(e,n,o)=>Z(br.DOM.getParents(o.container(),"*",n),e),$g=(e,n,o)=>{const r=yD(e,n,o);return R.from(r[r.length-1])},wD=(e,n,o)=>{const r=bf(n,e),c=bf(o,e);return he(r)&&r===c},CD=e=>Kt(e)||Mn(e),na=(e,n)=>{const o=n.container(),r=n.offset();return e?I(o)?qt(o.nextSibling)?vt(o.nextSibling,0):vt.after(o):Kt(n)?vt(o,r+1):n:I(o)?qt(o.previousSibling)?vt(o.previousSibling,o.previousSibling.data.length):vt.before(o):Mn(n)?vt(o,r-1):n},SD=Ae(na,!0),xD=Ae(na,!1),kD=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},_5=e=>{e.execCommand("delete")},TD=e=>kD(e,"Delete"),Rb=e=>kD(e,"ForwardDelete"),A5=e=>n=>ra(Cc(n),e,Bs),O5=e=>hi(e)||ji(e),Yr=(e,n)=>qa(e,n)?Al(n,O5,A5(e)):R.none(),Wv=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},wU=(e,n,o)=>Ur($i(o),Td(o),(r,c)=>{const u=na(!0,r),f=na(!1,c),b=na(!1,n);return e?Ci(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):wl(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),el=e=>(zi(e)?Ic(e):zm(e)).bind(el).orThunk(()=>R.some(e)),Cr=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=el(o).getOr(o),f=ve.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Wv(e,r):ya(f)&&(Aa(f),r&&e.selection.setCursorLocation(f.dom,0)),!Bs(o,f)){const b=ra(Cc(f),o)?[]:nh(f);z(b.concat(pa(o)),y=>{!Bs(y,f)&&!qa(y,f)&&ya(y)&&Ps(y)})}},Rd=e=>n=>Bs(e,n),p_=e=>Ms(e,"td,th"),ED=(e,n)=>{const o=x=>kg(ve.fromDom(x),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=Ur(r,c,Bs).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},fw=(e,n)=>({start:e,end:n}),b_=(e,n,o)=>({rng:e,table:n,cells:o}),Zv=au.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),gw=(e,n)=>fd(ve.fromDom(e),"td,th",n),_D=e=>!Bs(e.start,e.end),AD=(e,n)=>kg(e.start,n).bind(o=>kg(e.end,n).bind(r=>Po(Bs(o,r),o))),v_=(e,n)=>!_D(e)&&AD(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),OD=(e,n)=>{const o=gw(e.startContainer,n),r=gw(e.endContainer,n);return Ur(o,r,fw)},ym=e=>n=>kg(n,e).bind(o=>Tn(p_(o)).map(r=>fw(n,r))),D5=e=>n=>kg(n,e).bind(o=>On(p_(o)).map(r=>fw(r,n))),y_=e=>n=>AD(n,e).map(o=>b_(n,o,p_(o))),R5=(e,n,o,r)=>{if(o.collapsed||!e.forall(_D))return R.none();if(n.isSameTable){const c=e.bind(y_(r));return R.some({start:c,end:c})}else{const c=gw(o.startContainer,r),u=gw(o.endContainer,r),f=c.bind(ym(r)).bind(y_(r)),b=u.bind(D5(r)).bind(y_(r));return R.some({start:f,end:b})}},IS=(e,n)=>ro(e,o=>Bs(o,n)),w_=e=>Ur(IS(e.cells,e.rng.start),IS(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),hw=(e,n,o)=>e.exists(r=>v_(r,o)&&Hy(r.start,n)),DD=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},jv=(e,n,o,r)=>R5(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=w_(c).getOr([]);if(u&&c.cells.length===f.length)return R.some(Zv.fullTable(c.table));if(f.length>0){if(u)return R.some(Zv.partialTable(f,R.none()));{const b=DD(o,n);return R.some(Zv.partialTable(f,R.some({...n,rng:b})))}}else return R.none()}),qu=(e,n,o,r)=>R5(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(w_).getOr([]),b=u.bind(w_).getOr([]);if(f.length>0&&b.length>0){const y=DD(o,n);return R.some(Zv.multiTable(f,b,y))}else return R.none()}),pw=(e,n)=>{const o=Rd(e),r=OD(n,o),c=ED(n,o);return hw(r,n,o)?r.map(u=>Zv.singleCellTable(n,u.start)):c.isMultiTable?qu(r,c,n,o):jv(r,c,n,o)},Sr=e=>z(e,n=>{qr(n,"contenteditable"),Aa(n)}),bw=(e,n)=>R.from(e.dom.getParent(n,e.dom.isBlock)).map(ve.fromDom),RD=(e,n,o)=>{o.each(r=>{n?Ps(r):(Aa(r),e.selection.setCursorLocation(r.dom,0))})},LS=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),vw(e,c,n,!1).each(u=>u())},HS=e=>{const n=yf(e),o=ve.fromDom(e.selection.getNode());Du(o.dom)&&ya(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&se(n,r=>Bs(r,o))&&or(o,"data-mce-selected","1")},zS=(e,n,o)=>R.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=bw(e,f?u.endContainer:u.startContainer);u.deleteContents(),RD(e,f,b.filter(ya));const y=f?n[0]:n[n.length-1];return LS(e,y,r,f),ya(y)?R.none():R.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);Sr(c),HS(e)}),C_=(e,n,o,r)=>R.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];LS(e,u,c,!0),LS(e,f,c,!1);const b=ya(u)?n:n.slice(1),y=ya(f)?o:o.slice(0,-1);Sr(b.concat(y)),r.deleteContents(),HS(e)}),vw=(e,n,o,r=!0)=>R.some(()=>{Cr(e,n,o,r)}),VS=(e,n)=>R.some(()=>Gu(e,!1,n)),S_=(e,n,o)=>pw(n,o).bind(r=>r.fold(Ae(vw,e),Ae(VS,e),Ae(zS,e),Ae(C_,e))),MD=(e,n)=>yw(e,n),ND=(e,n,o,r)=>US(n,r).fold(()=>S_(e,n,o),c=>MD(e,c)),$D=(e,n,o)=>{const r=ve.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?zS(e,o,R.none()):ND(e,r,c,n)},x_=(e,n)=>rn(Df(n,e),Ja),US=(e,n)=>rn(Df(n,e),Vi("caption")),Gv=(e,n,o,r,c)=>Uh(o,e.getBody(),c).bind(u=>x_(n,ve.fromDom(u.getNode())).bind(f=>Bs(f,r)?R.none():R.some(De))),yw=(e,n)=>R.some(()=>{Aa(n),e.selection.setCursorLocation(n.dom,0)}),k_=(e,n,o,r)=>$i(e.dom).bind(c=>Td(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),M5=(e,n)=>yw(e,n),N5=(e,n,o)=>US(e,ve.fromDom(o.getNode())).fold(()=>R.some(De),r=>Po(!Bs(r,n),De)),BD=(e,n,o,r,c)=>Uh(o,e.getBody(),c).fold(()=>R.some(De),u=>k_(r,o,c,u)?M5(e,r):N5(n,r,u)),PD=(e,n,o,r)=>{const c=vt.fromRangeStart(e.selection.getRng());return x_(o,r).bind(u=>ya(u)?yw(e,u):Gv(e,o,n,u,c))},FD=(e,n,o,r)=>{const c=vt.fromRangeStart(e.selection.getRng());return ya(r)?yw(e,r):BD(e,o,n,r,c)},ww=(e,n)=>e?$S(n):nD(n),ID=(e,n)=>{const o=vt.fromRangeStart(e.selection.getRng());return ww(n,o)||yl(n,e.getBody(),o).exists(r=>ww(n,r))},LD=(e,n,o)=>{const r=ve.fromDom(e.getBody());return US(r,o).fold(()=>PD(e,n,r,o).orThunk(()=>Po(ID(e,n),De)),c=>FD(e,n,r,c))},WS=(e,n)=>{const o=ve.fromDom(e.selection.getStart(!0)),r=yf(e);return e.selection.isCollapsed()&&r.length===0?LD(e,n,o):$D(e,o,r)},ip=(e,n)=>{let o=n;for(;o&&o!==e;){if(ni(o)||cr(o))return o;o=o.parentNode}return null},HD=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],zD=Pt.each,ZS=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const M={};return zD(n.getAttribs(x),P=>{const L=P.nodeName.toLowerCase();L!=="style"&&!c(L)&&(M[L]=n.getAttrib(x,L))}),M},y=(x,M)=>{for(const P in x)if(go(x,P)){const L=M[P];if(En(L)||x[P]!==L)return!1;delete M[P]}for(const P in M)if(go(M,P))return!1;return!0};return Bn(u)&&Bn(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Oc(u)&&!Oc(f)},c=u=>se(HD,f=>Co(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},VD=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},T_=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const x=r.attributes[y];x?x.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},UD=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&VD(o,c=>{T_(e,n,c,r)}),r},E_=(e,n)=>{const o=(r,c)=>{ln(r,u=>{const f=Ro(u.nodes);z(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const x=f[y];(!(c?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||St(x.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},__=(e,n,o,r={})=>{const c=UD(e,n,o);E_(c,r)},jS=(e,n,o)=>{if(e.insert&&n(o)){const r=new Qi("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Qi("#text",3)).value=aa},WD=e=>{var n;return GS(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===aa},GS=(e,n)=>{const o=e==null?void 0:e.firstChild;return he(o)&&o===e.lastChild&&o.name===n},qS=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},qv=(e,n,o,r)=>r.isEmpty(n,o,c=>qS(e,c)),ZD=(e,n)=>he(e)&&(n(e)||e.name==="br"),Kv=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Kv(c,n,o);e.unwrap()}},Cw=(e,n,o=De)=>{const r=n.getTextBlockElements(),c=n.getNonEmptyElements(),u=n.getWhitespaceElements(),f=Pt.makeMap("tr,td,th,tbody,thead,tfoot,table"),b=new Set;for(let y=0;y<e.length;y++){const x=e[y];let M,P,L;if(!x.parent||b.has(x))continue;if(r[x.name]&&x.parent.name==="li"){let ie=x.next;for(;ie&&r[ie.name];){ie.name="li",b.add(ie),x.parent.insert(ie,x.parent);ie=ie.next}x.unwrap();continue}const ce=[x];for(M=x.parent;M&&!n.isValidChild(M.name,x.name)&&!f[M.name];M=M.parent)ce.push(M);if(M&&ce.length>1)if(n.isValidChild(M.name,x.name)){ce.reverse(),P=ce[0].clone(),o(P);let ie=P;for(let ee=0;ee<ce.length-1;ee++){n.isValidChild(ie.name,ce[ee].name)?(L=ce[ee].clone(),o(L),ie.append(L)):L=ie;for(let ue=ce[ee].firstChild;ue&&ue!==ce[ee+1];){const Ne=ue.next;L.append(ue),ue=Ne}ie=L}qv(n,c,u,P)?M.insert(x,ce[0],!0):(M.insert(P,ce[0],!0),M.insert(x,P)),M=ce[0],(qv(n,c,u,M)||GS(M,"br"))&&M.empty().remove()}else Kv(x,n);else if(x.parent){if(x.name==="li"){let ie=x.prev;if(ie&&(ie.name==="ul"||ie.name==="ol")){ie.append(x);continue}if(ie=x.next,ie&&(ie.name==="ul"||ie.name==="ol")&&ie.firstChild){ie.insert(x,ie.firstChild,!0);continue}const ee=new Qi("ul",1);o(ee),x.wrap(ee);continue}if(n.isValidChild(x.parent.name,"div")&&n.isValidChild("div",x.name)){const ie=new Qi("div",1);o(ie),x.wrap(ie)}else Kv(x,n)}}},Sw=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},KS=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&Sw(o,"a")),jD=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},xw=e=>{const n=vt.fromRangeStart(e),o=vt.fromRangeEnd(e),r=e.commonAncestorContainer;return yl(!1,r,o).map(c=>!Hu(n,o,r)&&Hu(n,c,r)?jD(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},kw=e=>e.collapsed?e:xw(e),A_=e=>he(e.firstChild)&&e.firstChild===e.lastChild,Tw=e=>e.name==="br"||e.value===aa,GD=(e,n)=>e.getBlockElements()[n.name]&&A_(n)&&Tw(n.firstChild),$5=(e,n)=>{const o=e.getNonEmptyElements();return he(n)&&(n.isEmpty(o)||GD(e,n))},qD=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),$5(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},KD=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},B5=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return KD(c)},CU=e=>{var n;return Z((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},P5=e=>e.data===aa||Wr(e),O_=e=>he(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&P5(e.firstChild),wm=e=>!e.firstChild||O_(e),D_=e=>e.length>0&&wm(e[e.length-1])?e.slice(0,-1):e,Yv=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},R_=(e,n)=>!!Yv(e,n),F5=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},YD=(e,n)=>{const o=vt.before(e),c=gm(n).next(o);return c?c.toRange():null},XD=(e,n)=>{const o=vt.after(e),c=gm(n).prev(o);return c?c.toRange():null},JD=(e,n,o,r)=>{const c=F5(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Pt.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),XD(n[n.length-1],o)},M_=(e,n,o)=>{const r=e.parentNode;return r&&Pt.each(n,c=>{r.insertBefore(c,e)}),YD(e,o)},I5=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),XD(n[0],o)),QD=(e,n,o,r)=>{const c=B5(n,e,r),u=Yv(n,o.startContainer),f=D_(CU(c.firstChild)),b=1,y=2,x=n.getRoot(),M=P=>{const L=vt.fromRangeStart(o),ce=gm(n.getRoot()),ie=P===b?ce.prev(L):ce.next(L),ee=ie==null?void 0:ie.getNode();return ee?Yv(n,ee)!==u:!0};return u?M(b)?M_(u,f,x):M(y)?I5(u,f,x,n):JD(u,f,x,o):null},L5=["pre"],Ew=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,x=ae(L5,u.name);if(y&&x){const M=u.attr("contenteditable")!=="false",P=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,L=R.from(ip(r,o)).forall(ni);return M&&P&&L}else return!1},YS=Du,H5=(e,n,o)=>{if(he(o)){const r=e.getParent(n.endContainer,YS);return o===r&&Hy(ve.fromDom(o),n)}else return!1},eR=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},z5=(e,n)=>{R.from(e.getParent(n,"td,th")).map(ve.fromDom).each(S1)},V5=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=ZS(e);Pt.each(r.select("*[data-mce-fragment]"),f=>{if(he(o[f.nodeName.toLowerCase()])&&YF(r,f)){for(let y=f.parentElement;he(y)&&y!==c&&!JF(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},U5=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},W5=e=>{Pt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},Z5=e=>!!e.getAttribute("data-mce-fragment"),tR=(e,n)=>he(n)&&!e.schema.getVoidElements()[n.nodeName],j5=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=ip(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let x=f.createRng();const M=n.previousSibling;if(qt(M)){x.setStart(M,(r=(o=M.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const ce=n.nextSibling;qt(ce)&&(M.appendData(ce.data),(c=ce.parentNode)===null||c===void 0||c.removeChild(ce))}else x.setStartBefore(n),x.setEndBefore(n);const P=ce=>{let ie=vt.fromRangeStart(ce);return ie=gm(e.getBody()).next(ie),ie==null?void 0:ie.toRange()},L=f.getParent(n,f.isBlock);f.remove(n),L&&f.isEmpty(L)&&(Hr(ve.fromDom(L)),x.setStart(L,0),x.setEnd(L,0),!YS(L)&&!Z5(L)&&(u=P(x))?(x=u,f.remove(L)):f.add(L,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(x)},N_=e=>{const n=e.dom,o=kw(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,YS);H5(n,o,r)?vw(e,o,ve.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&qt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},Mb=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,x=sp({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M);let P=u.getRng();const L=P.startContainer,ce=e.getBody();L===ce&&u.isCollapsed()&&f.isBlock(ce.firstChild)&&tR(e,ce.firstChild)&&f.isEmpty(ce.firstChild)&&(P=f.createRng(),P.setStart(ce.firstChild,0),P.setEnd(ce.firstChild,0),u.setRng(P)),u.isCollapsed()||N_(e);const ie=u.getNode(),ee={context:ie.nodeName.toLowerCase(),data:o.data,insert:!0},ue=b.parse(n,ee);if(o.paste===!0&&qD(e.schema,ue)&&R_(f,ie))return P=QD(x,f,u.getRng(),ue),P&&u.setRng(P),n;o.paste===!0&&Ew(f,ue,ie,e.getBody())&&((r=ue.firstChild)===null||r===void 0||r.unwrap()),U5(ue);let Ne=ue.lastChild;if(Ne&&Ne.attr("id")==="mce_marker"){const Oe=Ne;for(Ne=Ne.prev;Ne;Ne=Ne.walk(!0))if(Ne.type===3||!f.isBlock(Ne.name)){Ne.parent&&e.schema.isValidChild(Ne.parent.name,"span")&&Ne.parent.insert(Oe,Ne,Ne.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ie),!ee.invalid)n=x.serialize(ue),eR(e,n,ie);else{e.selection.setContent(M);let Oe=u.getNode(),Ge;const nt=e.getBody();for(ti(Oe)?Oe=Ge=nt:Ge=Oe;Ge&&Ge!==nt;)Oe=Ge,Ge=Ge.parentNode;n=Oe===nt?nt.innerHTML:f.getOuterHTML(Oe);const Dt=b.parse(n);for(let Qe=Dt;Qe;Qe=Qe.walk())if(Qe.attr("id")==="mce_marker"){Qe.replace(ue);break}const vn=ue.children(),sn=(c=ue.parent)!==null&&c!==void 0?c:Dt;ue.unwrap();const mt=Z(vn,Qe=>KS(e.schema,Qe,sn));Cw(mt,e.schema),__(b.getNodeFilters(),b.getAttributeFilters(),Dt),n=x.serialize(Dt),Oe===nt?f.setHTML(nt,n):f.setOuterHTML(Oe,n)}return V5(e,y),j5(e,f.get("mce_marker")),W5(e.getBody()),z5(f,u.getStart()),tf(e.schema,e.getBody(),u.getStart()),n},XS=e=>e instanceof Qi,G5=e=>{Ob(e)&&$i(e.getBody()).each(n=>{const o=n.getNode(),r=Ya(o)?$i(o).getOr(n):n;e.selection.setRng(r.toRange())})},Xv=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&G5(e)},nR=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=vl(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Yp(e),o)):o||(o=c),Xv(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=sp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Jf(ve.fromDom(n))?o:Pt.trim(o);return Xv(e,c,r.no_selection),{content:c,html:c}}},oR=(e,n,o,r)=>{__(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=sp({validate:!1},e.schema).serialize(o),u=Jf(ve.fromDom(n))?c:Pt.trim(c);return Xv(e,u,r.no_selection),{content:o,html:u}},q5=(e,n,o)=>R.from(e.getBody()).map(r=>XS(n)?oR(e,r,n,o):nR(e,r,n,o)).getOr({content:n,html:XS(o.content)?"":o.content}),sR=(e,n)=>Ol(e,n).isSome(),rR=e=>Q(e)?e:Nt,Jv=(e,n,o)=>{let r=e.dom;const c=rR(o);for(;r.parentNode;){r=r.parentNode;const u=ve.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return R.none()},JS=(e,n,o)=>{const r=n(e),c=rR(o);return r.orThunk(()=>c(e)?R.none():Jv(e,n,c))},QS=Vy,$_=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Bl(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Qv=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>$_(e,b,o)?!0:b.parentNode===u||!!Cm(e,b,o,r,!0));return!!Cm(e,f,o,r,c)},_w=(e,n,o)=>nc(o)&&QS(n,o.inline)||_d(o)&&QS(n,o.block)?!0:Bl(o)?Bn(n)&&e.is(n,o.selector):!1,aR=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(Q(o.onmatch))return o.onmatch(n,o,r);if(f){if(fa(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):Uy(e,n,f[y]))return!0}else for(const y in f)if(go(f,y)){const x=b?e.getAttrib(n,y):Uy(e,n,y),M=pm(f[y],u),P=St(x)||xs(x);if(P&&St(M))continue;if(c&&P&&!o.exact||(!c||o.exact)&&!QS(x,_g(M,y)))return!1}}return!0},Cm=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Bn(n))for(let b=0;b<u.length;b++){const y=u[b];if(_w(e.dom,n,y)&&aR(f,n,y,"attributes",c,r)&&aR(f,n,y,"styles",c,r)){const x=y.classes;if(x){for(let M=0;M<x.length;M++)if(!e.dom.hasClass(n,pm(x[M],r)))return}return y}}},B_=(e,n,o,r,c)=>{if(r)return Qv(e,r,n,o,c);if(r=e.selection.getNode(),Qv(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Qv(e,u,n,o,c))},K5=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&Cm(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},ex=(e,n)=>{const o=c=>Bs(c,ve.fromDom(e.getBody())),r=(c,u)=>Cm(e,c.dom,u)?R.some(u):R.none();return R.from(e.selection.getStart(!0)).bind(c=>JS(ve.fromDom(c),u=>ks(n,f=>r(u,f)),o)).getOrNull()},cR=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const c=e.selection.getStart(),u=hb(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Bl(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},P_=(e,n,o)=>Pe(o,(r,c)=>{const u=TE(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),e0=wr,Y5=(e,n)=>e.importNode(n,!0),iR=e=>{const n=[];let o=e;for(;o;){if(qt(o)&&o.data!==e0||o.childNodes.length>1)return[];Bn(o)&&n.push(o),o=o.firstChild}return n},tx=e=>iR(e).length>0,F_=e=>{if(e){const n=new ba(e,e);for(let o=n.current();o;o=n.next())if(qt(o))return o}return null},I_=e=>{const n=ve.fromTag("span");return Rs(n,{id:Ry,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&ea(n,ve.fromText(e0)),n},X5=e=>{const n=F_(e);return n&&n.data.charAt(0)===e0&&n.deleteData(0,1),n},L_=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(tx(n))Gu(e,!1,ve.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,x=u.endContainer,M=u.endOffset,P=X5(n);r.remove(n,!0),b===P&&y>0&&u.setStart(P,y-1),x===P&&M>0&&u.setEnd(P,M-1),f&&r.isEmpty(f)&&Aa(ve.fromDom(f)),c.setRng(u)}},t0=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)L_(e,n,o);else if(n=Cg(e.getBody(),c.getStart()),!n)for(;n=r.get(Ry);)L_(e,n,!1)},Bg=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,Ae(Tg,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(_p(ve.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},lR=(e,n)=>(e.appendChild(n),n),nx=(e,n)=>{var o;const r=Be(e,(u,f)=>lR(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return lR(r,c.createTextNode(e0))},Ma=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=Z(Le(f.get()),P=>P!==r&&!no(P,"removeformat")),x=P_(e,o,y);if(Z(x,P=>!EE(e,P,r)).length>0){const P=o.cloneNode(!1);return b.add(n,P),f.remove(r,c,P,u),b.remove(P),R.some(P)}else return R.none()},H_=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=Cg(e.getBody(),c.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&M.test(x.charAt(b))&&M.test(x.charAt(b-1))){const P=c.getBookmark();f.collapse(!0);let L=xf(e.dom,f,u);L=Tb(L),e.formatter.apply(n,o,L),c.moveToBookmark(P)}else{let P=r?F_(r):null;(!r||(P==null?void 0:P.data)!==e0)&&(r=Y5(e.getDoc(),I_(!0).dom),P=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(P,b)}},z_=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),x=y.startContainer,M=y.startOffset;let P=x;qt(x)&&(M!==x.data.length&&(f=!0),P=P.parentNode);const L=[];let ce;for(;P;){if(Cm(e,P,n,o,r)){ce=P;break}P.nextSibling&&(f=!0),L.push(P),P=P.parentNode}if(ce)if(f){const ie=u.getBookmark();y.collapse(!0);let ee=xf(c,y,b,!0);ee=Tb(ee),e.formatter.remove(n,o,ee,r),u.moveToBookmark(ie)}else{const ie=Cg(e.getBody(),ce),ee=I_(!1).dom;Bg(e,ee,ie??ce);const ue=Ma(e,ee,ce,n,o,r),Ne=nx(L.concat(ue.toArray()),ee);ie&&L_(e,ie,!1),u.setCursorLocation(Ne,1),c.isEmpty(ce)&&c.remove(ce)}},Pg=(e,n)=>{const o=e.selection,r=e.getBody();t0(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===e0&&t0(e,Cg(r,o.getStart())),(n===37||n===39)&&t0(e,Cg(r,o.getStart()))},J5=e=>{e.on("mouseup keydown",n=>{Pg(e,n.keyCode)})},uR=(e,n)=>{const o=I_(!1),r=nx(n,o.dom);return os(ve.fromDom(e),o),Ps(ve.fromDom(e)),vt(r,0)},Aw=(e,n)=>{const o=e.schema.getTextInlineElements();return go(o,oo(n))&&!Cl(n.dom)&&!Ou(n.dom)},Q5=e=>Cl(e.dom)&&tx(e.dom),Ow={},Nb=al(["pre"]),eI=(e,n)=>{Ow[e]||(Ow[e]=[]),Ow[e].push(n)},$b=(e,n)=>{go(Ow,e)&&z(Ow[e],o=>{o(n)})};eI("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return Nb(f)&&ae(c,f)},r=(c,u)=>{const f=ve.fromDom(u),b=Ui(f).dom;Ps(f),Fo(ve.fromDom(c),[ve.fromTag("br",b),ve.fromTag("br",b),...pa(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Z(Z(c,Nb),o(c));z(u,f=>{r(f.previousSibling,f)})}});const dR=["fontWeight","fontStyle","color","fontSize","fontFamily"],n0=e=>Je(e.styles)&&se(Le(e.styles),n=>ae(dR,n)),Sm=e=>rn(e,n=>nc(n)&&n.inline==="span"&&n0(n)),Dw=(e,n)=>{const o=e.get(n);return yt(o)?Sm(o):R.none()},ox=(e,n)=>wl(n,vt.fromRangeStart(e)).isNone(),mR=(e,n)=>Ci(n,vt.fromRangeEnd(e)).exists(o=>!Wr(o.getNode())||Ci(n,o).isSome())===!1,fR=e=>n=>gh(n)&&e.getContentEditableParent(n)!=="false",sx=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return ox(o,n[0])&&mR(o,n[0])?n:[];{const r=On(n).filter(f=>ox(o,f)).toArray(),c=Tn(n).filter(f=>mR(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},tI=e=>Z(sx(e),fR(e.dom)),Ku=e=>Z(e.getSelectedBlocks(),fR(e.dom)),o0=Pt.each,rx=e=>Bn(e)&&!Oc(e)&&!Cl(e)&&!Ou(e),ax=(e,n)=>{for(let o=e;o;o=o[n]){if(qt(o)&&Cs(o.data))return e;if(Bn(o)&&!Oc(o))return o}return e},cx=(e,n,o)=>{const r=ZS(e),c=Bn(n)&&Sf(n),u=Bn(o)&&Sf(o);if(c&&u){const f=ax(n,"previousSibling"),b=ax(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const x=y;y=y.nextSibling,f.appendChild(x)}return e.dom.remove(b),Pt.each(Pt.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},lp=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=cx(e,xv(r),r))!==null&&c!==void 0?c:r;cx(e,u,xv(u,!0))}},V_=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";o0(e.select(r,o),c=>{rx(c)&&Sf(c)&&o0(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},U_=(e,n,o)=>{o0(e.childNodes,r=>{rx(r)&&(n(r)&&o(r),r.hasChildNodes()&&U_(r,n,o))})},gR=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},hR=(e,n)=>o=>!!(o&&Uy(e,o,n)),pR=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),gR(e,r)},Bb=au.generate([{keep:[]},{rename:["name"]},{removed:[]}]),nI=/^(src|href|style)$/,Pb=Pt.each,ix=Vy,bR=e=>/^(TR|TH|TD)$/.test(e.nodeName),lx=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),vR=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Bn(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return qt(r)&&o&&c>=r.data.length&&(r=new ba(r,e.getBody()).next()||r),qt(r)&&!o&&c===0&&(r=new ba(r,e.getBody()).prev()||r),r},W_=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return bR(e)&&r?e.nodeName==="TR"&&r[o]||r:e},ux=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},yR=(e,n,o,r,c)=>{const u=ve.fromDom(n),f=ve.fromDom(e.create(r,c)),b=o?ld(u):Hm(u);return Fo(f,b),o?(os(u,f),Ka(f,u)):(Ar(u,f),ea(f,u)),f.dom},oI=(e,n)=>n.links&&e.nodeName==="A",wR=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=vl(e);_d(o)&&r===u.getRoot()&&(!o.list_block||!ix(n,o.list_block))&&z(Ro(n.childNodes),b=>{Eg(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=ux(u,b,f),u.setAttribs(c,Yp(e))):c=null}),!(AE(o)&&!ix(o.inline,n))&&u.remove(n,!0)},CR=(e,n,o)=>it(e)?{name:n,value:null}:{name:e,value:pm(n,o)},SR=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},xR=(e,n,o,r,c)=>{let u=!1;Pb(o.styles,(f,b)=>{const{name:y,value:x}=CR(b,f,r),M=_g(x,y);(o.remove_similar||K(x)||!Bn(c)||ix(Uy(e,c,y),M))&&e.setStyle(n,y,""),u=!0}),u&&SR(e,n)},sI=(e,n,o)=>{n==="removeformat"?z(Ku(e.selection),r=>{z(dR,c=>e.dom.setStyle(r,c,"")),SR(e.dom,r)}):Dw(e.formatter,n).each(r=>{z(Ku(e.selection),c=>xR(e.dom,c,r,o,null))})},kR=(e,n,o,r,c)=>{const u=e.dom,f=ZS(e),b=e.schema;if(nc(n)&&k1(b,n.inline)&&ng(b,r)&&r.parentElement===e.getBody())return wR(e,r,n),Bb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!_w(u,r,n)&&!oI(r,n))return Bb.keep();const y=r,x=n.preserve_attributes;if(nc(n)&&n.remove==="all"&&yt(x)){const M=Z(u.getAttribs(y),P=>ae(x,P.name.toLowerCase()));if(u.removeAllAttribs(y),z(M,P=>u.setAttrib(y,P.name,P.value)),M.length>0)return Bb.rename("span")}if(n.remove!=="all"){xR(u,y,n,o,c),Pb(n.attributes,(P,L)=>{const{name:ce,value:ie}=CR(L,P,o);if(n.remove_similar||K(ie)||!Bn(c)||ix(u.getAttrib(c,ce),ie)){if(ce==="class"){const ee=u.getAttrib(y,ce);if(ee){let ue="";if(z(ee.split(/\s+/),Ne=>{/mce\-\w+/.test(Ne)&&(ue+=(ue?" ":"")+Ne)}),ue){u.setAttrib(y,ce,ue);return}}}if(nI.test(ce)&&y.removeAttribute("data-mce-"+ce),ce==="style"&&al(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(ce),u.setStyle(y,"list-style-type","none");return}ce==="class"&&y.removeAttribute("className"),y.removeAttribute(ce)}}),Pb(n.classes,P=>{P=pm(P,o),(!Bn(c)||u.hasClass(c,P))&&u.removeClass(y,P)});const M=u.getAttribs(y);for(let P=0;P<M.length;P++){const L=M[P].nodeName;if(!f.isAttributeInternal(L))return Bb.keep()}}return n.remove!=="none"?(wR(e,y,n),Bb.removed()):Bb.keep()},Rw=(e,n,o,r,c)=>kR(e,n,o,r,c).fold(Nt,u=>(e.dom.rename(r,u),!0),Ve),rI=(e,n,o,r,c)=>{let u;return n.parentNode&&z(hb(e.dom,n.parentNode).reverse(),f=>{if(!u&&Bn(f)&&f.id!=="_start"&&f.id!=="_end"){const b=Cm(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},aI=(e,n,o,r)=>kR(e,n,o,r,r).fold(ge(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),ge(null)),cI=(e,n,o,r,c,u,f,b)=>{var y,x;let M,P;const L=e.dom;if(o){const ce=o.parentNode;for(let ie=r.parentNode;ie&&ie!==ce;ie=ie.parentNode){let ee=L.clone(ie,!1);for(let ue=0;ue<n.length&&(ee=aI(e,n[ue],b,ee),ee!==null);ue++);ee&&(M&&ee.appendChild(M),P||(P=ee),M=ee)}u&&(!f.mixed||!L.isBlock(o))&&(r=(y=L.split(o,r))!==null&&y!==void 0?y:r),M&&P&&((x=c.parentNode)===null||x===void 0||x.insertBefore(M,c),P.appendChild(c),nc(f)&&lp(e,f,b,M))}return r},TR=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,x=ee=>{const ue=rI(e,ee,n,o,c);return cI(e,u,ue,ee,ee,!0,f,o)},M=ee=>Oc(ee)&&Bn(ee)&&(ee.id==="_start"||ee.id==="_end"),P=ee=>se(u,ue=>Rw(e,ue,o,ee,ee)),L=ee=>{const ue=Ro(ee.childNodes),Oe=P(ee)||se(u,Dt=>_w(b,ee,Dt)),Ge=ee.parentNode;if(!Oe&&he(Ge)&&qh(f)&&P(Ge),f.deep&&ue.length)for(let Dt=0;Dt<ue.length;Dt++)L(ue[Dt]);z(["underline","line-through","overline"],Dt=>{Bn(ee)&&e.dom.getStyle(ee,"text-decoration")===Dt&&ee.parentNode&&nS(b,ee.parentNode)===Dt&&Rw(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Dt}},void 0,ee)})},ce=ee=>{const ue=b.get(ee?"_start":"_end");if(ue){let Ne=ue[ee?"firstChild":"lastChild"];return M(Ne)&&(Ne=Ne[ee?"firstChild":"lastChild"]),qt(Ne)&&Ne.data.length===0&&(Ne=ee?ue.previousSibling||ue.nextSibling:ue.nextSibling||ue.previousSibling),b.remove(ue,!0),Ne}else return null},ie=ee=>{let ue,Ne,Oe=xf(b,ee,u,ee.collapsed);if(f.split){if(Oe=Tb(Oe),ue=vR(e,Oe,!0),Ne=vR(e,Oe),ue!==Ne){if(ue=W_(ue,!0),Ne=W_(Ne,!1),lx(b,ue,Ne)){const nt=R.from(ue.firstChild).getOr(ue);x(yR(b,nt,!0,"span",{id:"_start","data-mce-type":"bookmark"})),ce(!0);return}if(lx(b,Ne,ue)){const nt=R.from(Ne.lastChild).getOr(Ne);x(yR(b,nt,!1,"span",{id:"_end","data-mce-type":"bookmark"})),ce(!1);return}ue=ux(b,ue,"span",{id:"_start","data-mce-type":"bookmark"}),Ne=ux(b,Ne,"span",{id:"_end","data-mce-type":"bookmark"});const Ge=b.createRng();Ge.setStartAfter(ue),Ge.setEndBefore(Ne),vb(b,Ge,nt=>{z(nt,Dt=>{!Oc(Dt)&&!Oc(Dt.parentNode)&&x(Dt)})}),x(ue),x(Ne),ue=ce(!0),Ne=ce()}else ue=Ne=x(ue);Oe.startContainer=ue.parentNode?ue.parentNode:ue,Oe.startOffset=b.nodeIndex(ue),Oe.endContainer=Ne.parentNode?Ne.parentNode:Ne,Oe.endOffset=b.nodeIndex(Ne)+1}vb(b,Oe,Ge=>{z(Ge,L)})};if(r){if(Cf(r)){const ee=b.createRng();ee.setStartBefore(r),ee.setEndAfter(r),ie(ee)}else ie(r);lS(e,n,r,o);return}!y.isCollapsed()||!nc(f)||yf(e).length?(Cv(e,()=>Ed(e,ie),ee=>nc(f)&&B_(e,n,o,ee)),e.nodeChanged()):z_(e,n,o,c),sI(e,n,o),lS(e,n,r,o)},Z_=Pt.each,iI=(e,n,o,r)=>{const c=u=>{if(Bn(u)&&Bn(u.parentNode)&&Sf(u)){const f=nS(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Pt.walk(r,c,"childNodes"),c(r))},s0=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=hR(e,"fontSize");U_(r,u=>c(u)&&Sf(u),pR(e,"backgroundColor",pm(n.styles.backgroundColor,o)))}},lI=(e,n,o,r)=>{if(nc(n)&&(n.inline==="sub"||n.inline==="sup")){const c=hR(e,"fontSize");U_(r,f=>c(f)&&Sf(f),pR(e,"fontSize",""));const u=Z(e.select(n.inline==="sup"?"sub":"sup",r),Sf);e.remove(u,!0)}},uI=(e,n,o,r)=>{Z_(n,c=>{nc(c)&&Z_(e.dom.select(c.inline,r),u=>{rx(u)&&Rw(e,c,o,u,c.exact?u:null)}),V_(e.dom,c,r)})},dI=(e,n,o,r,c)=>{const u=c.parentNode;Cm(e,u,o,r)&&Rw(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>Cm(e,f,o,r)?(Rw(e,n,r,c),!0):!1)},dx=Pt.each,ER=(e,n,o,r)=>{if(Qp(e)&&nc(n)&&o.parentNode){const c=jC(e.schema),u=sR(ve.fromDom(o),f=>Cl(f.dom));return mr(c,r)&&ya(ve.fromDom(o.parentNode),!1)&&!u}else return!1},_R=(e,n,o,r)=>{if(dx(o.styles,(c,u)=>{e.setStyle(n,u,pm(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},AR=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,x=(ie,ee=u)=>{Q(ee.onformat)&&ee.onformat(ie,ee,o,r),_R(b,ie,ee,o),dx(ee.attributes,(ue,Ne)=>{b.setAttrib(ie,Ne,pm(ue,o))}),dx(ee.classes,ue=>{const Ne=pm(ue,o);b.hasClass(ie,Ne)||b.addClass(ie,Ne)})},M=(ie,ee)=>{let ue=!1;return dx(ie,Ne=>Bl(Ne)?b.getContentEditable(ee)==="false"&&!Ne.ceFalseOverride||he(Ne.collapsed)&&Ne.collapsed!==f?!0:b.is(ee,Ne.selector)&&!Cl(ee)?(x(ee,Ne),ue=!0,!1):!0:!1),ue},P=ie=>{if(te(ie)){const ee=b.create(ie);return x(ee),ee}else return null},L=(ie,ee,ue)=>{const Ne=[];let Oe=!0;const Ge=u.inline||u.block,nt=P(Ge),Dt=mt=>Gh(u)&&Cm(e,mt,n,o),vn=(mt,Qe,Rn)=>{const co=_E(u)&&Tg(e.schema,mt)&&Eg(e,Qe,Ge);return Rn&&co},sn=(mt,Qe,Rn,co)=>{const fo=mt.nodeName.toLowerCase(),Uo=Eg(e,Ge,fo)&&Eg(e,Qe,Ge),vs=!ue&&qt(mt)&&ll(mt.data),Gs=Cl(mt),Zs=!nc(u)||!ie.isBlock(mt);return(Rn||co)&&Uo&&!vs&&!Gs&&Zs};vb(ie,ee,mt=>{let Qe;const Rn=co=>{let fo=!1,Uo=Oe,vs=!1;const Gs=co.parentNode,Zs=Gs.nodeName.toLowerCase(),$a=ie.getContentEditable(co);he($a)&&(Uo=Oe,Oe=$a==="true",fo=!0,vs=tS(e,co));const xi=Oe&&!fo;if(Wr(co)&&!ER(e,u,co,Zs)){Qe=null,_d(u)&&ie.remove(co);return}if(Dt(co)){Qe=null;return}if(vn(co,Zs,xi)){const nn=ie.rename(co,Ge);x(nn),Ne.push(nn),Qe=null;return}if(Bl(u)){let nn=M(c,co);if(!nn&&he(Gs)&&qh(u)&&(nn=M(c,Gs)),!nc(u)||nn){Qe=null;return}}he(nt)&&sn(co,Zs,xi,vs)?(Qe||(Qe=ie.clone(nt,!1),Gs.insertBefore(Qe,co),Ne.push(Qe)),vs&&fo&&(Oe=Uo),Qe.appendChild(co)):(Qe=null,z(Ro(co.childNodes),Rn),fo&&(Oe=Uo),Qe=null)};z(mt,Rn)}),u.links===!0&&z(Ne,mt=>{const Qe=Rn=>{Rn.nodeName==="A"&&x(Rn,u),z(Ro(Rn.childNodes),Qe)};Qe(mt)}),z(Ne,mt=>{const Qe=fo=>{let Uo=0;return z(fo.childNodes,vs=>{!kv(vs)&&!Oc(vs)&&Uo++}),Uo},Rn=fo=>rn(fo.childNodes,zy).filter(vs=>ie.getContentEditable(vs)!=="false"&&_w(ie,vs,u)).map(vs=>{const Gs=ie.clone(vs,!1);return x(Gs),ie.replace(Gs,fo,!0),ie.remove(vs,!0),Gs}).getOr(fo),co=Qe(mt);if((Ne.length>1||!ie.isBlock(mt))&&co===0){ie.remove(mt,!0);return}(nc(u)||_d(u)&&u.wrapper)&&(!u.exact&&co===1&&(mt=Rn(mt)),uI(e,c,o,mt),dI(e,u,n,o,mt),s0(ie,u,o,mt),iI(ie,u,o,mt),lI(ie,u,o,mt),lp(e,u,o,mt))})},ce=Cf(r)?r:y.getNode();if(b.getContentEditable(ce)==="false"&&!tS(e,ce)){r=ce,M(c,r),Dv(e,n,r,o);return}if(u){if(r)if(Cf(r)){if(!M(c,r)){const ie=b.createRng();ie.setStartBefore(r),ie.setEndAfter(r),L(b,xf(b,ie,c),!0)}}else L(b,r,!0);else!f||!nc(u)||yf(e).length?(y.setRng(kw(y.getRng())),Cv(e,()=>{Ed(e,(ie,ee)=>{const ue=ee?ie:xf(b,ie,c);L(b,ue,!1)})},Ve),e.nodeChanged()):H_(e,n,o),Dw(e.formatter,n).each(ie=>{z(tI(e.selection),ee=>_R(b,ee,ie,o))});$b(n,e)}Dv(e,n,r,o)},OR=e=>go(e,"vars"),mI=(e,n)=>{e.set({}),n.on("NodeChange",o=>{NR(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=R.from(o.node).map(c=>Cf(c)?c:c.startContainer).bind(c=>Bn(c)?R.some(c):R.from(c.parentElement)).getOrThunk(()=>DR(n));NR(n,r,e.get())})},DR=e=>e.selection.getStart(),RR=(e,n,o,r,c)=>Yt(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!En(y)},b=>$_(e,b,o)?!0:r?!1:he(e.formatter.matchNode(b,o,c,!0))),MR=(e,n)=>{const o=n??DR(e);return Z(hb(e.dom,o),r=>Bn(r)&&!Ou(r))},NR=(e,n,o)=>{const r=MR(e,n);ln(o,(c,u)=>{const f=b=>{const y=RR(e,r,u,b.similar,OR(b)?b.vars:void 0),x=y.isSome();if(b.state.get()!==x){b.state.set(x);const M=y.getOr(n);OR(b)?b.callback(x,{node:M,format:u,parents:r}):z(b.callbacks,P=>P(x,{node:M,format:u,parents:r}))}};z([c.withSimilar,c.withoutSimilar],f),z(c.withVars,f)})},fI=(e,n,o,r,c,u)=>{const f=n.get();z(o.split(","),b=>{const y=cs(f,b).getOrThunk(()=>{const M={withSimilar:{state:dc(!1),similar:!0,callbacks:[]},withoutSimilar:{state:dc(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=M,M}),x=()=>{const M=MR(e);return RR(e,M,b,c,u).isSome()};if(En(u)){const M=c?y.withSimilar:y.withoutSimilar;M.callbacks.push(r),M.callbacks.length===1&&M.state.set(x())}else y.withVars.push({state:dc(x()),similar:c,vars:u,callback:r})}),n.set(f)},gI=(e,n,o)=>{const r=e.get();z(n.split(","),c=>cs(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Z(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Z(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Z(u.withVars,f=>f.callback!==o)}})),e.set(r)},j_=(e,n,o,r,c,u)=>(fI(e,n,o,r,c,u),{unbind:()=>gI(n,o,r)}),$R=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(B_(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?TR(e,n,o,r):AR(e,n,o,r))};function r0(e){return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r0(e)}function Fb(e,n){return Fb=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},Fb(e,n)}function BR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function up(e,n,o){return BR()?up=Reflect.construct:up=function(c,u,f){var b=[null];b.push.apply(b,u);var y=Function.bind.apply(c,b),x=new y;return f&&Fb(x,f.prototype),x},up.apply(null,arguments)}function Ll(e){return PR(e)||SU(e)||hI(e)||pI()}function PR(e){if(Array.isArray(e))return FR(e)}function SU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hI(e,n){if(e){if(typeof e=="string")return FR(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return FR(e,n)}}function FR(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function pI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bI=Object.hasOwnProperty,vI=Object.setPrototypeOf,yI=Object.isFrozen,IR=Object.getPrototypeOf,wI=Object.getOwnPropertyDescriptor,Sl=Object.freeze,Rf=Object.seal,mx=Object.create,G_=typeof Reflect<"u"&&Reflect,Sa=G_.apply,LR=G_.construct;Sa||(Sa=function(n,o,r){return n.apply(o,r)}),Sl||(Sl=function(n){return n}),Rf||(Rf=function(n){return n}),LR||(LR=function(n,o){return up(n,Ll(o))});var xU=xl(Array.prototype.forEach),kU=xl(Array.prototype.pop),fx=xl(Array.prototype.push),Hl=xl(String.prototype.toLowerCase),gx=xl(String.prototype.match),Md=xl(String.prototype.replace),Mw=xl(String.prototype.indexOf),CI=xl(String.prototype.trim),zl=xl(RegExp.prototype.test),Ib=a0(TypeError);function xl(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return Sa(e,n,r)}}function a0(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return LR(e,o)}}function ur(e,n){vI&&vI(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=Hl(r);c!==r&&(yI(n)||(n[o]=c),r=c)}e[r]=!0}return e}function Fg(e){var n=mx(null),o;for(o in e)Sa(bI,e,[o])&&(n[o]=e[o]);return n}function Nw(e,n){for(;e!==null;){var o=wI(e,n);if(o){if(o.get)return xl(o.get);if(typeof o.value=="function")return xl(o.value)}e=IR(e)}function r(c){return console.warn("fallback value for",c),null}return r}var q_=Sl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),K_=Sl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Y_=Sl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HR=Sl(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),X_=Sl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),SI=Sl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zR=Sl(["#text"]),VR=Sl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),J_=Sl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Q_=Sl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hx=Sl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$w=Rf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),UR=Rf(/<%[\w\W]*|[\w\W]*%>/gm),xI=Rf(/^data-[\-\w.\u00B7-\uFFFF]/),WR=Rf(/^aria-[\-\w]+$/),kI=Rf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ZR=Rf(/^(?:\w+script|data):/i),TI=Rf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),EI=Rf(/^html$/i),jR=function(){return typeof window>"u"?null:window},GR=function(n,o){if(r0(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function eA(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jR(),n=function(pt){return eA(pt)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,y=e.NodeFilter,x=e.NamedNodeMap,M=x===void 0?e.NamedNodeMap||e.MozNamedAttrMap:x,P=e.HTMLFormElement,L=e.DOMParser,ce=e.trustedTypes,ie=b.prototype,ee=Nw(ie,"cloneNode"),ue=Nw(ie,"nextSibling"),Ne=Nw(ie,"childNodes"),Oe=Nw(ie,"parentNode");if(typeof u=="function"){var Ge=r.createElement("template");Ge.content&&Ge.content.ownerDocument&&(r=Ge.content.ownerDocument)}var nt=GR(ce,o),Dt=nt?nt.createHTML(""):"",vn=r,sn=vn.implementation,mt=vn.createNodeIterator,Qe=vn.createDocumentFragment,Rn=vn.getElementsByTagName,co=o.importNode,fo={};try{fo=Fg(r).documentMode?r.documentMode:{}}catch{}var Uo={};n.isSupported=typeof Oe=="function"&&sn&&typeof sn.createHTMLDocument<"u"&&fo!==9;var vs=$w,Gs=UR,Zs=xI,$a=WR,xi=ZR,nn=TI,Wo=kI,po=null,Dr=ur({},[].concat(Ll(q_),Ll(K_),Ll(Y_),Ll(X_),Ll(zR))),Dn=null,Do=ur({},[].concat(Ll(VR),Ll(J_),Ll(Q_),Ll(hx))),xo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xn=null,gs=null,as=!0,sc=!0,xr=!1,No=!1,Fs=!1,ka=!1,yr=!1,Xr=!1,da=!1,Pr=!1,Ba=!0,hu=!0,di=!1,Am={},pu=null,c1=ur({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),i1=null,Om=ur({},["audio","video","img","source","image","track"]),Id=null,Jr=ur({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),td="http://www.w3.org/1998/Math/MathML",Dm="http://www.w3.org/2000/svg",nd="http://www.w3.org/1999/xhtml",od=nd,Rm=!1,$c,Mm=["application/xhtml+xml","text/html"],Lf="text/html",sd,qg=null,Jk=r.createElement("form"),EC=function(pt){return pt instanceof RegExp||pt instanceof Function},_C=function(pt){qg&&qg===pt||((!pt||r0(pt)!=="object")&&(pt={}),pt=Fg(pt),po="ALLOWED_TAGS"in pt?ur({},pt.ALLOWED_TAGS):Dr,Dn="ALLOWED_ATTR"in pt?ur({},pt.ALLOWED_ATTR):Do,Id="ADD_URI_SAFE_ATTR"in pt?ur(Fg(Jr),pt.ADD_URI_SAFE_ATTR):Jr,i1="ADD_DATA_URI_TAGS"in pt?ur(Fg(Om),pt.ADD_DATA_URI_TAGS):Om,pu="FORBID_CONTENTS"in pt?ur({},pt.FORBID_CONTENTS):c1,xn="FORBID_TAGS"in pt?ur({},pt.FORBID_TAGS):{},gs="FORBID_ATTR"in pt?ur({},pt.FORBID_ATTR):{},Am="USE_PROFILES"in pt?pt.USE_PROFILES:!1,as=pt.ALLOW_ARIA_ATTR!==!1,sc=pt.ALLOW_DATA_ATTR!==!1,xr=pt.ALLOW_UNKNOWN_PROTOCOLS||!1,No=pt.SAFE_FOR_TEMPLATES||!1,Fs=pt.WHOLE_DOCUMENT||!1,Xr=pt.RETURN_DOM||!1,da=pt.RETURN_DOM_FRAGMENT||!1,Pr=pt.RETURN_TRUSTED_TYPE||!1,yr=pt.FORCE_BODY||!1,Ba=pt.SANITIZE_DOM!==!1,hu=pt.KEEP_CONTENT!==!1,di=pt.IN_PLACE||!1,Wo=pt.ALLOWED_URI_REGEXP||Wo,od=pt.NAMESPACE||nd,pt.CUSTOM_ELEMENT_HANDLING&&EC(pt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xo.tagNameCheck=pt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),pt.CUSTOM_ELEMENT_HANDLING&&EC(pt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xo.attributeNameCheck=pt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),pt.CUSTOM_ELEMENT_HANDLING&&typeof pt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(xo.allowCustomizedBuiltInElements=pt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$c=Mm.indexOf(pt.PARSER_MEDIA_TYPE)===-1?$c=Lf:$c=pt.PARSER_MEDIA_TYPE,sd=$c==="application/xhtml+xml"?function(jn){return jn}:Hl,No&&(sc=!1),da&&(Xr=!0),Am&&(po=ur({},Ll(zR)),Dn=[],Am.html===!0&&(ur(po,q_),ur(Dn,VR)),Am.svg===!0&&(ur(po,K_),ur(Dn,J_),ur(Dn,hx)),Am.svgFilters===!0&&(ur(po,Y_),ur(Dn,J_),ur(Dn,hx)),Am.mathMl===!0&&(ur(po,X_),ur(Dn,Q_),ur(Dn,hx))),pt.ADD_TAGS&&(po===Dr&&(po=Fg(po)),ur(po,pt.ADD_TAGS)),pt.ADD_ATTR&&(Dn===Do&&(Dn=Fg(Dn)),ur(Dn,pt.ADD_ATTR)),pt.ADD_URI_SAFE_ATTR&&ur(Id,pt.ADD_URI_SAFE_ATTR),pt.FORBID_CONTENTS&&(pu===c1&&(pu=Fg(pu)),ur(pu,pt.FORBID_CONTENTS)),hu&&(po["#text"]=!0),Fs&&ur(po,["html","head","body"]),po.table&&(ur(po,["tbody"]),delete xn.tbody),Sl&&Sl(pt),qg=pt)},Qk=ur({},["mi","mo","mn","ms","mtext"]),eT=ur({},["foreignobject","desc","title","annotation-xml"]),Kg=ur({},["title","style","font","a","script"]),kp=ur({},K_);ur(kp,Y_),ur(kp,HR);var ot=ur({},X_);ur(ot,SI);var ut=function(pt){var jn=Oe(pt);(!jn||!jn.tagName)&&(jn={namespaceURI:nd,tagName:"template"});var $o=Hl(pt.tagName),Ys=Hl(jn.tagName);return pt.namespaceURI===Dm?jn.namespaceURI===nd?$o==="svg":jn.namespaceURI===td?$o==="svg"&&(Ys==="annotation-xml"||Qk[Ys]):Boolean(kp[$o]):pt.namespaceURI===td?jn.namespaceURI===nd?$o==="math":jn.namespaceURI===Dm?$o==="math"&&eT[Ys]:Boolean(ot[$o]):pt.namespaceURI===nd?jn.namespaceURI===Dm&&!eT[Ys]||jn.namespaceURI===td&&!Qk[Ys]?!1:!ot[$o]&&(Kg[$o]||!kp[$o]):!1},Qt=function(pt){fx(n.removed,{element:pt});try{pt.parentNode.removeChild(pt)}catch{try{pt.outerHTML=Dt}catch{pt.remove()}}},Vt=function(pt,jn){try{fx(n.removed,{attribute:jn.getAttributeNode(pt),from:jn})}catch{fx(n.removed,{attribute:null,from:jn})}if(jn.removeAttribute(pt),pt==="is"&&!Dn[pt])if(Xr||da)try{Qt(jn)}catch{}else try{jn.setAttribute(pt,"")}catch{}},so=function(pt){var jn,$o;if(yr)pt="<remove></remove>"+pt;else{var Ys=gx(pt,/^[\r\n\t ]+/);$o=Ys&&Ys[0]}$c==="application/xhtml+xml"&&(pt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+pt+"</body></html>");var bc=nt?nt.createHTML(pt):pt;if(od===nd)try{jn=new L().parseFromString(bc,$c)}catch{}if(!jn||!jn.documentElement){jn=sn.createDocument(od,"template",null);try{jn.documentElement.innerHTML=Rm?"":bc}catch{}}var Tl=jn.body||jn.documentElement;return pt&&$o&&Tl.insertBefore(r.createTextNode($o),Tl.childNodes[0]||null),od===nd?Rn.call(jn,Fs?"html":"body")[0]:Fs?jn.documentElement:Tl},_s=function(pt){return mt.call(pt.ownerDocument||pt,pt,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},Br=function(pt){return pt instanceof P&&(typeof pt.nodeName!="string"||typeof pt.textContent!="string"||typeof pt.removeChild!="function"||!(pt.attributes instanceof M)||typeof pt.removeAttribute!="function"||typeof pt.setAttribute!="function"||typeof pt.namespaceURI!="string"||typeof pt.insertBefore!="function")},nr=function(pt){return r0(f)==="object"?pt instanceof f:pt&&r0(pt)==="object"&&typeof pt.nodeType=="number"&&typeof pt.nodeName=="string"},bu=function(pt,jn,$o){Uo[pt]&&xU(Uo[pt],function(Ys){Ys.call(n,jn,$o,qg)})},AC=function(pt){var jn;if(bu("beforeSanitizeElements",pt,null),Br(pt)||zl(/[\u0080-\uFFFF]/,pt.nodeName))return Qt(pt),!0;var $o=sd(pt.nodeName);if(bu("uponSanitizeElement",pt,{tagName:$o,allowedTags:po}),pt.hasChildNodes()&&!nr(pt.firstElementChild)&&(!nr(pt.content)||!nr(pt.content.firstElementChild))&&zl(/<[/\w]/g,pt.innerHTML)&&zl(/<[/\w]/g,pt.textContent)||$o==="select"&&zl(/<template/i,pt.innerHTML))return Qt(pt),!0;if(!po[$o]||xn[$o]){if(!xn[$o]&&tT($o)&&(xo.tagNameCheck instanceof RegExp&&zl(xo.tagNameCheck,$o)||xo.tagNameCheck instanceof Function&&xo.tagNameCheck($o)))return!1;if(hu&&!pu[$o]){var Ys=Oe(pt)||pt.parentNode,bc=Ne(pt)||pt.childNodes;if(bc&&Ys)for(var Tl=bc.length,Ii=Tl-1;Ii>=0;--Ii)Ys.insertBefore(ee(bc[Ii],!0),ue(pt))}return Qt(pt),!0}return pt instanceof b&&!ut(pt)||($o==="noscript"||$o==="noembed")&&zl(/<\/no(script|embed)/i,pt.innerHTML)?(Qt(pt),!0):(No&&pt.nodeType===3&&(jn=pt.textContent,jn=Md(jn,vs," "),jn=Md(jn,Gs," "),pt.textContent!==jn&&(fx(n.removed,{element:pt.cloneNode()}),pt.textContent=jn)),bu("afterSanitizeElements",pt,null),!1)},uF=function(pt,jn,$o){if(Ba&&(jn==="id"||jn==="name")&&($o in r||$o in Jk))return!1;if(!(sc&&!gs[jn]&&zl(Zs,jn))){if(!(as&&zl($a,jn))){if(!Dn[jn]||gs[jn]){if(!(tT(pt)&&(xo.tagNameCheck instanceof RegExp&&zl(xo.tagNameCheck,pt)||xo.tagNameCheck instanceof Function&&xo.tagNameCheck(pt))&&(xo.attributeNameCheck instanceof RegExp&&zl(xo.attributeNameCheck,jn)||xo.attributeNameCheck instanceof Function&&xo.attributeNameCheck(jn))||jn==="is"&&xo.allowCustomizedBuiltInElements&&(xo.tagNameCheck instanceof RegExp&&zl(xo.tagNameCheck,$o)||xo.tagNameCheck instanceof Function&&xo.tagNameCheck($o))))return!1}else if(!Id[jn]){if(!zl(Wo,Md($o,nn,""))){if(!((jn==="src"||jn==="xlink:href"||jn==="href")&&pt!=="script"&&Mw($o,"data:")===0&&i1[pt])){if(!(xr&&!zl(xi,Md($o,nn,"")))){if($o)return!1}}}}}}return!0},tT=function(pt){return pt.indexOf("-")>0},dF=function(pt){var jn,$o,Ys,bc;bu("beforeSanitizeAttributes",pt,null);var Tl=pt.attributes;if(Tl){var Ii={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Dn};for(bc=Tl.length;bc--;){jn=Tl[bc];var l1=jn,ki=l1.name,mF=l1.namespaceURI;$o=ki==="value"?jn.value:CI(jn.value),Ys=sd(ki);var HV=$o;if(Ii.attrName=Ys,Ii.attrValue=$o,Ii.keepAttr=!0,Ii.forceKeepAttr=void 0,bu("uponSanitizeAttribute",pt,Ii),$o=Ii.attrValue,!Ii.forceKeepAttr){if(!Ii.keepAttr){Vt(ki,pt);continue}if(zl(/\/>/i,$o)){Vt(ki,pt);continue}No&&($o=Md($o,vs," "),$o=Md($o,Gs," "));var OC=sd(pt.nodeName);if(!uF(OC,Ys,$o)){Vt(ki,pt);continue}if($o!==HV)try{mF?pt.setAttributeNS(mF,ki,$o):pt.setAttribute(ki,$o)}catch{Vt(ki,pt)}}}bu("afterSanitizeAttributes",pt,null)}},LV=function Xo(pt){var jn,$o=_s(pt);for(bu("beforeSanitizeShadowDOM",pt,null);jn=$o.nextNode();)bu("uponSanitizeShadowNode",jn,null),!AC(jn)&&(jn.content instanceof c&&Xo(jn.content),dF(jn));bu("afterSanitizeShadowDOM",pt,null)};return n.sanitize=function(Xo,pt){var jn,$o,Ys,bc,Tl;if(Rm=!Xo,Rm&&(Xo="<!-->"),typeof Xo!="string"&&!nr(Xo)){if(typeof Xo.toString!="function")throw Ib("toString is not a function");if(Xo=Xo.toString(),typeof Xo!="string")throw Ib("dirty is not a string, aborting")}if(!n.isSupported){if(r0(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Xo=="string")return e.toStaticHTML(Xo);if(nr(Xo))return e.toStaticHTML(Xo.outerHTML)}return Xo}if(ka||_C(pt),n.removed=[],typeof Xo=="string"&&(di=!1),di){if(Xo.nodeName){var Ii=sd(Xo.nodeName);if(!po[Ii]||xn[Ii])throw Ib("root node is forbidden and cannot be sanitized in-place")}}else if(Xo instanceof f)jn=so("<!---->"),$o=jn.ownerDocument.importNode(Xo,!0),$o.nodeType===1&&$o.nodeName==="BODY"||$o.nodeName==="HTML"?jn=$o:jn.appendChild($o);else{if(!Xr&&!No&&!Fs&&Xo.indexOf("<")===-1)return nt&&Pr?nt.createHTML(Xo):Xo;if(jn=so(Xo),!jn)return Xr?null:Pr?Dt:""}jn&&yr&&Qt(jn.firstChild);for(var l1=_s(di?Xo:jn);Ys=l1.nextNode();)Ys.nodeType===3&&Ys===bc||AC(Ys)||(Ys.content instanceof c&&LV(Ys.content),dF(Ys),bc=Ys);if(bc=null,di)return Xo;if(Xr){if(da)for(Tl=Qe.call(jn.ownerDocument);jn.firstChild;)Tl.appendChild(jn.firstChild);else Tl=jn;return Dn.shadowroot&&(Tl=co.call(o,Tl,!0)),Tl}var ki=Fs?jn.outerHTML:jn.innerHTML;return Fs&&po["!doctype"]&&jn.ownerDocument&&jn.ownerDocument.doctype&&jn.ownerDocument.doctype.name&&zl(EI,jn.ownerDocument.doctype.name)&&(ki="<!DOCTYPE "+jn.ownerDocument.doctype.name+`>
`+ki),No&&(ki=Md(ki,vs," "),ki=Md(ki,Gs," ")),nt&&Pr?nt.createHTML(ki):ki},n.setConfig=function(Xo){_C(Xo),ka=!0},n.clearConfig=function(){qg=null,ka=!1},n.isValidAttribute=function(Xo,pt,jn){qg||_C({});var $o=sd(Xo),Ys=sd(pt);return uF($o,Ys,jn)},n.addHook=function(Xo,pt){typeof pt=="function"&&(Uo[Xo]=Uo[Xo]||[],fx(Uo[Xo],pt))},n.removeHook=function(Xo){if(Uo[Xo])return kU(Uo[Xo])},n.removeHooks=function(Xo){Uo[Xo]&&(Uo[Xo]=[])},n.removeAllHooks=function(){Uo={}},n}var qR=eA();const tA=Pt.explode,KR=()=>{const e={};return{addFilter:(c,u)=>{z(tA(c),f=>{go(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>ys(e),removeFilter:(c,u)=>{z(tA(c),f=>{if(go(e,f))if(he(u)){const b=e[f],y=Z(b.callbacks,x=>x!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},_I=(e,n)=>{z(n,o=>{e.attr(o,null)})},AI=(e,n,o)=>{e.addNodeFilter("font",r=>{z(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&Mr(y).each(x=>{u["font-size"]=o[x-1]}),c.name="span",c.attr("style",n.serialize(u)),_I(c,["color","face","size"])})})},OI=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";z(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},nA=(e,n,o)=>{var r;const c=R1();n.convert_fonts_to_spans&&AI(e,c,Pt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),OI(e,o,c)},Bw=(e,n,o)=>{n.inline_styles&&nA(e,n,o)},YR=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),XR=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},c0=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?XR(r):decodeURIComponent(r);return R.some({type:c[1],data:f,base64Encoded:u})}else return R.none()},JR=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return R.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return R.some(new Blob([c],{type:e}))},DI=e=>new Promise((n,o)=>{c0(e).bind(({type:r,data:c,base64Encoded:u})=>JR(r,c,u)).fold(()=>o("Invalid data URI"),n)}),dp=e=>Co(e,"blob:")?YR(e):Co(e,"data:")?DI(e):Promise.reject("Unknown URI format"),px=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let QR=0;const Pw=e=>(e||"blobid")+QR++,oA=(e,n,o)=>c0(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return R.none();{const f=u?r:btoa(r);return o(f,c)}}),sA=(e,n,o)=>{const r=e.create(Pw(),n,o);return e.add(r),r},rA=(e,n,o=!1)=>oA(n,o,(r,c)=>R.from(e.getByData(r,c)).orThunk(()=>JR(c,r).map(u=>sA(e,u,r)))),eM=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Co(n,"blob:")){const r=e.getByUri(n);return he(r)?Promise.resolve(r):dp(n).then(c=>px(c).then(u=>oA(u,!1,f=>R.some(sA(e,c,f))).getOrThunk(o)))}else return Co(n,"data:")?rA(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},RI=e=>he(e.attr("data-mce-bogus")),MI=e=>e.attr("src")===us.transparentSrc||he(e.attr("data-mce-placeholder")),NI=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");MI(c)||RI(c)||St(u)||rA(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>z(c,r))}},aA=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(c,u,f)=>{const b=Pt.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();b.body=1;const M=P=>P.name in b&&IC(o,P);for(let P=0,L=c.length;P<L;P++){let ce=c[P],ie=ce.parent;if(ie&&b[ie.name]&&ce===ie.lastChild){let ee=ce.prev;for(;ee;){const ue=ee.name;if(ue!=="span"||ee.attr("data-mce-type")!=="bookmark"){ue==="br"&&(ce=null);break}ee=ee.prev}if(ce&&(ce.remove(),qv(o,y,x,ie))){const ue=o.getElementRule(ie.name);ue&&(ue.removeEmpty?ie.remove():ue.paddEmpty&&jS(f,M,ie))}}else{let ee=ce;for(;ie&&ie.firstChild===ee&&ie.lastChild===ee&&(ee=ie,!b[ie.name]);)ie=ie.parent;if(ee===ie){const ue=new Qi("#text",3);ue.value=aa,ce.replace(ue)}}}}),e.addAttributeFilter("href",c=>{let u=c.length;const f=y=>y.split(" ").filter(M=>M.length>0).concat(["noopener"]).sort().join(" "),b=y=>{const x=y?Pt.trim(y):"";return/\b(noopener)\b/g.test(x)?x:f(x)};if(!n.allow_unsafe_link_target)for(;u--;){const y=c[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,y,x;for(;u--;)if(x=c[u],x.name==="a"&&x.firstChild&&!x.attr("href"))for(y=x.parent,f=x.lastChild;f&&y;)b=f.prev,y.insert(f,x),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new Qi("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",x=Pt.explode(y," ");let M="";for(let P=0;P<x.length;P++){const L=x[P];let ce=!1,ie=r["*"];ie&&ie[L]&&(ce=!0),ie=r[b.name],!ce&&ie&&ie[L]&&(ce=!0),ce&&(M&&(M+=" "),M+=L)}M.length||(M=null),b.attr("class",M)}}),NI(e,n)},tM=Pt.each,$I=Pt.trim,BI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],PI={ftp:21,http:80,https:443,mailto:25},FI=["img","video"],Lb=(e,n)=>he(e)?!e:he(n)?!ae(FI,n):!0,nM=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},oM=(e,n,o)=>{const r=nM(n);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?Lb(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Nd{constructor(n,o={}){this.path="",this.directory="",n=$I(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Nd(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&tM(BI,(b,y)=>{let x=f[y];x&&(x=x.replace(/\(mce_at\)/g,"@@")),c[b]=x}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=Qa.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!oM(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Nd(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Nd(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?PI[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];tM(u,P=>{P&&b.push(P)});const y=[];for(let P=f.length-1;P>=0;P--)if(!(f[P].length===0||f[P]===".")){if(f[P]===".."){r++;continue}if(r>0){r--;continue}y.push(f[P])}const x=b.length-r;let M;return x<=0?M=ao(y).join("/"):M=b.slice(0,x).join("/")+"/"+ao(y).join("/"),M.indexOf("/")!==0&&(M="/"+M),c&&M.lastIndexOf("/")!==M.length-1&&(M+=c),M}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const sM=Pt.makeMap,cA=Pt.extend,Fw={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},iA=Pt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),lA="data-mce-type",rM=(e,n)=>{const o={...Fw};return o.PARSER_MEDIA_TYPE=n,e.allow_script_urls?o.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(o.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),o},II=(e,n)=>{const o=qR(),r=n.getSpecialElements(),c=e.validate;let u=0;return o.addHook("uponSanitizeElement",(f,b)=>{var y,x,M;f.nodeType===ne&&!e.allow_conditional_comments&&/^\[if/i.test((y=f.nodeValue)!==null&&y!==void 0?y:"")&&(f.nodeValue=" "+f.nodeValue);const P=b.tagName;if(f.nodeType!==ft||P==="body")return;const L=ve.fromDom(f),ce=P.toLowerCase(),ie=El(L,lA),ee=Lr(L,"data-mce-bogus");if(!ie&&te(ee)){ee==="all"?Ps(L):lc(L);return}const ue=n.getElementRule(ce);if(c&&!ue){go(r,ce)?Ps(L):lc(L);return}else b.allowedTags[P]=!0;if(c&&ue&&!ie){if(z((x=ue.attributesForced)!==null&&x!==void 0?x:[],Ne=>{or(L,Ne.name,Ne.value==="{$uid}"?`mce_${u++}`:Ne.value)}),z((M=ue.attributesDefault)!==null&&M!==void 0?M:[],Ne=>{El(L,Ne.name)||or(L,Ne.name,Ne.value==="{$uid}"?`mce_${u++}`:Ne.value)}),ue.attributesRequired&&!se(ue.attributesRequired,Ne=>El(L,Ne))){lc(L);return}if(ue.removeEmptyAttrs&&Gl(L)){lc(L);return}ue.outputName&&ue.outputName!==ce&&o2(L,ue.outputName)}}),o.addHook("uponSanitizeAttribute",(f,b)=>{const y=f.tagName.toLowerCase(),{attrName:x,attrValue:M}=b;b.keepAttr=!c||n.isValid(y,x)||Co(x,"data-")||Co(x,"aria-"),x in iA&&oM(e,M,y)&&(b.keepAttr=!1),b.keepAttr?(b.allowedAttributes[x]=!0,x in n.getBoolAttrs()&&(b.attrValue=x),e.allow_svg_data_urls&&Co(M,"data:image/svg+xml")&&(b.forceKeepAttr=!0)):f.hasAttribute(lA)&&(x==="id"||x==="class"||x==="style")&&(b.forceKeepAttr=!0)}),o},bx=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const y=u[f],x=new Qi(y.nodeName.toLowerCase(),y.nodeType);if(Bn(y)){const M=y.attributes;for(let P=0,L=M.length;P<L;P++){const ce=M[P];x.attr(ce.name,ce.value)}}else qt(y)?(x.value=y.data,c&&(x.raw=!0)):(cl(y)||v1(y)||y1(y))&&(x.value=y.data);bx(x,y,o),e.append(x)}},uA=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;z(n,b=>b(f)),St(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];z(o,f=>f(u))}},dA=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=cA(sM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=jC(n),x=/[ \t\r\n]+/g,M=/^[ \t\r\n]+/,P=/[ \t\r\n]+$/,L=Oe=>{let Ge=Oe.parent;for(;he(Ge);){if(Ge.name in f)return!0;Ge=Ge.parent}return!1},ce=Oe=>{let Ge=Oe;for(;he(Ge);){if(Ge.name in y)return qv(n,u,f,Ge);Ge=Ge.parent}return!1},ie=Oe=>Oe.name in b&&!IC(n,Oe),ee=(Oe,Ge)=>{const nt=Ge?Oe.prev:Oe.next;return he(nt)||St(Oe.parent)?!1:ie(Oe.parent)&&(Oe.parent!==e||r.isRootContent===!0)};return[Oe=>{var Ge;if(Oe.type===3&&!L(Oe)){let nt=(Ge=Oe.value)!==null&&Ge!==void 0?Ge:"";nt=nt.replace(x," "),(ZD(Oe.prev,ie)||ee(Oe,!0))&&(nt=nt.replace(M,"")),nt.length===0?Oe.remove():Oe.value=nt}},Oe=>{var Ge;if(Oe.type===1){const nt=n.getElementRule(Oe.name);if(c&&nt){const Dt=qv(n,u,f,Oe);nt.paddInEmptyBlock&&Dt&&ce(Oe)?jS(r,ie,Oe):nt.removeEmpty&&Dt?ie(Oe)?Oe.remove():Oe.unwrap():nt.paddEmpty&&(Dt||WD(Oe))&&jS(r,ie,Oe)}}else if(Oe.type===3&&!L(Oe)){let nt=(Ge=Oe.value)!==null&&Ge!==void 0?Ge:"";(Oe.next&&ie(Oe.next)||ee(Oe,!1))&&(nt=nt.replace(P,"")),nt.length===0?Oe.remove():Oe.value=nt}}]},LI=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},lu=(e={},n=Bu())=>{const o=KR(),r=KR(),c={validate:!0,root_name:"body",...e},u=new DOMParser,f=II(c,n),b=(Ge,nt,Dt="html")=>{const vn=Dt==="xhtml"?"application/xhtml+xml":"text/html",sn=go(n.getSpecialElements(),nt.toLowerCase()),mt=sn?`<${nt}>${Ge}</${nt}>`:Ge,Qe=Dt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${mt}</body></html>`:`<body>${mt}</body>`,Rn=u.parseFromString(Qe,vn).body;return f.sanitize(Rn,rM(c,vn)),f.removed=[],sn?Rn.firstChild:Rn},y=o.addFilter,x=o.getFilters,M=o.removeFilter,P=r.addFilter,L=r.getFilters,ce=r.removeFilter,ie=(Ge,nt)=>{KS(n,Ge)&&nt.push(Ge)},ee=(Ge,nt)=>{const Dt=te(nt.attr(lA)),vn=nt.type===1&&!go(Ge,nt.name)&&!T1(n,nt);return nt.type===3||vn&&!Dt},ue=(Ge,nt)=>{const Dt=cA(sM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),vn=/^[ \t\r\n]+/,sn=/[ \t\r\n]+$/;let mt=Ge.firstChild,Qe=null;const Rn=co=>{var fo,Uo;co&&(mt=co.firstChild,mt&&mt.type===3&&(mt.value=(fo=mt.value)===null||fo===void 0?void 0:fo.replace(vn,"")),mt=co.lastChild,mt&&mt.type===3&&(mt.value=(Uo=mt.value)===null||Uo===void 0?void 0:Uo.replace(sn,"")))};if(n.isValidChild(Ge.name,nt.toLowerCase())){for(;mt;){const co=mt.next;ee(Dt,mt)?(Qe||(Qe=new Qi(nt,1),Qe.attr(c.forced_root_block_attrs),Ge.insert(Qe,mt)),Qe.append(mt)):(Rn(Qe),Qe=null),mt=co}Rn(Qe)}},Oe={schema:n,addAttributeFilter:P,getAttributeFilters:L,removeAttributeFilter:ce,addNodeFilter:y,getNodeFilters:x,removeNodeFilter:M,parse:(Ge,nt={})=>{var Dt;const vn=c.validate,sn=(Dt=nt.context)!==null&&Dt!==void 0?Dt:c.root_name,mt=b(Ge,sn,nt.format);ou(n,mt);const Qe=new Qi(sn,11);bx(Qe,mt,n.getSpecialElements()),mt.innerHTML="";const[Rn,co]=dA(Qe,n,c,nt),fo=[],Uo=vn?$a=>ie($a,fo):De,vs={nodes:{},attributes:{}},Gs=$a=>T_(x(),L(),$a,vs);if(uA(Qe,[Rn,Gs],[co,Uo]),fo.reverse(),vn&&fo.length>0)if(nt.context){const{pass:$a,fail:xi}=H(fo,nn=>nn.parent===Qe);Cw(xi,n,Gs),nt.invalid=$a.length>0}else Cw(fo,n,Gs);const Zs=LI(c,nt);return Zs&&(Qe.name==="body"||nt.isRootContent)&&ue(Qe,Zs),nt.invalid||E_(vs,nt),Qe}};return aA(Oe,c),Bw(Oe,c,n),Oe},mA=e=>XS(e)?sp({validate:!1}).serialize(e):e,aM=(e,n)=>{const o=mA(e),r=n(o);if(r.isDefaultPrevented())return r;if(XS(e))if(r.content!==o){const c=lu({validate:!1,forced_root_block:!1}).parse(r.content,{context:e.name});return{...r,content:c}}else return{...r,content:e};else return r},fA=(e,n)=>{if(n.no_events)return wi.value(n);{const o=Ky(e,n);return o.isDefaultPrevented()?wi.error(dS(e,{content:"",...o}).content):wi.value(o)}},gA=(e,n,o)=>o.no_events?n:aM(n,c=>dS(e,{...o,content:c})).content,Hb=(e,n)=>{if(n.no_events)return wi.value(n);{const o=aM(n.content,r=>qy(e,{...n,content:r}));return o.isDefaultPrevented()?(uS(e,o),wi.error(void 0)):wi.value(o)}},hA=(e,n,o)=>{o.no_events||uS(e,{...o,content:n})},pA=(e,n,o)=>({element:e,width:n,rows:o}),bA=(e,n)=>({element:e,cells:n}),HI=(e,n)=>({x:e,y:n}),cM=(e,n)=>wc(e,n).bind(Mr).getOr(1),zI=(e,n,o,r,c)=>{const u=cM(c,"rowspan"),f=cM(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=bA(X0(r),[]));for(let x=n;x<n+f;x++){const M=b[y].cells;M[x]=y===o&&x===n?c:ig(c)}}},iM=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},vA=(e,n,o)=>{for(;iM(e,n,o);)n++;return n},yA=e=>Pe(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),wA=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Bs(c[u],n))return R.some(HI(u,r))}return R.none()},CA=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,x=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(bA(f[b].element,x))}return u},lM=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?CA(e,r,c,u,f):CA(e,r,f,u,c);return pA(e.element,yA(b),b)},uM=(e,n)=>{const o=ig(e.element),r=ve.fromTag("tbody");return Fo(r,n),ea(o,r),o},dM=e=>re(e.rows,n=>{const o=re(n.cells,c=>{const u=X0(c);return qr(u,"colspan"),qr(u,"rowspan"),u}),r=ig(n.element);return Fo(r,o),r}),VI=e=>{const n=pA(ig(e),0,[]);return z(Ms(e,"tr"),(o,r)=>{z(Ms(o,"td,th"),(c,u)=>{zI(n,vA(n,u,r),r,o,c)})}),pA(n.element,yA(n.rows),n.rows)},SA=e=>uM(e,dM(e)),UI=(e,n,o)=>wA(e,n).bind(r=>wA(e,o).map(c=>lM(e,r,c))),vx=e=>rn(e,n=>oo(n)==="ul"||oo(n)==="ol"),WI=(e,n)=>rn(e,o=>oo(o)==="li"&&Hy(o,n)).fold(ge([]),o=>vx(e).map(r=>{const c=ve.fromTag(oo(r)),u=bs(ns(r),(f,b)=>Co(b,"list-style"));return Se(c,u),[ve.fromTag("li"),c]}).getOr([])),ZI=(e,n)=>{const o=Pe(n,(r,c)=>(ea(c,r),c),e);return n.length>0?ep([o]):o},jI=e=>ji(e)?Cc(e).filter(Ns).fold(ge([]),n=>[e,n]):Ns(e)?[e]:[],mM=(e,n)=>{const o=ve.fromDom(n.commonAncestorContainer),r=Df(o,e),c=Z(r,eg),u=WI(r,n),f=c.concat(u.length?u:jI(o));return re(f,ig)},xA=()=>ep([]),GI=(e,n)=>ZI(ve.fromDom(n.cloneContents()),mM(e,n)),qI=(e,n)=>Au(n,"table",Ae(Bs,e)),KI=(e,n)=>qI(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=VI(o);return UI(u,r,c).map(f=>ep([SA(f)]))}).getOrThunk(xA),YI=(e,n)=>n.length>0&&n[0].collapsed?xA():GI(e,n[0]),fM=(e,n)=>{const o=Iy(n,e);return o.length>0?KI(e,o):YI(e,n)},kA=(e,n)=>n>=0&&n<e.length&&Dc(e.charAt(n)),gM=e=>Oa(e.innerText),XI=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),JI=e=>R.from(e.selection.getRng()).map(n=>{var o;const r=R.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=XI(r),f=ve.fromDom(n.cloneContents());e_(f),ZO(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=gM(b),x=Oa((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),kA(x,0)||kA(x,x.length-1)){const M=r.getOr(c),P=gM(M),L=P.indexOf(y);if(L===-1)return y;{const ce=kA(P,L-1),ie=kA(P,L+y.length);return(ce?" ":"")+y+(ie?" ":"")}}else return y}).getOr(""),QI=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=RS(e,Zh(c)),f=n.contextual?fM(ve.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},e8=(e,n)=>{if(n.format==="text")return JI(e);{const o=QI(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},t8=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),n8=(e,n,o={})=>{const r=t8(o,n);return fA(e,r).fold(Ue,c=>{const u=e8(e,c);return gA(e,u,c)})},yx=0,hM=1,pM=2,o8=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(M,P,L)=>({start:M,end:P,diag:L}),f=(M,P,L,ce,ie)=>{const ee=y(M,P,L,ce);if(ee===null||ee.start===P&&ee.diag===P-ce||ee.end===M&&ee.diag===M-L){let ue=M,Ne=L;for(;ue<P||Ne<ce;)ue<P&&Ne<ce&&e[ue]===n[Ne]?(ie.push([yx,e[ue]]),++ue,++Ne):P-M>ce-L?(ie.push([pM,e[ue]]),++ue):(ie.push([hM,n[Ne]]),++Ne)}else{f(M,ee.start,L,ee.start-ee.diag,ie);for(let ue=ee.start;ue<ee.end;++ue)ie.push([yx,e[ue]]);f(ee.end,P,ee.end-ee.diag,ce,ie)}},b=(M,P,L,ce)=>{let ie=M;for(;ie-P<ce&&ie<L&&e[ie]===n[ie-P];)++ie;return u(M,ie,P)},y=(M,P,L,ce)=>{const ie=P-M,ee=ce-L;if(ie===0||ee===0)return null;const ue=ie-ee,Ne=ee+ie,Oe=(Ne%2===0?Ne:Ne+1)/2;r[1+Oe]=M,c[1+Oe]=P+1;let Ge,nt,Dt,vn,sn;for(Ge=0;Ge<=Oe;++Ge){for(nt=-Ge;nt<=Ge;nt+=2){for(Dt=nt+Oe,nt===-Ge||nt!==Ge&&r[Dt-1]<r[Dt+1]?r[Dt]=r[Dt+1]:r[Dt]=r[Dt-1]+1,vn=r[Dt],sn=vn-M+L-nt;vn<P&&sn<ce&&e[vn]===n[sn];)r[Dt]=++vn,++sn;if(ue%2!==0&&ue-Ge<=nt&&nt<=ue+Ge&&c[Dt-ue]<=r[Dt])return b(c[Dt-ue],nt+M-L,P,ce)}for(nt=ue-Ge;nt<=ue+Ge;nt+=2){for(Dt=nt+Oe-ue,nt===ue-Ge||nt!==ue+Ge&&c[Dt+1]<=c[Dt-1]?c[Dt]=c[Dt+1]-1:c[Dt]=c[Dt-1],vn=c[Dt]-1,sn=vn-M+L-nt;vn>=M&&sn>=L&&e[vn]===n[sn];)c[Dt]=vn--,sn--;if(ue%2===0&&-Ge<=nt&&nt<=Ge&&c[Dt]<=r[Dt+ue])return b(c[Dt],nt+M-L,P,ce)}}return null},x=[];return f(0,e.length,0,n.length,x),x},bM=e=>Bn(e)?e.outerHTML:qt(e)?Qa.encodeRaw(e.data,!1):cl(e)?"<!--"+e.data+"-->":"",s8=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},TU=(e,n,o)=>{const r=s8(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},EU=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},r8=(e,n)=>{let o=0;z(e,r=>{r[0]===yx?o++:r[0]===hM?(TU(n,r[1],o),o++):r[0]===pM&&EU(n,o)})},a8=e=>Z(re(Ro(e.childNodes),bM),n=>n.length>0),_U=(e,n)=>{const o=re(Ro(n.childNodes),bM);return r8(o8(o,e),n),n},c8=eo(()=>document.implementation.createHTMLDocument("undo")),oa=e=>e.indexOf("</iframe>")!==-1,TA=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),AU=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),wx=e=>{const n=a8(e.getBody()),o=Qn(n,c=>{const u=WO(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return oa(r)?TA(o):AU(r)},EA=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?_U(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:he(r)&&My(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},mp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,i8=e=>{const n=ve.fromTag("body",c8());return ch(n,mp(e)),z(Ms(n,"*[data-mce-bogus]"),lc),Gf(n)},OU=(e,n)=>mp(e)===mp(n),li=(e,n)=>i8(e)===i8(n),Cx=(e,n)=>!e||!n?!1:OU(e,n)?!0:li(e,n),Sx=e=>e.get()===0,Iw=(e,n,o)=>{Sx(o)&&(e.typing=n)},vM=(e,n)=>{e.typing&&(Iw(e,!1,n),e.add())},l8=e=>{e.typing&&(e.typing=!1,e.add())},xx=(e,n,o)=>{Sx(n)&&o.set(ec(e.selection))},u8=(e,n,o,r,c,u,f)=>{const b=wx(e),y=Pt.extend(u||{},b);if(!Sx(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&Cx(x,y))return null;n.data[o.get()]&&c.get().each(L=>{n.data[o.get()].beforeBookmark=L});const M=fy(e);if(M&&n.data.length>M){for(let L=0;L<n.data.length-1;L++)n.data[L]=n.data[L+1];n.data.length--,o.set(n.data.length)}y.bookmark=ec(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const P={level:y,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",P),e.dispatch("change",P)):e.dispatch("AddUndo",P),y},_A=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},d8=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];EA(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},yM=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],EA(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},wM=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,Iw(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],EA(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},AA=e=>{e.clear(),e.add()},CM=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!Cx(wx(e),n.data[0]),OA=(e,n)=>n.get()<e.data.length-1&&!e.typing,m8=(e,n,o)=>(vM(e,n),e.beforeChange(),e.ignore(o),e.add()),f8=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},g8=(e,n)=>{const o=e.dom,r=he(n)?n:e.getBody();z(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=gO(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=gf(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},uu=e=>({init:{bindEvents:De},undoManager:{beforeChange:(n,o)=>xx(e,n,o),add:(n,o,r,c,u,f)=>u8(e,n,o,r,c,u,f),undo:(n,o,r)=>wM(e,n,o,r),redo:(n,o)=>yM(e,n,o),clear:(n,o)=>_A(e,n,o),reset:n=>AA(n),hasUndo:(n,o)=>CM(e,n,o),hasRedo:(n,o)=>OA(n,o),transact:(n,o,r)=>m8(n,o,r),ignore:(n,o)=>f8(n,o),extra:(n,o,r,c)=>d8(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>B_(e,n,o,r,c),matchAll:(n,o)=>K5(e,n,o),matchNode:(n,o,r,c)=>Cm(e,n,o,r,c),canApply:n=>cR(e,n),closest:n=>ex(e,n),apply:(n,o,r)=>AR(e,n,o,r),remove:(n,o,r,c)=>TR(e,n,o,r,c),toggle:(n,o,r)=>$R(e,n,o,r),formatChanged:(n,o,r,c,u)=>j_(e,n,o,r,c,u)},editor:{getContent:n=>qF(e,n),setContent:(n,o)=>q5(e,n,o),insertContent:(n,o)=>Mb(e,n,o),addVisual:n=>g8(e,n)},selection:{getContent:(n,o)=>n8(e,n,o)},autocompleter:{addDecoration:n=>LF(e,n),removeDecoration:()=>zF(e,ve.fromDom(e.getBody()))},raw:{getModel:()=>R.none()}}),h8=e=>{const n=x=>Je(x)?x:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,M,P)=>r.transact(P),ignore:(x,M)=>r.ignore(M),extra:(x,M,P,L)=>r.extra(P,L)},formatter:{match:(x,M,P,L)=>c.match(x,n(M),L),matchAll:c.matchAll,matchNode:c.matchNode,canApply:x=>c.canApply(x),closest:x=>c.closest(x),apply:(x,M,P)=>c.apply(x,n(M)),remove:(x,M,P,L)=>c.remove(x,n(M)),toggle:(x,M,P)=>c.toggle(x,n(M)),formatChanged:(x,M,P,L,ce)=>c.formatChanged(M,P,L,ce)},editor:{getContent:x=>u.getContent(x),setContent:(x,M)=>({content:u.setContent(x,M),html:""}),insertContent:(x,M)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,M)=>f.getContent(M)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>R.some(y.getRawModel())}}},p8=()=>{const e=ge(null),n=ge("");return{init:{bindEvents:De},undoManager:{beforeChange:De,add:e,undo:e,redo:e,clear:De,reset:De,hasUndo:Nt,hasRedo:Nt,transact:e,ignore:De,extra:De},formatter:{match:Nt,matchAll:ge([]),matchNode:ge(void 0),canApply:Nt,closest:n,apply:De,remove:De,toggle:De,formatChanged:ge({unbind:De})},editor:{getContent:n,setContent:ge({content:"",html:""}),insertContent:ge(""),addVisual:De},selection:{getContent:n},autocompleter:{addDecoration:De,removeDecoration:De},raw:{getModel:ge(R.none())}}},Mf=e=>go(e.plugins,"rtc"),b8=e=>cs(e.plugins,"rtc").bind(n=>R.from(n.setup)),v8=e=>{const n=e;return b8(e).fold(()=>(n.rtcInstance=uu(e),R.none()),o=>(n.rtcInstance=p8(),R.some(()=>o().then(r=>(n.rtcInstance=h8(r),r.rtc.isRemote)))))},kx=e=>e.rtcInstance?e.rtcInstance:uu(e),Za=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},y8=(e,n,o)=>{Za(e).undoManager.beforeChange(n,o)},w8=(e,n,o,r,c,u,f)=>Za(e).undoManager.add(n,o,r,c,u,f),Tx=(e,n,o,r)=>Za(e).undoManager.undo(n,o,r),C8=(e,n,o)=>Za(e).undoManager.redo(n,o),S8=(e,n,o)=>{Za(e).undoManager.clear(n,o)},SM=(e,n)=>{Za(e).undoManager.reset(n)},DA=(e,n,o)=>Za(e).undoManager.hasUndo(n,o),x8=(e,n,o)=>Za(e).undoManager.hasRedo(n,o),k8=(e,n,o,r)=>Za(e).undoManager.transact(n,o,r),DU=(e,n,o)=>{Za(e).undoManager.ignore(n,o)},T8=(e,n,o,r,c)=>{Za(e).undoManager.extra(n,o,r,c)},Lw=(e,n,o,r,c)=>Za(e).formatter.match(n,o,r,c),xM=(e,n,o)=>Za(e).formatter.matchAll(n,o),kM=(e,n,o,r,c)=>Za(e).formatter.matchNode(n,o,r,c),E8=(e,n)=>Za(e).formatter.canApply(n),TM=(e,n)=>Za(e).formatter.closest(n),_8=(e,n,o,r)=>{Za(e).formatter.apply(n,o,r)},A8=(e,n,o,r,c)=>{Za(e).formatter.remove(n,o,r,c)},O8=(e,n,o,r)=>{Za(e).formatter.toggle(n,o,r)},D8=(e,n,o,r,c,u)=>Za(e).formatter.formatChanged(n,o,r,c,u),EM=(e,n)=>kx(e).editor.getContent(n),R8=(e,n,o)=>kx(e).editor.setContent(n,o),M8=(e,n,o)=>kx(e).editor.insertContent(n,o),Hw=(e,n,o)=>Za(e).selection.getContent(n,o),_M=(e,n)=>Za(e).editor.addVisual(n),RA=e=>Za(e).init.bindEvents(),N8=(e,n)=>Za(e).autocompleter.addDecoration(n),$8=e=>Za(e).autocompleter.removeDecoration(),B8=(e,n={})=>{const o=n.format?n.format:"html";return Hw(e,o,n)},MA=e=>e.dom.length===0?(Ps(e),R.none()):R.some(e),P8=(e,n)=>e.filter(o=>Vu.isBookmarkNode(o.dom)).bind(n?Zd:Ic),F8=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(g_(c,u,!1,!r),o.setStart(u,f)):(g_(u,c,!1,!r),o.setEnd(u,f))},I8=(e,n)=>{Cc(e).each(o=>{const r=e.dom;n&&mw(o,vt(r,0))?PS(r,0):!n&&Uv(o,vt(r,r.length))&&f_(r,r.length)})},AM=(e,n,o,r)=>{e.bind(c=>((r?f_:PS)(c.dom,r?c.dom.length:0),n.filter(Ds).map(f=>F8(c,f,o,r)))).orThunk(()=>P8(n,r).or(n).filter(Ds).map(u=>I8(u,r)))},RU=(e,n)=>{const o=R.from(n.firstChild).map(ve.fromDom),r=R.from(n.lastChild).map(ve.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(Ic).filter(Ds).bind(MA),u=r.bind(Zd).filter(Ds).bind(MA);AM(c,o,e,!0),AM(u,r,e,!1),e.collapse(!1)},xm=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),OM=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return sp({validate:!1},e.schema).serialize(u)}else return n.content},L8=(e,n,o={})=>{const r=xm(o,n);Hb(e,r).each(c=>{const u=OM(e,c),f=e.selection.getRng();RU(f,f.createContextualFragment(u)),e.selection.setRng(f),on(e,f),hA(e,u,c)})},DM=(e,n,o)=>{if(go(e,n)){const r=Z(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var H8=(e,n)=>{let o,r;const c=(b,y)=>rn(y,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,x=u(y),M={};ln(o,(P,L)=>{c(L,x).each(ce=>{r[L]||(z(P,ie=>{ie(!0,{node:ce,selector:L,parents:x})}),r[L]=P),M[L]=P})}),ln(r,(P,L)=>{M[L]||(delete r[L],z(P,ce=>{ce(!1,{node:y,selector:L,parents:x})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{DM(o,b,y),DM(r,b,y)}})}};const RM=e=>!!(e&&e.ownerDocument)&&qa(ve.fromDom(e.ownerDocument),ve.fromDom(e)),Us=e=>e?RM(e.startContainer)&&RM(e.endContainer):!1,z8=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=H8(e,r),b=(nn,Wo)=>{const po=e.createRng();he(nn)&&he(Wo)?(po.setStart(nn,Wo),po.setEnd(nn,Wo),Ge(po),ue(!1)):(wv(e,po,r.getBody(),!0),Ge(po))},y=nn=>B8(r,nn),x=(nn,Wo)=>L8(r,nn,Wo),M=nn=>$O(r.getBody(),Oe(),nn),P=nn=>BO(r.getBody(),Oe(),nn),L=(nn,Wo)=>$a.getBookmark(nn,Wo),ce=nn=>$a.moveToBookmark(nn),ie=(nn,Wo)=>(FO(e,nn,Wo).each(Ge),nn),ee=()=>{const nn=Oe(),Wo=Ne();return!nn||nn.item?!1:nn.compareEndPoints?nn.compareEndPoints("StartToEnd",nn)===0:!Wo||nn.collapsed},ue=nn=>{const Wo=Oe();Wo.collapse(!!nn),Ge(Wo)},Ne=()=>n.getSelection?n.getSelection():n.document.selection,Oe=()=>{let nn;const Wo=(Dr,Dn,Do)=>{try{return Dn.compareBoundaryPoints(Dr,Do)}catch{return-1}},po=n.document;if(he(r.bookmark)&&!Ob(r)){const Dr=Rc(r);if(Dr.isSome())return Dr.map(Dn=>RS(r,[Dn])[0]).getOr(po.createRange())}try{const Dr=Ne();Dr&&!Gm(Dr.anchorNode)&&(Dr.rangeCount>0?nn=Dr.getRangeAt(0):nn=po.createRange(),nn=RS(r,[nn])[0])}catch{}if(nn||(nn=po.createRange()),ti(nn.startContainer)&&nn.collapsed){const Dr=e.getRoot();nn.setStart(Dr,0),nn.setEnd(Dr,0)}return c&&u&&(Wo(nn.START_TO_START,nn,c)===0&&Wo(nn.END_TO_END,nn,c)===0?nn=u:(c=null,u=null)),nn},Ge=(nn,Wo)=>{if(!Us(nn))return;const po=Ne();if(nn=r.dispatch("SetSelectionRange",{range:nn,forward:Wo}).range,po){u=nn;try{po.removeAllRanges(),po.addRange(nn)}catch{}Wo===!1&&po.extend&&(po.collapse(nn.endContainer,nn.endOffset),po.extend(nn.startContainer,nn.startOffset)),c=po.rangeCount>0?po.getRangeAt(0):null}if(!nn.collapsed&&nn.startContainer===nn.endContainer&&(po!=null&&po.setBaseAndExtent)&&nn.endOffset-nn.startOffset<2&&nn.startContainer.hasChildNodes()){const Dn=nn.startContainer.childNodes[nn.startOffset];Dn&&Dn.nodeName==="IMG"&&(po.setBaseAndExtent(nn.startContainer,nn.startOffset,nn.endContainer,nn.endOffset),(po.anchorNode!==nn.startContainer||po.focusNode!==nn.endContainer)&&po.setBaseAndExtent(Dn,0,Dn,1))}r.dispatch("AfterSetSelectionRange",{range:nn,forward:Wo})},nt=nn=>(x(e.getOuterHTML(nn)),nn),Dt=()=>$F(r.getBody(),Oe()),vn=(nn,Wo)=>DS(e,Oe(),nn,Wo),sn=()=>{const nn=Ne(),Wo=nn==null?void 0:nn.anchorNode,po=nn==null?void 0:nn.focusNode;if(!nn||!Wo||!po||Gm(Wo)||Gm(po))return!0;const Dr=e.createRng(),Dn=e.createRng();try{Dr.setStart(Wo,nn.anchorOffset),Dr.collapse(!0),Dn.setStart(po,nn.focusOffset),Dn.collapse(!0)}catch{return!0}return Dr.compareBoundaryPoints(Dr.START_TO_START,Dn)<=0},Zs={dom:e,win:n,serializer:o,editor:r,expand:(nn={type:"word"})=>Ge(Mg(e).expand(Oe(),nn)),collapse:ue,setCursorLocation:b,getContent:y,setContent:x,getBookmark:L,moveToBookmark:ce,select:ie,isCollapsed:ee,isForward:sn,setNode:nt,getNode:Dt,getSel:Ne,setRng:Ge,getRng:Oe,getStart:M,getEnd:P,getSelectedBlocks:vn,normalize:()=>{const nn=Oe(),Wo=Ne();if(!J2(Wo)&&ms(r)){const po=Bv(e,nn);return po.each(Dr=>{Ge(Dr,sn())}),po.getOr(nn)}return nn},selectorChanged:(nn,Wo)=>(f(nn,Wo),Zs),selectorChangedWithUnbind:f,getScrollContainer:()=>{let nn,Wo=e.getRoot();for(;Wo&&Wo.nodeName!=="BODY";){if(Wo.scrollHeight>Wo.clientHeight){nn=Wo;break}Wo=Wo.parentNode}return nn},scrollIntoView:(nn,Wo)=>{he(nn)?bn(r,nn,Wo):on(r,Oe(),Wo)},placeCaretAt:(nn,Wo)=>Ge(Rg(nn,Wo,r.getDoc())),getBoundingClientRect:()=>{const nn=Oe();return nn.collapsed?vt.fromRangeStart(nn).getClientRects()[0]:nn.getBoundingClientRect()},destroy:()=>{n=c=u=null,xi.destroy()}},$a=Vu(Zs),xi=Fl(Zs,r);return Zs.bookmarkManager=$a,Zs.controlSelection=xi,Zs},V8=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const x=r[y];let M=x.attr(u);M!==void 0?(x.attr(c,M.length>0?M:null),x.attr(u,null)):(M=x.attr(c),c==="style"?M=o.serializeStyle(o.parseStyle(M),x.name):f&&(M=f.call(b,M,c,x.name)),x.attr(c,M.length>0?M:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(R.from(b.firstChild).exists(x=>{var M;return!ll((M=x.value)!==null&&M!==void 0?M:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=Qa.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],x=y.firstChild,M=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(c==="script"){const P=y.attr("type");P&&y.attr("type",P==="mce-no/type"?null:P.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&M.length>0&&(x.value=`// <![CDATA[
`+f(M)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&M.length>0&&(x.value=`<!--
`+f(M)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{z(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)})},U8=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},xa=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Pt.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return RE(e,{...o,node:u}),r&&(c.doc=r),u},W8=(e,n)=>he(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,zw=(e,n,o)=>W8(e,o)?xa(e,n,o):n,Z8=(e,n,o)=>{Pt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},j8=(e,n,o)=>!n.no_events&&e?ME(e,{...n,content:o}).content:o,G8=(e,n,o)=>{const r=Oa(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Jf(ve.fromDom(n))?r:Pt.trim(r)},MM=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return U8(c),c},fp=(e,n,o)=>sp(e,n).serialize(o),Vl=(e,n,o,r,c)=>{const u=fp(n,o,r);return j8(e,c,u)},Vw=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:br.DOM,c=n&&n.schema?n.schema:Bu(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=lu(e,c);V8(u,e,r);const f=(b,y={})=>{const x={format:"html",...y},M=zw(n,b,x),P=G8(r,M,x),L=MM(u,P,x);return x.format==="tree"?L:Vl(n,e,c,L,x)};return{schema:c,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:Ae(Z8,u,o),getTempAttrs:ge(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},gp=(e,n)=>{const o=Vw(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},Ig="html",Uw=(e,n)=>({...e,format:n,get:!0,getInner:!0}),NA=(e,n={})=>{const o=n.format?n.format:Ig,r=Uw(n,o);return fA(e,r).fold(Ue,c=>{const u=EM(e,c);return gA(e,u,c)})},$A="html",NM=(e,n)=>({format:$A,...e,set:!0,content:n}),Ex=(e,n,o={})=>{const r=NM(o,n);return Hb(e,r).map(c=>{const u=R8(e,c.content,c);return hA(e,u.html,c),u.content}).getOr(n)},q8="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),K8="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),$M=e=>{const n=Z(q8,r=>go(e,r)),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Lt(n)},BM=e=>{const n=Pt.makeMap(e.plugins," "),r=Z(K8,c=>go(n,c));return Lt(r)},PM=(e,n)=>{const o=$M(e),r=BM(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",x=c?`

Plugins:${b}${r.join(b)}`:"",M=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+x+M)}},FM=(e,n)=>{PM(e,n)},i0=br.DOM,MU=e=>{i0.setStyle(e.id,"display",e.orgDisplay)},_x=e=>R.from(e).each(n=>n.destroy()),NU=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},Y8=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),i0.unbind(n,"submit reset",e.formEventDelegate))},X8=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&he(c==null?void 0:c.nextSibling)&&i0.remove(c.nextSibling),bm(e),e.editorManager.remove(e),!e.inline&&r&&MU(e),NE(e),i0.remove(e.getContainer()),_x(n),_x(o),e.destroy()}},Nf=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),_x(o),_x(r)),Y8(e),NU(e),e.destroyed=!0}},BA=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>go(e,c)}})(),l0=vi.ModelManager,u0=(e,n)=>n.dom[e],IM=(e,n)=>parseInt(He(n,e),10),LM=Ae(u0,"clientWidth"),HM=Ae(u0,"clientHeight"),zM=Ae(IM,"margin-top"),J8=Ae(IM,"margin-left"),Q8=e=>e.dom.getBoundingClientRect(),hp=(e,n,o)=>{const r=LM(e),c=HM(e);return n>=0&&o>=0&&n<=r&&o<=c},e6=(e,n,o,r)=>{const c=Q8(n),u=e?c.left+n.dom.clientLeft+J8(n):0,f=e?c.top+n.dom.clientTop+zM(n):0,b=o-u,y=r-f;return{x:b,y}},t6=(e,n,o)=>{const r=ve.fromDom(e.getBody()),c=e.inline?r:Lm(r),u=e6(e.inline,c,n,o);return hp(c,u.x,u.y)},n6=e=>R.from(e).map(ve.fromDom),o6=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return n6(n).map(rl).getOr(!1)};var s6=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const VM=e=>{const n=[],o=()=>{const L=e.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():s6()},r=()=>R.from(n[0]),c=(L,ce)=>L.type===ce.type&&L.text===ce.text&&!L.progressBar&&!L.timeout&&!ce.progressBar&&!ce.timeout,u=()=>{z(n,L=>{L.reposition()})},f=L=>{n.push(L)},b=L=>{ro(n,ce=>ce===L).each(ce=>{n.splice(ce,1)})},y=(L,ce=!0)=>e.removed||!o6(e)?{}:(ce&&e.dispatch("BeforeOpenNotification",{notification:L}),rn(n,ie=>c(o().getArgs(ie),L)).getOrThunk(()=>{e.editorManager.setActive(e);const ie=o().open(L,()=>{b(ie),u(),r().fold(()=>e.focus(),ee=>kt(ve.fromDom(ee.getEl())))});return f(ie),u(),e.dispatch("OpenNotification",{notification:{...ie}}),ie})),x=()=>{r().each(L=>{o().close(L),b(L),u()})},M=ge(n);return(L=>{L.on("SkinLoaded",()=>{const ce=jT(L);ce&&y({text:ce,type:"warning",timeout:0},!1),u()}),L.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),L.on("remove",()=>{z(n.slice(),ce=>{o().close(ce)})})})(e),{open:y,close:x,getNotifications:M}},d0=vi.PluginManager,zb=vi.ThemeManager;var r6=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const UM=e=>{let n=[];const o=()=>{const ee=e.theme;return ee&&ee.getWindowManagerImpl?ee.getWindowManagerImpl():r6()},r=(ee,ue)=>(...Ne)=>ue?ue.apply(ee,Ne):void 0,c=ee=>{e.dispatch("OpenWindow",{dialog:ee})},u=ee=>{e.dispatch("CloseWindow",{dialog:ee})},f=ee=>{n.push(ee),c(ee)},b=ee=>{u(ee),n=Z(n,ue=>ue!==ee),n.length===0&&e.focus()},y=()=>R.from(n[n.length-1]),x=ee=>{e.editorManager.setActive(e),Ks(e),e.ui.show();const ue=ee();return f(ue),ue},M=(ee,ue)=>x(()=>o().open(ee,ue,b)),P=ee=>x(()=>o().openUrl(ee,b)),L=(ee,ue,Ne)=>{const Oe=o();Oe.alert(ee,r(Ne||Oe,ue))},ce=(ee,ue,Ne)=>{const Oe=o();Oe.confirm(ee,r(Ne||Oe,ue))},ie=()=>{y().each(ee=>{o().close(ee),b(ee)})};return e.on("remove",()=>{z(n,ee=>{o().close(ee)})}),{open:M,openUrl:P,alert:L,confirm:ce,close:ie}},WM=(e,n)=>{e.notificationManager.open({type:"error",text:n})},PA=(e,n)=>{e._skinLoaded?WM(e,n):e.on("SkinLoaded",()=>{WM(e,n)})},Ww=(e,n)=>{PA(e,Vc.translate(["Failed to upload image: {0}",n]))},Zw=(e,n,o)=>{Cb(e,n,{message:o}),console.error(o)},Vb=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,a6=(e,n,o)=>{Zw(e,"PluginLoadError",Vb("plugin",n,o))},c6=(e,n,o)=>{Zw(e,"IconsLoadError",Vb("icons",n,o))},i6=(e,n,o)=>{Zw(e,"LanguageLoadError",Vb("language",n,o))},l6=(e,n,o)=>{Zw(e,"ThemeLoadError",Vb("theme",n,o))},Ub=(e,n,o)=>{Zw(e,"ModelLoadError",Vb("model",n,o))},Wb=(e,n,o)=>{const r=Vc.translate(["Failed to initialize plugin: {0}",n]);Cb(e,"PluginLoadError",{message:r}),Zb(r,o),PA(e,r)},Zb=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},Ax=e=>/^[a-z0-9\-]+$/i.test(e),jb=e=>jw(e,Wa(e)),Gb=e=>jw(e,ff(e)),jw=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return re(n,u=>Ax(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},Ox=e=>{e.contentCSS=e.contentCSS.concat(jb(e),Gb(e))},ZM=Ve,FA=(e,n,o)=>ih(e,n,ZM,o),IA=e=>e?Ro(e.getElementsByTagName("img")):[],jM=(e,n)=>{const o={};return{findAll:(c,u=Ve)=>{const f=Z(IA(c),y=>{const x=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!x||x===us.transparentSrc?!1:Co(x,"blob:")?!e.isUploaded(x)&&u(y):Co(x,"data:")?u(y):!1}),b=re(f,y=>{const x=y.src;if(go(o,x))return o[x].then(M=>te(M)?M:{image:y,blobInfo:M.blobInfo});{const M=eM(n,x).then(P=>(delete o[x],{image:y,blobInfo:P})).catch(P=>(delete o[x],P));return o[x]=M,M}});return Promise.all(b)}}},LA=()=>{let o={};const r=(L,ce)=>({status:L,resultUri:ce}),c=L=>L in o;return{hasBlobUri:c,getResultUri:L=>{const ce=o[L];return ce?ce.resultUri:null},isPending:L=>c(L)?o[L].status===1:!1,isUploaded:L=>c(L)?o[L].status===2:!1,markPending:L=>{o[L]=r(1,null)},markUploaded:(L,ce)=>{o[L]=r(2,ce)},removeFailed:L=>{delete o[L]},destroy:()=>{o={}}}};let m0=0;const GM=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},qM=e=>e+m0+++GM(),KM=()=>{let e=[];const n=P=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[P.toLowerCase()]||"dat",o=(P,L,ce,ie,ee)=>{if(te(P))return r({id:P,name:ie,filename:ee,blob:L,base64:ce});if(Je(P))return r(P);throw new Error("Unknown input type")},r=P=>{if(!P.blob||!P.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const L=P.id||qM("blobid"),ce=P.name||L,ie=P.blob;return{id:ge(L),name:ge(ce),filename:ge(P.filename||ce+"."+n(ie.type)),blob:ge(ie),base64:ge(P.base64),blobUri:ge(P.blobUri||URL.createObjectURL(ie)),uri:ge(P.uri)}},c=P=>{f(P.id())||e.push(P)},u=P=>rn(e,P).getOrUndefined(),f=P=>u(L=>L.id()===P);return{create:o,add:c,get:f,getByUri:P=>u(L=>L.blobUri()===P),getByData:(P,L)=>u(ce=>ce.base64()===P&&ce.blob().type===L),findFirst:u,removeByUri:P=>{e=Z(e,L=>L.blobUri()===P?(URL.revokeObjectURL(L.blobUri()),!1):!0)},destroy:()=>{z(e,P=>{URL.revokeObjectURL(P.blobUri())}),e=[]}}},Dx=(e,n)=>{const o={},r=(ee,ue)=>ee?ee.replace(/\/$/,"")+"/"+ue.replace(/^\//,""):ue,c=(ee,ue)=>new Promise((Ne,Oe)=>{const Ge=new XMLHttpRequest;Ge.open("POST",n.url),Ge.withCredentials=n.credentials,Ge.upload.onprogress=Dt=>{ue(Dt.loaded/Dt.total*100)},Ge.onerror=()=>{Oe("Image upload failed due to a XHR Transport error. Code: "+Ge.status)},Ge.onload=()=>{if(Ge.status<200||Ge.status>=300){Oe("HTTP Error: "+Ge.status);return}const Dt=JSON.parse(Ge.responseText);if(!Dt||!te(Dt.location)){Oe("Invalid JSON: "+Ge.responseText);return}Ne(r(n.basePath,Dt.location))};const nt=new FormData;nt.append("file",ee.blob(),ee.filename()),Ge.send(nt)}),u=Q(n.handler)?n.handler:c,f=()=>new Promise(ee=>{ee([])}),b=(ee,ue)=>({url:ue,blobInfo:ee,status:!0}),y=(ee,ue)=>({url:"",blobInfo:ee,status:!1,error:ue}),x=(ee,ue)=>{Pt.each(o[ee],Ne=>{Ne(ue)}),delete o[ee]},M=(ee,ue,Ne)=>(e.markPending(ee.blobUri()),new Promise(Oe=>{let Ge,nt;try{const Dt=()=>{Ge&&(Ge.close(),nt=De)},vn=mt=>{Dt(),e.markUploaded(ee.blobUri(),mt),x(ee.blobUri(),b(ee,mt)),Oe(b(ee,mt))},sn=mt=>{Dt(),e.removeFailed(ee.blobUri()),x(ee.blobUri(),y(ee,mt)),Oe(y(ee,mt))};nt=mt=>{mt<0||mt>100||R.from(Ge).orThunk(()=>R.from(Ne).map(ze)).each(Qe=>{Ge=Qe,Qe.progressBar.value(mt)})},ue(ee,nt).then(vn,mt=>{sn(te(mt)?{message:mt}:mt)})}catch(Dt){Oe(y(ee,Dt))}})),P=ee=>ee===c,L=ee=>{const ue=ee.blobUri();return new Promise(Ne=>{o[ue]=o[ue]||[],o[ue].push(Ne)})},ce=(ee,ue)=>(ee=Pt.grep(ee,Ne=>!e.isUploaded(Ne.blobUri())),Promise.all(Pt.map(ee,Ne=>e.isPending(Ne.blobUri())?L(Ne):M(Ne,u,ue))));return{upload:(ee,ue)=>!n.url&&P(u)?f():ce(ee,ue)}},HA=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),zA=(e,n)=>Dx(n,{url:UT(e),basePath:lm(e),credentials:S2(e),handler:cy(e)}),YM=e=>{const n=LA(),o=zA(e,n);return{upload:(r,c=!0)=>o.upload(r,c?HA(e):void 0)}},XM=e=>{const n=KM();let o,r;const c=LA(),u=[],f=Ge=>nt=>e.selection?Ge(nt):[],b=Ge=>Ge+(Ge.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(Ge,nt,Dt)=>{let vn=0;do vn=Ge.indexOf(nt,vn),vn!==-1&&(Ge=Ge.substring(0,vn)+Dt+Ge.substr(vn+nt.length),vn+=Dt.length-nt.length+1);while(vn!==-1);return Ge},x=(Ge,nt,Dt)=>{const vn=`src="${Dt}"${Dt===us.transparentSrc?' data-mce-placeholder="1"':""}`;return Ge=y(Ge,`src="${nt}"`,vn),Ge=y(Ge,'data-mce-src="'+nt+'"','data-mce-src="'+Dt+'"'),Ge},M=(Ge,nt)=>{z(e.undoManager.data,Dt=>{Dt.type==="fragmented"?Dt.fragments=re(Dt.fragments,vn=>x(vn,Ge,nt)):Dt.content=x(Dt.content,Ge,nt)})},P=(Ge,nt)=>{const Dt=e.convertURL(nt,"src");M(Ge.src,nt),Rs(ve.fromDom(Ge),{src:ay(e)?b(nt):nt,"data-mce-src":Dt})},L=()=>(o||(o=zA(e,c)),ue().then(f(Ge=>{const nt=re(Ge,Dt=>Dt.blobInfo);return o.upload(nt,HA(e)).then(f(Dt=>{const vn=[];let sn=!1;const mt=re(Dt,(Qe,Rn)=>{const{blobInfo:co,image:fo}=Ge[Rn];let Uo=!1;return Qe.status&&VT(e)?(Qe.url&&!no(fo.src,Qe.url)&&(sn=!0),n.removeByUri(fo.src),Mf(e)||P(fo,Qe.url)):Qe.error&&(Qe.error.remove&&(M(fo.src,us.transparentSrc),vn.push(fo),Uo=!0),Ww(e,Qe.error.message)),{element:fo,status:Qe.status,uploadUri:Qe.url,blobInfo:co,removed:Uo}});return vn.length>0&&!Mf(e)?e.undoManager.transact(()=>{z(vn,Qe=>{e.dom.remove(Qe),n.removeByUri(Qe.src)})}):sn&&e.undoManager.dispatchChange(),mt}))}))),ce=()=>C2(e)?L():Promise.resolve([]),ie=Ge=>kn(u,nt=>nt(Ge)),ee=Ge=>{u.push(Ge)},ue=()=>(r||(r=jM(c,n)),r.findAll(e.getBody(),ie).then(f(Ge=>{const nt=Z(Ge,Dt=>te(Dt)?(PA(e,Dt),!1):!0);return Mf(e)||z(nt,Dt=>{M(Dt.image.src,Dt.blobInfo.blobUri()),Dt.image.src=Dt.blobInfo.blobUri(),Dt.image.removeAttribute("data-mce-src")}),nt}))),Ne=()=>{n.destroy(),c.destroy(),r=o=null},Oe=Ge=>Ge.replace(/src="(blob:[^"]+)"/g,(nt,Dt)=>{const vn=c.getResultUri(Dt);if(vn)return'src="'+vn+'"';let sn=n.getByUri(Dt);return sn||(sn=Pe(e.editorManager.get(),(mt,Qe)=>mt||Qe.editorUpload&&Qe.editorUpload.blobCache.getByUri(Dt),void 0)),sn?'src="data:'+sn.blob().type+";base64,"+sn.base64()+'"':nt});return e.on("SetContent",()=>{C2(e)?ce():ue()}),e.on("RawSaveContent",Ge=>{Ge.content=Oe(Ge.content)}),e.on("GetContent",Ge=>{Ge.source_view||Ge.format==="raw"||Ge.format==="tree"||(Ge.content=Oe(Ge.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Ge=>{z(Ge,nt=>{const Dt=nt.attr("src");if(!Dt||n.getByUri(Dt))return;const vn=c.getResultUri(Dt);vn&&nt.attr("src",vn)})})}),{blobCache:n,addFilter:ee,uploadImages:L,uploadImagesAuto:ce,scanForImages:ue,destroy:Ne}},Lg=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Bn(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Pt.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Pt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},Hg={remove_similar:!0,inherit:!1},tl={selector:"td,th",...Hg},u6={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...tl},tablecellverticalalign:{styles:{"vertical-align":"%value"},...tl},tablecellbordercolor:{styles:{borderColor:"%value"},...tl},tablecellclass:{classes:["%value"],...tl},tableclass:{selector:"table",classes:["%value"],...Hg},tablecellborderstyle:{styles:{borderStyle:"%value"},...tl},tablecellborderwidth:{styles:{borderWidth:"%value"},...tl}},d6=ge(u6),m6=e=>{const n={},o=f=>he(f)?n[f]:n,r=f=>go(n,f),c=(f,b)=>{f&&(te(f)?(yt(b)||(b=[b]),z(b,y=>{En(y.deep)&&(y.deep=!Bl(y)),En(y.split)&&(y.split=!Bl(y)||nc(y)),En(y.remove)&&Bl(y)&&!nc(y)&&(y.remove="none"),Bl(y)&&nc(y)&&(y.mixed=!0,y.block_expand=!0),te(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):ln(f,(y,x)=>{c(x,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(Lg(e)),c(d6()),c(hg(e)),{get:o,has:r,register:c,unregister:u}},Rx=Pt.each,Yu=br.DOM,VA=e=>he(e)&&Je(e),JM=(e,n)=>{const o=n&&n.schema||Bu({}),r=(y,x)=>{x.classes.length>0&&Yu.addClass(y,x.classes.join(" ")),Yu.setAttribs(y,x.attrs)},c=y=>{const x=te(y)?{name:y,classes:[],attrs:{}}:y,M=Yu.create(x.name);return r(M,x),M},u=(y,x)=>{const M=o.getElementRule(y.nodeName.toLowerCase()),P=M==null?void 0:M.parentsRequired;return P&&P.length?x&&ae(P,x)?x:P[0]:!1},f=(y,x,M)=>{let P;const L=x[0],ce=VA(L)?L.name:void 0,ie=u(y,ce);if(ie)ce===ie?(P=L,x=x.slice(1)):P=ie;else if(L)P=L,x=x.slice(1);else if(!M)return y;const ee=P?c(P):Yu.create("div");ee.appendChild(y),M&&Pt.each(M,Ne=>{const Oe=c(Ne);ee.insertBefore(Oe,y)});const ue=VA(P)?P.siblings:void 0;return f(ee,x,ue)},b=Yu.create("div");if(e.length>0){const y=e[0],x=c(y),M=VA(y)?y.siblings:void 0;b.appendChild(f(x,e.slice(1),M))}return b},f6=e=>{e=Pt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Pt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},g6=e=>te(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Pt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Pt.map(n.split(/(?:~\+|~|\+)/),f6),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],h6=(e,n)=>{let o="",r=Fh(e);if(r==="")return"";const c=L=>te(L)?L.replace(/%(\w+)/g,""):"",u=(L,ce)=>Yu.getStyle(ce??e.getBody(),L,!0);if(te(n)){const L=e.formatter.get(n);if(!L)return"";n=L[0]}if("preview"in n){const L=n.preview;if(L===!1)return"";r=L||r}let f=n.block||n.inline||"span",b;const y=g6(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=JM(y,e)):b=JM([f],e);const x=Yu.select(f,b)[0]||b.firstChild;Rx(n.styles,(L,ce)=>{const ie=c(L);ie&&Yu.setStyle(x,ce,ie)}),Rx(n.attributes,(L,ce)=>{const ie=c(L);ie&&Yu.setAttrib(x,ce,ie)}),Rx(n.classes,L=>{const ce=c(L);Yu.hasClass(x,ce)||Yu.addClass(x,ce)}),e.dispatch("PreviewFormats"),Yu.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const M=u("fontSize"),P=/px$/.test(M)?parseInt(M,10):0;return Rx(r.split(" "),L=>{let ce=u(L,x);if(!(L==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(ce)&&(ce=u(L),fb(ce).toLowerCase()==="#ffffff"))&&!(L==="color"&&fb(ce).toLowerCase()==="#000000")){if(L==="font-size"&&/em|%$/.test(ce)){if(P===0)return;ce=parseFloat(ce)/(/%$/.test(ce)?100:1)*P+"px"}L==="border"&&ce&&(o+="padding:0 2px;"),o+=L+":"+ce+";"}}),e.dispatch("AfterPreviewFormats"),Yu.remove(b),o},p6=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},QM=e=>{const n=m6(e),o=dc({});return p6(e),J5(e),Mf(e)||mI(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{_8(e,r,c,u)},remove:(r,c,u,f)=>{A8(e,r,c,u,f)},toggle:(r,c,u)=>{O8(e,r,c,u)},match:(r,c,u,f)=>Lw(e,r,c,u,f),closest:r=>TM(e,r),matchAll:(r,c)=>xM(e,r,c),matchNode:(r,c,u,f)=>kM(e,r,c,u,f),canApply:r=>E8(e,r),formatChanged:(r,c,u,f)=>D8(e,o,r,c,u,f),getCssText:Ae(h6,e)}},Mx=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},UA=(e,n,o)=>{const r=dc(!1),c=y=>{Iw(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const x=y.command;Mx(x)||(vM(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const x=y.command;Mx(x)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const x=y.keyCode;y.isDefaultPrevented()||((x>=33&&x<=36||x>=37&&x<=40||x===45||y.ctrlKey)&&(c(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!Cx(wx(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&c(y);return}const M=y.ctrlKey&&!y.altKey||y.metaKey;(x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!M&&(n.beforeChange(),Iw(n,!0,o),n.add({},y),r.set(!0))}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},eN=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},tN=e=>{const n=rf(),o=dc(0),r=dc(0),c={data:[],typing:!1,beforeChange:()=>{y8(e,o,n)},add:(u,f)=>w8(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=wx(e);u.bookmark=ec(e.selection),e.dispatch("change",{level:u,lastLevel:fn(c.data,r.get()).getOrUndefined()})},undo:()=>Tx(e,c,o,r),redo:()=>C8(e,r,c.data),clear:()=>{S8(e,c,r)},reset:()=>{SM(e,c)},hasUndo:()=>DA(e,c,r),hasRedo:()=>x8(e,c,r),transact:u=>k8(e,c,o,u),ignore:u=>{DU(e,o,u)},extra:(u,f)=>{T8(e,c,r,u,f)}};return Mf(e)||UA(e,c,o),eN(e),c},b6=[9,27,Wn.HOME,Wn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Wn.DOWN,Wn.UP,Wn.LEFT,Wn.RIGHT].concat(us.browser.isFirefox()?[224]:[]),WA="data-mce-placeholder",ZA=e=>e.type==="keydown"||e.type==="keyup",Nx=e=>{const n=e.keyCode;return n===Wn.BACKSPACE||n===Wn.DELETE},nN=e=>{if(ZA(e)){const n=e.keyCode;return!Nx(e)&&(Wn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||ae(b6,n))}else return!1},oN=e=>ZA(e)&&!(Nx(e)||e.type==="keyup"&&e.keyCode===229),jA=(e,n,o)=>{if(ya(ve.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},v6=e=>{var n;const o=e.dom,r=vl(e),c=(n=ZT(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(nN(f))return;const y=e.getBody(),x=oN(f)?!1:jA(o,y,r);(o.getAttrib(y,WA)!==""!==x||b)&&(o.setAttrib(y,WA,x?c:null),o.setAttrib(y,"aria-placeholder",x?c:null),iu(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};Cs(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Pi.setEditorTimeout(e,()=>u(b)))})},y6=(e,n)=>({block:e,position:n}),$f=(e,n)=>({from:e,to:n}),du=(e,n)=>{const o=ve.fromDom(e),r=ve.fromDom(n.container());return Yr(o,r).map(c=>y6(c,n))},$x=e=>!Bs(e.from.block,e.to.block),GA=(e,n)=>Al(n,c=>Ja(c)||ni(c.dom),c=>Bs(c,e)).filter(Qo).getOr(e),Bx=(e,n)=>{const o=ve.fromDom(e);return Bs(GA(o,n.from.block),GA(o,n.to.block))},sN=e=>cr(e.from.block.dom)===!1&&cr(e.to.block.dom)===!1,rN=e=>{const n=o=>hi(o)||vh(o.dom);return n(e.from.block)&&n(e.to.block)},aN=(e,n,o)=>Wr(o.position.getNode())&&!ya(o.block)?kd(!1,o.block.dom).bind(r=>r.isEqual(o.position)?yl(n,e,r).bind(c=>du(e,c)):R.some(o)).getOr(o):o,cN=(e,n,o)=>{const r=du(e,vt.fromRangeStart(o)),c=r.bind(u=>yl(n,e,u.position).bind(f=>du(e,f).map(b=>aN(e,n,b))));return Ur(r,c,$f).filter(u=>$x(u)&&Bx(e,u)&&sN(u)&&rN(u))},iN=(e,n,o)=>o.collapsed?cN(e,n,o):R.none(),lN=e=>{const n=pa(e);return ro(n,va).fold(ge(n),o=>n.slice(0,o))},Gw=e=>{const n=lN(e);return z(n,Ps),n},Px=(e,n)=>{const o=Df(n,e);return rn(o.reverse(),r=>ya(r)).each(Ps)},w6=e=>Z(Hm(e),n=>!ya(n)).length===0,C6=(e,n,o,r)=>{if(ya(o))return Aa(o),$i(o.dom);w6(r)&&ya(n)&&os(r,ve.fromTag("br"));const c=wl(o.dom,vt.before(r.dom));return z(Gw(n),u=>{os(r,u)}),Px(e,n),c},S6=(e,n,o)=>{if(ya(o))return Ps(o),ya(n)&&Aa(n),$i(n.dom);const r=Td(o.dom);return z(Gw(n),c=>{ea(o,c)}),Px(e,n),r},x6=(e,n)=>{const o=Df(n,e);return R.from(o[o.length-1])},uN=(e,n)=>qa(n,e)?x6(n,e):R.none(),dN=(e,n)=>{kd(e,n.dom).bind(o=>R.from(o.getNode())).map(ve.fromDom).filter(nu).each(Ps)},mN=(e,n,o)=>(dN(!0,n),dN(!1,o),uN(n,o).fold(Ae(S6,e,n,o),Ae(C6,e,n,o))),Fx=(e,n,o,r)=>n?mN(e,r,o):mN(e,o,r),qA=(e,n)=>{const o=ve.fromDom(e.getBody());return iN(o.dom,n,e.selection.getRng()).map(c=>()=>{Fx(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},k6=(e,n)=>{const o=n.getRng();return Ur(Yr(e,ve.fromDom(o.startContainer)),Yr(e,ve.fromDom(o.endContainer)),(r,c)=>Bs(r,c)?R.none():R.some(()=>{o.deleteContents(),Fx(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(R.none())},fN=(e,n)=>{const o=ve.fromDom(n),r=Ae(Bs,e);return jm(o,Ja,r).isSome()},T6=(e,n)=>fN(e,n.startContainer)||fN(e,n.endContainer),E6=(e,n)=>{const o=wl(e.dom,vt.fromRangeStart(n)).isNone(),r=Ci(e.dom,vt.fromRangeEnd(n)).isNone();return!T6(e,n)&&o&&r},_6=e=>R.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),A6=e=>{const n=ve.fromDom(e.getBody()),o=e.selection.getRng();return E6(n,o)?_6(e):k6(n,e.selection)},f0=(e,n)=>e.selection.isCollapsed()?R.none():A6(e),km=(e,n,o,r,c)=>R.from(n._selectionOverrides.showCaret(e,o,r,c)),O6=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},qw=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?R.none():R.some(O6(n)),D6=(e,n,o)=>{const r=fv(1,e.getBody(),n),c=vt.fromRangeStart(r),u=c.getNode();if(sb(u))return km(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(sb(f))return km(1,e,f,!1,!1);const b=ip(e.dom.getRoot(),c.getNode());return sb(b)?km(1,e,b,!1,o):R.none()},KA=(e,n,o)=>n.collapsed?D6(e,n,o).getOr(n):n,gN=e=>ap(e)||zv(e),R6=e=>cp(e)||uw(e),M6=(e,n)=>{qt(n)&&n.data.length===0&&e.remove(n)},Ix=(e,n,o,r,c,u)=>{km(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),M6(e.dom,o)},N6=(e,n)=>{const o=e.selection.getRng();if(!qt(o.commonAncestorContainer))return R.none();const r=n?Ac.Forwards:Ac.Backwards,c=gm(e.getBody()),u=Ae(W2,n?c.next:c.prev),f=n?gN:R6,b=ab(r,e.getBody(),o),y=u(b),x=y&&na(n,y);if(!x||!vf(b,x))return R.none();if(f(x))return R.some(()=>Ix(e,o,b.getNode(),r,n,x));const M=u(x);return M&&f(M)&&vf(x,M)?R.some(()=>Ix(e,o,b.getNode(),r,n,M)):R.none()},YA=(e,n)=>N6(e,n),XA=(e,n)=>{const o=e.getBody();return n?$i(o).filter(ap):Td(o).filter(cp)},JA=e=>{const n=e.selection.getRng();return!n.collapsed&&(XA(e,!0).exists(o=>o.isEqual(vt.fromRangeStart(n)))||XA(e,!1).exists(o=>o.isEqual(vt.fromRangeEnd(n))))},$6=e=>he(e)&&(Ja(ve.fromDom(e))||ji(ve.fromDom(e))),mu=au.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),B6=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Bn(o)&&o.getAttribute("data-mce-caret")===r},Lx=(e,n,o,r)=>{const c=u=>il(ve.fromDom(u))&&!Hu(o,r,e);return U2(!n,o).fold(()=>U2(n,r).fold(Nt,c),c)},Kw=(e,n,o,r)=>{const c=r.getNode(!n);return Yr(ve.fromDom(e),ve.fromDom(o.getNode())).map(u=>ya(u)?mu.remove(u.dom):mu.moveToElement(c)).orThunk(()=>R.some(mu.moveToElement(c)))},hN=(e,n,o)=>yl(n,e,o).bind(r=>$6(r.getNode())||Lx(e,n,o,r)?R.none():n&&cr(r.getNode())||!n&&cr(r.getNode(!0))?Kw(e,n,o,r):n&&cp(o)||!n&&ap(o)?R.some(mu.moveToPosition(r)):R.none()),P6=(e,n)=>St(n)?R.none():e&&cr(n.nextSibling)?R.some(mu.moveToElement(n.nextSibling)):!e&&cr(n.previousSibling)?R.some(mu.moveToElement(n.previousSibling)):R.none(),Hx=(e,n,o)=>o.fold(r=>R.some(mu.remove(r)),r=>R.some(mu.moveToElement(r)),r=>Hu(n,r,e)?R.none():R.some(mu.moveToPosition(r))),F6=(e,n,o)=>B6(n,o)?P6(n,o.getNode(!n)).orThunk(()=>hN(e,n,o)):hN(e,n,o).bind(r=>Hx(e,o,r)),I6=(e,n,o)=>{const r=fv(n?1:-1,e,o),c=vt.fromRangeStart(r),u=ve.fromDom(e);return!n&&cp(c)?R.some(mu.remove(c.getNode(!0))):n&&ap(c)?R.some(mu.remove(c.getNode())):!n&&ap(c)&&a_(u,c)?o5(u,c).map(f=>mu.remove(f.getNode())):n&&cp(c)&&aD(u,c)?Oo(u,c).map(f=>mu.remove(f.getNode())):F6(e,n,c)},L6=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Gu(e,n,ve.fromDom(o)),!0),H6=(e,n)=>o=>{const r=n?vt.before(o):vt.after(o);return e.selection.setRng(r.toRange()),!0},z6=e=>n=>(e.selection.setRng(n.toRange()),!0),pN=(e,n)=>R.from(ip(e.getBody(),n)),V6=(e,n)=>{const o=e.selection.getNode();return pN(e,o).filter(cr).fold(()=>I6(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(L6(e,n),H6(e,n),z6(e))),()=>R.some(De))},U6=e=>{z(Ms(e,".mce-offscreen-selection"),Ps)},W6=(e,n)=>{const o=e.selection.getNode();return cr(o)&&!Du(o)?pN(e,o.parentNode).filter(cr).fold(()=>R.some(()=>{U6(ve.fromDom(e.getBody())),Gu(e,n,ve.fromDom(e.selection.getNode())),Wv(e)}),()=>R.some(De)):JA(e)?R.some(()=>{Cr(e,e.selection.getRng(),ve.fromDom(e.getBody()))}):R.none()},bN=e=>{const n=e.dom,o=e.selection,r=ip(e.getBody(),o.getNode());if(ni(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(vt.before(c).toRange())}return!0},QA=(e,n)=>e.selection.isCollapsed()?V6(e,n):W6(e,n),$U=(e,n)=>{const o=vt.fromRangeStart(e.selection.getRng());return yl(n,e.getBody(),o).filter(r=>n?ho(r):tD(r)).bind(r=>dv(n?0:-1,r)).map(r=>()=>e.selection.select(r))},fu=(e,n)=>e.selection.isCollapsed()?$U(e,n):R.none(),pp=qt,e3=e=>pp(e)&&e.data[0]===wr,t3=e=>pp(e)&&e.data[e.data.length-1]===wr,vN=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(wr)},yN=e=>{var n;if(pp(e.previousSibling))return t3(e.previousSibling)||e.previousSibling.appendData(wr),e.previousSibling;if(pp(e))return e3(e)||e.insertData(0,wr),e;{const o=vN(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},Z6=e=>{var n,o;if(pp(e.nextSibling))return e3(e.nextSibling)||e.nextSibling.insertData(0,wr),e.nextSibling;if(pp(e))return t3(e)||e.appendData(wr),e;{const r=vN(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Yw=(e,n)=>e?yN(n):Z6(n),j6=Ae(Yw,!0),G6=Ae(Yw,!1),wN=(e,n)=>qt(e.container())?Yw(n,e.container()):Yw(n,e.getNode()),qb=(e,n)=>{const o=n.get();return o&&e.container()===o&&I(o)},zx=(e,n)=>n.fold(o=>{Cd(e.get());const r=j6(o);return e.set(r),R.some(vt(r,r.length-1))},o=>$i(o).map(r=>{if(qb(r,e)){const c=e.get();return vt(c,1)}else{Cd(e.get());const c=wN(r,!0);return e.set(c),vt(c,1)}}),o=>Td(o).map(r=>{if(qb(r,e)){const c=e.get();return vt(c,c.length-1)}else{Cd(e.get());const c=wN(r,!1);return e.set(c),vt(c,c.length-1)}}),o=>{Cd(e.get());const r=G6(o);return e.set(r),R.some(vt(r,1))}),n3=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return R.none()},Fi=au.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Vx=(e,n)=>{const o=bf(n,e);return o||e},q6=(e,n,o)=>{const r=SD(o),c=Vx(n,r.container());return $g(e,c,r).fold(()=>Ci(c,r).bind(Ae($g,e,c)).map(u=>Fi.before(u)),R.none)},K6=(e,n)=>Cg(e,n)===null,CN=(e,n,o)=>$g(e,n,o).filter(Ae(K6,n)),BU=(e,n,o)=>{const r=xD(o);return CN(e,n,r).bind(c=>wl(c,r).isNone()?R.some(Fi.start(c)):R.none())},PU=(e,n,o)=>{const r=SD(o);return CN(e,n,r).bind(c=>Ci(c,r).isNone()?R.some(Fi.end(c)):R.none())},FU=(e,n,o)=>{const r=xD(o),c=Vx(n,r.container());return $g(e,c,r).fold(()=>wl(c,r).bind(Ae($g,e,c)).map(u=>Fi.after(u)),R.none)},Xu=e=>!E5(o3(e)),Bf=(e,n,o)=>n3([q6,BU,PU,FU],[e,n,o]).filter(Xu),o3=e=>e.fold(Ue,Ue,Ue,Ue),s3=e=>e.fold(ge("before"),ge("start"),ge("end"),ge("after")),g0=e=>e.fold(Fi.before,Fi.before,Fi.after,Fi.after),SN=e=>e.fold(Fi.start,Fi.start,Fi.end,Fi.end),IU=(e,n)=>s3(e)===s3(n)&&o3(e)===o3(n),LU=(e,n,o,r,c,u)=>Ur($g(n,o,r),$g(n,o,c),(f,b)=>f!==b&&wD(o,f,b)?Fi.after(e?f:b):u).getOr(u),Ju=(e,n)=>e.fold(Ve,o=>!IU(o,n)),Y6=(e,n,o,r,c)=>{const u=na(e,c);return yl(e,o,u).map(Ae(na,e)).fold(()=>r.map(g0),y=>Bf(n,o,y).map(Ae(LU,e,n,o,u,y)).filter(Ae(Ju,r))).filter(Xu)},X6=(e,n)=>e?n.fold(Ft(R.some,Fi.start),R.none,Ft(R.some,Fi.after),R.none):n.fold(R.none,Ft(R.some,Fi.before),R.none,Ft(R.some,Fi.end)),J6=(e,n,o,r)=>{const c=na(e,r),u=Bf(n,o,c);return Bf(n,o,c).bind(Ae(X6,e)).orThunk(()=>Y6(e,n,o,u,r))},Q6=e=>Q(e.selection.getSel().modify),xN=(e,n,o)=>{const r=e?1:-1;return n.setRng(vt(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},eL=(e,n)=>{const o=n.selection.getRng(),r=e?vt.fromRangeEnd(o):vt.fromRangeStart(o);return Q6(n)?e&&Kt(r)?xN(!0,n.selection,r):!e&&Mn(r)?xN(!1,n.selection,r):!1:!1};var kl;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(kl||(kl={}));const Ux=(e,n)=>e===Ac.Backwards?ao(n):n,tL=(e,n,o)=>e===Ac.Forwards?n.next(o):n.prev(o),nL=(e,n,o,r)=>Wr(r.getNode(n===Ac.Forwards))?kl.Br:Hu(o,r)===!1?kl.Block:kl.Wrap,Wx=(e,n,o,r)=>{const c=gm(o);let u=r;const f=[];for(;u;){const b=tL(n,c,u);if(!b)break;if(Wr(b.getNode(!1)))return n===Ac.Forwards?{positions:Ux(n,f).concat([b]),breakType:kl.Br,breakAt:R.some(b)}:{positions:Ux(n,f),breakType:kl.Br,breakAt:R.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=nL(o,n,u,b);return{positions:Ux(n,f),breakType:y,breakAt:R.some(b)}}f.push(b),u=b}return{positions:Ux(n,f),breakType:kl.Eol,breakAt:R.none()}},Zx=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===Ac.Backwards?u.concat(c):[c].concat(u)}).getOr([]),jx=(e,n)=>Pe(e,(o,r)=>o.fold(()=>R.some(r),c=>Ur(On(c.getClientRects()),On(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),R.none()),Xw=(e,n)=>On(n.getClientRects()).bind(o=>jx(e,o.left)),h0=Ae(Wx,vt.isAbove,-1),Jw=Ae(Wx,vt.isBelow,1),p0=Ae(Zx,-1,h0),kN=Ae(Zx,1,Jw),oL=(e,n)=>h0(e,n).breakAt.isNone(),sL=(e,n)=>Jw(e,n).breakAt.isNone(),rL=e=>$i(e).map(n=>[n].concat(Jw(e,n).positions)).getOr([]),aL=e=>Td(e).map(n=>h0(e,n).positions.concat(n)).getOr([]),cL=(e,n)=>Xw(p0(e,n),n),iL=(e,n)=>Xw(kN(e,n),n),TN=cr,EN=(e,n)=>Math.abs(e.left-n),r3=(e,n)=>Math.abs(e.right-n),_N=e=>mr(e,"node"),Qw=(e,n)=>lt(e,(o,r)=>{const c=Math.min(EN(o,n),r3(o,n)),u=Math.min(EN(r,n),r3(r,n));return u===c&&_N(r)&&TN(r.node)||u<c?r:o}),AN=e=>{const n=o=>re(o,r=>{const c=lg(r);return c.node=e,c});if(Bn(e))return n(e.getClientRects());if(qt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Gx=e=>Qn(e,AN);var Pf;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Pf||(Pf={}));const ON=(e,n,o,r)=>{let c=r;for(;c=mm(c,e,za,n);)if(o(c))return},qx=(e,n,o,r,c,u)=>{let f=0;const b=[],y=P=>{let L=Gx([P]);e===-1&&(L=L.reverse());for(let ce=0;ce<L.length;ce++){const ie=L[ce];if(!o(ie,x)){if(b.length>0&&n(ie,Zn(b))&&f++,ie.line=f,c(ie))return!0;b.push(ie)}}return!1},x=Zn(u.getClientRects());if(!x)return b;const M=u.getNode();return M&&(y(M),ON(e,r,y,M)),b},lL=(e,n)=>n.line>e,DN=(e,n)=>n.line===e,uL=Ae(qx,Pf.Up,Up,Wp),dL=Ae(qx,Pf.Down,Wp,Up),RN=e=>Zn(e.getClientRects()),mL=(e,n,o,r)=>{const c=gm(n);let u,f,b,y;const x=[];let M=0;e===1?(u=c.next,f=Wp,b=Up,y=vt.after(r)):(u=c.prev,f=Up,b=Wp,y=vt.before(r));const P=RN(y);do{if(!y.isVisible())continue;const L=RN(y);if(b(L,P))continue;x.length>0&&f(L,Zn(x))&&M++;const ce=lg(L);if(ce.position=y,ce.line=M,o(ce))return x;x.push(ce)}while(y=u(y));return x},MN=e=>n=>lL(e,n),Kx=e=>n=>DN(e,n),zg=(e,n)=>{e.selection.setRng(n),on(e,e.selection.getRng())},a3=(e,n,o)=>R.some(KA(e,n,o)),Kb=(e,n,o,r,c,u)=>{const f=n===Ac.Forwards,b=gm(e.getBody()),y=Ae(W2,f?b.next:b.prev),x=f?r:c;if(!o.collapsed){const ie=Zp(o);if(u(ie))return km(n,e,ie,n===Ac.Backwards,!1);if(JA(e)){const ee=o.cloneRange();return ee.collapse(n===Ac.Backwards),R.from(ee)}}const M=ab(n,e.getBody(),o);if(x(M))return qw(e,M.getNode(!f));let P=y(M);const L=oi(o);if(P)P=na(f,P);else return L?R.some(o):R.none();if(x(P))return km(n,e,P.getNode(!f),f,!1);const ce=y(P);return ce&&x(ce)&&vf(P,ce)?km(n,e,ce.getNode(!f),f,!1):L?a3(e,P.toRange(),!1):R.none()},Yx=(e,n,o,r,c,u)=>{const f=ab(n,e.getBody(),o),b=Zn(f.getClientRects()),y=n===Pf.Down,x=e.getBody();if(!b)return R.none();if(JA(e)){const ue=y?vt.fromRangeEnd(o):vt.fromRangeStart(o);return(y?iL:cL)(x,ue).orThunk(()=>R.from(ue)).map(Oe=>Oe.toRange())}const P=(y?dL:uL)(x,MN(1),f),L=Z(P,Kx(1)),ce=b.left,ie=Qw(L,ce);if(ie&&u(ie.node)){const ue=Math.abs(ce-ie.left),Ne=Math.abs(ce-ie.right);return km(n,e,ie.node,ue<Ne,!1)}let ee;if(r(f)?ee=f.getNode():c(f)?ee=f.getNode(!0):ee=Zp(o),ee){const ue=mL(n,x,MN(1),ee);let Ne=Qw(Z(ue,Kx(1)),ce);if(Ne||(Ne=Zn(Z(ue,Kx(0))),Ne))return a3(e,Ne.position.toRange(),!1)}return L.length===0?Xx(e,y).filter(y?c:r).map(ue=>KA(e,ue.toRange(),!1)):R.none()},Xx=(e,n)=>{const o=e.selection.getRng(),r=n?vt.fromRangeEnd(o):vt.fromRangeStart(o),c=fE(r.container(),e.getBody());if(n){const u=Jw(c,r);return Tn(u.positions)}else{const u=h0(c,r);return On(u.positions)}},c3=(e,n,o)=>Xx(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),b0=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},NN=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},$N=(e,n,o)=>zx(n,o).map(r=>(b0(e,r),o)),fL=(e,n,o)=>{const r=vt.fromRangeStart(e);if(e.collapsed)return r;{const c=vt.fromRangeEnd(e);return o?wl(n,c).getOr(c):Ci(n,r).getOr(r)}},gL=(e,n,o)=>{const r=e.getBody(),c=fL(e.selection.getRng(),r,o),u=Ae(Db,e);return J6(o,u,r,c).bind(b=>$N(e,n,b))},hL=(e,n,o)=>{const r=re(Ms(ve.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Z(r,e),u=Z(o,e);z(Re(c,u),Ae(NN,!1)),z(Re(u,c),Ae(NN,!0))},pL=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=vt.fromRangeStart(e.selection.getRng());vt.isTextPosition(r)&&!CD(r)&&(b0(e,iv(o,r)),n.set(null))}},bL=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Z(r,e);z(c,u=>{const f=vt.fromRangeStart(n.selection.getRng());Bf(e,n.getBody(),f).bind(b=>$N(n,o,b))})}},i3=(e,n,o)=>gg(e)?gL(e,n,o).isSome():!1,BN=(e,n,o)=>gg(n)?eL(e,n):!1,vL=e=>{const n=dc(null),o=Ae(Db,e);return e.on("NodeChange",r=>{gg(e)&&(hL(o,e.dom,r.parents),pL(e,n),bL(o,e,n,r.parents))}),n},gu=Ae(BN,!0),yL=Ae(BN,!1),v0=(e,n,o)=>{if(gg(e)){const r=Xx(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?vt.fromRangeEnd(c):vt.fromRangeStart(c)});return Bf(Ae(Db,e),e.getBody(),r).exists(c=>{const u=g0(c);return zx(o,u).exists(f=>(b0(e,f),!0))})}else return!1},PN=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},l3=e=>Ur($i(e),Td(e),(n,o)=>{const r=na(!0,n),c=na(!1,o);return Ci(e,r).forall(u=>u.isEqual(c))}).getOr(!0),FN=(e,n)=>o=>zx(n,o).map(r=>()=>b0(e,r)),IN=(e,n,o,r)=>{const c=e.getBody(),u=Ae(Db,e);e.undoManager.ignore(()=>{e.selection.setRng(PN(o,r)),TD(e),Bf(u,c,vt.fromRangeStart(e.selection.getRng())).map(SN).bind(FN(e,n)).each(jt)}),e.nodeChanged()},wL=(e,n)=>{const o=bf(n,e);return o||e},CL=(e,n,o,r)=>{const c=wL(e.getBody(),r.container()),u=Ae(Db,e),f=Bf(u,c,r);return f.bind(y=>o?y.fold(ge(R.some(SN(y))),R.none,ge(R.some(g0(y))),R.none):y.fold(R.none,ge(R.some(g0(y))),R.none,ge(R.some(SN(y))))).map(FN(e,n)).getOrThunk(()=>{const y=Uh(o,c,r),x=y.bind(M=>Bf(u,c,M));return Ur(f,x,()=>$g(u,c,r).bind(M=>l3(M)?R.some(()=>{Gu(e,o,ve.fromDom(M))}):R.none())).getOrThunk(()=>x.bind(()=>y.map(M=>()=>{o?IN(e,n,r,M):IN(e,n,M,r)})))})},u3=(e,n,o)=>{if(e.selection.isCollapsed()&&gg(e)){const r=vt.fromRangeStart(e.selection.getRng());return CL(e,n,o,r)}return R.none()},LN=(e,n)=>{const o=Df(n,e);return ro(o,va).fold(ge(o),r=>o.slice(0,r))},SL=e=>Eu(e)===1,xL=(e,n,o,r)=>{const c=Ae(Aw,n),u=re(Z(r,c),f=>f.dom);if(u.length===0)Gu(n,e,o);else{const f=uR(o.dom,u);n.selection.setRng(f.toRange())}},HU=(e,n)=>{const o=ve.fromDom(e.getBody()),r=ve.fromDom(e.selection.getStart()),c=Z(LN(o,r),SL);return Tn(c).bind(u=>{const f=vt.fromRangeStart(e.selection.getRng());return wU(n,f,u.dom)&&!Q5(u)?R.some(()=>xL(n,e,u,c)):R.none()})},d3=(e,n)=>e.selection.isCollapsed()?HU(e,n):R.none(),m3=(e,n,o)=>he(o)?R.some(()=>{e._selectionOverrides.hideFakeCaret(),Gu(e,n,ve.fromDom(o))}):R.none(),HN=(e,n)=>{const o=n?zv:uw,r=n?Ac.Forwards:Ac.Backwards,c=ab(r,e.getBody(),e.selection.getRng());return o(c)?m3(e,n,c.getNode(!n)):R.from(na(n,c)).filter(u=>o(u)&&vf(c,u)).bind(u=>m3(e,n,u.getNode(!n)))},zN=(e,n)=>{const o=e.selection.getNode();return Ql(o)?m3(e,n,o):R.none()},VN=(e,n)=>e.selection.isCollapsed()?HN(e,n):zN(e,n),kL=e=>Al(e,n=>ni(n.dom)||cr(n.dom)).exists(n=>ni(n.dom)),f3=e=>Mr(e??"").getOr(0),UN=(e,n)=>{const o=e||H0(n)?"margin":"padding",r=He(n,"direction")==="rtl"?"-right":"-left";return o+r},g3=(e,n,o,r,c,u)=>{const f=UN(o,ve.fromDom(u)),b=f3(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},Jx=(e,n)=>kn(n,o=>{const r=UN(x2(e),o),c=So(o,r).map(f3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),h3=e=>{const n=WN(e);return!e.mode.isReadOnly()&&(n.length>1||Jx(e,n))},p3=e=>Ns(e)||ji(e),TL=e=>Cc(e).exists(p3),WN=e=>Z(jf(e.selection.getSelectedBlocks()),n=>!p3(n)&&!TL(n)&&kL(n)),Qx=(e,n)=>{var o,r;const{dom:c}=e,u=Xp(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=f3(u),y=x2(e);z(WN(e),x=>{g3(c,n,y,b,f,x.dom)})},EL=e=>Qx(e,"indent"),ZN=e=>Qx(e,"outdent"),jN=e=>{if(e.selection.isCollapsed()&&h3(e)){const n=e.dom,o=e.selection.getRng(),r=vt.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&fs(ve.fromDom(c),r))return R.some(()=>ZN(e))}return R.none()},GN=(e,n,o)=>ks([jN,QA,YA,(r,c)=>u3(r,n,c),qA,WS,fu,VN,f0,d3],r=>r(e,o)),$d=(e,n)=>{GN(e,n,!1).fold(()=>{TD(e),Wv(e)},jt)},qN=(e,n)=>{GN(e,n,!0).fold(()=>Rb(e),jt)},KN=(e,n)=>{e.addCommand("delete",()=>{$d(e,n)}),e.addCommand("forwardDelete",()=>{qN(e,n)})},_L=5,zU=400,AL=e=>e.touches===void 0||e.touches.length!==1?R.none():R.some(e.touches[0]),VU=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>_L||r>_L},OL=e=>{const n=rf(),o=dc(!1),r=I1(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},zU);e.on("touchstart",c=>{AL(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),AL(c).each(u=>{n.on(f=>{VU(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},b3=(e,n)=>go(e,n.nodeName),v3=(e,n)=>qt(n)?!0:Bn(n)?!b3(e.getBlockElements(),n)&&!Oc(n)&&!ng(e,n):!1,DL=(e,n,o)=>se(dw(ve.fromDom(o),ve.fromDom(n)),r=>b3(e,r.dom)),YN=(e,n)=>{if(qt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||b3(e,n.nextSibling)))return!0}return!1},XN=e=>e.dom.create(vl(e),Yp(e)),RL=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,x=!1;const M=vl(e);if(!u||!Bn(u))return;const P=f.nodeName.toLowerCase();if(!r.isValidChild(P,M.toLowerCase())||DL(c,f,u))return;const L=o.getRng(),{startContainer:ce,startOffset:ie,endContainer:ee,endOffset:ue}=L,Ne=Ob(e);let Oe=f.firstChild;for(;Oe;)if(Bn(Oe)&&dl(r,Oe),v3(r,Oe)){if(YN(c,Oe)){y=Oe,Oe=Oe.nextSibling,n.remove(y);continue}b||(b=XN(e),f.insertBefore(b,Oe),x=!0),y=Oe,Oe=Oe.nextSibling,b.appendChild(y)}else b=null,Oe=Oe.nextSibling;x&&Ne&&(L.setStart(ce,ie),L.setEnd(ee,ue),o.setRng(L),e.nodeChanged())},y3=(e,n,o)=>{const r=ve.fromDom(XN(e)),c=Ke();ea(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},w3=e=>{e.on("NodeChange",Ae(RL,e))},C3=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,ML=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},NL=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],ML(e,c,Ih(e)));o.content=c}},ek=e=>{const n="contenteditable",o=" "+Pt.trim(N2(e))+" ",r=" "+Pt.trim(Ih(e))+" ",c=C3(o),u=C3(r),f=um(e);f.length>0&&e.on("BeforeSetContent",b=>{NL(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const x=b[y];c(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const x=b[y];!c(x)&&!u(x)||(f.length>0&&x.attr("data-mce-content")?(x.name="#text",x.type=3,x.raw=!0,x.value=x.attr("data-mce-content")):x.attr(n,null))}})},$L=e=>Yf(ve.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),JN=(e,n)=>{n.hasAttribute("data-mce-caret")&&(er(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},BL=(e,n)=>{const o=$L(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),JN(e,o);return}Te(o)&&(JN(e,o),e.undoManager.add())}},S3=e=>{e.on("keyup compositionstart",Ae(BL,e))},QN=cr,PL=(e,n,o)=>Kb(n,e,o,ap,cp,QN),e$=(e,n,o)=>Yx(n,e,o,u=>ap(u)||$S(u),u=>cp(u)||nD(u),QN),FL=e=>{const n=e.dom.create(vl(e));return n.innerHTML='<br data-mce-bogus="1">',n},t$=(e,n,o)=>{const r=gm(e.getBody()),c=Ae(W2,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(vt.fromRangeStart(o))){const b=ve.fromDom(FL(e));n===1?Ar(ve.fromDom(u),b):os(ve.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},IL=(e,n)=>{const o=n?Ac.Forwards:Ac.Backwards,r=e.selection.getRng();return PL(o,e,r).orThunk(()=>(t$(e,o,r),R.none()))},LL=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return e$(o,e,r).orThunk(()=>(t$(e,o,r),R.none()))},n$=(e,n)=>IL(e,n).exists(o=>(zg(e,o),!0)),o$=(e,n)=>LL(e,n).exists(o=>(zg(e,o),!0)),tk=(e,n)=>c3(e,n,n?cp:ap),nk=(e,n)=>XA(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(zg(e,o),!0)),s$=e=>ae(["figcaption"],oo(e)),HL=(e,n)=>{const o=Ae(Bs,n);return Al(ve.fromDom(e.container()),va,o).filter(s$)},zL=(e,n,o)=>n?sL(e.dom,o):oL(e.dom,o),VL=(e,n)=>{const o=ve.fromDom(e.getBody()),r=vt.fromRangeStart(e.selection.getRng());return HL(r,o).exists(()=>{if(zL(o,n,r)){const u=y3(e,o,n?ea:Ka);return e.selection.setRng(u),!0}else return!1})},r$=(e,n)=>e.selection.isCollapsed()?VL(e,n):!1,a$={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},UL=e=>re(e,n=>({...a$,...n})),pc=e=>re(e,n=>({...a$,...n})),c$=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,WL=(e,n)=>Qn(UL(e),o=>c$(o,n)?[o]:[]),ZL=(e,n)=>Qn(pc(e),o=>c$(o,n)?[o]:[]),rs=(e,...n)=>()=>e.apply(null,n),Yb=(e,n)=>rn(WL(e,n),o=>o.action()),x3=(e,n)=>ks(ZL(e,n),o=>o.action()),Vg=(e,n)=>{const o=n?Ac.Forwards:Ac.Backwards,r=e.selection.getRng();return Kb(e,o,r,zv,uw,Ql).exists(c=>(zg(e,c),!0))},ok=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Yx(e,o,r,zv,uw,Ql).exists(c=>(zg(e,c),!0))},k3=(e,n)=>c3(e,n,n?uw:zv),sk=au.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Xb={...sk,none:e=>sk.none(e)},l$=(e,n)=>eC(e,n,Ve),eC=(e,n,o)=>Qn(pa(e),r=>Oi(r,n)?o(r)?[r]:[]:eC(r,n,o)),rk=(e,n,o=Nt)=>{if(o(n))return R.none();if(ae(e,oo(n)))return R.some(n);const r=c=>Oi(c,"table")||o(c);return Au(n,e.join(","),r)},tC=(e,n)=>rk(["td","th"],e,n),nC=e=>l$(e,"th,td"),Tm=(e,n)=>fd(e,"table",n),Jb=(e,n,o,r,c=Ve)=>{const u=r===1;if(!u&&o<=0)return Xb.first(e[0]);if(u&&o>=e.length-1)return Xb.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?Xb.middle(n,b):Jb(e,n,f,r,c)}},T3=(e,n)=>Tm(e,n).bind(o=>{const r=nC(o);return ro(r,u=>Bs(e,u)).map(u=>({index:u,all:r}))}),u$=(e,n,o)=>T3(e,o).fold(()=>Xb.none(e),c=>Jb(c.all,e,c.index,1,n)),jL=(e,n,o)=>T3(e,o).fold(()=>Xb.none(),c=>Jb(c.all,e,c.index,-1,n)),d$=e=>fd(e,"[contenteditable]"),m$=(e,n=!1)=>rl(e)?e.dom.isContentEditable:d$(e).fold(ge(n),o=>GL(o)==="true"),GL=e=>e.dom.contentEditable,f$=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),qL=(e,n)=>Qn(n,o=>{const r=f$(lg(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),KL=(e,n,o)=>Pe(e,(r,c)=>r.fold(()=>R.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return R.some(b<f?c:u)}),R.none()),g$=(e,n,o,r,c)=>{const u=Ms(ve.fromDom(o),"td,th,caption").map(b=>b.dom),f=Z(qL(e,u),b=>n(b,c));return KL(f,r,c).map(b=>b.cell)},YL=e=>e.bottom,XL=e=>e.top,JL=(e,n)=>e.y<n,QL=(e,n)=>e.y>n,e7=Ae(g$,YL,JL),t7=Ae(g$,XL,QL),n7=(e,n)=>On(n.getClientRects()).bind(o=>e7(e,o.left,o.top)).bind(o=>Xw(aL(o),n)),o7=(e,n)=>Tn(n.getClientRects()).bind(o=>t7(e,o.left,o.top)).bind(o=>Xw(rL(o),n)),s7=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),r7=e=>e.breakType===kl.Wrap&&e.positions.length===0,h$=e=>e.breakType===kl.Br&&e.positions.length===1,E3=(e,n,o)=>{const r=e(n,o);return r7(r)||!Wr(o.getNode())&&h$(r)?!s7(e,n,r):r.breakAt.isNone()},p$=Ae(E3,h0),a7=Ae(E3,Jw),c7=(e,n,o)=>{const r=vt.fromRangeStart(n);return kd(!e,o).exists(c=>c.isEqual(r))},i7=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return ob()&&c7(n,c,o)?(km(u,e,o,!n,!1).each(f=>{zg(e,f)}),!0):!1},l7=(e,n,o)=>n7(n,o).orThunk(()=>On(o.getClientRects()).bind(r=>jx(p0(e,vt.before(n)),r.left))).getOr(vt.before(n)),b$=(e,n,o)=>o7(n,o).orThunk(()=>On(o.getClientRects()).bind(r=>jx(kN(e,vt.after(n)),r.left))).getOr(vt.after(n)),v$=(e,n)=>{const o=n.getNode(e);return Ya(o)?R.some(o):R.none()},y$=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Ar:os,c=y3(n,ve.fromDom(o),r);zg(n,c)})},w$=(e,n,o)=>{const r=v$(!!n,o),c=n===!1;r.fold(()=>zg(e,o.toRange()),u=>kd(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>zg(e,o.toRange()),f=>y$(n,e,u)))},C$=(e,n,o,r)=>{const c=e.selection.getRng(),u=vt.fromRangeStart(c),f=e.getBody();if(!n&&p$(r,u)){const b=l7(f,o,u);return w$(e,n,b),!0}else if(n&&a7(r,u)){const b=b$(f,o,u);return w$(e,n,b),!0}else return!1},_3=(e,n,o)=>R.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>R.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),S$=(e,n)=>_3(e,n,i7),x$=(e,n)=>_3(e,n,C$),u7=e=>{const n=_f.exact(e,0,e,0);return SS(n)},A3=(e,n,o)=>o.fold(R.none,R.none,(r,c)=>PF(c).map(u=>u7(u)),r=>(e.execCommand("mceTableInsertRowAfter"),k$(e,n,r))),k$=(e,n,o)=>A3(e,n,u$(o,m$)),d7=(e,n,o)=>A3(e,n,jL(o,m$)),O3=(e,n)=>{const o=["table","li","dl"],r=ve.fromDom(e.getBody()),c=b=>{const y=oo(b);return Bs(b,r)||ae(o,y)},u=e.selection.getRng(),f=ve.fromDom(n?u.endContainer:u.startContainer);return tC(f,c).map(b=>(Tm(b,c).each(M=>{e.model.table.clearSelectedCells(M.dom)}),e.selection.collapse(!n),(n?k$:d7)(e,c,b).each(M=>{e.selection.setRng(M)}),!0)).getOr(!1)},m7=(e,n,o)=>{const r=us.os.isMacOS()||us.os.isiOS();Yb([{keyCode:Wn.RIGHT,action:rs(n$,e,!0)},{keyCode:Wn.LEFT,action:rs(n$,e,!1)},{keyCode:Wn.UP,action:rs(o$,e,!1)},{keyCode:Wn.DOWN,action:rs(o$,e,!0)},...r?[{keyCode:Wn.UP,action:rs(nk,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Wn.DOWN,action:rs(nk,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Wn.RIGHT,action:rs(S$,e,!0)},{keyCode:Wn.LEFT,action:rs(S$,e,!1)},{keyCode:Wn.UP,action:rs(x$,e,!1)},{keyCode:Wn.DOWN,action:rs(x$,e,!0)},{keyCode:Wn.RIGHT,action:rs(Vg,e,!0)},{keyCode:Wn.LEFT,action:rs(Vg,e,!1)},{keyCode:Wn.UP,action:rs(ok,e,!1)},{keyCode:Wn.DOWN,action:rs(ok,e,!0)},{keyCode:Wn.RIGHT,action:rs(i3,e,n,!0)},{keyCode:Wn.LEFT,action:rs(i3,e,n,!1)},{keyCode:Wn.RIGHT,ctrlKey:!r,altKey:r,action:rs(gu,e,n)},{keyCode:Wn.LEFT,ctrlKey:!r,altKey:r,action:rs(yL,e,n)},{keyCode:Wn.UP,action:rs(r$,e,!1)},{keyCode:Wn.DOWN,action:rs(r$,e,!0)}],o).each(c=>{o.preventDefault()})},f7=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||m7(e,n,o)})},Bd=(e,n)=>({container:e,offset:n}),ak=br.DOM,ck=e=>n=>e===n?-1:0,g7=e=>n=>e.isBlock(n)||ae(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",ik=(e,n,o)=>{if(qt(e)&&n>=0)return R.some(Bd(e,n));{const r=cf(ak);return R.from(r.backwards(e,n,ck(e),o)).map(c=>Bd(c.container,c.container.data.length))}},T$=(e,n,o)=>{if(qt(e)&&n>=e.length)return R.some(Bd(e,n));{const r=cf(ak);return R.from(r.forwards(e,n,ck(e),o)).map(c=>Bd(c.container,0))}},D3=(e,n,o)=>{if(!qt(e))return R.none();const r=e.data;if(n>=0&&n<=r.length)return R.some(Bd(e,n));{const c=cf(ak);return R.from(c.backwards(e,n,ck(e),o)).bind(u=>{const f=u.container.data;return D3(u.container,n+f.length,o)})}},E$=(e,n,o)=>{if(!qt(e))return R.none();const r=e.data;if(n<=r.length)return R.some(Bd(e,n));{const c=cf(ak);return R.from(c.forwards(e,n,ck(e),o)).bind(u=>E$(u.container,n-r.length,o))}},R3=(e,n,o,r,c)=>{const u=cf(e,g7(e));return R.from(u.backwards(n,o,r,c))},h7=e=>e.collapsed&&qt(e.startContainer),_$=e=>Oa(e.toString().replace(/\u00A0/g," ")),A$=e=>e!==""&&` Â \f
\r	\v`.indexOf(e)!==-1,M3=(e,n)=>e.substring(n.length),p7=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(A$(u))return R.none();if(c===u&&no(e,o,r,n))break}return R.some(r)},UU=(e,n,o,r=0)=>{if(!h7(n))return R.none();const c={text:"",offset:0},u=(b,y,x)=>(c.text=x+c.text,c.offset+=y,p7(c.text,c.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return R3(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return R.none();const x=_$(y);return x.lastIndexOf(o)!==0||M3(x,o).length<r?R.none():R.some({text:M3(x,o),range:y,trigger:o})})},O$=(e,n,o,r=0)=>HF(ve.fromDom(n.startContainer)).fold(()=>UU(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=_$(u);return R.some({range:u,text:M3(f,o),trigger:o})}),lk=e=>e.nodeType===Vn,D$=e=>e.nodeType===ft,N3=e=>{if(lk(e))return Bd(e,e.data.length);{const n=e.childNodes;return n.length>0?N3(n[n.length-1]):Bd(e,n.length)}},R$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?R$(o[n],0):o.length>0&&D$(e)&&o.length===n?N3(o[o.length-1]):Bd(e,n)},M$=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return R3(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!A$(u)}).isSome()},N$=e=>n=>{const o=R$(n.startContainer,n.startOffset);return!M$(e,o)},b7=(e,n,o)=>ks(o.triggers,r=>O$(e,n,r)),v7=(e,n)=>{const o=n(),r=e.selection.getRng();return b7(e.dom,r,o).bind(c=>$$(e,n,c))},$$=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=Z(u.lookupByTrigger(o.trigger),M=>o.text.length>=M.minChars&&M.matches.getOrThunk(()=>N$(e.dom))(o.range,b,o.text));if(y.length===0)return R.none();const x=Promise.all(re(y,M=>M.fetch(o.text,M.maxResults,r).then(L=>({matchText:o.text,items:L,columns:M.columns,onAction:M.onAction,highlightOn:M.highlightOn}))));return R.some({lookupData:x,context:o})};var Pd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Pd||(Pd={}));const $3=(e,n,o)=>e.stype===Pd.Error?n(e.serror):o(e.svalue),B3=e=>{const n=[],o=[];return z(e,r=>{$3(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},y7=(e,n)=>e.stype===Pd.Error?{stype:Pd.Error,serror:n(e.serror)}:e,w7=(e,n)=>e.stype===Pd.Value?{stype:Pd.Value,svalue:n(e.svalue)}:e,C7=(e,n)=>e.stype===Pd.Value?n(e.svalue):e,B$=(e,n)=>e.stype===Pd.Error?n(e.serror):e,P$=e=>({stype:Pd.Value,svalue:e}),F$=e=>({stype:Pd.Error,serror:e}),ui={fromResult:e=>e.fold(F$,P$),toResult:e=>$3(e,wi.error,wi.value),svalue:P$,partition:B3,serror:F$,bind:C7,bindError:B$,map:w7,mapError:y7,fold:$3},oc=e=>Je(e)&&Le(e).length>100?" removed due to size":JSON.stringify(e,null,2),Ff=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:ge("... (only showing first ten failures)")}]):e;return re(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},uk=(e,n)=>ui.serror([{path:e,getErrorInfo:n}]),jU=(e,n,o)=>uk(e,()=>'Could not find valid *required* value for "'+n+'" in '+oc(o)),S7=(e,n)=>uk(e,()=>'Choice schema did not contain choice key: "'+n+'"'),x7=(e,n,o)=>uk(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+oc(n)),k7=(e,n)=>uk(e,ge(n)),T7=(e,n,o,r)=>cs(o,r).fold(()=>x7(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),I$=(e,n)=>({extract:(c,u)=>cs(u,e).fold(()=>S7(c,e),b=>T7(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Le(n)}),y0=(e,n)=>n,GU=(e,n)=>Ht(e)&&Ht(n)?dk(e,n):n,L$=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)go(c,u)&&(o[u]=e(o[u],c[u]))}return o},dk=L$(GU),Em=L$(y0),H$=()=>({tag:"required",process:{}}),E7=e=>({tag:"defaultedThunk",process:e}),P3=e=>E7(ge(e)),_7=()=>({tag:"option",process:{}}),z$=(e,n)=>e.length>0?ui.svalue(dk(n,Em.apply(void 0,e))):ui.svalue(n),F3=e=>Ft(ui.serror,uo)(e),A7={consolidateObj:(e,n)=>{const o=ui.partition(e);return o.errors.length>0?F3(o.errors):z$(o.values,n)},consolidateArr:e=>{const n=ui.partition(e);return n.errors.length>0?F3(n.errors):ui.svalue(n.values)}},O7=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),D7=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),U$=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},mk=e=>{const n=(r,c)=>ui.bindError(e(c),u=>k7(r,u)),o=ge("val");return{extract:n,toString:o}},W$=mk(ui.svalue),R7=(e,n,o,r)=>cs(n,o).fold(()=>jU(e,o,n),r),I3=(e,n,o,r)=>{const c=cs(e,n).getOrThunk(()=>o(e));return r(c)},M7=(e,n,o)=>o(cs(e,n)),N7=(e,n,o,r)=>{const c=cs(e,n).map(u=>u===!0?o(e):u);return r(c)},$7=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>ui.svalue(R.none()),y=>{const x=c.extract(n.concat([r]),y);return ui.map(x,R.some)});switch(e.tag){case"required":return R7(n,o,r,u);case"defaultedThunk":return I3(o,r,e.process,u);case"option":return M7(o,r,f);case"defaultedOptionThunk":return N7(o,r,e.process,f);case"mergeWithThunk":return I3(o,r,ge({}),b=>{const y=dk(e.process(o),b);return u(y)})}},B7=(e,n,o)=>{const r={},c=[];for(const u of o)U$(u,(f,b,y,x)=>{const M=$7(y,e,n,f,x);ui.fold(M,P=>{c.push(...P)},P=>{r[b]=P})},(f,b)=>{r[f]=b(n)});return c.length>0?ui.serror(c):ui.svalue(r)},fk=e=>({extract:(r,c)=>B7(r,c,e),toString:()=>`obj{
`+re(e,c=>U$(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),gk=e=>({extract:(r,c)=>{const u=re(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return A7.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),Z$=e=>mk(n=>e(n).fold(ui.serror,ui.svalue)),P7=(e,n,o)=>{const r=n.extract([e],o);return ui.mapError(r,c=>({input:o,errors:c}))},F7=(e,n,o)=>ui.toResult(P7(e,n,o)),L3=e=>`Errors: 
`+Ff(e.errors).join(`
`)+`

Input object: `+oc(e.input),H3=(e,n)=>I$(e,Jt(n,fk)),KU=ge(W$),z3=(e,n)=>mk(o=>{const r=typeof o;return e(o)?ui.svalue(o):ui.serror(`Expected type: ${n} but got: ${r}`)}),YU=z3(it,"number"),hk=z3(te,"string"),XU=z3(xt,"boolean"),V3=z3(Q,"function"),oC=O7,I7=D7,L7=e=>Z$(n=>ae(e,n)?wi.value(n):wi.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),Si=(e,n)=>oC(e,e,H$(),n),pk=e=>Si(e,hk),_m=e=>Si(e,V3),j$=(e,n)=>oC(e,e,H$(),gk(n)),bk=(e,n)=>oC(e,e,_7(),n),vk=e=>bk(e,hk),U3=e=>bk(e,V3),W3=(e,n)=>oC(e,e,P3(n),KU()),Qb=(e,n,o)=>oC(e,e,P3(n),o),Z3=(e,n)=>Qb(e,n,YU),H7=(e,n)=>Qb(e,n,hk),G$=(e,n,o)=>Qb(e,n,L7(o)),j3=(e,n)=>Qb(e,n,XU),G3=(e,n)=>Qb(e,n,V3),z7=(e,n,o)=>Qb(e,n,gk(o)),q$=pk("type"),V7=_m("fetch"),q3=_m("onAction"),U7=G3("onSetup",()=>De),W7=vk("text"),Z7=vk("icon"),j7=vk("tooltip"),K$=vk("label"),G7=j3("active",!1),q7=j3("enabled",!0),K7=j3("primary",!1),K3=e=>W3("columns",e),sC=e=>H7("type",e),Y7=fk([q$,pk("trigger"),Z3("minChars",1),K3(1),Z3("maxResults",10),U3("matches"),V7,q3,z7("highlightOn",[],hk)]),X7=e=>F7("Autocompleter",Y7,{trigger:e.ch,...e}),e1=[q7,j7,Z7,W7,U7],If=[G7].concat(e1),t1=[G3("predicate",Nt),G$("scope","node",["node","editor"]),G$("position","selection",["node","selection","line"])],yk=e1.concat([sC("contextformbutton"),K7,q3,I7("original",Ue)]),Y3=If.concat([sC("contextformbutton"),K7,q3,I7("original",Ue)]),X3=e1.concat([sC("contextformbutton")]),Y$=If.concat([sC("contextformtogglebutton")]),J7=H3("type",{contextformbutton:yk,contextformtogglebutton:Y3});fk([sC("contextform"),G3("initValue",ge("")),K$,j$("commands",J7),bk("launch",H3("type",{contextformbutton:X3,contextformtogglebutton:Y$}))].concat(t1));const X$=e=>{const n=e.ui.registry.getAll().popups,o=Jt(n,f=>X7(f).fold(b=>{throw new Error(L3(b))},Ue)),r=Is(vc(o,f=>f.trigger)),c=ys(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Z(c,b=>b.trigger===f)}},J$=(e,n)=>{const o=I1(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},Q7=e=>{const n=rf(),o=dc(!1),r=n.isSet,c=()=>{r()&&($8(e),fS(e),o.set(!1),n.clear())},u=x=>{r()||(N8(e,x.range),n.set({trigger:x.trigger,matchLength:x.text.length}))},f=eo(()=>X$(e)),b=x=>n.get().map(M=>O$(e.dom,e.selection.getRng(),M.trigger).bind(P=>$$(e,f,P,x))).getOrThunk(()=>v7(e,f)),y=x=>{b(x).fold(c,M=>{u(M.context),M.lookupData.then(P=>{n.get().map(L=>{const ce=M.context;L.trigger===ce.trigger&&(ce.text.length-L.matchLength>=10?c():(n.set({...L,matchLength:ce.text.length}),o.get()?mS(e,{lookupData:P}):(o.set(!0),Yy(e,{lookupData:P}))))})})})};e.addCommand("mceAutocompleterReload",(x,M)=>{const P=Je(M)?M.fetchOptions:{};y(P)}),e.addCommand("mceAutocompleterClose",c),J$(e,{cancelIfNecessary:c,load:y})},Q$=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:De,inputType:o},f=M1(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},J3=Q$("input"),Q3=Q$("beforeinput"),eH=(e,n,o)=>{const r=o.keyCode===Wn.BACKSPACE?"deleteContentBackward":"deleteContentForward";x3([{keyCode:Wn.BACKSPACE,action:rs(jN,e)},{keyCode:Wn.BACKSPACE,action:rs(QA,e,!1)},{keyCode:Wn.DELETE,action:rs(QA,e,!0)},{keyCode:Wn.BACKSPACE,action:rs(YA,e,!1)},{keyCode:Wn.DELETE,action:rs(YA,e,!0)},{keyCode:Wn.BACKSPACE,action:rs(u3,e,n,!1)},{keyCode:Wn.DELETE,action:rs(u3,e,n,!0)},{keyCode:Wn.BACKSPACE,action:rs(WS,e,!1)},{keyCode:Wn.DELETE,action:rs(WS,e,!0)},{keyCode:Wn.BACKSPACE,action:rs(fu,e,!1)},{keyCode:Wn.DELETE,action:rs(fu,e,!0)},{keyCode:Wn.BACKSPACE,action:rs(VN,e,!1)},{keyCode:Wn.DELETE,action:rs(VN,e,!0)},{keyCode:Wn.BACKSPACE,action:rs(f0,e,!1)},{keyCode:Wn.DELETE,action:rs(f0,e,!0)},{keyCode:Wn.BACKSPACE,action:rs(qA,e,!1)},{keyCode:Wn.DELETE,action:rs(qA,e,!0)},{keyCode:Wn.BACKSPACE,action:rs(d3,e,!1)},{keyCode:Wn.DELETE,action:rs(d3,e,!0)}],o).each(c=>{o.preventDefault(),Q3(e,r).isDefaultPrevented()||(c(),J3(e,r))})},tH=(e,n)=>{Yb([{keyCode:Wn.BACKSPACE,action:rs(bN,e)},{keyCode:Wn.DELETE,action:rs(bN,e)}],n)},eB=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||eH(e,n,o)}),e.on("keyup",o=>{o.isDefaultPrevented()||tH(e,o)})},tB=e=>{for(;e;){if(Bn(e)||qt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},wk=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=tB(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(aa),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new ba(n,n);let f=n,b;for(;b=u.current();){if(qt(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else Wr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),on(e,c)},e4=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},nB=e=>R.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),nH=e=>nB(e).fold(ge(""),n=>n.nodeName.toUpperCase()),JU=e=>nB(e).filter(n=>ji(ve.fromDom(n))).isSome(),QU=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,oH=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},oB=(e,n)=>{const o=e==null?void 0:e.parentNode;return he(o)&&o.nodeName===n},sH=e=>he(e)&&/^(OL|UL|LI)$/.test(e.nodeName),rH=e=>he(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Fd=e=>sH(e)&&sH(e.parentNode),rC=e=>{const n=e.parentNode;return rH(n)?n:e},Ck=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Bn(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},sB=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;Fd(o)&&(c="LI");let y=n(c);if(Ck(o,r,!0)&&Ck(o,r,!1))if(oB(o,"LI")){const x=rC(o);u.insertAfter(y,x),oH(o)?u.remove(x):u.remove(o)}else u.replace(y,o);else if(Ck(o,r,!0))oB(o,"LI")?(u.insertAfter(y,rC(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):b.insertBefore(y,o),u.remove(r);else if(Ck(o,r,!1))u.insertAfter(y,rC(o)),u.remove(r);else{o=rC(o);const x=f.cloneRange();x.setStartAfter(r),x.setEndAfter(o);const M=x.extractContents();c==="LI"&&QU(M,"LI")?(y=M.firstChild,u.insertAfter(M,o)):(u.insertAfter(M,o),u.insertAfter(y,o)),u.remove(r)}wk(e,y)},aH=e=>{z(Zm(ve.fromDom(e),Ds),n=>{const o=n.dom;o.nodeValue=Oa(o.data)})},cH=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},eW=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),Gc=e=>{e.innerHTML='<br data-mce-bogus="1">'},t4=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,rB=(e,n)=>he(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.getContentEditable(n)!=="true",iH=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Bn(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||eW(e,u))&&e.remove(u)},n4=(e,n,o)=>qt(n)?e?o===1&&n.data.charAt(o-1)===wr?0:o:o===n.data.length-1&&n.data.charAt(o)===wr?n.data.length:o:o,lH=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,n4(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,n4(!1,e.endContainer,e.endOffset)),n},uH=e=>{let n=e;do qt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},dH=(e,n,o)=>{const r=e.dom;R.from(o.style).map(r.parseStyle).each(y=>{const M={...ns(ve.fromDom(n)),...y};r.setStyles(n,M)});const c=R.from(o.class).map(y=>y.split(/\s+/)),u=R.from(n.className).map(y=>Z(y.split(/\s+/),x=>x!==""));Ur(c,u,(y,x)=>{const M=Z(x,L=>!ae(y,L)),P=[...y,...M];r.setAttrib(n,"class",P.join(" "))});const f=["style","class"],b=bs(o,(y,x)=>!ae(f,x));r.setAttribs(n,b)},aC=(e,n)=>{if(vl(e).toLowerCase()===n.tagName.toLowerCase()){const r=Yp(e);dH(e,n,r)}},mH=(e,n,o,r,c)=>{var u;const f=e.dom,b=(u=e4(f,r))!==null&&u!==void 0?u:f.getRoot();let y=f.getParent(r,f.isBlock);if(!y||!rB(f,y)){y=y||b;let x;if(y===e.getBody()||w1(y)?x=y.nodeName.toLowerCase():y.parentNode?x=y.parentNode.nodeName.toLowerCase():x="",!y.hasChildNodes()){const L=f.create(n);return aC(e,L),y.appendChild(L),o.setStart(L,0),o.setEnd(L,0),L}let M=r;for(;M&&M.parentNode!==y;)M=M.parentNode;let P;for(;M&&!f.isBlock(M);)P=M,M=M.previousSibling;if(P&&e.schema.isValidChild(x,n.toLowerCase())){const L=P.parentNode,ce=f.create(n);for(aC(e,ce),L.insertBefore(ce,P),M=P;M&&!f.isBlock(M);){const ie=M.nextSibling;ce.appendChild(M),M=ie}o.setStart(r,c),o.setEnd(r,c)}}return r},o4=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Bn(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},s4=(e,n)=>{const o=fc(e);return St(n)?!1:te(o)?ae(Pt.explode(o),n.nodeName.toLowerCase()):o},fH={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,x=y.getNonEmptyElements(),M=e.selection.getRng(),P=vl(e),L=vn=>{let sn=o;const mt=y.getTextInlineElements();let Qe;vn||c==="TABLE"||c==="HR"?Qe=b.create(vn||P):Qe=Oe.cloneNode(!1);let Rn=Qe;if(zT(e)===!1)b.setAttrib(Qe,"style",null),b.setAttrib(Qe,"class",null);else do if(mt[sn.nodeName]){if(Cl(sn)||Oc(sn))continue;const co=sn.cloneNode(!1);b.setAttrib(co,"id",""),Qe.hasChildNodes()?(co.appendChild(Qe.firstChild),Qe.appendChild(co)):(Rn=co,Qe.appendChild(co))}while((sn=sn.parentNode)&&sn!==Ne);return aC(e,Qe),Gc(Rn),Qe},ce=vn=>{const sn=n4(vn,o,r);if(qt(o)&&(vn?sn>0:sn<o.data.length))return!1;if(o.parentNode===Oe&&f&&!vn||vn&&Bn(o)&&o===Oe.firstChild)return!0;if(t4(o,"TABLE")||t4(o,"HR"))return f&&!vn||!f&&vn;const mt=new ba(o,Oe);qt(o)&&(vn&&sn===0?mt.prev():!vn&&sn===o.data.length&&mt.next());let Qe;for(;Qe=mt.current();){if(Bn(Qe)){if(!Qe.getAttribute("data-mce-bogus")){const Rn=Qe.nodeName.toLowerCase();if(x[Rn]&&Rn!=="br")return!1}}else if(qt(Qe)&&!Dl(Qe.data))return!1;vn?mt.prev():mt.next()}return!0},ie=()=>{let vn;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Ge!=="HGROUP"?vn=L(P):vn=L(),s4(e,u)&&rB(b,u)&&b.isEmpty(Oe)?vn=b.split(u,Oe):b.insertAfter(vn,Oe),wk(e,vn),vn};Bv(b,M).each(vn=>{M.setStart(vn.startContainer,vn.startOffset),M.setEnd(vn.endContainer,vn.endOffset)}),o=M.startContainer,r=M.startOffset;const ee=!!(n&&n.shiftKey),ue=!!(n&&n.ctrlKey);Bn(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&qt(o)?r=o.data.length:r=0);const Ne=e4(b,o);if(!Ne||cH(e,o))return;ee||(o=mH(e,P,M,o,r));let Oe=b.getParent(o,b.isBlock)||b.getRoot();u=he(Oe==null?void 0:Oe.parentNode)?b.getParent(Oe.parentNode,b.isBlock):null,c=Oe?Oe.nodeName.toUpperCase():"";const Ge=u?u.nodeName.toUpperCase():"";if(Ge==="LI"&&!ue){const vn=u;Oe=vn,u=vn.parentNode,c=Ge}if(/^(LI|DT|DD)$/.test(c)&&Bn(u)&&b.isEmpty(Oe)){sB(e,L,u,Oe,P);return}if(Oe===e.getBody())return;const nt=Oe.parentNode;let Dt;if(k(Oe))Dt=er(Oe),b.isEmpty(Oe)&&Gc(Oe),aC(e,Dt),wk(e,Dt);else if(ce(!1))Dt=ie();else if(ce(!0)&&nt)Dt=nt.insertBefore(L(),Oe),wk(e,t4(Oe,"HR")?Dt:Oe);else{const vn=lH(M).cloneRange();vn.setEndAfter(Oe);const sn=vn.extractContents();aH(sn),uH(sn),Dt=sn.firstChild,b.insertAfter(sn,Oe),iH(b,x,Dt),o4(b,Oe),b.isEmpty(Oe)&&Gc(Oe),Dt.normalize(),b.isEmpty(Dt)?(b.remove(Dt),ie()):(aC(e,Dt),wk(e,Dt))}b.setAttrib(Dt,"id",""),e.dispatch("NewBlock",{newBlock:Dt})},fakeEventName:"insertParagraph"},gH=(e,n,o)=>{const r=new ba(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||qt(c)&&c.length>0)return!0;return!1},aB=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),on(e,r)},nW=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Bv(r,c).each(ce=>{c.setStart(ce.startContainer,ce.startOffset),c.setEnd(ce.endContainer,ce.endOffset)});let b=c.startOffset,y=c.startContainer;if(Bn(y)&&y.hasChildNodes()){const ce=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,ce&&qt(y)?b=y.data.length:b=0}let x=r.getParent(y,r.isBlock);const M=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,P=M?M.nodeName.toUpperCase():"",L=!!(n&&n.ctrlKey);P==="LI"&&!L&&(x=M),qt(y)&&b>=y.data.length&&(gH(e.schema,y,x||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),W1(r,c,u),aB(e,u,f),e.undoManager.add()},hH=(e,n)=>{const o=ve.fromTag("br");os(ve.fromDom(n),o),e.undoManager.add()},Ug=(e,n)=>{bH(e.getBody(),n)||Ar(ve.fromDom(n),ve.fromTag("br"));const o=ve.fromTag("br");Ar(ve.fromDom(n),o),aB(e,o.dom,!1),e.undoManager.add()},pH=e=>Wr(e.getNode()),bH=(e,n)=>pH(vt.after(n))?!0:Ci(e,vt.after(n)).map(o=>Wr(o.getNode())).getOr(!1),Wg=e=>e&&e.nodeName==="A"&&"href"in e,vH=e=>e.fold(Nt,Wg,Wg,Nt),cB=e=>{const n=Ae(Db,e),o=vt.fromRangeStart(e.selection.getRng());return Bf(n,e.getBody(),o).filter(vH)},yH=(e,n)=>{n.fold(De,Ae(hH,e),Ae(Ug,e),De)},iB={insert:(e,n)=>{const o=cB(e);o.isSome()?o.each(Ae(yH,e)):nW(e,n)},fakeEventName:"insertLineBreak"},lB=(e,n)=>nB(e).filter(o=>n.length>0&&Oi(ve.fromDom(o),n)).isSome(),wH=e=>lB(e,w2(e)),CH=e=>lB(e,pn(e)),Ul=au.generate([{br:[]},{block:[]},{none:[]}]),uB=(e,n)=>CH(e),cC=e=>(n,o)=>JU(n)===e,dB=(e,n)=>(o,r)=>nH(o)===e.toUpperCase()===n,SH=e=>{const n=e4(e.dom,e.selection.getStart());return St(n)},iC=e=>dB("pre",e),xH=()=>dB("summary",!0),Sk=e=>(n,o)=>LT(n)===e,mB=(e,n)=>wH(e),xk=(e,n)=>n,fB=e=>{const n=vl(e),o=e4(e.dom,e.selection.getStart());return he(o)&&e.schema.isValidChild(o.nodeName,n)},Qu=(e,n)=>(o,r)=>Pe(e,(u,f)=>u&&f(o,r),!0)?R.some(n):R.none(),kH=(e,n)=>n3([Qu([uB],Ul.none()),Qu([iC(!0),SH],Ul.none()),Qu([xH()],Ul.br()),Qu([iC(!0),Sk(!1),xk],Ul.br()),Qu([iC(!0),Sk(!1)],Ul.block()),Qu([iC(!0),Sk(!0),xk],Ul.block()),Qu([iC(!0),Sk(!0)],Ul.br()),Qu([cC(!0),xk],Ul.br()),Qu([cC(!0)],Ul.block()),Qu([mB],Ul.br()),Qu([xk],Ul.br()),Qu([fB],Ul.block())],[e,!!(n&&n.shiftKey)]).getOr(Ul.none()),kk=(e,n,o)=>{n.selection.isCollapsed()||_5(n),!(he(o)&&Q3(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),he(o)&&J3(n,e.fakeEventName))},Tk=(e,n)=>{const o=()=>kk(iB,e,n),r=()=>kk(fH,e,n),c=kH(e,n);switch(HT(e)){case"linebreak":c.fold(o,o,De);break;case"block":c.fold(r,r,De);break;case"invert":c.fold(r,o,De);break;default:c.fold(o,r,De);break}},TH=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),l8(e.undoManager),e.undoManager.transact(()=>{Tk(e,n)}))},EH=e=>{e.on("keydown",n=>{n.keyCode===Wn.ENTER&&TH(e,n)})},gB=(e,n,o)=>{const r=us.os.isMacOS()||us.os.isiOS();Yb([{keyCode:Wn.END,action:rs(tk,e,!0)},{keyCode:Wn.HOME,action:rs(tk,e,!1)},...r?[]:[{keyCode:Wn.HOME,action:rs(nk,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Wn.END,action:rs(nk,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Wn.END,action:rs(k3,e,!0)},{keyCode:Wn.HOME,action:rs(k3,e,!1)},{keyCode:Wn.END,action:rs(v0,e,!0,n)},{keyCode:Wn.HOME,action:rs(v0,e,!1,n)}],o).each(c=>{o.preventDefault()})},r4=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||gB(e,n,o)})},hB=e=>{e.on("input",n=>{n.isComposing||d5(e)})},_H=$r(),rW=(e,n,o)=>{Yb([{keyCode:Wn.PAGE_UP,action:rs(v0,e,!1,n)},{keyCode:Wn.PAGE_DOWN,action:rs(v0,e,!0,n)}],o)},bp=e=>e.stopImmediatePropagation(),pB=e=>e.keyCode===Wn.PAGE_UP||e.keyCode===Wn.PAGE_DOWN,bB=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",bp,!0):!o&&e.get()&&n.off("NodeChange",bp),e.set(o)},AH=(e,n)=>{if(_H.os.isMacOS())return;const o=dc(!1);e.on("keydown",r=>{pB(r)&&bB(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||rW(e,n,r),pB(r)&&o.get()&&(bB(o,e,!1),e.nodeChanged())})},lC=(e,n)=>{const o=n.container(),r=n.offset();return qt(o)?(o.insertData(r,e),R.some(vt(o,r+e.length))):Hh(n).map(c=>{const u=ve.fromText(e);return n.isAtEnd()?Ar(c,u):os(c,u),vt(u.dom,e.length)})},vB=Ae(lC,aa),yB=Ae(lC," "),OH=e=>n=>n.fold(o=>wl(e.dom,vt.before(o)),o=>$i(o),o=>Td(o),o=>Ci(e.dom,vt.after(o))),wB=(e,n)=>o=>l5(e,o)?vB(n):yB(n),DH=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),RH=e=>{const n=vt.fromRangeStart(e.selection.getRng()),o=ve.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ae(Db,e),c=vt.fromRangeStart(e.selection.getRng());return Bf(r,e.getBody(),c).bind(OH(o)).map(u=>()=>wB(o,n)(u).each(DH(e)))}else return R.none()},MH=(e,n)=>{x3([{keyCode:Wn.SPACEBAR,action:rs(RH,e)}],n).each(o=>{n.preventDefault(),Q3(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),J3(e,"insertText",{data:" "}))})},CB=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||MH(e,n)})},a4=e=>rE(e)?[{keyCode:Wn.TAB,action:rs(O3,e,!0)},{keyCode:Wn.TAB,shiftKey:!0,action:rs(O3,e,!1)}]:[],NH=(e,n)=>{Yb([...a4(e)],n).each(o=>{n.preventDefault()})},c4=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||NH(e,n)})},SB=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Q7(e),Mf(e))return dc(null);{const n=vL(e);return S3(e),f7(e,n),eB(e,n),EH(e),CB(e),hB(e),c4(e),r4(e,n),AH(e,n),n}};class Ek{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!nw(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&ms(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&ms(n)&&(n.selection.getNode().nodeName==="IMG"?Pi.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!ai(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=ao(r.dom.getParents(n,Ve,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const i4="x-tinymce/html",uC=ge(i4),l4="<!-- "+i4+" -->",$H=e=>l4+e,_k=e=>e.replace(l4,""),xB=e=>e.indexOf(l4)!==-1,BH=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),PH=(e,n)=>{let o="<"+e;const r=vc(n,(c,u)=>u+'="'+Qa.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},FH=(e,n,o)=>{const r=e.split(/\n\n/),c=PH(n,o),u="</"+n+">",f=re(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:re(f,b).join("")},kB="%MCEPASTEBIN%",IH=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},kB);us.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},LH=(e,n)=>{const o=e.dom;if(u4(e)){let r;const c=n.get();for(;r=u4(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},u4=e=>e.dom.get("mcepastebin"),w0=e=>he(e)&&e.id==="mcepastebin",HH=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=Z(e.getBody().childNodes,w0);z(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},TB=e=>e===kB,EB=e=>{const n=dc(null);return{create:()=>IH(e,n),remove:()=>LH(e,n),getEl:()=>u4(e),getHtml:()=>HH(e),getLastRng:n.get}},_B=(e,n)=>(Pt.each(n,o=>{Ee(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),zH=e=>{const n=Bu(),o=lu({},n);let r="";const c=n.getVoidElements(),u=Pt.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const x=y.name,M=y;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(c[x]&&(r+=" "),u[x]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let P=y.firstChild;if(P)do b(P);while(P=P.next)}f[x]&&M.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=_B(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},AB=e=>(e=_B(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":aa],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),OB=e=>{let n=0;return()=>e+n++},VH=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Pt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},UH=(e,n)=>{const o=lu({},e.schema);o.addNodeFilter("meta",c=>{Pt.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return sp({validate:!0},e.schema).serialize(r)},WH=(e,n)=>({content:e,cancelled:n}),Ak=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=Xy(e,r,o);return WH(c.node.innerHTML,c.isDefaultPrevented())},ZH=(e,n,o)=>{const r=Rv(e,n,o),c=UH(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?Ak(e,c,o):WH(c,r.isDefaultPrevented())},jH=(e,n,o)=>ZH(e,n,o),d4=(e,n)=>(e.insertContent(n,{merge:by(e),paste:!0}),!0),m4=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),GH=(e,n)=>m4(n)&&se(yy(e),o=>Os(n.toLowerCase(),`.${o.toLowerCase()}`)),qH=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),KH=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),YH=(e,n,o)=>!e.selection.isCollapsed()&&m4(n)?KH(e,n,o):!1,XH=(e,n,o)=>GH(e,n)?qH(e,n,o):!1,JH=(e,n)=>{Pt.each([YH,XH,d4],o=>!o(e,n,d4))},QH=(e,n,o)=>{o||!D2(e)?d4(e,n):JH(e,n)},e9=OB("mceclip"),DB=(e,n,o,r)=>{const c=jH(e,n,o);c.cancelled||QH(e,c.content,r)},dr=(e,n,o)=>{const r=o||xB(n);DB(e,_k(n),r,!1)},f4=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=Op(o,M2(e)),c=FH(r,vl(e),Yp(e));DB(e,c,!1,!0)},g4=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},C0=(e,n)=>n in e&&e[n].length>0,Ok=e=>C0(e,"text/html")||C0(e,"text/plain"),RB=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return he(o)?e.dom.encode(o[1]):void 0},MB=(e,n,o,r)=>{const c=e9(),u=ay(e)&&he(o.name),f=u?RB(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},t9=(e,n)=>{c0(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),x=y??MB(e,b,f,u);dr(e,`<img src="${x.blobUri()}">`,!1)})},NB=e=>e.type==="paste",n9=e=>Promise.all(re(e,n=>px(n).then(o=>({file:n,uri:o})))),o9=e=>{const n=yy(e);return o=>Co(o.type,"image/")&&se(n,r=>VH(r)===o.type)},$B=(e,n)=>{const o=n.items?Qn(Ro(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Ro(n.files):[];return Z(o.length>0?o:r,o9(e))},BB=(e,n,o)=>{const r=NB(n)?n.clipboardData:n.dataTransfer;if(rv(e)&&r){const c=$B(e,r);if(c.length>0)return n.preventDefault(),n9(c).then(u=>{o&&e.selection.setRng(o),z(u,f=>{t9(e,f)})}),!0}return!1},s9=e=>{var n,o;return us.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},Dk=e=>Wn.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,dC=(e,n,o,r)=>{let c=AB(o);const u=C0(n,uC())||xB(o),f=!u&&BH(c),b=m4(c);(TB(c)||!c.length||f&&!b)&&(r=!0),(r||b)&&(C0(n,"text/plain")&&f?c=n["text/plain"]:c=zH(c)),!TB(c)&&(r?f4(e,c):dr(e,c,u))},PB=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{Dk(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||s9(u))return;const f=o.get()==="text"||r;r=!1;const b=g4(u.clipboardData);!Ok(b)&&BB(e,u,c())||(C0(b,"text/html")?(u.preventDefault(),dC(e,b,b["text/html"],f)):(n.create(),Pi.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),dC(e,b,y,f)},0)))})},ed=e=>{const n=c=>Co(c,"webkit-fake-url"),o=c=>Co(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!rv(e)&&r(f))for(const b of c){const y=b.attr("src");te(y)&&!b.attr("data-mce-object")&&y!==us.transparentSrc&&(n(y)||!bg(e)&&o(y))&&b.remove()}})},r9=(e,n,o)=>{PB(e,n,o),ed(e)},S0=(e,n)=>{n.get()==="text"?(n.set("html"),rr(e,!1)):(n.set("text"),rr(e,!0)),e.focus()},mC=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{S0(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&dr(e,r.html,r.internal),r.text&&f4(e,r.text)})},a9=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(uC(),n),!0}catch{return!1}else return!1},FB=(e,n,o,r)=>{a9(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},n1=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),Pi.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},IB=e=>({html:$H(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),h4=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),Rk=e=>!e.selection.isCollapsed()||h4(e),LB=e=>n=>{!n.isDefaultPrevented()&&Rk(e)&&FB(n,IB(e),n1(e),()=>{if(us.browser.isChromium()||us.browser.isFirefox()){const o=e.selection.getRng();Pi.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},c9=e=>n=>{!n.isDefaultPrevented()&&Rk(e)&&FB(n,IB(e),n1(e),De)},i9=e=>{e.on("cut",LB(e)),e.on("copy",c9(e))},p4=(e,n)=>{var o,r;return Mg.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},HB=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},zB=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},l9=e=>se(e.files,n=>/^image\//.test(n.type)),u9=(e,n)=>{eE(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),rv(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&l9(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented()||n.get())return;const r=p4(e,o);if(St(r))return;const c=g4(o.dataTransfer),u=C0(c,uC());if((!Ok(c)||HB(c))&&BB(e,o,r))return;const f=c[uC()],b=f||c["text/html"]||c["text/plain"];b&&(o.preventDefault(),Pi.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),zB(e,r);const y=AB(b);c["text/html"]?dr(e,y,u):f4(e,y)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{rv(e)&&!n.get()&&(o.preventDefault(),zB(e,p4(e,o))),o.type==="dragend"&&n.set(!1)})},VB=e=>{const n=c=>u=>{c(e,u)},o=tE(e);Q(o)&&e.on("PastePreProcess",n(o));const r=O2(e);Q(r)&&e.on("PastePostProcess",n(r))},d9=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},UB=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,WB=e=>Pt.trim(e).replace(UB,fb).toLowerCase(),m9=(e,n,o)=>{const r=nE(e);if(o||r==="all"||!nb(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,x,M)=>{const P=u.parseStyle(u.decode(x)),L={};for(let ie=0;ie<c.length;ie++){const ee=P[c[ie]];let ue=ee,Ne=u.getStyle(f,c[ie],!0);/color/.test(c[ie])&&(ue=WB(ue),Ne=WB(Ne)),Ne!==ue&&(L[c[ie]]=ee)}const ce=u.serializeStyle(L,"span");return ce?y+' style="'+ce+'"'+M:y+M})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},f9=e=>{(us.browser.isChromium()||us.browser.isSafari())&&d9(e,m9)},g9=e=>{const n=dc(!1),o=dc(R2(e)?"text":"html"),r=EB(e);f9(e),mC(e,o),VB(e),e.on("PreInit",()=>{i9(e),u9(e,n),r9(e,r,o)})},h9=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},p9=e=>{e.parser.addNodeFilter("details",n=>{z(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{z(n,o=>{const r=o.attr("data-mce-open");o.attr("open",te(r)?r:null),o.attr("data-mce-open",null)})})},b9=e=>{h9(e),p9(e)},ZB=Wr,jB=qt,v9=e=>cr(e.dom),GB=e=>ni(e.dom),qB=e=>n=>Bs(ve.fromDom(e),n),y9=(e,n)=>Al(ve.fromDom(e),o=>GB(o)||va(o),qB(n)).getOr(ve.fromDom(n)).dom,w9=(e,n)=>Al(ve.fromDom(e),v9,qB(n)),KB=(e,n,o)=>{const r=new ba(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!ZB(f);f=c())bi(f)&&(u=f);return u},aW=(e,n)=>{const r=vt.fromRangeStart(e).getNode(),c=y9(r,n),u=KB(r,c,!1),f=KB(r,c,!0),b=document.createRange();return w9(u,c).fold(()=>{jB(u)?b.setStart(u,0):b.setStartBefore(u)},y=>b.setStartBefore(y.dom)),w9(f,c).fold(()=>{jB(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},y=>b.setEndAfter(y.dom)),b},C9=e=>{const n=aW(e.selection.getRng(),e.getBody());e.selection.setRng(kw(n))},S9=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),C9(e))})};var fC;(function(e){e.Before="before",e.After="after"})(fC||(fC={}));const x9=(e,n)=>Math.abs(e.left-n),Wl=(e,n)=>Math.abs(e.right-n),k9=(e,n)=>e>=n.top&&e<=n.bottom,T9=(e,n)=>e.top<n.bottom&&e.bottom>n.top,E9=(e,n)=>{const o=Va(e,n)/Math.min(e.height,n.height);return T9(e,n)&&o>.5},_9=(e,n)=>{const o=Z(e,r=>k9(n,r));return _T(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=H(e,f=>E9(f,r));return[c,u]})},A9=(e,n)=>({node:e.node,position:x9(e,n)<Wl(e,n)?fC.Before:fC.After}),Mk=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),b4=(e,n,o)=>{const r=M=>bi(M.node)?R.some(M):Bn(M.node)?b4(Ro(M.node.childNodes),n,o):R.none(),c=(M,P)=>{if(M.length>=2){const L=r(M[0]).getOr(M[0]),ce=r(M[1]).getOr(M[1]);if(Math.abs(P(L,n,o)-P(ce,n,o))<2){if(qt(L.node))return R.some(L);if(qt(ce.node))return R.some(ce)}}return R.none()},u=(M,P)=>{const L=Lt(M,(ce,ie)=>P(ce,n,o)-P(ie,n,o));return c(L,P).orThunk(()=>ks(L,r))},[f,b]=_9(Gx(e),o),{pass:y,fail:x}=H(b,M=>M.top<o);return u(f,Mk).orThunk(()=>u(x,c2)).orThunk(()=>u(y,c2))},O9=(e,n,o,r)=>{const c=(u,f)=>{const b=x=>Bn(x)&&x.classList.contains("mce-drag-container"),y=Z(u.dom.childNodes,tn(b));return f.fold(()=>b4(y,o,r),x=>{const M=Z(y,P=>P!==x.dom);return b4(M,o,r)}).orThunk(()=>(Bs(u,e)?R.none():Uf(u)).bind(M=>c(M,R.some(u))))};return c(n,R.none())},YB=(e,n,o)=>{const r=ve.fromDom(e),c=Ui(r),f=ve.fromPoint(c,n,o).filter(b=>qa(r,b)).getOr(r);return O9(r,f,n,o)},v4=(e,n,o)=>YB(e,n,o).filter(r=>yg(r.node)).map(r=>A9(r,n)),Nk=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},D9=e=>e.inline?Nk(e.getBody()):{left:0,top:0},XB=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},R9=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},JB=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=Nk(e.getContentAreaContainer()),r=R9(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},M9=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),QB=(e,n)=>M9(D9(e),XB(e),JB(e,n)),$k=32,N9=100,Bk=8,vp=16,y4=cr,$9=AT(y4,ni),eP=(e,n)=>y4(n)&&n!==e,B9=(e,n,o)=>St(n)||n===o||e.dom.isChildOf(n,o)?!1:!y4(n),P9=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},F9=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},I9=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Pk=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},gC=Pk("left",-$k),w4=Pk("left",$k),C4=Pk("top",-$k),tP=Pk("top",$k),L9=(e,n,o,r,c,u,f,b,y,x,M,P)=>{let L=0,ce=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(L=n.pageX+o-c),n.pageY+r>u&&(ce=n.pageY+r-u),e.style.width=o-L+"px",e.style.height=r-ce+"px";const ie=y.clientHeight,ee=y.clientWidth,ue=f+y.getBoundingClientRect().top,Ne=b+y.getBoundingClientRect().left;M.on(Oe=>{Oe.intervalId.clear(),Oe.dragging&&P&&(f+Bk>=ie?Oe.intervalId.set(tP(x)):f-Bk<=0?Oe.intervalId.set(C4(x)):b+Bk>=ee?Oe.intervalId.set(w4(x)):b-Bk<=0?Oe.intervalId.set(gC(x)):ue+vp>=window.innerHeight?Oe.intervalId.set(tP(window)):ue-vp<=0?Oe.intervalId.set(C4(window)):Ne+vp>=window.innerWidth?Oe.intervalId.set(w4(window)):Ne-vp<=0&&Oe.intervalId.set(gC(window)))})},nP=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},cW=e=>e.button===0,H9=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),S4=(e,n)=>o=>{if(cW(o)){const r=rn(n.dom.getParents(o.target),$9).getOr(null);if(he(r)&&eP(n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:F9(n,r,r.offsetWidth,r.offsetHeight),intervalId:xT(N9)})}}},x4=(e,n)=>{const o=_h((c,u)=>{n._selectionOverrides.hideFakeCaret(),v4(n.getBody(),c,u).fold(()=>n.selection.placeCaretAt(c,u),f=>{const b=n._selectionOverrides.showCaret(1,f.node,f.position===fC.Before,!1);b?n.selection.setRng(b):n.selection.placeCaretAt(c,u)})},0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",{target:u.element}).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=H9(u,QB(n,c));I9(u.ghost,n.getBody()),L9(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},Fk=e=>{const n=e.getSel();if(he(n)){const r=n.getRangeAt(0).startContainer;return qt(r)?r.parentNode:r}else return null},z9=(e,n)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(B9(n,Fk(n.selection),r.element)){const c=P9(r.element);n.dispatch("drop",{clientX:o.clientX,clientY:o.clientY}).isDefaultPrevented()||n.undoManager.transact(()=>{nP(r.element),n.insertContent(n.dom.getOuterHTML(c)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend")}}),k4(e)},V9=(e,n)=>()=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.dispatch("dragend")}),k4(e)},k4=e=>{e.on(n=>{n.intervalId.clear(),nP(n.ghost)}),e.clear()},U9=e=>{const n=rf(),o=br.DOM,r=document,c=S4(n,e),u=x4(n,e),f=z9(n,e),b=V9(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===Wn.ESC&&b()})},T4=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(ae(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&PA(e,"Dropped file type is not supported"))}},o=c=>{Hv(e,c.target)&&n(c)},r=()=>{const c=br.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];z(y,x=>{c.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{z(y,x=>{c.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{Pi.setEditorTimeout(e,r,0)})},oP=e=>{U9(e),tb(e)&&T4(e)},W9=e=>{const n=_h(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=KA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},sP=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ql(o)){const r=ip(e.getBody(),o),c=cr(r)?r:o;e.selection.getNode()!==c&&qw(e,c).each(u=>e.selection.setRng(u))}})})},x0=cr,E4=(e,n)=>ip(e.getBody(),n),iW=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=lv(e,r,o.isBlock,()=>Ob(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=sn=>he(sn)&&o.hasClass(sn,"mce-offscreen-selection"),x=sn=>sn!==r&&(x0(sn)||Ql(sn))&&o.isChildOf(sn,r),M=sn=>{sn&&n.setRng(sn)},P=(sn,mt,Qe,Rn=!0)=>e.dispatch("ShowCaret",{target:mt,direction:sn,before:Qe}).isDefaultPrevented()?null:(Rn&&n.scrollIntoView(mt,sn===-1),c.show(Qe,mt)),L=sn=>{sn.hasAttribute("data-mce-caret")&&(er(sn),n.scrollIntoView(sn))},ce=()=>{e.on("click",mt=>{const Qe=E4(e,mt.target);Qe&&x0(Qe)&&(mt.preventDefault(),e.focus())}),e.on("blur NewBlock",nt),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",mt=>{const Qe=mt.target,Rn=E4(e,Qe);x0(Rn)?(mt.preventDefault(),qw(e,Rn).each(Ge)):x(Qe)&&qw(e,Qe).each(Ge)},!0),e.on("mousedown",mt=>{const Qe=mt.target;if(Qe!==r&&Qe.nodeName!=="HTML"&&!o.isChildOf(Qe,r)||!t6(e,mt.clientX,mt.clientY))return;nt(),vn();const Rn=E4(e,Qe);x0(Rn)?(mt.preventDefault(),qw(e,Rn).each(Ge)):v4(r,mt.clientX,mt.clientY).each(co=>{mt.preventDefault();const fo=P(1,co.node,co.position===fC.Before,!1);M(fo),Bn(Rn)?Rn.focus():e.getBody().focus()})}),e.on("keypress",mt=>{Wn.modifierPressed(mt)||x0(n.getNode())&&mt.preventDefault()}),e.on("GetSelectionRange",mt=>{let Qe=mt.range;if(b){if(!b.parentNode){b=null;return}Qe=Qe.cloneRange(),Qe.selectNode(b),mt.range=Qe}}),e.on("SetSelectionRange",mt=>{mt.range=ue(mt.range);const Qe=Ge(mt.range,mt.forward);Qe&&(mt.range=Qe)});const sn=mt=>Bn(mt)&&mt.id==="mcepastebin";e.on("AfterSetSelectionRange",mt=>{const Qe=mt.range,Rn=Qe.startContainer.parentElement;!ee(Qe)&&!sn(Rn)&&vn(),y(Rn)||nt()}),oP(e),W9(e),sP(e)},ie=sn=>V(sn)||Go(sn)||ir(sn),ee=sn=>ie(sn.startContainer)||ie(sn.endContainer),ue=sn=>{const mt=e.schema.getVoidElements(),Qe=o.createRng(),Rn=sn.startContainer,co=sn.startOffset,fo=sn.endContainer,Uo=sn.endOffset;return go(mt,Rn.nodeName.toLowerCase())?co===0?Qe.setStartBefore(Rn):Qe.setStartAfter(Rn):Qe.setStart(Rn,co),go(mt,fo.nodeName.toLowerCase())?Uo===0?Qe.setEndBefore(fo):Qe.setEndAfter(fo):Qe.setEnd(fo,Uo),Qe},Ne=(sn,mt)=>{const Qe=ve.fromDom(e.getBody()),Rn=e.getDoc(),co=Yf(Qe,"#"+u).getOrThunk(()=>{const vs=ve.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Rn);return or(vs,"id",u),ea(Qe,vs),vs}),fo=o.createRng();Hr(co),Fo(co,[ve.fromText(aa,Rn),ve.fromDom(mt),ve.fromText(aa,Rn)]),fo.setStart(co.dom.firstChild,1),fo.setEnd(co.dom.lastChild,0),Se(co,{top:o.getPos(sn,e.getBody()).y+"px"}),kt(co);const Uo=n.getSel();return Uo&&(Uo.removeAllRanges(),Uo.addRange(fo)),fo},Oe=sn=>{const mt=sn.cloneNode(!0),Qe=e.dispatch("ObjectSelected",{target:sn,targetClone:mt});if(Qe.isDefaultPrevented())return null;const Rn=Ne(sn,Qe.targetClone),co=ve.fromDom(sn);return z(Ms(ve.fromDom(e.getBody()),`*[${f}]`),fo=>{Bs(co,fo)||qr(fo,f)}),o.getAttrib(sn,f)||sn.setAttribute(f,"1"),b=sn,vn(),Rn},Ge=(sn,mt)=>{if(!sn)return null;if(sn.collapsed){if(!ee(sn)){const fo=mt?1:-1,Uo=ab(fo,r,sn),vs=Uo.getNode(!mt);if(he(vs)){if(yg(vs))return P(fo,vs,mt?!Uo.isAtEnd():!1,!1);if(I(vs)&&cr(vs.nextSibling)){const Zs=o.createRng();return Zs.setStart(vs,0),Zs.setEnd(vs,0),Zs}}const Gs=Uo.getNode(mt);if(he(Gs)){if(yg(Gs))return P(fo,Gs,mt?!1:!Uo.isAtEnd(),!1);if(I(Gs)&&cr(Gs.previousSibling)){const Zs=o.createRng();return Zs.setStart(Gs,1),Zs.setEnd(Gs,1),Zs}}}return null}let Qe=sn.startContainer,Rn=sn.startOffset;const co=sn.endOffset;if(qt(Qe)&&Rn===0&&x0(Qe.parentNode)&&(Qe=Qe.parentNode,Rn=o.nodeIndex(Qe),Qe=Qe.parentNode),!Bn(Qe))return null;if(co===Rn+1&&Qe===sn.endContainer){const fo=Qe.childNodes[Rn];if(x(fo))return Oe(fo)}return null},nt=()=>{b&&b.removeAttribute(f),Yf(ve.fromDom(e.getBody()),"#"+u).each(Ps),b=null},Dt=()=>{c.destroy(),b=null},vn=()=>{c.hide()};return Mf(e)||ce(),{showCaret:P,showBlockCaretContainer:L,hideFakeCaret:vn,destroy:Dt}},Z9=(e,n)=>{let o=n;for(let r=e.previousSibling;qt(r);r=r.previousSibling)o+=r.data.length;return o},rP=(e,n,o,r,c)=>{if(qt(o)&&(r<0||r>o.data.length))return[];const u=c&&qt(o)?[Z9(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},_4=(e,n,o,r,c,u,f=!1)=>{const b=rP(e,n,o,r,f),y=rP(e,n,c,u,f);return{start:b,end:y}},A4=(e,n)=>{const o=n.slice(),r=o.pop();return it(r)?Pe(o,(u,f)=>u.bind(b=>R.from(b.childNodes[f])),R.some(e)).bind(u=>qt(u)&&(r<0||r>u.data.length)?R.none():R.some({node:u,offset:r})):R.none()},aP=(e,n)=>A4(e,n.start).bind(({node:o,offset:r})=>A4(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),cP=(e,n,o,r=!1)=>_4(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),k0=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),k0(e,r,o)}},Ik=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(qt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),qt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),k0(e,c,o),c!==u&&k0(e,u,o))},O4=(e,n)=>R.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),iP=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Ec(r).concat(e.blockPatterns),inlinePatterns:_c(r).concat(e.inlinePatterns)}},lP=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},D4=(e,n,o)=>{T$(n,0,n).each(c=>{const u=c.container;E$(u,o.start.length,n).each(f=>{const b=e.createRng();b.setStart(u,0),b.setEnd(f.container,f.offset),Ik(e,b,y=>y===n)})})},lW=(e,n)=>{const o=e.dom,r=n.pattern,c=aP(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const y=b.get(f);return yt(y)&&On(y).exists(x=>go(x,"block"))};return O4(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{D4(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{D4(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},j9=e=>Lt(e,(n,o)=>o.start.length-n.start.length),uP=(e,n)=>{const o=j9(e),r=n.replace(aa," ");return rn(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},G9=(e,n,o,r)=>{var c;const u=e.dom,f=vl(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return uP(o.blockPatterns,b).map(y=>Pt.trim(b).length===y.start.length?[]:[{pattern:y,range:_4(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},R4=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();z(n,r=>lW(e,r)),e.selection.moveToBookmark(o)},dP=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Lk=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},mP=(e,n,o)=>{const r=aP(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(dP(e,n+"-end"),f),start:y.insertBefore(dP(e,n+"-start"),b)}},M4=(e,n,o)=>{k0(e,e.get(n.prefix+"-end"),o),k0(e,e.get(n.prefix+"-start"),o)},T0=e=>e.start.length===0,fP=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},N4=(e,n,o,r)=>{const c=n.start;return R3(e,r.container,r.offset,fP(c),o).bind(f=>{var b,y;const x=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(x!==-1&&f.offset>=x+c.length){const P=e.createRng();return P.setStart(f.container,f.offset-c.length),P.setEnd(f.container,f.offset),R.some(P)}else{const P=f.offset-c.length;return D3(f.container,P,o).map(L=>{const ce=e.createRng();return ce.setStart(L.container,L.offset),ce.setEnd(f.container,f.offset),ce}).filter(L=>L.toString()===c).orThunk(()=>N4(e,n,o,Bd(f.container,0)))}})},q9=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),R.some(f)}return ik(o,r,c).bind(f=>N4(e,n,c,f).bind(y=>{var x;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return R.none();if(f.offset===0&&((x=y.endContainer.textContent)===null||x===void 0?void 0:x.length)===y.endOffset)return R.none()}return R.some(y)}))},K9=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return D3(b,y-o.pattern.end.length,n).bind(x=>{const M=_4(c,u,x.container,x.offset,b,y,r);if(T0(f))return R.some({matches:[{pattern:f,startRng:M,endRng:M}],position:x});{const P=hC(e,o.remainingPatterns,x.container,x.offset,n,r),L=P.getOr({matches:[],position:x}),ce=L.position;return q9(c,f,ce.container,ce.offset,n,P.isNone()).map(ee=>{const ue=cP(c,u,ee,r);return{matches:L.matches.concat([{pattern:f,startRng:ue,endRng:M}]),position:Bd(ee.startContainer,ee.startOffset)}})}})},hC=(e,n,o,r,c,u)=>{const f=e.dom;return ik(o,r,f.getRoot()).bind(b=>{const y=lP(f,c,o,r);for(let x=0;x<n.length;x++){const M=n[x];if(!Os(y,M.end))continue;const P=n.slice();P.splice(x,1);const L=K9(e,c,{pattern:M,remainingPatterns:P,position:b},u);if(L.isNone()&&r>0)return hC(e,n,o,r-1,c,u);if(L.isSome())return L}return R.none()})},gP=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?z(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},Y9=(e,n,o,r)=>{const c=Lk(e.dom,o);Ik(e.dom,c,r),gP(e,n,c)},X9=(e,n,o,r,c)=>{const u=e.dom,f=Lk(u,r),b=Lk(u,o);Ik(u,b,c),Ik(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},x=Lk(u,y);gP(e,n,x)},$4=(e,n)=>{const o=e2("mce_textpattern"),r=Be(n,(c,u)=>{const f=mP(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Be(r,(c,u)=>{const f=r.length-c.length-1,b=T0(u.pattern)?u.endMarker:mP(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},J9=e=>Lt(e,(n,o)=>o.end.length-n.end.length),Q9=(e,n)=>{const o=kn(e,r=>se(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},hP=(e,n,o,r,c,u)=>{const f=hC(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=hC(e,J9(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return Q9(f,b)},pP=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=$4(o,n);z(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;T0(u.pattern)?Y9(e,u.pattern,u.endMarker,b):X9(e,u.pattern,u.startMarker,u.endMarker,b),M4(o,u.endMarker,b),M4(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},ez=(e,n)=>{const o=e.selection.getRng();return O4(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=iP(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=hP(e,r,o.startContainer,u,f,!0),y=G9(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Ym),pP(e,b),R4(e,y);const x=e.selection.getRng(),M=ik(x.startContainer,x.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),M.each(P=>{const L=P.container;L.data.charAt(P.offset-1)===Ym&&(L.deleteData(P.offset-1,1),k0(e.dom,L.parentNode,ce=>ce===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},tz=(e,n)=>{const o=e.selection.getRng();O4(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=lP(e.dom,r,o.startContainer,c),f=iP(n,r,u),b=hP(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{pP(e,b)})})},B4=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},bP=(e,n)=>B4(e,n,(o,r)=>o===r.keyCode&&!Wn.modifierPressed(r)),P4=(e,n)=>B4(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),F4=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>ri(vg(e),hf(e)),c=()=>oE(e);e.on("keydown",f=>{if(f.keyCode===13&&!Wn.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&ez(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&tz(e,f)}};e.on("keyup",f=>{bP(o,f)&&u()}),e.on("keypress",f=>{P4(n,f)&&Pi.setEditorTimeout(e,u)})},nz=e=>{F4(e)},I4=e=>{const n=Pt.each,o=Wn.BACKSPACE,r=Wn.DELETE,c=e.dom,u=e.selection,f=e.parser,b=us.browser,y=b.isFirefox(),x=b.isChromium()||b.isSafari(),M=us.deviceType.isiPhone()||us.deviceType.isiPad(),P=us.os.isMacOS()||us.os.isiOS(),L=(Dn,Do)=>{try{e.getDoc().execCommand(Dn,!1,String(Do))}catch{}},ce=Dn=>Dn.isDefaultPrevented(),ie=()=>{const Dn=xo=>{const xn=c.create("body"),gs=xo.cloneContents();return xn.appendChild(gs),u.serializer.serialize(xn,{format:"html"})},Do=xo=>{const xn=Dn(xo),gs=c.createRng();gs.selectNode(e.getBody());const as=Dn(gs);return xn===as};e.on("keydown",xo=>{const xn=xo.keyCode;if(!ce(xo)&&(xn===r||xn===o)){const gs=e.selection.isCollapsed(),as=e.getBody();if(gs&&!c.isEmpty(as)||!gs&&!Do(e.selection.getRng()))return;xo.preventDefault(),e.setContent(""),as.firstChild&&c.isBlock(as.firstChild)?e.selection.setCursorLocation(as.firstChild,0):e.selection.setCursorLocation(as,0),e.nodeChanged()}})},ee=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ue=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Dn=>{let Do;if(Dn.target===e.getDoc().documentElement)if(Do=u.getRng(),e.getBody().focus(),Dn.type==="mousedown"){if(V(Do.startContainer))return;u.placeCaretAt(Dn.clientX,Dn.clientY)}else u.setRng(Do)})},Ne=()=>{e.on("keydown",Dn=>{if(!ce(Dn)&&Dn.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Do=u.getNode(),xo=Do.previousSibling;if(Do.nodeName==="HR"){c.remove(Do),Dn.preventDefault();return}xo&&xo.nodeName&&xo.nodeName.toLowerCase()==="hr"&&(c.remove(xo),Dn.preventDefault())}}})},Oe=()=>{Range.prototype.getClientRects||e.on("mousedown",Dn=>{if(!ce(Dn)&&Dn.target.nodeName==="HTML"){const Do=e.getBody();Do.blur(),Pi.setEditorTimeout(e,()=>{Do.focus()})}})},Ge=()=>{const Dn=gf(e);e.on("click",Do=>{const xo=Do.target;/^(IMG|HR)$/.test(xo.nodeName)&&c.getContentEditableParent(xo)!=="false"&&(Do.preventDefault(),e.selection.select(xo),e.nodeChanged()),xo.nodeName==="A"&&c.hasClass(xo,Dn)&&xo.childNodes.length===0&&(Do.preventDefault(),u.select(xo))})},nt=()=>{const Dn=()=>{const xo=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const xn=u.getStart();xn!==e.getBody()&&(c.setAttrib(xn,"style",null),n(xo,gs=>{xn.setAttributeNode(gs.cloneNode(!0))}))}},Do=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",xo=>{let xn;return!ce(xo)&&(xo.keyCode===8||xo.keyCode===46)&&Do()?(xn=Dn(),e.getDoc().execCommand("delete",!1),xn(),xo.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",xo=>{if(!ce(xo)&&Do()){const xn=Dn();Pi.setEditorTimeout(e,()=>{xn()})}})},Dt=()=>{e.on("keydown",Dn=>{if(!ce(Dn)&&Dn.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Do=u.getNode().previousSibling;if(Do&&Do.nodeName&&Do.nodeName.toLowerCase()==="table")return Dn.preventDefault(),!1}return!0})},vn=()=>{e.on("keydown",Dn=>{if(ce(Dn)||Dn.keyCode!==Wn.BACKSPACE)return;let Do=u.getRng();const xo=Do.startContainer,xn=Do.startOffset,gs=c.getRoot();let as=xo;if(!(!Do.collapsed||xn!==0)){for(;as.parentNode&&as.parentNode.firstChild===as&&as.parentNode!==gs;)as=as.parentNode;as.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,as),Do=c.createRng(),Do.setStart(xo,0),Do.setEnd(xo,0),u.setRng(Do))}})},sn=()=>{const Dn=()=>{L("StyleWithCSS",!1),L("enableInlineTableEditing",!1),iy(e)||L("enableObjectResizing",!1)};gy(e)||e.on("BeforeExecCommand mousedown",Dn)},mt=()=>{const Dn=()=>{n(c.select("a:not([data-mce-block])"),Do=>{var xo;let xn=Do.parentNode;const gs=c.getRoot();if((xn==null?void 0:xn.lastChild)===Do){for(;xn&&!c.isBlock(xn);){if(((xo=xn.parentNode)===null||xo===void 0?void 0:xo.lastChild)!==xn||xn===gs)return;xn=xn.parentNode}c.add(xn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Do=>{(Do.type==="setcontent"||Do.command==="mceInsertLink")&&Dn()})},Qe=()=>{e.on("init",()=>{L("DefaultParagraphSeparator",vl(e))})},Rn=Dn=>{const Do=Dn.getBody(),xo=Dn.selection.getRng();return xo.startContainer===xo.endContainer&&xo.startContainer===Do&&xo.startOffset===0&&xo.endOffset===Do.childNodes.length},co=()=>{e.on("keyup focusin mouseup",Dn=>{!Wn.modifierPressed(Dn)&&!Rn(e)&&u.normalize()},!0)},fo=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Uo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},vs=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Dn=>{let Do;Dn.target.nodeName==="HTML"&&(Do=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Do),e.selection.normalize(),e.nodeChanged())}))},Gs=()=>{P&&e.on("keydown",Dn=>{Wn.metaKeyPressed(Dn)&&!Dn.shiftKey&&(Dn.keyCode===37||Dn.keyCode===39)&&(Dn.preventDefault(),e.selection.getSel().modify("move",Dn.keyCode===37?"backward":"forward","lineboundary"))})},Zs=()=>{e.on("click",Dn=>{let Do=Dn.target;do if(Do.tagName==="A"){Dn.preventDefault();return}while(Do=Do.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},$a=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Dn=>{Dn.preventDefault()})})},xi=()=>{f.addNodeFilter("br",Dn=>{let Do=Dn.length;for(;Do--;)Dn[Do].attr("class")==="Apple-interchange-newline"&&Dn[Do].remove()})},nn=De,Wo=()=>{if(!y||e.removed)return!1;const Dn=e.selection.getSel();return!Dn||!Dn.rangeCount||Dn.rangeCount===0},po=()=>{x&&(ue(),Ge(),$a(),ee(),M&&(Uo(),vs(),Zs())),y&&(Oe(),sn(),fo(),Gs())},Dr=()=>{vn(),ie(),us.windowsPhone||co(),x&&(ue(),Ge(),Qe(),$a(),Dt(),xi(),M?(Uo(),vs(),Zs()):ee()),y&&(Ne(),Oe(),nt(),sn(),mt(),fo(),Gs(),Dt())};return Mf(e)?po():Dr(),{refreshContentEditable:nn,isHidden:Wo}},L4=br.DOM,oz=(e,n)=>{const o=ve.fromDom(e.getBody()),r=ud(sl(o)),c=ve.fromTag("style");or(c,"type","text/css"),ea(c,ve.fromText(n)),ea(r,c),e.on("remove",()=>{Ps(c)})},sz=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,H4=e=>bs(e,n=>En(n)===!1),vP=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return H4({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:sz(e),validate:!0,blob_cache:o,document:e.getDoc()})},yP=e=>{const n=e.options.get;return H4({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},rz=e=>{const n=e.options.get;return{...vP(e),...yP(e),...H4({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},wP=e=>{const n=lu(vP(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),vy(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Qi("br",1))}}),n},az=e=>{const n=A2(e);n&&Pi.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},cz=e=>{const n=e.dom.getRoot();!e.inline&&(!ms(e)||e.selection.getStart(!0)===n)&&$i(n).each(o=>{const r=o.getNode(),c=Ya(r)?$i(r).getOr(o):o;e.selection.setRng(c.toRange())})},iz=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Uu(e),e.focus(!0),cz(e),e.nodeChanged({initial:!0});const n=XT(e);Q(n)&&n.call(e,e),az(e)},CP=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,lz=(e,n,o)=>{const r=[CP(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},SP=e=>{const n=CP(e),o=ff(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";Pt.each(e.contentStyles,x=>{y+=x+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(lz(e,r,o)).then(u).catch(u),b=k2(e);return b&&oz(e,b),f},uz=e=>{const n=e.getDoc(),o=e.getBody();Ov(e),py(e)||(n.body.spellcheck=!1,L4.setAttrib(o,"spellcheck","false")),e.quirks=I4(e),Zc(e);const r=nv(e);r!==void 0&&(o.dir=r);const c=QT(e);c&&e.on("BeforeSetContent",u=>{Pt.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},xP=e=>{Mf(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},z4=e=>{e.removed!==!0&&(xP(e),iz(e))},Hk=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(L4.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=gy(e),e.readonly||(e.inline&&L4.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=XM(e),e.schema=Bu(yP(e)),e.dom=br(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Yi(e),referrerPolicy:$l(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=wP(e),e.serializer=gp(rz(e),e),e.selection=z8(e.dom,e.getWin(),e.serializer,e),e.annotator=cS(e),e.formatter=QM(e),e.undoManager=tN(e),e._nodeChangeDispatcher=new Ek(e),e._selectionOverrides=iW(e),OL(e),b9(e),ek(e),Mf(e)||(S9(e),nz(e));const c=SB(e);KN(e,c),w3(e),v6(e),g9(e);const u=v8(e);uz(e),u.fold(()=>{SP(e).then(()=>z4(e))},f=>{e.setProgressState(!0),SP(e).then(()=>{f().then(b=>{e.setProgressState(!1),z4(e),RA(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),z4(e),RA(e)})})})},kP=(e,n)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline){const o=e.iframeElement,r=FA(ve.fromDom(o),"load",()=>{r.unbind(),e.contentDocument=o.contentDocument,Hk(e)});if(us.browser.isFirefox()){const c=e.getDoc();c.open(),c.write(e.iframeHTML),c.close()}else o.srcdoc=e.iframeHTML}else Hk(e)},V4=br.DOM,dz=(e,n,o,r)=>{const c=ve.fromTag("iframe");return r.each(u=>or(c,"tabindex",u)),Rs(c,o),Rs(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),xu(c,"tox-edit-area__iframe"),c},mz=e=>{let n=mO(e)+"<html><head>";y2(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=FT(e),r=IT(e),c=e.translate(KT(e));return ev(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+ev(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},fz=(e,n)=>{const o=e.translate("Rich Text Area"),r=wc(ve.fromDom(e.getElement()),"tabindex").bind(Mr),c=dz(e.id,o,PT(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=mz(e),V4.add(n.iframeContainer,c)},gz=(e,n)=>{fz(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=V4.isHidden(n.editorContainer)),e.getElement().style.display="none",V4.setAttrib(e.id,"aria-hidden","true"),kP(e)},pC=br.DOM,hz=(e,n,o)=>{const r=d0.get(o),c=d0.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Pt.trim(o),r&&Pt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,Q(u.init)&&(u.init(e,c),n.push(o))}catch(u){Wb(e,o,u)}}},pz=e=>e.replace(/^\-/,""),bz=e=>{const n=[];z(eb(e),o=>{hz(e,n,pz(o))})},vz=e=>{const n=Pt.trim(Nl(e)),o=e.ui.registry.getAll().icons,r={...BA.get("default").icons,...BA.get(n).icons};ln(r,(c,u)=>{go(o,u)||e.ui.registry.addIcon(u,c)})},yz=e=>{const n=fg(e);if(te(n)){const o=zb.get(n);e.theme=o(e,zb.urls[n])||{},Q(e.theme.init)&&e.theme.init(e,zb.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},wz=e=>{const n=ov(e),o=l0.get(n);e.model=o(e,l0.urls[n])},Cz=e=>{const n=e.theme.renderUI;return n?n():_P(e)},Sz=e=>{const n=e.getElement(),r=fg(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},TP=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),EP=e=>{const n=pC.create("div");return pC.insertAfter(n,e),TP(n,n)},_P=e=>{const n=e.getElement();return e.inline?TP(null):EP(n)},AP=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,te(fg(e))?Cz(e):Q(fg(e))?Sz(e):_P(e)},xz=(e,n)=>{const o={show:R.from(n.show).getOr(De),hide:R.from(n.hide).getOr(De),isEnabled:R.from(n.isEnabled).getOr(Ve),setEnabled:r=>{e.mode.isReadOnly()||R.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},kz=e=>{e.dispatch("ScriptsLoaded"),vz(e),yz(e),wz(e),bz(e);const n=AP(e);xz(e,R.from(n.api).getOr({})),e.editorContainer=n.editorContainer,Ox(e),e.inline?kP(e):gz(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},yp=br.DOM,E0=e=>e.charAt(0)==="-",Tz=(e,n)=>{const o=tv(n),r=Lu(n);if(!Vc.hasCode(o)&&o!=="en"){const c=Cs(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{i6(n,c,o)})}},OP=(e,n)=>{const o=fg(e);if(te(o)&&!E0(o)&&!go(zb.urls,o)){const r=Jp(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;zb.load(o,c).catch(()=>{l6(e,c,o)})}},Ez=(e,n)=>{const o=ov(e);if(o!=="plugin"&&!go(l0.urls,o)){const r=uy(e),c=te(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;l0.load(o,c).catch(()=>{Ub(e,c,o)})}},_z=e=>R.from(fO(e)).filter(Cs).map(n=>({url:n,name:R.none()})),DP=(e,n,o)=>R.from(n).filter(r=>Cs(r)&&!BA.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:R.some(r)})),Az=(e,n,o)=>{const r=DP(n,"default",o),c=_z(n).orThunk(()=>DP(n,Nl(n),""));z(Qs([r,c]),u=>{e.add(u.url).catch(()=>{c6(n,u.url,u.name.getOrUndefined())})})},RP=(e,n)=>{const o=(r,c)=>{d0.load(r,c).catch(()=>{a6(e,c,r)})};ln(sv(e),(r,c)=>{o(c,r),e.options.set("plugins",eb(e).concat(c))}),z(eb(e),r=>{r=Pt.trim(r),r&&!d0.urls[r]&&!E0(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},Oz=e=>{const n=fg(e);return!te(n)||he(zb.get(n))},MP=e=>{const n=ov(e);return he(l0.get(n))},Dz=(e,n)=>{const o=wd.ScriptLoader,r=()=>{!e.removed&&Oz(e)&&MP(e)&&kz(e)};OP(e,n),Ez(e,n),Tz(o,e),Az(o,e,n),RP(e,n),o.loadQueue().then(r,r)},Rz=(e,n)=>Bp.forElement(e,{contentCssCors:hy(n),referrerPolicy:$l(n)}),Mz=e=>{const n=e.id;Vc.setCode(tv(e));const o=()=>{yp.unbind(window,"ready",o),e.render()};if(!nm.Event.domLoaded){yp.bind(window,"ready",o);return}if(!e.getElement())return;const r=ve.fromDom(e.getElement()),c=Cu(r);e.on("remove",()=>{Y(r.dom.attributes,f=>qr(r,f.name)),Rs(r,c)}),e.ui.styleSheetLoader=Rz(r,e),dy(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||yp.getParent(n,"form");u&&(e.formElement=u,my(e)&&!ei(e.getElement())&&(yp.insertAfter(yp.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},yp.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),qT(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=UM(e),e.notificationManager=VM(e),sE(e)&&e.on("GetContent",f=>{f.save&&(f.content=yp.encode(f.content))}),pg(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Vr(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),Dz(e,e.suffix)},Nz=(e,n)=>({sections:ge(e),options:ge(n)}),NP=$r().deviceType,$P=NP.isPhone(),$z=NP.isTablet(),bC=e=>{if(St(e))return[];{const n=yt(e)?e:e.split(/[ ,]/),o=re(n,qo);return Z(o,Cs)}},Bz=(e,n)=>{const o=ma(n,(r,c)=>ae(e,c));return Nz(o.t,o.f)},BP=(e,n,o={})=>{const r=e.sections(),c=cs(r,n).getOr({});return Pt.extend({},o,c)},vC=(e,n)=>go(e.sections(),n),PP=(e,n)=>vC(e,n)?e.sections()[n]:{},FP=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:cs(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Pz=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Pt.extend({},e.external_plugins,r):r},Fz=(e,n)=>[...bC(e),...bC(n)],Iz=(e,n,o,r)=>e&&vC(n,"mobile")?r:o,IP=(e,n,o,r)=>{const c=bC(o.forced_plugins),u=bC(r.plugins),f=PP(n,"mobile"),b=f.plugins?bC(f.plugins):u,y=Iz(e,n,u,b),x=Fz(c,y);return Pt.extend(r,{forced_plugins:c,plugins:x})},LP=(e,n)=>e&&vC(n,"mobile"),Lz=(e,n,o,r,c)=>{var u;const f=e?{mobile:FP((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=Bz(["mobile"],dk(f,c)),y=Pt.extend(o,r,b.options(),LP(e,b)?BP(b,"mobile"):{},{external_plugins:Pz(r,b.options())});return IP(e,b,r,y)},Hz=(e,n)=>Lz($P||$z,$P,n,e,n),U4=(e,n)=>_M(e,n),zk=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{z("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Vk=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return se(c,u=>he(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},Zg=e=>{zk(e),Vk(e)},Uk=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(us.os.isMacOS()||us.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"â+")),e.notificationManager.open({text:c,type:"error"})}}})},_0=(e,n,o)=>{const r=ve.fromDom(e.getRoot());return mw(r,vt.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Uv(r,vt.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},HP=e=>{if(typeof e!="string"){const n=Pt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},zz=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?_0(r,o.getRng(),n):n},Wk=(e,n)=>{const{content:o,details:r}=HP(n);Hb(e,{...r,content:zz(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=M8(e,c.content,r);hA(e,u,c),e.addVisual()})},zP=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Wk(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Wk(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Wk(e,r)},mceInsertContent:(n,o,r)=>{Wk(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},Vz={"font-size":"size","font-family":"face"},W4=Vi("font"),Zk=(e,n,o)=>{const r=u=>So(u,e).orThunk(()=>W4(u)?cs(Vz,e).bind(f=>wc(u,f)):R.none()),c=u=>Bs(ve.fromDom(n),u);return JS(ve.fromDom(o),u=>r(u),c)},wp=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),o1=(e,n)=>R.from(br.DOM.getStyle(n,e,!0)),Z4=e=>(n,o)=>R.from(o).map(ve.fromDom).filter(Qo).bind(r=>Zk(e,n,r.dom).or(o1(e,r.dom))).getOr(""),Uz=Z4("font-size"),Wz=Ft(wp,Z4("font-family")),Zz=e=>$i(e.getBody()).bind(n=>{const o=n.container();return R.from(qt(o)?o.parentNode:o)}),jz=e=>R.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?R.none():R.from(e.selection.getStart(!0))}),Gz=(e,n)=>jz(e).orThunk(Ae(Zz,e)).map(ve.fromDom).filter(Qo).bind(n),j4=(e,n)=>Gz(e,_(R.some,n)),G4=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=pf(e),c=av(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},qz=e=>{const n=e.split(/\s*,\s*/);return re(n,o=>o.indexOf(" ")!==-1&&!(Co(o,'"')||Co(o,"'"))?`'${o}'`:o).join(",")},Kz=(e,n)=>{const o=G4(e,n);e.formatter.toggle("fontname",{value:qz(o)}),e.nodeChanged()},Yz=e=>j4(e,n=>Wz(e.getBody(),n.dom)).getOr(""),uW=(e,n)=>{e.formatter.toggle("fontsize",{value:G4(e,n)}),e.nodeChanged()},Xz=e=>j4(e,n=>Uz(e.getBody(),n.dom)).getOr(""),q4=e=>j4(e,n=>{const o=ve.fromDom(e.getBody()),r=JS(n,u=>So(u,"line-height"),Ae(Bs,o)),c=()=>{const u=parseFloat(He(n,"line-height")),f=parseFloat(He(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),Jz=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Qz=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Kz(e,c)},FontSize:(o,r,c)=>{uW(e,c)},LineHeight:(o,r,c)=>{Jz(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(te(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},VP=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>Yz(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>Xz(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>q4(e))},eV=e=>{Qz(e),VP(e)},UP=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},tV=e=>{e.editorCommands.addCommands({Indent:()=>{EL(e)},Outdent:()=>{ZN(e)}}),e.editorCommands.addCommands({Outdent:()=>h3(e)},"state")},K4=e=>{const n=(o,r,c)=>{const u=te(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Je(u)&&te(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},nV=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},oV=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},sV=e=>{nV(e),oV(e)},rV=e=>{e.editorCommands.addCommands({insertParagraph:()=>{kk(fH,e)},mceInsertNewLine:(n,o,r)=>{Tk(e,r)},InsertLineBreak:(n,o,r)=>{kk(iB,e)}})},WP=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Bn(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),ni);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},Y4=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{NO(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},ZP=e=>{Zg(e),Uk(e),UP(e),WP(e),zP(e),K4(e),tV(e),rV(e),sV(e),eV(e),Y4(e)},X4=["toggleview"],jP=e=>ae(X4,e.toLowerCase());class aV{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Mc(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return Q(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!jP(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return Q(r)?r(o):!1}queryCommandValue(n){if(!jP(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return Q(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;ln(n,(c,u)=>{z(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const A0="data-mce-contenteditable",cV=(e,n,o)=>{Ud(e,n)&&!o?ql(e,n):o&&xu(e,n)},jk=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Gk=(e,n)=>{e.dom.contentEditable=n?"true":"false"},iV=e=>{z(Ms(e,'*[contenteditable="true"]'),n=>{or(n,A0,"true"),Gk(n,!1)})},lV=e=>{z(Ms(e,`*[${A0}="true"]`),n=>{qr(n,A0),Gk(n,!0)})},dW=e=>{R.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},mW=e=>{e.selection.setRng(e.selection.getRng())},GP=(e,n)=>{const o=ve.fromDom(e.getBody());cV(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),dW(e),e.readonly=!0,Gk(o,!1),iV(o)):(e.readonly=!1,Gk(o,!0),lV(o),jk(e,"StyleWithCSS",!1),jk(e,"enableInlineTableEditing",!1),jk(e,"enableObjectResizing",!1),XE(e)&&e.focus(),mW(e),e.nodeChanged())},Cp=e=>e.readonly,qP=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Cp(e)&&z(n,o=>{o.attr(A0,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(A0,n=>{Cp(e)&&z(n,o=>{o.attr("contenteditable",o.attr(A0))})}),e.serializer.addTempAttr(A0)},uV=e=>{e.serializer?qP(e):e.on("PreInit",()=>{qP(e)})},dV=e=>e.type==="click",fW=["copy"],gW=e=>ae(fW,e.type),hW=(e,n)=>fd(n,"a",r=>Bs(r,ve.fromDom(e.getBody()))).bind(r=>wc(r,"href")),mV=(e,n)=>{if(dV(n)&&!Wn.metaKeyPressed(n)){const o=ve.fromDom(n.target);hW(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Hn(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else gW(n)&&e.dispatch(n.type,n)},pW=e=>{e.on("ShowCaret",n=>{Cp(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Cp(e)&&n.preventDefault()})},fV=Pt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class jg{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Nt}static isNative(n){return!!fV[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=xh(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=Nt),o){const u={func:o,removed:!1};c&&Pt.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let x=this.bindings[y];x||(x=[],this.toggleEvent(y,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[y]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return ln(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=H(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,z(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else ln(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const s1=e=>(e._eventDispatcher||(e._eventDispatcher=new jg({scope:e,toggleEvent:(n,o)=>{jg.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),O0={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return xh(e.toLowerCase(),n??{},r);const c=s1(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return s1(this).on(e,n,o)},off(e,n){return s1(this).off(e,n)},once(e,n){return s1(this).once(e,n)},hasEventListeners(e){return s1(this).has(e)}},yC=br.DOM;let Sp;const wC=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(n))return e.getDoc().documentElement;const o=ly(e);return o?(e.eventRoot||(e.eventRoot=yC.select(o)[0]),e.eventRoot):e.getBody()},gV=e=>!e.hidden&&!Cp(e),KP=(e,n,o)=>{gV(e)?e.dispatch(n,o):Cp(e)&&mV(e,o)},YP=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=wC(e,n);if(ly(e)){if(Sp||(Sp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Sp&&(ln(Sp,(c,u)=>{e.dom.unbind(wC(e,u))}),Sp=null)})),Sp[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||yC.isChildOf(u,y))&&KP(f[b],n,c)}};Sp[n]=r,yC.bind(o,n,r)}else{const r=c=>{KP(e,n,c)};yC.bind(o,n,r),e.delegates[n]=r}},XP={...O0,bindPendingEventDelegates(){const e=this;Pt.each(e._pendingNativeEvents,n=>{YP(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?YP(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(wC(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(ln(e.delegates,(r,c)=>{e.dom.unbind(wC(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},r1=e=>te(e)?{value:e.split(/[ ,]/),valid:!0}:Me(e,te)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},hV=e=>{const n=(()=>{switch(e){case"array":return yt;case"boolean":return xt;case"function":return Q;case"number":return it;case"object":return Je;case"string":return te;case"string[]":return r1;case"object[]":return o=>Me(o,Je);case"regexp":return o=>Ee(o,RegExp);default:return Ve}})();return o=>J4(o,n,`The value must be a ${e}.`)},JP=e=>te(e.processor),QP=(e,n)=>{const o=xs(n.message)?"":`. ${n.message}`;return e+o},CC=e=>e.valid,J4=(e,n,o="")=>{const r=n(e);return xt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},pV=(e,n,o)=>{if(!En(n)){const r=J4(n,o);if(CC(r))return r.value;console.error(QP(`Invalid default value passed for the "${e}" option`,r))}},bV=(e,n)=>{const o={},r={},c=(P,L,ce)=>{const ie=J4(L,ce);return CC(ie)?(r[P]=ie.value,!0):(console.warn(QP(`Invalid value passed for the ${P} option`,ie)),!1)},u=(P,L)=>{const ce=JP(L)?hV(L.processor):L.processor,ie=pV(P,L.default,ce);o[P]={...L,default:ie,processor:ce},cs(r,P).orThunk(()=>cs(n,P)).each(ue=>c(P,ue,ce))},f=P=>go(o,P);return{register:u,isRegistered:f,get:P=>cs(r,P).orThunk(()=>cs(o,P).map(L=>L.default)).getOrUndefined(),set:(P,L)=>{if(f(P)){const ce=o[P];return ce.immutable?(console.error(`"${P}" is an immutable option and cannot be updated`),!1):c(P,L,ce.processor)}else return console.warn(`"${P}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:P=>{const L=f(P);return L&&delete r[P],L},isSet:P=>go(r,P)}},eF=["design","readonly"],tF=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&GP(e,u.editorReadOnly),n.set(r),iS(e,r)},vV=(e,n,o,r)=>{if(r!==o.get()){if(!go(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?tF(e,o,n,r):e.on("init",()=>tF(e,o,n,r))}},yV=(e,n,o)=>{if(ae(eF,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},wV=e=>{const n=dc("design"),o=dc({design:{activate:De,deactivate:De,editorReadOnly:!1},readonly:{activate:De,deactivate:De,editorReadOnly:!0}});return uV(e),pW(e),{isReadOnly:()=>Cp(e),set:r=>vV(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(yV(o.get(),r,c))}}},SC=Pt.each,Q4=Pt.explode,CV={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},ja=Pt.makeMap("alt,ctrl,shift,meta,access"),SV=e=>e in ja,xV=e=>{const n={},o=us.os.isMacOS()||us.os.isiOS();SC(Q4(e.toLowerCase(),"+"),u=>{SV(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=CV[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in ja)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class eO{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(SC(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return SC(Q4(Pt.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Pt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Pt.map(Q4(n,">"),xV);return u[u.length-1]=Pt.extend(u[u.length-1],{func:r,scope:c||this.editor}),Pt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const nF=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(M,P)=>(L,ce)=>{M[L.toLowerCase()]={...ce,type:P}},x=(M,P)=>r[M.toLowerCase()]=P;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:x,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},tO=()=>{const e=nF();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},a1=br.DOM,oF=Pt.extend,kV=Pt.each;class qk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,oF(this,XP);const c=this;this.id=n,this.hidden=!1;const u=Hz(r.defaultOptions,o);this.options=bV(c,u),ry(c);const f=this.options.get;f("deprecation_warnings")&&FM(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const x=$l(c);x&&(wd.ScriptLoader._setReferrerPolicy(x),br.DOM.styleSheetLoader._setReferrerPolicy(x));const M=hy(c);he(M)&&br.DOM.styleSheetLoader._setContentCssCors(M),vi.languageLoad=f("language_load"),vi.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Nd(y2(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=dy(c),this.hasVisual=_2(c),this.shortcuts=new eO(this),this.editorCommands=new aV(this),ZP(this);const P=f("cache_suffix");P&&(us.cacheSuffix=P.replace(/^[\?\&]+/,"")),this.ui={registry:tO(),styleSheetLoader:void 0,show:De,hide:De,setEnabled:De,isEnabled:Ve},this.mode=wV(c),r.dispatch("SetupEditor",{editor:this});const L=YT(c);Q(L)&&L.call(c,c)}render(){Mz(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Ob(this)}translate(n){return Vc.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(he(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:Ve,default:o})),!c.isSet(n)&&!En(o)?o:c.get(n)}hasPlugin(n,o){return ae(eb(this),n)?o?d0.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(a1.show(n.getContainer()),a1.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(a1.hide(n.getContainer()),a1.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=ei(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,ei(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=a1.getParent(o.id,"form");b&&kV(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return Ex(this,n,o)}getContent(n){return NA(this,n)}insertContent(n,o){o&&(n=oF({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Ex(this,this.startContent,{format:"raw"}):Ex(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||a1.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=a1.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=JT(c);return Q(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||Je(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){U4(this,n)}remove(){X8(this)}destroy(n){Nf(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const D0=br.DOM,Kk=Pt.each;let sF=!1,Gg,Na=[];const Yk=e=>{const n=e.type;Kk(xp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},rF=e=>{if(e!==sF){const n=br.DOM;e?(n.bind(window,"resize",Yk),n.bind(window,"scroll",Yk)):(n.unbind(window,"resize",Yk),n.unbind(window,"scroll",Yk)),sF=e}},aF=e=>{const n=Na;return Na=Z(Na,o=>e!==o),xp.activeEditor===e&&(xp.activeEditor=Na.length>0?Na[0]:null),xp.focusedEditor===e&&(xp.focusedEditor=null),n.length!==Na.length},TV=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(aF(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},EV=document.compatMode!=="CSS1Compat",xp={...O0,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"3.2",releaseDate:"2023-02-22",i18n:Vc,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Nd.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Nd(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Nd(e.baseURL),e.suffix=o,AF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&ln(r,(c,u)=>{vi.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Pt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(M,P)=>M.inline&&P.tagName.toLowerCase()in r,u=M=>{let P=M.id;return P||(P=cs(M,"name").filter(L=>!D0.get(L)).getOrThunk(D0.uniqueId),M.setAttribute("id",P)),P},f=M=>{const P=e[M];if(P)return P.apply(n,[])},b=M=>us.browser.isIE()||us.browser.isEdge()?(Zb("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):EV?(Zb("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):te(M.selector)?D0.select(M.selector):he(M.target)?[M.target]:[];let y=M=>{o=M};const x=()=>{let M=0;const P=[];let L;const ce=(ie,ee,ue)=>{const Ne=new qk(ie,ee,n);P.push(Ne),Ne.on("init",()=>{++M===L.length&&y(P)}),Ne.targetElm=Ne.targetElm||ue,Ne.render()};D0.unbind(window,"ready",x),f("onpageload"),L=qe(b(e)),Pt.each(L,ie=>{TV(n.get(ie.id))}),L=Pt.grep(L,ie=>!n.get(ie.id)),L.length===0?y([]):Kk(L,ie=>{c(e,ie)?Zb("Could not initialize inline editor on invalid inline target element",ie):ce(u(ie),e,ie)})};return D0.bind(window,"ready",x),new Promise(M=>{o?M(o):y=P=>{M(P)}})},get(e){return arguments.length===0?Na.slice(0):te(e)?rn(Na,n=>n.id===e).getOr(null):it(e)&&Na[e]?Na[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Na.push(e),rF(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Gg||(Gg=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Gg))),e},createEditor(e,n){return this.add(new qk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Na.length-1;r>=0;r--)n.remove(Na[r]);return}if(te(e)){Kk(D0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,K(n.get(o.id))?null:(aF(o)&&n.dispatch("RemoveEditor",{editor:o}),Na.length===0&&window.removeEventListener("beforeunload",Gg),o.remove(),rF(Na.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Je(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new qk(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Kk(Na,e=>{e.save()})},addI18n:(e,n)=>{Vc.add(e,n)},translate:e=>Vc.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Nd(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Nd(this.baseURL)}};xp.setup();const _V=(()=>{const e=rf(),n=u=>({items:u,types:Le(u),getType:f=>cs(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),cF=Math.min,xC=Math.max,Xk=Math.round,iF=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,x=(o||"").split("");return x[0]==="b"&&(c+=y),x[1]==="r"&&(r+=b),x[0]==="c"&&(c+=Xk(y/2)),x[1]==="c"&&(r+=Xk(b/2)),x[3]==="b"&&(c-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(c-=Xk(f/2)),x[4]==="c"&&(r-=Xk(u/2)),kC(r,c,u,f)},AV=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=iF(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},OV=(e,n,o)=>kC(e.x-n,e.y-o,e.w+n*2,e.h+o*2),DV=(e,n)=>{const o=xC(e.x,n.x),r=xC(e.y,n.y),c=cF(e.x+e.w,n.x+n.w),u=cF(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:kC(o,r,c-o,u-r)},RV=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,x=xC(0,n.x-r),M=xC(0,n.y-c),P=xC(0,u-b),L=xC(0,f-y);return r+=x,c+=M,o&&(u+=x,f+=M,r-=P,c-=L),u-=P,f-=L,kC(r,c,u-r,f-c)},kC=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),MV={inflate:OV,relativePosition:iF,findBestRelativePosition:AV,intersect:DV,clamp:RV,create:kC,fromClientRect:e=>kC(e.left,e.top,e.width,e.height)},NV=(e,n,o=1e3)=>{let r=!1,c=null;const u=x=>(...M)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),x.apply(null,M))},f=u(e),b=u(n);return{start:(...x)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},$V=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const x=new Promise((M,P)=>{const L=NV(M,P);n[u]=L.resolve,wd.ScriptLoader.loadScript(f).then(()=>L.start(y),()=>L.reject(b))});return e[u]=x,x}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),BV=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let TC;try{const e="__storage_test__";TC=window.localStorage,TC.setItem(e,e),TC.removeItem(e)}catch{TC=BV()}var PV=TC;const FV={geom:{Rect:MV},util:{Delay:Pi,Tools:Pt,VK:Wn,URI:Nd,EventDispatcher:jg,Observable:O0,I18n:Vc,LocalStorage:PV,ImageUploader:YM},dom:{EventUtils:nm,TreeWalker:ba,TextSeeker:cf,DOMUtils:br,ScriptLoader:wd,RangeUtils:Mg,Serializer:gp,StyleSheetLoader:Xd,ControlSelection:Fl,BookmarkManager:Vu,Selection:z8,Event:nm.Event},html:{Styles:R1,Entities:Qa,Node:Qi,Schema:Bu,DomParser:lu,Writer:KO,Serializer:sp},Env:us,AddOnManager:vi,Annotator:cS,Formatter:QM,UndoManager:tN,EditorCommands:aV,WindowManager:UM,NotificationManager:VM,EditorObservable:XP,Shortcuts:eO,Editor:qk,FocusManager:Ji,EditorManager:xp,DOM:br.DOM,ScriptLoader:wd.ScriptLoader,PluginManager:d0,ThemeManager:zb,ModelManager:l0,IconManager:BA,Resource:$V,FakeClipboard:_V,trim:Pt.trim,isArray:Pt.isArray,is:Pt.is,toArray:Pt.toArray,makeMap:Pt.makeMap,each:Pt.each,map:Pt.map,grep:Pt.grep,inArray:Pt.inArray,extend:Pt.extend,walk:Pt.walk,resolve:Pt.resolve,explode:Pt.explode,_addCacheSuffix:Pt._addCacheSuffix},lF=Pt.extend(xp,FV),IV=e=>{try{_t.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(lF),IV(lF)})()})(oq);const kF=mU;(function(){const _t=Object.getPrototypeOf,It=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},gt=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&It(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Ut=t=>s=>gt(s)===t,$t=t=>s=>typeof s===t,en=t=>s=>t===s,Gt=(t,s)=>Et(t)&&It(t,s,(a,i)=>_t(a)===i),Tt=Ut("string"),Et=Ut("object"),rt=t=>Gt(t,Object),mn=Ut("array"),Nn=en(null),Ot=$t("boolean"),ct=en(void 0),Bt=t=>t==null,cn=t=>!Bt(t),Ze=$t("function"),et=$t("number"),Ee=(t,s)=>{if(mn(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},te=()=>{},Je=t=>()=>t(),Ht=(t,s)=>(...a)=>t(s.apply(null,a)),yt=(t,s)=>a=>t(s(a)),K=t=>()=>t,xt=t=>t,En=(t,s)=>t===s;function St(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const he=t=>s=>!t(s),Q=t=>()=>{throw new Error(t)},it=t=>t(),Me=K(!1),De=K(!0);var Ft=tinymce.util.Tools.resolve("tinymce.ThemeManager");class _{constructor(s,a){this.tag=s,this.value=a}static some(s){return new _(!0,s)}static none(){return _.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?_.some(s(this.value)):_.none()}bind(s){return this.tag?s(this.value):_.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:_.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return cn(s)?_.some(s):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const ge=Array.prototype.slice,Ue=Array.prototype.indexOf,Ie=Array.prototype.push,Ae=(t,s)=>Ue.call(t,s),tn=(t,s)=>{const a=Ae(t,s);return a===-1?_.none():_.some(a)},dn=(t,s)=>Ae(t,s)>-1,ze=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},jt=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},Nt=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=ge.call(t,i,i+s);a.push(d)}return a},Ve=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},R=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},qn=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},_e=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:i).push(p)}return{pass:a,fail:i}},xe=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},We=(t,s,a)=>(qn(t,(i,d)=>{a=s(a,i,d)}),a),ke=(t,s,a)=>(R(t,(i,d)=>{a=s(a,i,d)}),a),ae=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return _.some(g);if(a(g,i))break}return _.none()},se=(t,s)=>ae(t,s,Me),re=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return _.some(a)}return _.none()},z=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!mn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Ie.apply(s,t[a])}return s},Y=(t,s)=>z(Ve(t,s)),H=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Z=t=>{const s=ge.call(t,0);return s.reverse(),s},Be=(t,s)=>xe(t,a=>!dn(s,a)),Pe=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},Yt=t=>[t],rn=(t,s)=>{const a=ge.call(t,0);return a.sort(s),a},ro=(t,s)=>s>=0&&s<t.length?_.some(t[s]):_.none(),uo=t=>ro(t,0),Qn=t=>ro(t,t.length-1),kn=Ze(Array.from)?Array.from:t=>ge.call(t),ao=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return _.none()},Re=Object.keys,Ye=Object.hasOwnProperty,Lt=(t,s)=>{const a=Re(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];s(p,g)}},fn=(t,s)=>On(t,(a,i)=>({k:i,v:s(a,i)})),On=(t,s)=>{const a={};return Lt(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},Tn=t=>(s,a)=>{t[a]=s},Ro=(t,s,a,i)=>{Lt(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},ks=(t,s)=>{const a={},i={};return Ro(t,s,Tn(a),Tn(i)),{t:a,f:i}},qe=(t,s)=>{const a={};return Ro(t,s,Tn(a),te),a},Le=(t,s)=>{const a=[];return Lt(t,(i,d)=>{a.push(s(i,d))}),a},un=(t,s)=>{const a=Re(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];if(s(p,g,t))return _.some(p)}return _.none()},ln=t=>Le(t,xt),Jt=(t,s)=>Kn(t,s)?_.from(t[s]):_.none(),Kn=(t,s)=>Ye.call(t,s),Ts=(t,s)=>Kn(t,s)&&t[s]!==void 0&&t[s]!==null,Tr=(t,s,a=En)=>t.exists(i=>a(i,s)),ma=(t,s,a=En)=>ys(t,s,a).getOr(t.isNone()&&s.isNone()),bs=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},vc=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return _.none()}return _.some(s)},ys=(t,s,a)=>t.isSome()&&s.isSome()?_.some(a(t.getOrDie(),s.getOrDie())):_.none(),cs=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?_.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):_.none(),go=(t,s)=>t!=null?_.some(s(t)):_.none(),mr=(t,s)=>t?_.some(s):_.none(),Zr=(t,s)=>t+s,Is=(t,s)=>t.substring(s),fa=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,jr=(t,s)=>Ta(t,s)?Is(t,s.length):t,rc=(t,s)=>ye(t,s)?t:Zr(t,s),Xs=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?ct(i)?!0:d+s.length<=i:!1},Ta=(t,s)=>fa(t,s,0),ye=(t,s)=>fa(t,s,t.length-s.length),lt=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),wt=t=>t.length>0,Zn=t=>!wt(t),eo=t=>t.style!==void 0&&Ze(t.style.getPropertyValue),In=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return ko(i.childNodes[0])},is=(t,s)=>{const i=(s||document).createElement(t);return ko(i)},ts=(t,s)=>{const i=(s||document).createTextNode(t);return ko(i)},ko=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Wt={fromHtml:In,fromTag:is,fromText:ts,fromDom:ko,fromPoint:(t,s,a)=>_.from(t.dom.elementFromPoint(s,a)).map(ko)},fe=typeof window<"u"?window:Function("return this;")(),be=(t,s)=>{let a=s??fe;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},Rt=(t,s)=>{const a=t.split(".");return be(a,s)},an=(t,s)=>Rt(t,s),hn=(t,s)=>{const a=an(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Pn=Object.getPrototypeOf,yn=t=>hn("HTMLElement",t),Hn=t=>{const s=Rt("ownerDocument.defaultView",t);return Et(t)&&(yn(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Pn(t).constructor.name))},no=9,Co=11,Os=1,fr=3,qo=t=>t.dom.nodeName.toLowerCase(),Kc=t=>t.dom.nodeType,ls=t=>s=>Kc(s)===t,Cs=t=>xs(t)&&Hn(t.dom),xs=ls(Os),Fr=ls(fr),Mr=ls(no),Bc=ls(Co),Fa=t=>s=>xs(s)&&qo(s)===t,Yc=(t,s)=>{const a=t.dom;if(a.nodeType!==Os)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Ti=t=>t.nodeType!==Os&&t.nodeType!==no&&t.nodeType!==Co||t.childElementCount===0,Xc=(t,s)=>{const a=s===void 0?document:s.dom;return Ti(a)?[]:Ve(a.querySelectorAll(t),Wt.fromDom)},Li=(t,s)=>{const a=s===void 0?document:s.dom;return Ti(a)?_.none():_.from(a.querySelector(t)).map(Wt.fromDom)},zs=(t,s)=>t.dom===s.dom,mi=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},ga=t=>Wt.fromDom(t.dom.ownerDocument),ac=t=>Mr(t)?t:ga(t),fi=t=>Wt.fromDom(ac(t).dom.documentElement),Pc=t=>Wt.fromDom(ac(t).dom.defaultView),sa=t=>_.from(t.dom.parentNode).map(Wt.fromDom),Ei=t=>_.from(t.dom.parentElement).map(Wt.fromDom),yc=t=>_.from(t.dom.offsetParent).map(Wt.fromDom),Hi=t=>_.from(t.dom.nextSibling).map(Wt.fromDom),Js=t=>Ve(t.dom.childNodes,Wt.fromDom),ha=(t,s)=>{const a=t.dom.childNodes;return _.from(a[s]).map(Wt.fromDom)},X=t=>ha(t,0),Ce=(t,s)=>({element:t,offset:s}),Fe=(t,s)=>{const a=Js(t);return a.length>0&&s<a.length?Ce(a[s],0):Ce(t,s)},Ct=t=>Bc(t)&&cn(t.dom.host),Xt=Ze(Element.prototype.attachShadow)&&Ze(Node.prototype.getRootNode),mo=K(Xt),Ko=Xt?t=>Wt.fromDom(t.dom.getRootNode()):ac,Er=t=>Ct(t)?t:Wt.fromDom(ac(t).dom.body),Ls=t=>Nr(t).isSome(),Nr=t=>{const s=Ko(t);return Ct(s)?_.some(s):_.none()},_r=t=>Wt.fromDom(t.dom.host),$r=t=>{if(mo()&&cn(t.target)){const s=Wt.fromDom(t.target);if(xs(s)&&Ia(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return uo(a)}}return _.from(t.target)},Ia=t=>cn(t.dom.shadowRoot),Gr=t=>{const s=Fr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Nr(Wt.fromDom(s)).fold(()=>a.body.contains(s),yt(Gr,_r))},Qr=()=>Jc(Wt.fromDom(document)),Jc=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Wt.fromDom(s)},Qc=(t,s,a)=>{if(Tt(a)||Ot(a)||et(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},To=(t,s,a)=>{Qc(t.dom,s,a)},us=(t,s)=>{const a=t.dom;Lt(s,(i,d)=>{Qc(a,d,i)})},sr=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},B=(t,s)=>_.from(sr(t,s)),J=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},de=(t,s)=>{t.dom.removeAttribute(s)},Xe=t=>ke(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),$n=(t,s,a)=>{if(!Tt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);eo(t)&&t.style.setProperty(s,a)},Mo=(t,s)=>{eo(t)&&t.style.removeProperty(s)},zn=(t,s,a)=>{const i=t.dom;$n(i,s,a)},Ir=(t,s)=>{const a=t.dom;Lt(s,(i,d)=>{$n(a,d,i)})},gr=(t,s)=>{const a=t.dom;Lt(s,(i,d)=>{i.fold(()=>{Mo(a,d)},g=>{$n(a,d,g)})})},Pt=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Gr(t)?ra(a,s):d},ra=(t,s)=>eo(t)?t.style.getPropertyValue(s):"",Qs=(t,s)=>{const a=t.dom,i=ra(a,s);return _.from(i).filter(d=>d.length>0)},Ur=t=>{const s={},a=t.dom;if(eo(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},nl=(t,s,a)=>{const i=Wt.fromTag(t);return zn(i,s,a),Qs(i,s).isSome()},Po=(t,s)=>{const a=t.dom;Mo(a,s),Tr(B(t,"style").map(lt),"")&&de(t,"style")},ne=t=>t.dom.offsetWidth,me=(t,s)=>{const a=(w,T)=>{if(!et(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const A=w.dom;eo(A)&&(A.style[t]=T+"px")},i=w=>{const T=s(w);if(T<=0||T===null){const A=Pt(w,t);return parseFloat(A)||0}return T},d=i,g=(w,T)=>ke(T,(A,D)=>{const N=Pt(w,D),U=N===void 0?0:parseInt(N,10);return isNaN(U)?A:A+U},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(w,T,A)=>{const D=g(w,A);return T>D?T-D:0}}},tt=me("height",t=>{const s=t.dom;return Gr(t)?s.getBoundingClientRect().height:s.offsetHeight}),ft=t=>tt.get(t),Vn=t=>tt.getOuter(t),oo=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=tt.max(t,s,a);zn(t,"max-height",i+"px")},qs=(t,s)=>({left:t,top:s,translate:(i,d)=>qs(t+i,s+d)}),Yo=qs,zi=t=>{const s=t.getBoundingClientRect();return Yo(s.left,s.top)},Qo=(t,s)=>t!==void 0?t:s!==void 0?s:0,Ds=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return Yo(a.offsetLeft,a.offsetTop);const g=Qo(i==null?void 0:i.pageYOffset,d.scrollTop),p=Qo(i==null?void 0:i.pageXOffset,d.scrollLeft),w=Qo(d.clientTop,a.clientTop),T=Qo(d.clientLeft,a.clientLeft);return Ea(t).translate(p-T,g-w)},Ea=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Yo(i.offsetLeft,i.offsetTop):Gr(t)?zi(s):Yo(0,0)},cc=me("width",t=>t.dom.offsetWidth),Vi=(t,s)=>cc.set(t,s),hr=t=>cc.get(t),or=t=>cc.getOuter(t),Rs=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=cc.max(t,s,a);zn(t,"max-width",i+"px")},Lr=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},wc=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),w=p||i("(pointer:coarse)"),T=d||!g&&p&&i("(min-device-width:768px)"),A=g||p&&!T,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,N=!A&&!T&&!D;return{isiPad:K(d),isiPhone:K(g),isTablet:K(T),isPhone:K(A),isTouch:K(w),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:K(D),isDesktop:K(N)}},El=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},qr=(t,s)=>{const a=El(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return ic(i(1),i(2))},Gl=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Cu():qr(t,a)},Cu=()=>ic(0,0),ic=(t,s)=>({major:t,minor:s}),Su={nu:ic,detect:Gl,unknown:Cu},Qg=(t,s)=>ao(s.brands,a=>{const i=a.brand.toLowerCase();return se(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Su.nu(parseInt(a.version,10),0)}))}),Fc=(t,s)=>{const a=String(s).toLowerCase();return se(t,i=>i.search(a))},_l=(t,s)=>Fc(t,s).map(a=>{const i=Su.detect(a.versionRegexes,s);return{current:a.name,version:i}}),cd=(t,s)=>Fc(t,s).map(a=>{const i=Su.detect(a.versionRegexes,s);return{current:a.name,version:i}}),La=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ol=t=>s=>Xs(s,t),xu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Xs(t,"edge/")&&Xs(t,"chrome")&&Xs(t,"safari")&&Xs(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,La],search:t=>Xs(t,"chrome")&&!Xs(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Xs(t,"msie")||Xs(t,"trident")},{name:"Opera",versionRegexes:[La,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ol("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ol("firefox")},{name:"Safari",versionRegexes:[La,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Xs(t,"safari")||Xs(t,"mobile/"))&&Xs(t,"applewebkit")}],Vd=[{name:"Windows",search:ol("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Xs(t,"iphone")||Xs(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ol("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ol("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ol("linux"),versionRegexes:[]},{name:"Solaris",search:ol("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ol("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ol("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ql={browsers:K(xu),oses:K(Vd)},Bm="Edge",Ud="Chromium",_i="IE",eh="Opera",Pm="Firefox",ku="Safari",Wd=()=>Ai({current:void 0,version:Su.unknown()}),Ai=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(Bm),isChromium:i(Ud),isIE:i(_i),isOpera:i(eh),isFirefox:i(Pm),isSafari:i(ku)}},ve={unknown:Wd,nu:Ai,edge:K(Bm),chromium:K(Ud),ie:K(_i),opera:K(eh),firefox:K(Pm),safari:K(ku)},Kl="Windows",Oi="iOS",Fm="Android",Im="Linux",th="macOS",Bs="Solaris",qa="FreeBSD",Vf="ChromeOS",Ui=()=>Lm({current:void 0,version:Su.unknown()}),Lm=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(Kl),isiOS:i(Oi),isAndroid:i(Fm),isMacOS:i(th),isLinux:i(Im),isSolaris:i(Bs),isFreeBSD:i(qa),isChromeOS:i(Vf)}},Tu={unknown:Ui,nu:Lm,windows:K(Kl),ios:K(Oi),android:K(Fm),linux:K(Im),macos:K(th),solaris:K(Bs),freebsd:K(qa),chromeos:K(Vf)},Uf={detect:(t,s,a)=>{const i=ql.browsers(),d=ql.oses(),g=s.bind(T=>Qg(i,T)).orThunk(()=>_l(i,t)).fold(ve.unknown,ve.nu),p=cd(d,t).fold(Tu.unknown,Tu.nu),w=wc(p,g,t,a);return{browser:g,os:p,deviceType:w}}},id=t=>window.matchMedia(t).matches;let nh=Lr(()=>Uf.detect(navigator.userAgent,_.from(navigator.userAgentData),id));const Ic=()=>nh(),Zd=(t,s,a,i,d,g,p)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:p}),Hm=t=>{const s=Wt.fromDom($r(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Ht(i,a);return Zd(s,t.clientX,t.clientY,a,i,d,t)},ld=(t,s)=>a=>{t(a)&&s(Hm(a))},pa=(t,s,a,i,d)=>{const g=ld(a,i);return t.dom.addEventListener(s,g,d),{unbind:St(zm,t,s,g,d)}},jd=(t,s,a,i)=>pa(t,s,a,i,!1),Wf=(t,s,a,i)=>pa(t,s,a,i,!0),zm=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},Eu=(t,s)=>{sa(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},oh=(t,s)=>{Hi(t).fold(()=>{sa(t).each(d=>{Sc(d,s)})},i=>{Eu(i,s)})},Vm=(t,s)=>{X(t).fold(()=>{Sc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},Sc=(t,s)=>{t.dom.appendChild(s.dom)},sh=(t,s,a)=>{ha(t,a).fold(()=>{Sc(t,s)},i=>{Eu(i,s)})},sl=(t,s)=>{R(s,a=>{Sc(t,a)})},ud=t=>{t.dom.textContent="",R(Js(t),s=>{Yl(s)})},Yl=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Wi=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Yo(a,i)},rh=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},ah=t=>{const s=t===void 0?window:t;return Ic().browser.isFirefox()?_.none():_.from(s.visualViewport)},Zf=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),rl=t=>{const s=t===void 0?window:t,a=s.document,i=Wi(Wt.fromDom(a));return ah(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Zf(i.left,i.top,g,p)},d=>Zf(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},E=()=>Wt.fromDom(document),$=(t,s)=>t.view(s).fold(K([]),i=>{const d=t.owner(i),g=$(t,d);return[i].concat(g)}),j=(t,s)=>{const a=s.owner(t),i=$(s,a);return _.some(i)};var wn=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?_.none():_.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Wt.fromDom)},owner:t=>ga(t)});const So=t=>{const s=E(),a=Wi(s);return j(t,wn).fold(St(Ds,t),d=>{const g=Ea(t),p=We(d,(w,T)=>{const A=Ea(T);return{left:w.left+A.left,top:w.top+A.top}},{left:0,top:0});return Yo(p.left+g.left+a.left,p.top+g.top+a.top)})},ns=(t,s,a)=>({point:t,width:s,height:a}),jo=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),to=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),os=t=>{const s=Ds(t),a=or(t),i=Vn(t);return to(s.left,s.top,a,i)},Ar=t=>{const s=So(t),a=or(t),i=Vn(t);return to(s.left,s.top,a,i)},Ka=()=>rl(window),ea=t=>{const s=g=>g(t),a=K(t),i=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:De,isError:Me,map:g=>Fo.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>_.some(t)};return d},Um=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Me,isError:De,map:s,mapError:i=>Fo.error(i(t)),bind:s,exists:Me,forall:De,getOr:xt,or:xt,getOrThunk:it,orThunk:it,getOrDie:Q(String(t)),each:te,toOptional:_.none};return a},Fo={value:ea,error:Um,fromOption:(t,s)=>t.fold(()=>Um(s),ea)};var Hr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Hr||(Hr={}));const Ps=(t,s,a)=>t.stype===Hr.Error?s(t.serror):a(t.svalue),lc=t=>{const s=[],a=[];return R(t,i=>{Ps(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Ha=(t,s)=>t.stype===Hr.Error?{stype:Hr.Error,serror:s(t.serror)}:t,jf=(t,s)=>t.stype===Hr.Value?{stype:Hr.Value,svalue:s(t.svalue)}:t,Gf=(t,s)=>t.stype===Hr.Value?s(t.svalue):t,ch=(t,s)=>t.stype===Hr.Error?s(t.serror):t,Xl=t=>({stype:Hr.Value,svalue:t}),qf=t=>({stype:Hr.Error,serror:t}),Kr={fromResult:t=>t.fold(qf,Xl),toResult:t=>Ps(t,Fo.error,Fo.value),svalue:Xl,partition:lc,serror:qf,bind:Gf,bindError:ch,map:jf,mapError:Ha,fold:Ps},ih=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),g1=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Tp=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Kf=(t,s)=>s,h1=(t,s)=>rt(t)&&rt(s)?pr(t,s):s,dd=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Kn(d,g)&&(a[g]=t(a[g],d[g]))}return a},pr=dd(h1),Ho=dd(Kf),uc=()=>({tag:"required",process:{}}),Jl=t=>({tag:"defaultedThunk",process:t}),_u=t=>Jl(K(t)),lh=()=>({tag:"option",process:{}}),Wm=t=>({tag:"mergeWithThunk",process:t}),p1=t=>Wm(K(t)),b1=(t,s)=>t.length>0?Kr.svalue(pr(s,Ho.apply(void 0,t))):Kr.svalue(s),Zm=t=>Ht(Kr.serror,z)(t),Al={consolidateObj:(t,s)=>{const a=Kr.partition(t);return a.errors.length>0?Zm(a.errors):b1(a.values,s)},consolidateArr:t=>{const s=Kr.partition(t);return s.errors.length>0?Zm(s.errors):Kr.svalue(s.values)}},Ol=t=>Et(t)&&Re(t).length>100?" removed due to size":JSON.stringify(t,null,2),I0=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):t;return Ve(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},md=(t,s)=>Kr.serror([{path:t,getErrorInfo:s}]),Au=(t,s,a)=>md(t,()=>'Could not find valid *required* value for "'+s+'" in '+Ol(a)),Yf=(t,s)=>md(t,()=>'Choice schema did not contain choice key: "'+s+'"'),fd=(t,s,a)=>md(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Ol(s)),dh=(t,s)=>md(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),ba=(t,s)=>md(t,K(s)),Zi=t=>{const s=(i,d)=>Kr.bindError(t(d),g=>ba(i,g)),a=K("val");return{extract:s,toString:a}},Gm=Zi(Kr.svalue),Bn=(t,s,a,i)=>Jt(s,a).fold(()=>Au(t,a,s),i),qm=(t,s,a,i)=>{const d=Jt(t,s).getOrThunk(()=>a(t));return i(d)},al=(t,s,a)=>a(Jt(t,s)),mh=(t,s,a,i)=>{const d=Jt(t,s).map(g=>g===!0?a(t):g);return i(d)},fh=(t,s,a,i,d)=>{const g=w=>d.extract(s.concat([i]),w),p=w=>w.fold(()=>Kr.svalue(_.none()),T=>{const A=d.extract(s.concat([i]),T);return Kr.map(A,_.some)});switch(t.tag){case"required":return Bn(s,a,i,g);case"defaultedThunk":return qm(a,i,t.process,g);case"option":return al(a,i,p);case"defaultedOptionThunk":return mh(a,i,t.process,p);case"mergeWithThunk":return qm(a,i,K({}),w=>{const T=pr(t.process(a),w);return g(T)})}},PC=(t,s,a)=>{const i={},d=[];for(const g of a)Tp(g,(p,w,T,A)=>{const D=fh(T,t,s,p,A);Kr.fold(D,N=>{d.push(...N)},N=>{i[w]=N})},(p,w)=>{i[p]=w(s)});return d.length>0?Kr.serror(d):Kr.svalue(i)},Ou=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),dT=t=>Re(qe(t,cn)),Ya=t=>{const s=lo(t),a=We(t,(d,g)=>Tp(g,p=>pr(d,{[p]:!0}),K(d)),{});return{extract:(d,g)=>{const p=Ot(g)?[]:dT(g),w=xe(p,T=>!Ts(a,T));return w.length===0?s.extract(d,g):dh(d,w)},toString:s.toString}},lo=t=>({extract:(i,d)=>PC(i,d,t),toString:()=>`obj{
`+Ve(t,d=>Tp(d,(g,p,w,T)=>g+" -> "+T.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),ei=t=>({extract:(i,d)=>{const g=Ve(d,(p,w)=>t.extract(i.concat(["["+w+"]"]),p));return Al.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),qt=(t,s)=>{const a=s!==void 0?s:xt;return{extract:(g,p)=>{const w=[];for(const T of t){const A=T.extract(g,p);if(A.stype===Hr.Value)return{stype:Hr.Value,svalue:a(A.svalue)};w.push(A)}return Al.consolidateArr(w)},toString:()=>"oneOf("+Ve(t,g=>g.toString()).join(", ")+")"}},v1=(t,s)=>{const a=(g,p)=>ei(Zi(t)).extract(g,p);return{extract:(g,p)=>{const w=Re(p),T=a(g,w);return Kr.bind(T,A=>{const D=Ve(A,N=>ih(N,N,uc(),s));return lo(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},y1=(t,s)=>{const a=Lr(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},cl=Ht(ei,lo),ti=K(Gm),Km=(t,s)=>Zi(a=>{const i=typeof a;return t(a)?Kr.svalue(a):Kr.serror(`Expected type: ${s} but got: ${i}`)}),Wr=Km(et,"number"),_a=Km(Tt,"string"),ni=Km(Ot,"boolean"),cr=Km(Ze,"function"),Du=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Du(t[s]));default:return!1}},w1=Zi(t=>Du(t)?Kr.svalue(t):Kr.serror("Expected value to be acceptable for sending via postMessage")),Ql=(t,s,a,i)=>Jt(a,i).fold(()=>fd(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),gh=(t,s)=>({extract:(d,g)=>Jt(g,t).fold(()=>Yf(d,t),w=>Ql(d,g,s,w)),toString:()=>"chooseOn("+t+"). Possible values: "+Re(s)}),Ym=()=>ei(Gm),aa=t=>Zi(s=>t(s).fold(Kr.serror,Kr.svalue)),hh=(t,s)=>v1(a=>Kr.fromResult(t(a)),s),Xm=(t,s,a)=>{const i=s.extract([t],a);return Kr.mapError(i,d=>({input:a,errors:d}))},Ms=(t,s,a)=>Kr.toResult(Xm(t,s,a)),eu=t=>t.fold(s=>{throw new Error(tu(s))},xt),xc=(t,s,a)=>eu(Ms(t,s,a)),tu=t=>`Errors: 
`+I0(t.errors).join(`
`)+`

Input object: `+Ol(t.input),gi=(t,s)=>gh(t,fn(s,lo)),C1=(t,s)=>y1(t,s),Xa=ih,kc=g1,Ep=t=>aa(s=>dn(t,s)?Fo.value(s):Fo.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Mt=t=>Xa(t,t,uc(),ti()),Di=(t,s)=>Xa(t,t,uc(),s),L0=t=>Di(t,Wr),ca=t=>Di(t,_a),Xf=(t,s)=>Xa(t,t,uc(),Ep(s)),gd=t=>Di(t,ni),va=t=>Di(t,cr),H0=(t,s)=>Xa(t,t,lh(),Zi(a=>Kr.serror("The field: "+t+" is forbidden. "+s))),il=(t,s)=>Xa(t,t,uc(),lo(s)),nu=(t,s)=>Xa(t,t,uc(),cl(s)),hi=(t,s)=>Xa(t,t,uc(),ei(s)),Ns=t=>Xa(t,t,lh(),ti()),ji=(t,s)=>Xa(t,t,lh(),s),Gd=t=>ji(t,Wr),Ja=t=>ji(t,_a),Jf=(t,s)=>ji(t,Ep(s)),Qf=t=>ji(t,cr),eg=(t,s)=>ji(t,ei(s)),pi=(t,s)=>ji(t,lo(s)),_p=(t,s)=>ji(t,Ya(s)),Ke=(t,s)=>Xa(t,t,_u(s),ti()),Aa=(t,s,a)=>Xa(t,t,_u(s),a),S1=(t,s)=>Aa(t,s,Wr),wr=(t,s)=>Aa(t,s,_a),ll=(t,s,a)=>Aa(t,s,Ep(a)),Oa=(t,s)=>Aa(t,s,ni),Da=(t,s)=>Aa(t,s,cr),C=(t,s)=>Aa(t,s,w1),k=(t,s,a)=>Aa(t,s,ei(a)),I=(t,s,a)=>Aa(t,s,lo(a)),V=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},ht={generate:t=>{if(!mn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return R(t,(i,d)=>{const g=Re(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],w=i[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!mn(w))throw new Error("case arguments must be an array");s.push(p),a[p]=(...T)=>{const A=T.length;if(A!==w.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+w.length+" ("+w+"), got "+A);return{fold:(...N)=>{if(N.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+N.length);return N[d].apply(null,T)},match:N=>{const U=Re(N);if(s.length!==U.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+U.join(","));if(!H(s,le=>dn(U,le)))throw new Error("Not all branches were specified when using match. Specified: "+U.join(", ")+`
Required: `+s.join(", "));return N[p].apply(null,T)},log:N=>{console.log(N,{constructors:s,constructor:p,params:T})}}}}),a}};ht.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Kt=t=>{const s=[],a=[];return R(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},Mn=(t,s)=>{const a={};return Lt(t,(i,d)=>{dn(s,d)||(a[d]=i)}),a},Lo=(t,s)=>({[t]:s}),Go=t=>{const s={};return R(t,a=>{s[a.key]=a.value}),s},ir=(t,s)=>Mn(t,s),Ws=(t,s)=>Lo(t,s),er=t=>Go(t),oi=(t,s)=>t.length===0?Fo.value(s):Fo.value(pr(s,Ho.apply(void 0,t))),ul=t=>Fo.error(z(t)),Ru=(t,s)=>{const a=Kt(t);return a.errors.length>0?ul(a.errors):oi(a.values,s)},hd=t=>Ze(t)?t:Me,ph=(t,s,a)=>{let i=t.dom;const d=hd(a);for(;i.parentNode;){i=i.parentNode;const g=Wt.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return _.none()},pd=(t,s,a)=>{const i=s(t),d=hd(a);return i.orThunk(()=>d(t)?_.none():ph(t,s,d))},Mu=(t,s)=>zs(t.element,s.event.target),Jm={can:De,abort:Me,run:te},Nu=t=>{if(!Ts(t,"can")&&!Ts(t,"abort")&&!Ts(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Jm,...t}},bi=(t,s)=>(...a)=>ke(t,(i,d)=>i&&s(d).apply(void 0,a),!0),bh=(t,s)=>(...a)=>ke(t,(i,d)=>i||s(d).apply(void 0,a),!1),Ap=t=>Ze(t)?{can:De,abort:Me,run:t}:t,z0=t=>{const s=bi(t,d=>d.can),a=bh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{R(t,g=>{g.run.apply(void 0,d)})}}},Ao=K,tr=Ao("touchstart"),za=Ao("touchmove"),Lc=Ao("touchend"),Dl=Ao("touchcancel"),Hc=Ao("mousedown"),Ri=Ao("mousemove"),$u=Ao("mouseout"),Op=Ao("mouseup"),qd=Ao("mouseover"),Qm=Ao("focusin"),mT=Ao("focusout"),ef=Ao("keydown"),fT=Ao("keyup"),tg=Ao("input"),Dp=Ao("change"),Rp=Ao("click"),ya=Ao("transitioncancel"),Kd=Ao("transitionend"),gT=Ao("transitionstart"),x1=Ao("selectstart"),ta=t=>K("alloy."+t),FC={tap:ta("tap")},Yd=ta("focus"),Mp=ta("blur.post"),V0=ta("paste.post"),ou=ta("receive"),dl=ta("execute"),tf=ta("focus.item"),vh=FC.tap,k1=ta("longpress"),Np=ta("sandbox.close"),ng=ta("typeahead.cancel"),T1=ta("system.init"),IC=ta("system.touchmove"),hT=ta("system.touchend"),E1=ta("system.scroll"),$p=ta("system.resize"),bd=ta("system.attached"),yh=ta("system.detached"),Xd=ta("system.dismissRequested"),_1=ta("system.repositionRequested"),Bp=ta("focusmanager.shifted"),U0=ta("slotcontainer.visibility"),A1=ta("change.tab"),LC=ta("dismiss.tab"),W0=ta("highlight"),O1=ta("dehighlight"),Vs=(t,s)=>{Qd(t,t.element,s,{})},yo=(t,s,a)=>{Qd(t,t.element,s,a)},Jd=t=>{Vs(t,dl())},Z0=(t,s,a)=>{Qd(t,s,a,{})},Qd=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},D1=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},HC=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},lr=t=>er(t),zC=(t,s)=>({key:t,value:Nu({abort:s})}),em=(t,s)=>({key:t,value:Nu({can:s})}),VC=t=>({key:t,value:Nu({run:(s,a)=>{a.event.prevent()}})}),Zt=(t,s)=>({key:t,value:Nu({run:s})}),vd=(t,s,a)=>({key:t,value:Nu({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),wh=t=>s=>Zt(t,s),Pp=t=>s=>({key:t,value:Nu({run:(a,i)=>{Mu(a,i)&&s(a,i)}})}),pT=(t,s)=>Zt(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{HC(d,d.element,t,i)})}),og=(t,s,a)=>{const i=s.partUids[a];return pT(t,i)},Ch=(t,s)=>Zt(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>pd(d.target,w=>a.getSystem().getByDom(w).toOptional(),Me).getOr(a));s(a,g,i)}),Sh=t=>Zt(t,(s,a)=>{a.cut()}),UC=t=>Zt(t,(s,a)=>{a.stop()}),Qa=(t,s)=>Pp(t)(s),zr=Pp(bd()),Rl=Pp(yh()),bT=Pp(T1()),ml=wh(dl()),si=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,Js(Wt.fromDom(i))},tm=t=>t.dom.innerHTML,nf=(t,s)=>{const i=ga(t).dom,d=Wt.fromDom(i.createDocumentFragment()),g=si(s,i);sl(d,g),ud(t),Sc(t,d)},WC=t=>{const s=Wt.fromTag("div"),a=Wt.fromDom(t.dom.cloneNode(!0));return Sc(s,a),tm(s)},Tc=(t,s)=>Wt.fromDom(t.dom.cloneNode(s)),ZC=t=>Tc(t,!1),jC=t=>{if(Ct(t))return"#shadow-root";{const s=ZC(t);return WC(s)}},of=t=>jC(t),j0=(t,s,a)=>zs(s,t.element)&&!zs(s,a),Bu=lr([em(Yd(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return j0(t,i,d)?(console.warn(Yd()+` did not get interpreted by the desired target. 
Originator: `+of(i)+`
Target: `+of(d)+`
Check the `+Yd()+" event handlers"),!1):!0})]);var R1=Object.freeze({__proto__:null,events:Bu});let G0=0;const Yn=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return G0++,t+"_"+i+G0+String(a)},vT=K("alloy-id-"),GC=K("data-alloy-id"),M1=vT(),xh=GC(),N1=(t,s)=>{const a=Yn(M1+t);return kh(s,a),a},kh=(t,s)=>{Object.defineProperty(t.dom,xh,{value:s,writable:!0})},sg=t=>{const s=xs(t)?t.dom[xh]:null;return _.from(s)},yd=t=>Yn(t),q0=xt,sf=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+of(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:K("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Me}},yT=sf(),nm=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:rg(p.slice(0,1).concat(p.slice(3)))}),t},rg=t=>Ve(t,s=>ye(s,"/*")?s.substring(0,s.length-2):s),$1=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:rg(g)}),t},B1=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:rg(g.slice(1))}),t},Fp=Yn("alloy-premade"),Ip=t=>(Object.defineProperty(t.element.dom,Fp,{value:t.uid,writable:!0}),Ws(Fp,t)),wT=t=>Kn(t.dom,Fp),Pu=t=>Jt(t,Fp),Th=t=>B1((s,...a)=>t(s.getApis(),s,...a),t),su={init:()=>Mi({readState:K("No State required")})},Mi=t=>t,Lp=(t,s)=>{const a=Ve(s,d=>pi(d.name(),[Mt("config"),Ke("state",su)])),i=Ms("component.behaviours",lo(a),t.behaviours).fold(d=>{throw new Error(tu(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},xt);return{list:s,data:fn(i,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return K(g)})}},br=t=>t.list,CT=t=>t.data,qC=(t,s)=>{const a={};return Lt(t,(i,d)=>{Lt(i,(g,p)=>{const w=Jt(a,p).getOr([]);a[p]=w.concat([s(d,g)])})}),a},ru=t=>({classes:ct(t.classes)?[]:t.classes,attributes:ct(t.attributes)?{}:t.attributes,styles:ct(t.styles)?{}:t.styles}),P1=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),KC=(t,s,a,i)=>{const d={...s};R(a,D=>{d[D.name()]=D.exhibit(t,i)});const g=qC(d,(D,N)=>({name:D,modification:N})),p=D=>We(D,(N,U)=>({...U.modification,...N}),{}),w=We(g.classes,(D,N)=>N.modification.concat(D),[]),T=p(g.attributes),A=p(g.styles);return ru({classes:w,attributes:T,styles:A})},wd=(t,s,a,i)=>{try{const d=rn(a,(g,p)=>{const w=g[s],T=p[s],A=i.indexOf(w),D=i.indexOf(T);if(A===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(i,null,2));return A<D?-1:D<A?1:0});return Fo.value(d)}catch(d){return Fo.error([d])}},dc=(t,s)=>({handler:t,purpose:s}),ST=(t,s)=>({cHandler:t,purpose:s}),Hp=(t,s)=>ST(St.apply(void 0,[t.handler].concat(s)),t.purpose),ag=t=>t.cHandler,Eh=(t,s)=>({name:t,handler:s}),F1=(t,s)=>{const a={};return R(t,i=>{a[i.name()]=i.handlers(s)}),a},YC=(t,s,a)=>{const i={...a,...F1(s,t)};return qC(i,Eh)},zc=(t,s,a,i)=>{const d=YC(t,a,i);return dO(d,s)},lO=t=>{const s=Ap(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},XC=(t,s)=>Fo.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ve(s,a=>a.name),null,2)]),uO=(t,s,a)=>{const i=s[a];return i?wd("Event: "+a,"name",t,i).map(d=>{const g=Ve(d,p=>p.handler);return z0(g)}):XC(a,t)},dO=(t,s)=>{const a=Le(t,(i,d)=>(i.length===1?Fo.value(i[0].handler):uO(i,s,d)).map(p=>{const w=lO(p),T=i.length>1?xe(s[d],A=>ze(i,D=>D.name===A)).join(" > "):i[0].name;return Ws(d,dc(w,T))}));return Ru(a,{})},fl="alloy.base.behaviour",Vc=lo([Xa("dom","dom",uc(),lo([Mt("tag"),Ke("styles",{}),Ke("classes",[]),Ke("attributes",{}),Ns("value"),Ns("innerHtml")])),Mt("components"),Mt("uid"),Ke("events",{}),Ke("apis",{}),Xa("eventOrder","eventOrder",p1({[dl()]:["disabling",fl,"toggling","typeaheadevents"],[Yd()]:[fl,"focusing","keying"],[T1()]:[fl,"disabling","toggling","representing"],[tg()]:[fl,"representing","streaming","invalidating"],[yh()]:[fl,"representing","item-events","tooltipping"],[Hc()]:["focusing",fl,"item-type-events"],[tr()]:["focusing",fl,"item-type-events"],[qd()]:["item-type-events","tooltipping"],[ou()]:["receiving","reflecting","tooltipping"]}),ti()),Ns("domModification")]),vi=t=>Ms("custom.definition",Vc,t),JC=t=>({...t.dom,uid:t.uid,domChildren:Ve(t.components,s=>s.element)}),xT=t=>t.domModification.fold(()=>ru({}),ru),rf=t=>t.events,_h=(t,s)=>{const a=sr(t,s);return a===void 0||a===""?[]:a.split(" ")},I1=(t,s,a)=>{const d=_h(t,s).concat([a]);return To(t,s,d.join(" ")),!0},zp=(t,s,a)=>{const i=xe(_h(t,s),d=>d!==a);return i.length>0?To(t,s,i.join(" ")):de(t,s),!1},Fu=t=>t.dom.classList!==void 0,cg=t=>_h(t,"class"),Ah=(t,s)=>I1(t,"class",s),Oh=(t,s)=>zp(t,"class",s),wa=(t,s)=>{Fu(t)?t.dom.classList.add(s):Ah(t,s)},Vp=t=>{(Fu(t)?t.dom.classList:cg(t)).length===0&&de(t,"class")},ia=(t,s)=>{Fu(t)?t.dom.classList.remove(s):Oh(t,s),Vp(t)},Gi=(t,s)=>Fu(t)&&t.dom.classList.contains(s),om=(t,s)=>{R(s,a=>{wa(t,a)})},gl=(t,s)=>{R(s,a=>{ia(t,a)})},QC=(t,s)=>H(s,a=>Gi(t,a)),kT=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},TT=t=>Fu(t)?kT(t):cg(t),hl=t=>t.dom.value,af=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},e2=(t,s,a)=>ha(t,s).map(d=>{if(a.exists(p=>!zs(p,d))){const p=a.map(qo).getOr("span"),w=Wt.fromTag(p);return Eu(d,w),w}else return d}),t2=(t,s,a)=>{a.fold(()=>Sc(t,s),i=>{zs(i,s)||(Eu(i,s),Yl(i))})},K0=(t,s,a)=>{const i=Ve(s,a),d=Js(t);return R(d.slice(i.length),Yl),i},Y0=(t,s,a,i)=>{const d=ha(t,s),g=i(a,d),p=e2(t,s,d);return t2(t,g.element,p),g},ig=(t,s,a)=>K0(t,s,(i,d)=>Y0(t,d,i,a)),X0=(t,s)=>K0(t,s,(a,i)=>{const d=ha(t,i);return t2(t,a,d),a}),n2=(t,s)=>{const a=Re(t),i=Re(s),d=Be(i,a),g=ks(t,(p,w)=>!Kn(s,w)||p!==s[w]).t;return{toRemove:d,toSet:g}},o2=(t,s)=>{const{class:a,style:i,...d}=Xe(s),{toSet:g,toRemove:p}=n2(t.attributes,d),w=()=>{R(p,Sn=>de(s,Sn)),us(s,g)},T=Ur(s),{toSet:A,toRemove:D}=n2(t.styles,T),N=()=>{R(D,Sn=>Po(s,Sn)),Ir(s,A)},U=TT(s),W=Be(U,t.classes),le=Be(t.classes,U),pe=()=>{om(s,le),gl(s,W)},st=Sn=>{nf(s,Sn)},$e=()=>{const Sn=t.domChildren;X0(s,Sn)},at=()=>{const Sn=s,dt=t.value.getOrUndefined();dt!==hl(Sn)&&af(Sn,dt??"")};return w(),pe(),N(),t.innerHtml.fold($e,st),at(),s},s2=t=>{const s=Wt.fromTag(t.tag);us(s,t.attributes),om(s,t.classes),Ir(s,t.styles),t.innerHtml.each(i=>nf(s,i));const a=t.domChildren;return sl(s,a),t.value.each(i=>{af(s,i)}),s},cf=(t,s)=>{try{const a=o2(t,s);return _.some(a)}catch{return _.none()}},Dh=t=>t.innerHtml.isSome()&&t.domChildren.length>0,lg=(t,s)=>{const a=d=>qo(d)===t.tag&&!Dh(t)&&!wT(d),i=s.filter(a).bind(d=>cf(t,d)).getOrThunk(()=>s2(t));return kh(i,t.uid),i},r2=t=>{const s=Jt(t,"behaviours").getOr({});return Y(Re(s),a=>{const i=s[a];return cn(i)?[i.me]:[]})},ET=(t,s)=>Lp(t,s),J0=t=>{const s=r2(t);return ET(t,s)},Up=(t,s,a)=>{const i=JC(t),d=xT(t),g={"alloy.base.modification":d},p=s.length>0?KC(a,g,s,i):d;return P1(i,p)},Wp=(t,s,a)=>{const i={"alloy.base.behaviour":rf(t)};return zc(a,t.eventOrder,s,i).getOrDie()},a2=(t,s)=>{const a=()=>Sn,i=V(yT),d=eu(vi(t)),g=J0(t),p=br(g),w=CT(g),T=Up(d,p,w),A=lg(T,s),D=Wp(d,p,w),N=V(d.components),U=dt=>{i.set(dt)},W=()=>{i.set(sf(a))},le=()=>{const dt=Js(A),An=Y(dt,Gn=>i.get().getByDom(Gn).fold(()=>[],Yt));N.set(An)},pe=dt=>{const An=w;return(Ze(An[dt.name()])?An[dt.name()]:()=>{throw new Error("Could not find "+dt.name()+" in "+JSON.stringify(t,null,2))})()},st=dt=>Ze(w[dt.name()]),$e=()=>d.apis,at=dt=>w[dt]().map(An=>An.state.readState()).getOr("not enabled"),Sn={uid:t.uid,getSystem:i.get,config:pe,hasConfigured:st,spec:t,readState:at,getApis:$e,connect:U,disconnect:W,element:A,syncComponents:le,components:N.get,events:D};return Sn},_T=(t,s)=>{const a=Jt(t,"components").getOr([]);return s.fold(()=>Ve(a,yi),i=>Ve(a,(d,g)=>H1(d,ha(i,g))))},c2=(t,s)=>{const{events:a,...i}=q0(t),d=_T(i,s),g={...i,events:{...R1,...a},components:d};return Fo.value(a2(g,s))},Va=t=>{const s=Wt.fromText(t);return L1({element:s})},L1=t=>{const s=xc("external.component",Ya([Mt("element"),Ns("uid")]),t),a=V(sf()),i=w=>{a.set(w)},d=()=>{a.set(sf(()=>p))},g=s.uid.getOrThunk(()=>yd("external"));kh(s.element,g);const p={uid:g,getSystem:a.get,config:_.none,hasConfigured:Me,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:K("No state"),syncComponents:te,components:K([]),events:{}};return Ip(p)},Zp=yd,lf=t=>Kn(t,"uid"),H1=(t,s)=>Pu(t).getOrThunk(()=>{const a=lf(t)?t:{uid:Zp(""),...t};return c2(a,s).getOrDie()}),yi=t=>H1(t,_.none()),pl=Ip;var AT=(t,s,a,i,d)=>t(a,i)?_.some(a):Ze(d)&&d(a)?_.none():s(a,i,d);const uf=(t,s,a)=>{let i=t.dom;const d=Ze(a)?a:Me;for(;i.parentNode;){i=i.parentNode;const g=Wt.fromDom(i);if(s(g))return _.some(g);if(d(g))break}return _.none()},i2=(t,s,a)=>AT((d,g)=>g(d),uf,t,s,a),Rh=(t,s)=>{const a=d=>s(Wt.fromDom(d));return se(t.dom.childNodes,a).map(Wt.fromDom)},l2=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=Wt.fromDom(i.childNodes[d]);if(s(g))return _.some(g);const p=a(i.childNodes[d]);if(p.isSome())return p}return _.none()};return a(t.dom)},u2=(t,s,a)=>i2(t,s,a).isSome(),sm=(t,s,a)=>uf(t,i=>Yc(i,s),a),OT=(t,s)=>Rh(t,a=>Yc(a,s)),la=(t,s)=>Li(s,t),Ml=(t,s,a)=>AT((d,g)=>Yc(d,g),sm,t,s,a),Mh="aria-controls",z1=t=>i2(t,a=>{if(!xs(a))return!1;const i=sr(a,"id");return i!==void 0&&i.indexOf(Mh)>-1}).bind(a=>{const i=sr(a,"id"),d=Ko(a);return la(d,`[${Mh}="${i}"]`)}),V1=()=>{const t=Yn(Mh);return{id:t,link:i=>{To(i,Mh,t)},unlink:i=>{de(i,Mh)}}},jp=(t,s)=>z1(s).exists(a=>rm(t,a)),rm=(t,s)=>u2(s,a=>zs(a,t.element),Me)||jp(t,s),U1="unknown";var Nh;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Nh||(Nh={}));const Q0=V({}),ug=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();dn(["mousemove","mouseover","mouseout",T1()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ve(a,g=>dn(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+of(g.target)+")":g.outcome)})}}},am=(t,s,a)=>{switch(Jt(Q0.get(),t).orThunk(()=>{const d=Re(Q0.get());return ao(d,g=>t.indexOf(g)>-1?_.some(Q0.get()[g]):_.none())}).getOr(Nh.NORMAL)){case Nh.NORMAL:return a(DT());case Nh.LOGGING:{const d=ug(t,s),g=a(d);return d.write(),g}case Nh.STOP:return!0}},df=["alloy/data/Fields","alloy/debugging/Debugging"],d2=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return se(s,a=>a.indexOf("alloy")>0&&!ze(df,i=>a.indexOf(i)>-1)).getOr(U1)}else return U1},vt={logEventCut:te,logEventStopped:te,logNoParent:te,logEventNoHandlers:te,logEventResponse:te,write:te},$h=(t,s,a)=>am(t,s,a),DT=K(vt),ey=K([Mt("menu"),Mt("selectedMenu")]),W1=K([Mt("item"),Mt("selectedItem")]);K(lo(W1().concat(ey())));const Ca=K(lo(W1())),m2=il("initSize",[Mt("numColumns"),Mt("numRows")]),f2=()=>Di("markers",Ca()),Gp=()=>il("markers",[Mt("backgroundMenu")].concat(ey()).concat(W1())),cm=t=>il("markers",Ve(t,Mt)),Bh=(t,s,a)=>(d2(),Xa(s,s,a,aa(i=>Fo.value((...d)=>i.apply(void 0,d))))),ds=t=>Bh("onHandler",t,_u(te)),qi=t=>Bh("onKeyboardHandler",t,_u(_.none)),mf=t=>Bh("onHandler",t,uc()),ty=t=>Bh("onKeyboardHandler",t,uc()),vr=(t,s)=>kc(t,K(s)),ny=t=>kc(t,xt),qp=K(m2),mc=(t,s,a,i,d,g,p,w=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:w}),Iu=ht.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ni=(t,s,a,i,d,g,p,w,T)=>t.fold(s,a,i,d,g,p,w,T),Kp=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),RT=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),Ph=Iu.southeast,Z1=Iu.southwest,j1=Iu.northeast,G1=Iu.northwest,g2=Iu.south,oy=Iu.north,h2=Iu.east,q1=Iu.west,dg=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},bl=(t,s,a)=>Math.min(Math.max(t,s),a),MT=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},ec=(t,s)=>Pe(["left","right","top","bottom"],a=>Jt(s,a).map(i=>MT(t,i))),p2=(t,s,a)=>{const i=(T,A)=>s[T].map(D=>{const N=T==="top"||T==="bottom",U=N?a.top:a.left,le=(T==="left"||T==="top"?Math.max:Math.min)(D,A)+U;return N?bl(le,t.y,t.bottom):bl(le,t.x,t.right)}).getOr(A),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),w=i("bottom",t.bottom);return to(d,g,p-d,w-g)},im="layout",NT=t=>t.x,wi=(t,s)=>t.x+t.width/2-s.width/2,K1=(t,s)=>t.x+t.width-s.width,au=(t,s)=>t.y-s.height,sy=t=>t.y+t.height,b2=(t,s)=>t.y+t.height/2-s.height/2,$T=t=>t.x+t.width,BT=(t,s)=>t.x-s.width,Ec=(t,s,a)=>mc(NT(t),sy(t),a.southeast(),Ph(),"southeast",ec(t,{left:1,top:3}),im),_c=(t,s,a)=>mc(K1(t,s),sy(t),a.southwest(),Z1(),"southwest",ec(t,{right:0,top:3}),im),ri=(t,s,a)=>mc(NT(t),au(t,s),a.northeast(),j1(),"northeast",ec(t,{left:1,bottom:2}),im),Uc=(t,s,a)=>mc(K1(t,s),au(t,s),a.northwest(),G1(),"northwest",ec(t,{right:0,bottom:2}),im),Ki=(t,s,a)=>mc(wi(t,s),au(t,s),a.north(),oy(),"north",ec(t,{bottom:2}),im),Ua=(t,s,a)=>mc(wi(t,s),sy(t),a.south(),g2(),"south",ec(t,{top:3}),im),Y1=(t,s,a)=>mc($T(t),b2(t,s),a.east(),h2(),"east",ec(t,{left:0}),im),X1=(t,s,a)=>mc(BT(t,s),b2(t,s),a.west(),q1(),"west",ec(t,{right:1}),im),v2=()=>[Ec,_c,ri,Uc,Ua,Ki,Y1,X1],J1=()=>[_c,Ec,Uc,ri,Ua,Ki,Y1,X1],Un=()=>[ri,Uc,Ec,_c,Ki,Ua],mg=()=>[Uc,ri,_c,Ec,Ki,Ua],Q1=()=>[Ec,_c,ri,Uc,Ua,Ki],ry=()=>[_c,Ec,Uc,ri,Ua,Ki],PT=(t,s)=>s.universal?t:xe(t,a=>dn(s.channels,a));var y2=Object.freeze({__proto__:null,events:t=>lr([Zt(ou(),(s,a)=>{const i=t.channels,d=Re(i),g=a,p=PT(d,g);R(p,w=>{const T=i[w],A=T.schema,D=xc("channel["+w+`] data
Receiver: `+of(s.element),A,g.data);T.onReceive(s,D)})})])}),FT=[Di("channels",hh(Fo.value,Ya([mf("onReceive"),Ke("schema",ti())])))];const IT=(t,s,a)=>ml(i=>{a(i,t,s)}),ev=(t,s,a)=>bT((i,d)=>{a(i,t,s)}),LT=(t,s,a,i,d,g)=>{const p=Ya(t),w=pi(s,[_p("config",t)]);return w2(p,w,s,a,i,d,g)},vl=(t,s,a,i,d,g)=>{const p=t,w=pi(s,[ji("config",t)]);return w2(p,w,s,a,i,d,g)},Yp=(t,s,a)=>nm((d,...g)=>{const p=[d].concat(g);return d.config({name:K(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},w=>{const T=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,w.config,w.state].concat(T))})},a,s),HT=t=>({key:t,value:void 0}),w2=(t,s,a,i,d,g,p)=>{const w=N=>Ts(N,a)?N[a]():_.none(),T=fn(d,(N,U)=>Yp(a,N,U)),D={...fn(g,(N,U)=>$1(N,U)),...T,revoke:St(HT,a),config:N=>{const U=xc(a+"-config",t,N);return{key:a,value:{config:U,me:D,configAsRaw:Lr(()=>xc(a+"-config",t,N)),initialConfig:N,state:p}}},schema:K(s),exhibit:(N,U)=>ys(w(N),Jt(i,"exhibit"),(W,le)=>le(U,W.config,W.state)).getOrThunk(()=>ru({})),name:K(a),handlers:N=>w(N).map(U=>Jt(i,"events").getOr(()=>({}))(U.config,U.state)).getOr({})};return D},pn=t=>er(t),zT=Ya([Mt("fields"),Mt("name"),Ke("active",{}),Ke("apis",{}),Ke("state",su),Ke("extra",{})]),fc=t=>{const s=xc("Creating behaviour: "+t.name,zT,t);return LT(s.fields,s.name,s.active,s.apis,s.extra,s.state)},C2=Ya([Mt("branchKey"),Mt("branches"),Mt("name"),Ke("active",{}),Ke("apis",{}),Ke("state",su),Ke("extra",{})]),ay=t=>{const s=xc("Creating behaviour: "+t.name,C2,t);return vl(gi(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},VT=K(void 0),Nl=fc({fields:FT,name:"receiving",active:y2});var UT=Object.freeze({__proto__:null,exhibit:(t,s)=>ru({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const lm=t=>t.dom.focus(),S2=t=>t.dom.blur(),cy=t=>{const s=Ko(t).dom;return t.dom===s.activeElement},Yi=(t=E())=>_.from(t.dom.activeElement).map(Wt.fromDom),$l=t=>Yi(Ko(t)).filter(s=>t.dom.contains(s.dom)),tv=(t,s)=>{const a=Ko(s),i=Yi(a).bind(g=>{const p=w=>zs(g,w);return p(s)?_.some(s):l2(s,p)}),d=t(s);return i.each(g=>{Yi(a).filter(p=>zs(p,g)).fold(()=>{lm(g)},te)}),d},Lu=(t,s,a,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},x2=t=>({...t,position:_.some(t.position)}),Xp=(t,s)=>{gr(t,x2(s))},Wa=ht.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),k2=(t,s,a,i,d,g)=>{const p=s.rect,w=p.x-a,T=p.y-i,A=p.width,D=p.height,N=d-(w+A),U=g-(T+D),W=_.some(w),le=_.some(T),pe=_.some(N),st=_.some(U),$e=_.none();return Ni(s.direction,()=>Lu(t,W,le,$e,$e),()=>Lu(t,$e,le,pe,$e),()=>Lu(t,W,$e,$e,st),()=>Lu(t,$e,$e,pe,st),()=>Lu(t,W,le,$e,$e),()=>Lu(t,W,$e,$e,st),()=>Lu(t,W,le,$e,$e),()=>Lu(t,$e,le,pe,$e))},ff=(t,s)=>t.fold(()=>{const a=s.rect;return Lu("absolute",_.some(a.x),_.some(a.y),_.none(),_.none())},(a,i,d,g)=>k2("absolute",s,a,i,d,g),(a,i,d,g)=>k2("fixed",s,a,i,d,g)),nv=(t,s)=>{const a=St(So,s),i=t.fold(a,a,()=>{const p=Wi();return So(s).translate(-p.left,-p.top)}),d=or(s),g=Vn(s);return to(i.left,i.top,d,g)},T2=(t,s)=>s.fold(()=>t.fold(Ka,Ka,to),a=>t.fold(a,a,()=>{const i=a(),d=iy(t,i.x,i.y);return to(d.left,d.top,i.width,i.height)})),iy=(t,s,a)=>{const i=Yo(s,a),d=()=>{const g=Wi();return i.translate(-g.left,-g.top)};return t.fold(K(i),K(i),d)},WT=(t,s,a,i)=>t.fold(s,a,i);Wa.none;const ZT=Wa.relative,ly=Wa.fixed,jT=(t,s)=>({anchorBox:t,origin:s}),fg=(t,s)=>jT(t,s),Jp="data-alloy-placement",ov=(t,s)=>{To(t,Jp,s)},uy=t=>B(t,Jp),gg=t=>de(t,Jp),hg=ht.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Fh=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:w,right:T,bottom:A,width:D,height:N}=t,U=p>=a&&p<=d,W=w>=i&&w<=g,le=U&&W,pe=T<=d&&T>=a,st=A<=g&&A>=i,$e=pe&&st,at=Math.min(D,p>=a?d-p:T-a),Sn=Math.min(N,w>=i?g-w:A-i);return{originInBounds:le,sizeInBounds:$e,visibleW:at,visibleH:Sn}},Qp=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:w,width:T,height:A}=t,D=Math.max(a,d-T),N=Math.max(i,g-A),U=bl(p,a,D),W=bl(w,i,N),le=Math.min(U+T,d)-U,pe=Math.min(W+A,g)-W;return to(U,W,le,pe)},GT=(t,s,a)=>{const i=K(s.bottom-a.y),d=K(a.bottom-s.y),g=Kp(t,d,d,i),p=K(s.right-a.x),w=K(a.right-s.x);return{maxWidth:RT(t,w,w,p),maxHeight:g}},E2=(t,s,a,i)=>{const d=t.bubble,g=d.offset,p=p2(i,t.restriction,g),w=t.x+g.left,T=t.y+g.top,A=to(w,T,s,a),{originInBounds:D,sizeInBounds:N,visibleW:U,visibleH:W}=Fh(A,p),le=D&&N,pe=le?A:Qp(A,p),st=pe.width>0&&pe.height>0,{maxWidth:$e,maxHeight:at}=GT(t.direction,pe,i),Sn={rect:pe,maxHeight:at,maxWidth:$e,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return le||t.alwaysFit?hg.fit(Sn):hg.nofit(Sn,U,W,st)},dy=(t,s,a,i,d,g)=>{const p=i.width,w=i.height,T=(D,N,U,W,le)=>{const pe=D(a,i,d,t,g),st=E2(pe,p,w,g);return st.fold(K(st),($e,at,Sn,dt)=>(le===dt?Sn>W||at>U:!le&&dt)?st:hg.nofit(N,U,W,le))};return ke(s,(D,N)=>{const U=St(T,N);return D.fold(K(D),U)},hg.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Ph(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(xt,xt)},my=t=>{const s=V(_.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(_.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:w=>{a(),s.set(_.some(w))}}},qT=()=>my(t=>t.destroy()),pg=()=>my(t=>t.unbind()),Vr=()=>{const t=my(te);return{...t,on:a=>t.get().each(a)}},fy=De,ai=(t,s,a)=>jd(t,s,fy,a),gy=(t,s,a)=>Wf(t,s,fy,a),hy=Hm,eb=["top","bottom","right","left"],sv="data-alloy-transition-timer",tb=(t,s)=>QC(t,s.classes),_2=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),gO=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return un(s,(i,d)=>{const g=t[d].map(a),p=i.map(a);return!ma(g,p)}).isSome()},gf=t=>{const s=g=>{const w=Pt(t,g).split(/\s*,\s*/);return xe(w,wt)},a=g=>{if(Tt(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return ye(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return ke(d,(g,p,w)=>{const T=a(i[w])+a(p);return Math.max(g,T)},0)},KT=(t,s)=>{const a=pg(),i=pg();let d;const g=A=>{var D;const N=(D=A.raw.pseudoElement)!==null&&D!==void 0?D:"";return zs(A.target,t)&&Zn(N)&&dn(eb,A.raw.propertyName)},p=A=>{if(Bt(A)||g(A)){a.clear(),i.clear();const D=A==null?void 0:A.raw.type;(Bt(D)||D===Kd())&&(clearTimeout(d),de(t,sv),gl(t,s.classes))}},w=ai(t,gT(),A=>{g(A)&&(w.unbind(),a.set(ai(t,Kd(),p)),i.set(ai(t,ya(),p)))}),T=gf(t);requestAnimationFrame(()=>{d=setTimeout(p,T+17),To(t,sv,d)})},YT=(t,s)=>{om(t,s.classes),B(t,sv).each(a=>{clearTimeout(parseInt(a,10)),de(t,sv)}),KT(t,s)},XT=(t,s,a,i,d,g)=>{const p=_2(i,d,g);if(p||tb(t,i)){zn(t,"position",a.position);const w=nv(s,t),T=ff(s,{...d,rect:w}),A=Pe(eb,D=>T[D]);gO(a,A)&&(gr(t,A),p&&YT(t,i),ne(t))}else gl(t,i.classes)},JT=t=>({width:or(t),height:Vn(t)}),A2=(t,s,a,i)=>{Po(s,"max-height"),Po(s,"max-width");const d=JT(s);return dy(s,i.preference,t,d,a,i.bounds)},py=(t,s)=>{const a=s.classes;gl(t,a.off),om(t,a.on)},QT=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},eE=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},rv=(t,s,a)=>{const i=ff(a.origin,s);a.transition.each(d=>{XT(t,a.origin,i,d,s,a.lastPlacement)}),Xp(t,i)},tE=(t,s)=>{ov(t,s.placement)},O2=(t,s)=>{oo(t,Math.floor(s))},nE=K((t,s)=>{O2(t,s),Ir(t,{"overflow-x":"hidden","overflow-y":"auto"})}),nb=K((t,s)=>{O2(t,s)}),by=(t,s,a)=>t[s]===void 0?a:t[s],D2=(t,s,a,i,d,g,p,w)=>{const T=by(p,"maxHeightFunction",nE()),A=by(p,"maxWidthFunction",te),D=t.anchorBox,N=t.origin,U={bounds:T2(N,g),origin:N,preference:i,maxHeightFunction:T,maxWidthFunction:A,lastPlacement:d,transition:w};return R2(D,s,a,U)},R2=(t,s,a,i)=>{const d=A2(t,s,a,i);return rv(s,d,i),tE(s,d),py(s,d),QT(s,d,i),eE(s,d,i),{layout:d.layout,placement:d.placement}},M2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],bg=(t,s,a,i=1)=>{const d=t*i,g=s*i,p=T=>Jt(a,T).getOr([]),w=(T,A,D)=>{const N=Be(M2,D);return{offset:Yo(T,A),classesOn:Y(D,p),classesOff:Y(N,p)}};return{southeast:()=>w(-t,s,["top","alignLeft"]),southwest:()=>w(t,s,["top","alignRight"]),south:()=>w(-t/2,s,["top","alignCentre"]),northeast:()=>w(-t,-s,["bottom","alignLeft"]),northwest:()=>w(t,-s,["bottom","alignRight"]),north:()=>w(-t/2,-s,["bottom","alignCentre"]),east:()=>w(t,-s/2,["valignCentre","left"]),west:()=>w(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>w(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>w(-d,g,["top","alignRight","inset"]),insetNorth:()=>w(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>w(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>w(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>w(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>w(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>w(d,-g/2,["valignCentre","left","inset"])}},vg=()=>bg(0,0,{}),hf=xt,Ih=(t,s)=>a=>N2(a)==="rtl"?s:t,N2=t=>Pt(t,"direction")==="rtl"?"rtl":"ltr";var um;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(um||(um={}));const vy="data-alloy-vertical-dir",oE=t=>u2(t,s=>xs(s)&&sr(s,"data-alloy-vertical-dir")===um.BottomToTop),pf=()=>pi("layouts",[Mt("onLtr"),Mt("onRtl"),Ns("onBottomLtr"),Ns("onBottomRtl")]),av=(t,s,a,i,d,g,p)=>{const w=p.map(oE).getOr(!1),T=s.layouts.map(W=>W.onLtr(t)),A=s.layouts.map(W=>W.onRtl(t)),D=w?s.layouts.bind(W=>W.onBottomLtr.map(le=>le(t))).or(T).getOr(d):T.getOr(a),N=w?s.layouts.bind(W=>W.onBottomRtl.map(le=>le(t))).or(A).getOr(g):A.getOr(i);return Ih(D,N)(t)},sE=(t,s,a)=>{const i=s.hotspot,d=nv(a,i.element),g=av(t.element,s,Q1(),ry(),Un(),mg(),_.some(s.hotspot.element));return _.some(hf({anchorBox:d,bubble:s.bubble.getOr(vg()),overrides:s.overrides,layouts:g,placer:_.none()}))};var yy=[Mt("hotspot"),Ns("bubble"),Ke("overrides",{}),pf(),vr("placement",sE)];const rE=(t,s,a)=>{const i=iy(a,s.x,s.y),d=to(i.left,i.top,s.width,s.height),g=av(t.element,s,v2(),J1(),v2(),J1(),_.none());return _.some(hf({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g,placer:_.none()}))};var aE=[Mt("x"),Mt("y"),Ke("height",0),Ke("width",0),Ke("bubble",vg()),Ke("overrides",{}),pf(),vr("placement",rE)];const wy=ht.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),$2=t=>t.fold(xt,(s,a,i)=>s.translate(-a,-i)),B2=t=>t.fold(xt,xt),Cy=t=>ke(t,(s,a)=>s.translate(a.left,a.top),Yo(0,0)),P2=t=>{const s=Ve(t,$2);return Cy(s)},F2=t=>{const s=Ve(t,B2);return Cy(s)},cE=wy.screen,cv=wy.absolute,I2=(t,s,a)=>{const i=Pc(a.root).dom,d=g=>{const p=ga(g),w=ga(t.element);return zs(p,w)};return _.from(i.frameElement).map(Wt.fromDom).filter(d).map(Ds)},iv=(t,s,a)=>{const i=ga(t.element),d=Wi(i),g=I2(t,s,a).getOr(d);return cv(g,d.left,d.top)},Cd=(t,s,a,i)=>{const d=cE(Yo(t,s));return _.some(ns(d,a,i))},Sy=(t,s,a,i,d)=>t.map(g=>{const p=[s,g.point],w=WT(i,()=>F2(p),()=>F2(p),()=>P2(p)),T=jo(w.left,w.top,g.width,g.height),A=a.showAbove?Un():Q1(),D=a.showAbove?mg():ry(),N=av(d,a,A,D,A,D,_.none());return hf({anchorBox:T,bubble:a.bubble.getOr(vg()),overrides:a.overrides,layouts:N,placer:_.none()})}),xy=(t,s,a)=>{const i=iv(t,a,s);return s.node.filter(Gr).bind(d=>{const g=d.dom.getBoundingClientRect(),p=Cd(g.left,g.top,g.width,g.height),w=s.node.getOr(t.element);return Sy(p,i,s,a,w)})};var L2=[Mt("node"),Mt("root"),Ns("bubble"),pf(),Ke("overrides",{}),Ke("showAbove",!1),vr("placement",xy)];const H2="\uFEFF",ky="Â ",lv={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},ob=ht.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sb=(t,s,a,i)=>t.fold(s,a,i),yg=t=>t.fold(xt,xt,xt),iE=ob.before,Ty=ob.on,lE=ob.after,uv={before:iE,on:Ty,after:lE,cata:sb,getStart:yg},rb=ht.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),z2=t=>rb.exact(t.start,t.soffset,t.finish,t.foffset),uE=t=>t.match({domRange:s=>Wt.fromDom(s.startContainer),relative:(s,a)=>uv.getStart(s),exact:(s,a,i,d)=>s}),dE=rb.domRange,mE=rb.relative,tc=rb.exact,Lh=t=>{const s=uE(t);return Pc(s)},dm=lv.create,mm={domRange:dE,relative:mE,exact:tc,exactFromRange:z2,getWin:Lh,range:dm},fE=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},bf=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},Hu=(t,s,a)=>{const i=t.document.createRange();return fE(i,s),bf(i,a),i},dv=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},mv=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Ey=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?_.some(a).map(mv):_.none()},V2=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?_.some(s).map(mv):_.none()},fm=ht.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Sd=(t,s,a)=>s(Wt.fromDom(a.startContainer),a.startOffset,Wt.fromDom(a.endContainer),a.endOffset),fv=(t,s)=>s.match({domRange:a=>({ltr:K(a),rtl:_.none}),relative:(a,i)=>({ltr:Lr(()=>Hu(t,a,i)),rtl:Lr(()=>_.some(Hu(t,i,a)))}),exact:(a,i,d,g)=>({ltr:Lr(()=>dv(t,a,i,d,g)),rtl:Lr(()=>_.some(dv(t,d,g,a,i)))})}),U2=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>fm.rtl(Wt.fromDom(d.endContainer),d.endOffset,Wt.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Sd(t,fm.ltr,a)):Sd(t,fm.ltr,a)},ab=(t,s)=>{const a=fv(t,s);return U2(t,a)},Hh=(t,s)=>ab(t,s).match({ltr:(i,d,g,p)=>{const w=t.document.createRange();return w.setStart(i.dom,d),w.setEnd(g.dom,p),w},rtl:(i,d,g,p)=>{const w=t.document.createRange();return w.setStart(g.dom,p),w.setEnd(i.dom,d),w}});fm.ltr,fm.rtl;const Wc=(t,s)=>Xc(s,t),W2=(t,s,a,i)=>{const g=ga(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},vf=(t,s,a,i)=>{const d=W2(t,s,a,i),g=zs(t,a)&&s===i;return d.collapsed&&!g},Ac=t=>_.from(t.getSelection()),_y=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return _.some(lv.create(Wt.fromDom(s.startContainer),s.startOffset,Wt.fromDom(a.endContainer),a.endOffset))}else return _.none()},zu=t=>{if(t.anchorNode===null||t.focusNode===null)return _y(t);{const s=Wt.fromDom(t.anchorNode),a=Wt.fromDom(t.focusNode);return vf(s,t.anchorOffset,a,t.focusOffset)?_.some(lv.create(s,t.anchorOffset,a,t.focusOffset)):_y(t)}},cb=t=>Ac(t).filter(s=>s.rangeCount>0).bind(zu),gv=(t,s)=>{const a=Hh(t,s);return Ey(a)},wg=(t,s)=>{const a=Hh(t,s);return V2(a)},zh=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?_.from(g.dom.nodeValue):_.none();return{get:a,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(Fr,"text"),Z2=t=>zh.get(t),xd=(t,s)=>({element:t,offset:s}),Vh=(t,s)=>{const a=Js(t);if(a.length===0)return xd(t,s);if(s<a.length)return xd(a[s],0);{const i=a[a.length-1],d=Fr(i)?Z2(i).length:Js(i).length;return xd(i,d)}},j2=(t,s)=>Fr(t)?xd(t,s):Vh(t,s),ib=(t,s)=>s.getSelection.getOrThunk(()=>()=>cb(t))().map(i=>{const d=j2(i.start,i.soffset),g=j2(i.finish,i.foffset);return mm.range(d.element,d.offset,g.element,g.offset)}),gm=(t,s,a)=>{const i=Pc(s.root).dom,d=iv(t,a,s),g=ib(i,s).bind(T=>wg(i,mm.exactFromRange(T)).orThunk(()=>{const D=Wt.fromText(H2);Eu(T.start,D);const N=gv(i,mm.exact(D,0,D,1));return Yl(D),N}).bind(D=>Cd(D.left,D.top,D.width,D.height))),w=ib(i,s).bind(T=>xs(T.start)?_.some(T.start):Ei(T.start)).getOr(t.element);return Sy(g,d,s,a,w)};var pO=[Ns("getSelection"),Mt("root"),Ns("bubble"),pf(),Ke("overrides",{}),Ke("showAbove",!1),vr("placement",gm)];const lb="link-layout",ub=t=>t.x+t.width,Ay=(t,s)=>t.x-s.width,Oy=(t,s)=>t.y-s.height+t.height,Dy=t=>t.y,G2=(t,s,a)=>mc(ub(t),Dy(t),a.southeast(),Ph(),"southeast",ec(t,{left:0,top:2}),lb),yl=(t,s,a)=>mc(Ay(t,s),Dy(t),a.southwest(),Z1(),"southwest",ec(t,{right:1,top:2}),lb),Uh=(t,s,a)=>mc(ub(t),Oy(t,s),a.northeast(),j1(),"northeast",ec(t,{left:0,bottom:3}),lb),hv=(t,s,a)=>mc(Ay(t,s),Oy(t,s),a.northwest(),G1(),"northwest",ec(t,{right:1,bottom:3}),lb),kd=()=>[G2,yl,Uh,hv],Ci=()=>[yl,G2,hv,Uh],wl=(t,s,a)=>{const i=nv(a,s.item.element),d=av(t.element,s,kd(),Ci(),kd(),Ci(),_.none());return _.some(hf({anchorBox:i,bubble:vg(),overrides:s.overrides,layouts:d,placer:_.none()}))};var $i=[Mt("item"),pf(),Ke("overrides",{}),vr("placement",wl)],Td=gi("type",{selection:pO,node:L2,hotspot:yy,submenu:$i,makeshift:aE});const Ry=[hi("classes",_a),ll("mode","all",["all","layout","placement"])],Cl=[Ke("useFixed",Me),Ns("getBounds")],Cg=[Di("anchor",Td),pi("transition",Ry)],hE=()=>{const t=document.documentElement;return ly(0,0,t.clientWidth,t.clientHeight)},bO=t=>{const s=Ds(t.element),a=t.element.dom.getBoundingClientRect();return ZT(s.left,s.top,a.width,a.height)},vO=(t,s,a,i,d,g,p)=>{const w=fg(a.anchorBox,s);return D2(w,d.element,a.bubble,a.layouts,g,i,a.overrides,p)},Sg=(t,s,a,i,d)=>{My(t,s,a,i,d,_.none())},My=(t,s,a,i,d,g)=>{const p=g.map(os);return db(t,s,a,i,d,p)},db=(t,s,a,i,d,g)=>{const p=xc("placement.info",lo(Cg),d),w=p.anchor,T=i.element,A=a.get(i.uid);tv(()=>{zn(T,"position","fixed");const D=Qs(T,"visibility");zn(T,"visibility","hidden");const N=s.useFixed()?hE():bO(t),U=w.placement,W=g.map(K).or(s.getBounds);U(t,w,N).each(le=>{const st=le.placer.getOr(vO)(t,N,le,W,i,A,p.transition);a.set(i.uid,st)}),D.fold(()=>{Po(T,"visibility")},le=>{zn(T,"visibility",le)}),Qs(T,"left").isNone()&&Qs(T,"top").isNone()&&Qs(T,"right").isNone()&&Qs(T,"bottom").isNone()&&Tr(Qs(T,"position"),"fixed")&&Po(T,"position")},T)};var Ny=Object.freeze({__proto__:null,position:Sg,positionWithin:My,positionWithinBounds:db,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;R(["position","left","right","top","bottom"],g=>Po(d,g)),gg(d),a.clear(i.uid)}}),bE=Object.freeze({__proto__:null,init:()=>{let t={};return Mi({readState:()=>t,clear:d=>{cn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>Jt(t,d)})}});const ci=fc({fields:Cl,name:"positioning",active:UT,apis:Ny,state:bE}),pv=t=>t.getSystem().isConnected(),xg=t=>{Vs(t,yh());const s=t.components();R(s,xg)},hm=t=>{const s=t.components();R(s,hm),Vs(t,bd())},mb=(t,s)=>{t.getSystem().addToWorld(s),Gr(t.element)&&hm(s)},bv=t=>{xg(t),t.getSystem().removeFromWorld(t)},K2=(t,s)=>{Sc(t.element,s.element)},vE=t=>{R(t.components(),s=>Yl(s.element)),ud(t.element),t.syncComponents()},yE=(t,s,a)=>{const i=t.components();vE(t);const d=a(s),g=Be(i,d);R(g,p=>{xg(p),t.getSystem().removeFromWorld(p)}),R(d,p=>{pv(p)?K2(t,p):(t.getSystem().addToWorld(p),K2(t,p),Gr(t.element)&&hm(p))}),t.syncComponents()},vv=(t,s,a)=>{const i=t.components(),d=Y(s,w=>Pu(w).toArray());R(i,w=>{dn(d,w)||bv(w)});const g=a(s),p=Be(i,g);R(p,w=>{pv(w)&&bv(w)}),R(g,w=>{pv(w)||mb(t,w)}),t.syncComponents()},Oc=(t,s)=>{Y2(t,s,Sc)},Y2=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Gr(t.element)&&hm(s),t.syncComponents()},Wh=t=>{xg(t),Yl(t.element),t.getSystem().removeFromWorld(t)},Dc=t=>{const s=sa(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Wh(t),s.each(a=>{a.syncComponents()})},yv=t=>{const s=t.components();R(s,Wh),ud(t.element),t.syncComponents()},cu=(t,s)=>{By(t,s,Sc)},$y=(t,s)=>{By(t,s,oh)},By=(t,s,a)=>{a(t,s.element);const i=Js(s.element);R(i,d=>{s.getByDom(d).each(hm)})},wE=t=>{const s=Js(t.element);R(s,a=>{t.getByDom(a).each(xg)}),Yl(t.element)},CE=(t,s,a,i)=>{a.get().each(p=>{yv(t)});const d=s.getAttachPoint(t);Oc(d,t);const g=t.getSystem().build(i);return Oc(t,g),a.set(g),g},Py=(t,s,a,i)=>{const d=CE(t,s,a,i);return s.onOpen(t,d),d},X2=(t,s,a,i)=>a.get().map(()=>CE(t,s,a,i)),SE=(t,s,a,i,d)=>{Iy(t,s),Py(t,s,a,i),d(),kg(t,s)},fb=(t,s,a)=>{a.get().each(i=>{yv(t),Dc(t),s.onClose(t,i),a.clear()})},Zh=(t,s,a)=>a.isOpen(),xE=(t,s,a,i)=>Zh(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),J2=(t,s,a)=>a.get(),Fy=(t,s,a,i)=>{Qs(t.element,s).fold(()=>{de(t.element,a)},d=>{To(t.element,a,d)}),zn(t.element,s,i)},kE=(t,s,a)=>{B(t.element,a).fold(()=>Po(t.element,s),i=>zn(t.element,s,i))},Iy=(t,s,a)=>{const i=s.getAttachPoint(t);zn(t.element,"position",ci.getMode(i)),Fy(t,"visibility",s.cloakVisibilityAttr,"hidden")},yf=t=>ze(["top","left","right","bottom"],s=>Qs(t,s).isSome()),kg=(t,s,a)=>{yf(t.element)||Po(t.element,"position"),kE(t,"visibility",s.cloakVisibilityAttr)};var Q2=Object.freeze({__proto__:null,cloak:Iy,decloak:kg,open:Py,openWhileCloaked:SE,close:fb,isOpen:Zh,isPartOf:xE,getState:J2,setContent:X2}),eS=Object.freeze({__proto__:null,events:(t,s)=>lr([Zt(Np(),(a,i)=>{fb(a,t,s)})])}),Ly=[ds("onOpen"),ds("onClose"),Mt("isPartOf"),Mt("getAttachPoint"),Ke("cloakVisibilityAttr","data-precloak-visibility")],wv=Object.freeze({__proto__:null,init:()=>{const t=Vr(),s=K("not-implemented");return Mi({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const ms=fc({fields:Ly,name:"sandboxing",active:eS,apis:Q2,state:wv}),Ed=K("dismiss.popups"),wf=K("reposition.popups"),Cf=K("mouse.released"),zy=Ya([Ke("isExtraPart",Me),pi("fireEventInstead",[Ke("event",Xd())])]),jh=t=>{const s=xc("Dismissal",zy,t);return{[Ed()]:{schema:Ya([Mt("target")]),onReceive:(a,i)=>{ms.isOpen(a)&&(ms.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>ms.close(a),g=>Vs(a,g.event)))}}}},Sf=Ya([pi("fireEventInstead",[Ke("event",_1())]),va("doReposition")]),Cv=t=>{const s=xc("Reposition",Sf,t);return{[wf()]:{onReceive:a=>{ms.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>Vs(a,i.event))}}}},Sv=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},xv=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var kv=Object.freeze({__proto__:null,onLoad:Sv,onUnload:xv,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),tS=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[zr((i,d)=>{Sv(i,t,s)}),Rl((i,d)=>{xv(i,t,s)})]:[ev(t,s,Sv)];return lr(a)}});const pm=()=>{const t=V(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Mi({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},Vy=()=>Mi({readState:te}),_g=()=>{const t=V({}),s=V({});return Mi({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>Jt(t.get(),p).orThunk(()=>Jt(s.get(),p)),update:p=>{const w=t.get(),T=s.get(),A={},D={};R(p,N=>{A[N.value]=N,Jt(N,"meta").each(U=>{Jt(U,"text").each(W=>{D[W]=N})})}),t.set({...w,...A}),s.set({...T,...D})},clear:()=>{t.set({}),s.set({})}})};var nS=Object.freeze({__proto__:null,memory:pm,dataset:_g,manual:Vy,init:t=>t.store.manager.state(t)});const hb=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Wy=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},TE=(t,s,a)=>{s.store.initialValue.each(d=>{hb(t,s,a,d)})},EE=(t,s,a)=>{a.clear()};var _d=[Ns("initialValue"),Mt("getFallbackEntry"),Mt("getDataKey"),Mt("setValue"),vr("manager",{setValue:hb,getValue:Wy,onLoad:TE,onUnload:EE,state:_g})];const Gh=(t,s,a)=>s.store.getValue(t),_E=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},Bl=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var nc=[Mt("getValue"),Ke("setValue",te),Ns("initialValue"),vr("manager",{setValue:_E,getValue:Gh,onLoad:Bl,onUnload:te,state:su.init})];const AE=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},qh=(t,s,a)=>a.get(),Kh=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},oS=(t,s,a)=>{a.clear()};var sS=[Ns("initialValue"),vr("manager",{setValue:AE,getValue:qh,onLoad:Kh,onUnload:oS,state:pm})],OE=[Aa("store",{mode:"memory"},gi("mode",{memory:sS,manual:nc,dataset:_d})),ds("onSetValue"),Ke("resetOnDom",!1)];const _n=fc({fields:OE,name:"representing",active:tS,apis:kv,extra:{setValueFrom:(t,s)=>{const a=_n.getValue(s);_n.setValue(t,a)}},state:nS}),Ra=(t,s)=>I(t,{},Ve(s,a=>H0(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([kc("dump",xt)])),Ag=t=>t.dump,gc=(t,s)=>({...pn(s),...t.dump}),Pl={field:Ra,augment:gc,get:Ag},Tv="placeholder",Yh=ht.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),pb=t=>Kn(t,"uiType"),rS=(t,s,a,i)=>t.exists(d=>d!==a.owner)?Yh.single(!0,K(a)):Jt(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Re(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),bb=(t,s,a,i)=>pb(a)&&a.uiType===Tv?rS(t,s,a,i):Yh.single(!1,K(a)),Zy=(t,s,a,i)=>bb(t,s,a,i).fold((g,p)=>{const w=pb(a)?p(s,a.config,a.validated):p(s),T=Jt(w,"components").getOr([]),A=Y(T,D=>Zy(t,s,D,i));return[{...w,components:A}]},(g,p)=>{if(pb(a)){const w=p(s,a.config,a.validated);return a.validated.preprocess.getOr(xt)(w)}else return p(s)}),xf=(t,s,a,i)=>Y(a,d=>Zy(t,s,d,i)),vb=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,w)=>p,(p,w)=>p);return{name:K(t),required:g,used:i,replace:d}},DE=(t,s,a,i)=>{const d=fn(i,(p,w)=>vb(w,p)),g=xf(t,s,a,d);return Lt(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},aS=Yh.single,jy=Yh.multiple,Og=K(Tv),yb=ht.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ev=Ke("factory",{sketch:xt}),_v=Ke("schema",[]),Xh=Mt("name"),Gy=Xa("pname","pname",Jl(t=>"<alloy."+Yn(t.name)+">"),ti()),cS=kc("schema",()=>[Ns("preprocess")]),Vu=Ke("defaults",K({})),wb=Ke("overrides",K({})),RE=lo([Ev,_v,Xh,Gy,Vu,wb]),ME=lo([Ev,_v,Xh,Vu,wb]),bm=lo([Ev,_v,Xh,Gy,Vu,wb]),NE=lo([Ev,cS,Xh,Mt("unit"),Gy,Vu,wb]),iS=t=>t.fold(_.some,_.none,_.some,_.some),Av=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},$E=t=>t.fold(xt,xt,xt,xt),Ov=(t,s)=>a=>{const i=xc("Converting part type",s,a);return t(i)},Zc=Ov(yb.required,RE),Uu=Ov(yb.external,ME),iu=Ov(yb.optional,bm),Cb=Ov(yb.group,NE),Dv=K("entirety");var lS=Object.freeze({__proto__:null,required:Zc,external:Uu,optional:iu,group:Cb,asNamedPart:iS,name:Av,asCommon:$E,original:Dv});const qy=(t,s,a,i)=>pr(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),uS=(t,s,a)=>{const i={},d={};return R(a,g=>{g.fold(p=>{i[p.pname]=aS(!0,(w,T,A)=>p.factory.sketch(qy(w,p,T,A)))},p=>{const w=s.parts[p.name];d[p.name]=K(p.factory.sketch(qy(s,p,w[Dv()]),w))},p=>{i[p.pname]=aS(!1,(w,T,A)=>p.factory.sketch(qy(w,p,T,A)))},p=>{i[p.pname]=jy(!0,(w,T,A)=>{const D=w[p.name];return Ve(D,N=>p.factory.sketch(pr(p.defaults(w,N,A),N,p.overrides(w,N))))})})}),{internals:K(i),externals:K(d)}},Ky=(t,s)=>{const a={};return R(s,i=>{iS(i).each(d=>{const g=dS(t,d.pname);a[d.name]=p=>{const w=xc("Part: "+d.name+" in "+t,lo(d.schema),p);return{...g,config:p,validated:w}}})}),a},dS=(t,s)=>({uiType:Og(),owner:t,name:s}),Yy=(t,s,a)=>({uiType:Og(),owner:t,name:s,config:a,validated:{}}),mS=t=>Y(t,s=>s.fold(_.none,_.some,_.none,_.none).map(a=>il(a.name,a.schema.concat([ny(Dv())]))).toArray()),fS=t=>Ve(t,Av),Rv=(t,s,a)=>uS(t,s,a),Xy=(t,s,a)=>DE(_.some(t),s,s.components,a),rr=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Wn=(t,s,a)=>rr(t,s,a).getOrDie("Could not find part: "+a),kf=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return R(a,p=>{i[p]=K(g.getByUid(d[p]))}),i},gS=(t,s)=>{const a=t.getSystem();return fn(s.partUids,(i,d)=>K(a.getByUid(i)))},Tf=t=>Re(t.partUids),Ad=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return R(a,p=>{i[p]=K(g.getByUid(d[p]).getOrDie())}),i},Jh=(t,s)=>{const a=fS(s);return er(Ve(a,i=>({key:i,value:t+"-"+i})))},Jy=t=>Xa("partUids","partUids",Wm(s=>Jh(s.uid,t)),ti());var Fl=Object.freeze({__proto__:null,generate:Ky,generateOne:Yy,schemas:mS,names:fS,substitutes:Rv,components:Xy,defaultUids:Jh,defaultUidsSchema:Jy,getAllParts:gS,getAllPartNames:Tf,getPart:rr,getPartOrDie:Wn,getParts:kf,getPartsOrDie:Ad});const Dg=(t,s)=>(t.length>0?[il("parts",t)]:[]).concat([Mt("uid"),Ke("dom",{}),Ke("components",[]),ny("originalSpec"),Ke("debug.sketcher",{})]).concat(s),hS=(t,s,a,i,d)=>{const g=Dg(i,d);return xc(t+" [SpecSchema]",Ya(g.concat(s)),a)},Qh=(t,s,a,i)=>{const d=Qy(i),g=hS(t,s,d,[],[]);return a(g,d)},Sb=(t,s,a,i,d)=>{const g=Qy(d),p=mS(a),w=Jy(a),T=hS(t,s,g,p,[w]),A=Rv(t,T,a),D=Xy(t,T,A.internals());return i(T,D,g,A.externals())},xb=t=>Kn(t,"uid"),Qy=t=>xb(t)?t:{...t,uid:yd("uid")},BE=t=>t.uid!==void 0,PE=Ya([Mt("name"),Mt("factory"),Mt("configFields"),Ke("apis",{}),Ke("extraApis",{})]),FE=Ya([Mt("name"),Mt("factory"),Mt("configFields"),Mt("partFields"),Ke("apis",{}),Ke("extraApis",{})]),Il=t=>{const s=xc("Sketcher for "+t.name,PE,t),a=g=>Qh(s.name,s.configFields,s.factory,g),i=fn(s.apis,Th),d=fn(s.extraApis,(g,p)=>$1(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},jc=t=>{const s=xc("Sketcher for "+t.name,FE,t),a=p=>Sb(s.name,s.configFields,s.partFields,s.factory,p),i=Ky(s.name,s.partFields),d=fn(s.apis,Th),g=fn(s.extraApis,(p,w)=>$1(p,w));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Ef=t=>Fa("input")(t)&&sr(t,"type")!=="radio"||Fa("textarea")(t);var IE=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const LE=[Mt("find")],ss=fc({fields:LE,name:"composing",apis:IE}),HE=["input","button","textarea","select"],pS=(t,s,a)=>{(s.disabled()?vS:yS)(t,s)},ew=(t,s)=>s.useNative===!0&&dn(HE,qo(t.element)),bS=t=>J(t.element,"disabled"),xO=t=>{To(t.element,"disabled","disabled")},Od=t=>{de(t.element,"disabled")},Mv=t=>sr(t.element,"aria-disabled")==="true",kO=t=>{To(t.element,"aria-disabled","true")},TO=t=>{To(t.element,"aria-disabled","false")},vS=(t,s,a)=>{s.disableClass.each(d=>{wa(t.element,d)}),(ew(t,s)?xO:kO)(t),s.onDisabled(t)},yS=(t,s,a)=>{s.disableClass.each(d=>{ia(t.element,d)}),(ew(t,s)?Od:TO)(t),s.onEnabled(t)},wS=(t,s)=>ew(t,s)?bS(t):Mv(t);var _O=Object.freeze({__proto__:null,enable:yS,disable:vS,isDisabled:wS,onLoad:pS,set:(t,s,a,i)=>{(i?vS:yS)(t,s)}}),zE=Object.freeze({__proto__:null,exhibit:(t,s)=>ru({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>lr([zC(dl(),(a,i)=>wS(a,t)),ev(t,s,pS)])}),CS=[Da("disabled",Me),Ke("useNative",!0),Ns("disableClass"),ds("onDisabled"),ds("onEnabled")];const Eo=fc({fields:CS,name:"disabling",active:zE,apis:_O}),ep=(t,s,a,i)=>{const d=Wc(t.element,"."+s.highlightClass);R(d,g=>{ze(i,w=>zs(w.element,g))||(ia(g,s.highlightClass),t.getSystem().getByDom(g).each(w=>{s.onDehighlight(t,w),Vs(w,O1())}))})},SS=(t,s,a)=>ep(t,s,a,[]),xS=(t,s,a,i)=>{ow(t,s,a,i)&&(ia(i.element,s.highlightClass),s.onDehighlight(t,i),Vs(i,O1()))},Rg=(t,s,a,i)=>{ep(t,s,a,[i]),ow(t,s,a,i)||(wa(i.element,s.highlightClass),s.onHighlight(t,i),Vs(i,W0()))},nw=(t,s,a)=>{$v(t,s).each(i=>{Rg(t,s,a,i)})},VE=(t,s,a)=>{kb(t,s).each(i=>{Rg(t,s,a,i)})},Nv=(t,s,a,i)=>{UE(t,s,a,i).fold(d=>{throw d},d=>{Rg(t,s,a,d)})},kS=(t,s,a,i)=>{const d=Tb(t,s);se(d,i).each(p=>{Rg(t,s,a,p)})},ow=(t,s,a,i)=>Gi(i.element,s.highlightClass),TS=(t,s,a)=>la(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),UE=(t,s,a,i)=>{const d=Wc(t.element,"."+s.itemClass);return _.from(d[i]).fold(()=>Fo.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},$v=(t,s,a)=>la(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),kb=(t,s,a)=>{const i=Wc(t.element,"."+s.itemClass);return(i.length>0?_.some(i[i.length-1]):_.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},sw=(t,s,a,i)=>{const d=Wc(t.element,"."+s.itemClass);return re(d,p=>Gi(p,s.highlightClass)).bind(p=>{const w=dg(p,i,0,d.length-1);return t.getSystem().getByDom(d[w]).toOptional()})},Bv=(t,s,a)=>sw(t,s,a,-1),Pv=(t,s,a)=>sw(t,s,a,1),Tb=(t,s,a)=>{const i=Wc(t.element,"."+s.itemClass);return bs(Ve(i,d=>t.getSystem().getByDom(d).toOptional()))};var Mg=Object.freeze({__proto__:null,dehighlightAll:SS,dehighlight:xS,highlight:Rg,highlightFirst:nw,highlightLast:VE,highlightAt:Nv,highlightBy:kS,isHighlighted:ow,getHighlighted:TS,getFirst:$v,getLast:kb,getPrevious:Bv,getNext:Pv,getCandidates:Tb}),AO=[Mt("highlightClass"),Mt("itemClass"),ds("onHighlight"),ds("onDehighlight")];const Hs=fc({fields:AO,name:"highlighting",apis:Mg}),WE=[8],Af=[9],Dd=[13],rw=[27],Xi=[32],aw=[37],Eb=[38],Fv=[39],vm=[40],cw=(t,s,a)=>{const i=Z(t.slice(0,s)),d=Z(t.slice(s+1));return se(i.concat(d),a)},ZE=(t,s,a)=>{const i=Z(t.slice(0,s));return se(i,a)},jE=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return se(d.concat(i),a)},ES=(t,s,a)=>{const i=t.slice(s+1);return se(i,a)},Ss=t=>s=>{const a=s.raw;return dn(t,a.which)},Wu=t=>s=>H(t,a=>a(s)),Ng=t=>t.raw.shiftKey===!0,l=t=>t.raw.ctrlKey===!0,m=he(Ng),h=(t,s)=>({matches:t,classification:s}),v=(t,s)=>se(t,i=>i.matches(s)).map(i=>i.classification),S=(t,s,a)=>{s.exists(d=>a.exists(g=>zs(g,d)))||yo(t,Bp(),{prevFocus:s,newFocus:a})},O=()=>{const t=a=>$l(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);S(a,d,g)}}},F=()=>{const t=a=>Hs.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(te,p=>{Hs.highlight(a,p)});const g=t(a);S(a,d,g)}}};var G;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(G||(G={}));const oe=(t,s,a,i,d)=>{const g=()=>t.concat([Ke("focusManager",O()),Aa("focusInside","onFocus",aa(A=>dn(["onFocus","onEnterOrSpace","onApi"],A)?Fo.value(A):Fo.error("Invalid value for focusInside"))),vr("handler",T),vr("state",s),vr("sendFocusIn",d)]),p=(A,D,N,U,W)=>{const le=N(A,D,U,W);return v(le,D.event).bind(pe=>pe(A,D,U,W))},T={schema:g,processKey:p,toEvents:(A,D)=>{const N=A.focusInside!==G.OnFocusMode?_.none():d(A).map(le=>Zt(Yd(),(pe,st)=>{le(pe,A,D),st.stop()})),U=(le,pe)=>{const st=Ss(Xi.concat(Dd))(pe.event);A.focusInside===G.OnEnterOrSpaceMode&&st&&Mu(le,pe)&&d(A).each($e=>{$e(le,A,D),pe.stop()})},W=[Zt(ef(),(le,pe)=>{p(le,pe,a,A,D).fold(()=>{U(le,pe)},st=>{pe.stop()})}),Zt(fT(),(le,pe)=>{p(le,pe,i,A,D).each(st=>{pe.stop()})})];return lr(N.toArray().concat(W))}};return T},we=t=>{const s=[Ns("onEscape"),Ns("onEnter"),Ke("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ke("firstTabstop",0),Ke("useTabstopAt",De),Ns("visibilitySelector")].concat([t]),a=(pe,st)=>{const $e=pe.visibilitySelector.bind(at=>Ml(st,at)).getOr(st);return ft($e)>0},i=(pe,st)=>{const $e=Wc(pe.element,st.selector),at=xe($e,Sn=>a(st,Sn));return _.from(at[st.firstTabstop])},d=(pe,st)=>st.focusManager.get(pe).bind($e=>Ml($e,st.selector)),g=(pe,st)=>a(pe,st)&&pe.useTabstopAt(st),p=(pe,st,$e)=>{i(pe,st).each(at=>{st.focusManager.set(pe,at)})},w=(pe,st,$e,at,Sn)=>Sn(st,$e,dt=>g(at,dt)).fold(()=>at.cyclic?_.some(!0):_.none(),dt=>(at.focusManager.set(pe,dt),_.some(!0))),T=(pe,st,$e,at)=>{const Sn=Wc(pe.element,$e.selector);return d(pe,$e).bind(dt=>re(Sn,St(zs,dt)).bind(Gn=>w(pe,Sn,Gn,$e,at)))},A=(pe,st,$e)=>{const at=$e.cyclic?cw:ZE;return T(pe,st,$e,at)},D=(pe,st,$e)=>{const at=$e.cyclic?jE:ES;return T(pe,st,$e,at)},N=(pe,st,$e)=>$e.onEnter.bind(at=>at(pe,st)),U=(pe,st,$e)=>$e.onEscape.bind(at=>at(pe,st)),W=K([h(Wu([Ng,Ss(Af)]),A),h(Ss(Af),D),h(Wu([m,Ss(Dd)]),N)]),le=K([h(Ss(rw),U)]);return oe(s,su.init,W,le,()=>_.some(p))};var je=we(kc("cyclic",Me)),zt=we(kc("cyclic",De));const bn=(t,s,a)=>(Z0(t,a,dl()),_.some(!0)),on=(t,s,a)=>Ef(a)&&Ss(Xi)(s.event)?_.none():bn(t,s,a),kt=(t,s)=>_.some(!0),Cn=[Ke("execute",on),Ke("useSpace",!1),Ke("useEnter",!0),Ke("useControlEnter",!1),Ke("useDown",!1)],At=(t,s,a)=>a.execute(t,s,t.element),Xn=(t,s,a,i)=>{const d=a.useSpace&&!Ef(t.element)?Xi:[],g=a.useEnter?Dd:[],p=a.useDown?vm:[],w=d.concat(g).concat(p);return[h(Ss(w),At)].concat(a.useControlEnter?[h(Wu([l,Ss(Dd)]),At)]:[])},_o=(t,s,a,i)=>a.useSpace&&!Ef(t.element)?[h(Ss(Xi),kt)]:[];var Vo=oe(Cn,su.init,Xn,_o,()=>_.none());const Or=()=>{const t=Vr();return Mi({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var ua=Object.freeze({__proto__:null,flatgrid:Or,init:t=>t.state(t)});const Bi=t=>(s,a,i,d)=>{const g=t(s.element);return Lv(g,s,a,i,d)},Of=(t,s)=>{const a=Ih(t,s);return Bi(a)},_b=(t,s)=>{const a=Ih(s,t);return Bi(a)},Iv=t=>(s,a,i,d)=>Lv(t,s,a,i,d),Lv=(t,s,a,i,d)=>i.focusManager.get(s).bind(p=>t(s.element,p,i,d)).map(p=>(i.focusManager.set(s,p),!0)),Ks=Iv,Rc=Iv,Mc=Iv,Zu=t=>t.offsetWidth<=0&&t.offsetHeight<=0,Ji=t=>!Zu(t.dom),tp=(t,s)=>re(t,s).map(a=>({index:a,candidates:t})),ii=(t,s,a)=>{const i=p=>zs(p,s),d=Wc(t,a),g=xe(d,Ji);return tp(g,i)},Pi=(t,s)=>re(t,a=>zs(s,a)),np=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(p=>{const w=p.row*a+p.column;return w>=0&&w<t.length?_.some(t[w]):_.none()})},ju=(t,s,a,i,d)=>np(t,s,i,(g,p)=>{const T=g===a-1?t.length-g*i:i,A=dg(p,d,0,T-1);return _.some({row:g,column:A})}),Nc=(t,s,a,i,d)=>np(t,s,i,(g,p)=>{const w=dg(g,d,0,a-1),A=w===a-1?t.length-w*i:i,D=bl(p,0,A-1);return _.some({row:w,column:D})}),GE=(t,s,a,i)=>ju(t,s,a,i,1),qE=(t,s,a,i)=>ju(t,s,a,i,-1),op=(t,s,a,i)=>Nc(t,s,a,i,-1),iw=(t,s,a,i)=>Nc(t,s,a,i,1),KE=[Mt("selector"),Ke("execute",on),qi("onEscape"),Ke("captureTab",!1),qp()],lw=(t,s,a)=>{la(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Hv=(t,s)=>s.focusManager.get(t).bind(a=>Ml(a,s.selector)),Ab=(t,s,a,i)=>Hv(t,a).bind(d=>a.execute(t,s,d)),_S=t=>(s,a,i,d)=>ii(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),OO=(t,s,a)=>a.captureTab?_.some(!0):_.none(),AF=(t,s,a)=>a.onEscape(t,s),DO=_S(qE),RO=_S(GE),OF=_S(op),MO=_S(iw),YE=K([h(Ss(aw),Of(DO,RO)),h(Ss(Fv),_b(DO,RO)),h(Ss(Eb),Ks(OF)),h(Ss(vm),Rc(MO)),h(Wu([Ng,Ss(Af)]),OO),h(Wu([m,Ss(Af)]),OO),h(Ss(Xi.concat(Dd)),Ab)]),DF=K([h(Ss(rw),AF),h(Ss(Xi),kt)]);var RF=oe(KE,Or,YE,DF,()=>_.some(lw));const AS=(t,s,a,i)=>{const d=p=>qo(p)==="button"&&sr(p,"disabled")==="disabled",g=(p,w,T)=>{const A=dg(w,i,0,T.length-1);return A===p?_.none():d(T[A])?g(p,A,T):_.from(T[A])};return ii(t,a,s).bind(p=>{const w=p.index,T=p.candidates;return g(w,w,T)})},MF=[Mt("selector"),Ke("getInitial",_.none),Ke("execute",on),qi("onEscape"),Ke("executeOnMove",!1),Ke("allowVertical",!0)],Ob=(t,s)=>s.focusManager.get(t).bind(a=>Ml(a,s.selector)),XE=(t,s,a)=>Ob(t,a).bind(i=>a.execute(t,s,i)),NF=(t,s,a)=>{s.getInitial(t).orThunk(()=>la(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},OS=(t,s,a)=>AS(t,a.selector,s,-1),NO=(t,s,a)=>AS(t,a.selector,s,1),JE=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?XE(s,a,i):_.some(!0)),$O=(t,s,a)=>a.onEscape(t,s),BO=(t,s,a,i)=>{const d=aw.concat(a.allowVertical?Eb:[]),g=Fv.concat(a.allowVertical?vm:[]);return[h(Ss(d),JE(Of(OS,NO))),h(Ss(g),JE(_b(OS,NO))),h(Ss(Dd),XE),h(Ss(Xi),XE)]},PO=K([h(Ss(Xi),kt),h(Ss(rw),$O)]);var $F=oe(MF,su.init,BO,PO,()=>_.some(NF));const DS=(t,s,a)=>_.from(t[s]).bind(i=>_.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),FO=(t,s,a,i)=>{const g=t[s].length,p=dg(a,i,0,g-1);return DS(t,s,p)},RS=(t,s,a,i)=>{const d=dg(a,i,0,t.length-1),g=t[d].length,p=bl(s,0,g-1);return DS(t,d,p)},IO=(t,s,a,i)=>{const g=t[s].length,p=bl(a+i,0,g-1);return DS(t,s,p)},LO=(t,s,a,i)=>{const d=bl(a+i,0,t.length-1),g=t[d].length,p=bl(s,0,g-1);return DS(t,d,p)},BF=(t,s,a)=>FO(t,s,a,1),HO=(t,s,a)=>FO(t,s,a,-1),PF=(t,s,a)=>RS(t,a,s,-1),FF=(t,s,a)=>RS(t,a,s,1),IF=(t,s,a)=>IO(t,s,a,-1),zO=(t,s,a)=>IO(t,s,a,1),LF=(t,s,a)=>LO(t,a,s,-1),HF=(t,s,a)=>LO(t,a,s,1),VO=[il("selectors",[Mt("row"),Mt("cell")]),Ke("cycles",!0),Ke("previousSelector",_.none),Ke("execute",on)],zF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return la(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},VF=(t,s,a)=>$l(t.element).bind(i=>a.execute(t,s,i)),MS=(t,s)=>Ve(t,a=>Wc(a,s.selectors.cell)),NS=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return Ml(i,d.selectors.row).bind(p=>{const w=Wc(p,d.selectors.cell);return Pi(w,i).bind(T=>{const A=Wc(a,d.selectors.row);return Pi(A,p).bind(D=>{const N=MS(A,d);return g(N,D,T).map(U=>U.cell)})})})},QE=NS(HO,IF),Qi=NS(BF,zO),UF=NS(PF,LF),UO=NS(FF,HF),WF=K([h(Ss(aw),Of(QE,Qi)),h(Ss(Fv),_b(QE,Qi)),h(Ss(Eb),Ks(UF)),h(Ss(vm),Rc(UO)),h(Ss(Xi.concat(Dd)),VF)]),ZF=K([h(Ss(Xi),kt)]);var WO=oe(VO,su.init,WF,ZF,()=>_.some(zF));const jF=[Mt("selector"),Ke("execute",on),Ke("moveOnTab",!1)],e_=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),ZO=(t,s,a)=>{la(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},jO=(t,s,a)=>AS(t,a.selector,s,-1),GO=(t,s,a)=>AS(t,a.selector,s,1),GF=(t,s,a,i)=>a.moveOnTab?Mc(jO)(t,s,a,i):_.none(),qF=(t,s,a,i)=>a.moveOnTab?Mc(GO)(t,s,a,i):_.none(),qO=K([h(Ss(Eb),Mc(jO)),h(Ss(vm),Mc(GO)),h(Wu([Ng,Ss(Af)]),GF),h(Wu([m,Ss(Af)]),qF),h(Ss(Dd),e_),h(Ss(Xi),e_)]),KO=K([h(Ss(Xi),kt)]);var sp=oe(jF,su.init,qO,KO,()=>_.some(ZO));const YO=[qi("onSpace"),qi("onEnter"),qi("onShiftEnter"),qi("onLeft"),qi("onRight"),qi("onTab"),qi("onShiftTab"),qi("onUp"),qi("onDown"),qi("onEscape"),Ke("stopSpaceKeyup",!1),Ns("focusIn")],XO=(t,s,a)=>[h(Ss(Xi),a.onSpace),h(Wu([m,Ss(Dd)]),a.onEnter),h(Wu([Ng,Ss(Dd)]),a.onShiftEnter),h(Wu([Ng,Ss(Af)]),a.onShiftTab),h(Wu([m,Ss(Af)]),a.onTab),h(Ss(Eb),a.onUp),h(Ss(vm),a.onDown),h(Ss(aw),a.onLeft),h(Ss(Fv),a.onRight),h(Ss(Xi),a.onSpace)],t_=(t,s,a)=>[...a.stopSpaceKeyup?[h(Ss(Xi),kt)]:[],h(Ss(rw),a.onEscape)];var KF=oe(YO,su.init,XO,t_,t=>t.focusIn);const YF=je.schema(),XF=zt.schema(),JF=$F.schema(),JO=RF.schema(),n_=WO.schema(),o_=Vo.schema(),QF=sp.schema(),rp=KF.schema();var QO=Object.freeze({__proto__:null,acyclic:YF,cyclic:XF,flow:JF,flatgrid:JO,matrix:n_,execution:o_,menu:QF,special:rp});const eD=t=>Ts(t,"setGridSize"),ho=ay({branchKey:"mode",branches:QO,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{eD(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:ua}),tD=(t,s)=>{tv(()=>{yE(t,s,()=>Ve(s,t.getSystem().build))},t.element)},zv=(t,s)=>{tv(()=>{vv(t,s,()=>ig(t.element,s,t.getSystem().buildOrPatch))},t.element)},uw=(t,s,a,i)=>{bv(s);const d=Y0(t.element,a,i,t.getSystem().buildOrPatch);mb(t,d),t.syncComponents()},$S=(t,s,a)=>{const i=t.getSystem().build(a);Y2(t,i,s)},nD=(t,s,a,i)=>{Dc(s),$S(t,(d,g)=>sh(d,g,a),i)},ap=(t,s,a,i)=>(s.reuseDom?zv:tD)(t,i),cp=(t,s,a,i)=>{$S(t,Sc,i)},e5=(t,s,a,i)=>{$S(t,Vm,i)},t5=(t,s,a,i)=>{const d=dw(t);se(d,p=>zs(i.element,p.element)).each(Dc)},dw=(t,s)=>t.components(),Df=(t,s,a,i,d)=>{const g=dw(t);return _.from(g[i]).map(p=>(d.fold(()=>Dc(p),w=>{(s.reuseDom?uw:nD)(t,p,i,w)}),p))};var sD=Object.freeze({__proto__:null,append:cp,prepend:e5,remove:t5,replaceAt:Df,replaceBy:(t,s,a,i,d)=>{const g=dw(t);return re(g,i).bind(p=>Df(t,s,a,p,d))},set:ap,contents:dw});const zo=fc({fields:[Oa("reuseDom",!0)],name:"replacing",apis:sD}),rD=(t,s)=>{const a=lr(s);return fc({fields:[Mt("enabled")],name:t,active:{events:K(a)}})},fs=(t,s)=>{const a=rD(t,s);return{key:t,value:{config:{},me:a,configAsRaw:K({}),initialConfig:{},state:su}}},s_=(t,s)=>{s.ignore||(lm(t.element),s.onFocus(t))};var n5=Object.freeze({__proto__:null,focus:s_,blur:(t,s)=>{s.ignore||S2(t.element)},isFocused:t=>cy(t.element)}),a_=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return ru(a)},events:t=>lr([Zt(Yd(),(s,a)=>{s_(s,t),a.stop()})].concat(t.stopMousedown?[Zt(Hc(),(s,a)=>{a.event.prevent()})]:[]))}),o5=[ds("onFocus"),Ke("stopMousedown",!1),Ke("ignore",!1)];const Oo=fc({fields:o5,name:"focusing",active:a_,apis:n5}),cD=t=>({init:()=>{const a=V(t);return{get:()=>a.get(),set:w=>a.set(w),clear:()=>a.set(t),readState:()=>a.get()}}}),iD=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},lD=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?wa(t.element,i):ia(t.element,i)})},Vv=(t,s,a,i)=>{const d=a.get();a.set(i),lD(t,s,a),iD(t,s,a),d!==i&&s.onToggled(t,i)},uD=(t,s,a)=>{Vv(t,s,a,!a.get())},c_=(t,s,a)=>{Vv(t,s,a,!0)},s5=(t,s,a)=>{Vv(t,s,a,!1)},r5=(t,s,a)=>a.get(),dD=(t,s,a)=>{Vv(t,s,a,s.selected)};var a5=Object.freeze({__proto__:null,onLoad:dD,toggle:uD,isOn:r5,on:c_,off:s5,set:Vv}),i5=Object.freeze({__proto__:null,exhibit:()=>ru({}),events:(t,s)=>{const a=IT(t,s,uD),i=ev(t,s,dD);return lr(z([t.toggleOnExecute?[a]:[],[i]]))}});const l5=(t,s,a)=>{To(t.element,"aria-pressed",a),s.syncWithExpanded&&Uv(t,s,a)},mw=(t,s,a)=>{To(t.element,"aria-selected",a)},u5=(t,s,a)=>{To(t.element,"aria-checked",a)},Uv=(t,s,a)=>{To(t.element,"aria-expanded",a)};var i_=[Ke("selected",!1),Ns("toggleClass"),Ke("toggleOnExecute",!0),ds("onToggled"),Aa("aria",{mode:"none"},gi("mode",{pressed:[Ke("syncWithExpanded",!1),vr("update",l5)],checked:[vr("update",u5)],expanded:[vr("update",Uv)],selected:[vr("update",mw)],none:[vr("update",te)]}))];const Es=fc({fields:i_,name:"toggling",active:i5,apis:a5,state:cD(!1)}),l_=()=>{const t=(s,a)=>{a.stop(),Jd(s)};return[Zt(Rp(),t),Zt(vh(),t),Sh(tr()),Sh(Hc())]},BS=t=>{const s=a=>ml((i,d)=>{a(i),d.stop()});return lr(z([t.map(s).toArray(),l_()]))},mD="alloy.item-hover",u_="alloy.item-focus",fD="alloy.item-toggled",d_=t=>{($l(t.element).isNone()||Oo.isFocused(t))&&(Oo.isFocused(t)||Oo.focus(t),yo(t,mD,{item:t}))},gD=t=>{yo(t,u_,{item:t})},d5=(t,s)=>{yo(t,fD,{item:t,state:s})},m_=K(mD),PS=K(u_),f_=K(fD),g_=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),m5=t=>({aria:{mode:"checked"},...qe(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{Ze(t.onToggled)&&t.onToggled(s,a),d5(s,a)}}),f5=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:g_(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Pl.augment(t.itemBehaviours,[t.toggling.fold(Es.revoke,s=>Es.config(m5(s))),Oo.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{gD(s)}}),ho.config({mode:"execution"}),_n.config({store:{mode:"memory",initialValue:t.data}}),fs("item-type-events",[...l_(),Zt(qd(),d_),Zt(tf(),Oo.focus)])]),components:t.components,eventOrder:t.eventOrder}),g5=[Mt("data"),Mt("components"),Mt("dom"),Ke("hasSubmenu",!1),Ns("toggling"),Pl.field("itemBehaviours",[Es,Oo,ho,_n]),Ke("ignoreFocus",!1),Ke("domModification",{}),vr("builder",f5),Ke("eventOrder",{})],h5=t=>({dom:t.dom,components:t.components,events:lr([UC(tf())])}),hD=[Mt("dom"),Mt("components"),vr("builder",h5)],FS=K("item-widget"),h_=K([Zc({name:"widget",overrides:t=>({behaviours:pn([_n.config({store:{mode:"manual",getValue:s=>t.data,setValue:te}})])})})]),p5=t=>{const s=Rv(FS(),t,h_()),a=Xy(FS(),t,s.internals()),i=g=>rr(g,t,"widget").map(p=>(ho.focusIn(p),p)),d=(g,p)=>Ef(p.event.target)?_.none():(()=>(t.autofocus&&p.setSource(g.element),_.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:lr([ml((g,p)=>{i(g).each(w=>{p.stop()})}),Zt(qd(),d_),Zt(tf(),(g,p)=>{t.autofocus?i(g):Oo.focus(g)})]),behaviours:Pl.augment(t.widgetBehaviours,[_n.config({store:{mode:"memory",initialValue:t.data}}),Oo.config({ignore:t.ignoreFocus,onFocus:g=>{gD(g)}}),ho.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:VT(),onLeft:d,onRight:d,onEscape:(g,p)=>!Oo.isFocused(g)&&!t.autofocus?(Oo.focus(g),_.some(!0)):(t.autofocus&&p.setSource(g.element),_.none())})])}},b5=[Mt("uid"),Mt("data"),Mt("components"),Mt("dom"),Ke("autofocus",!1),Ke("ignoreFocus",!1),Pl.field("widgetBehaviours",[_n,Oo,ho]),Ke("domModification",{}),Jy(h_()),vr("builder",p5)],v5=gi("type",{widget:b5,item:g5,separator:hD}),y5=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),w5=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),pD=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),C5=K([Cb({factory:{sketch:t=>{const s=xc("menu.spec item",v5,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Kn(s,"uid")?s:{...s,uid:yd("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),S5=K([Mt("value"),Mt("items"),Mt("dom"),Mt("components"),Ke("eventOrder",{}),Ra("menuBehaviours",[Hs,_n,ss,ho]),Aa("movement",{mode:"menu",moveOnTab:!0},gi("mode",{grid:[qp(),vr("config",y5)],matrix:[vr("config",w5),Mt("rowSelector"),Ke("previousSelector",_.none)],menu:[Ke("moveOnTab",!0),vr("config",pD)]})),f2(),Ke("fakeFocus",!1),Ke("focusManager",O()),ds("onHighlight"),ds("onDehighlight")]),bD=K("alloy.menu-focus"),x5=(t,s)=>{const a=Wc(t.element,'[role="menuitemradio"][aria-checked="true"]');R(a,i=>{zs(i,s.element)||t.getSystem().getByDom(i).each(d=>{Es.off(d)})})},k5=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:gc(t.menuBehaviours,[Hs.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),_n.config({store:{mode:"memory",initialValue:t.value}}),ss.config({find:_.some}),ho.config(t.movement.config(t,t.movement))]),events:lr([Zt(PS(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(w=>{Hs.highlight(d,w),g.stop(),yo(d,bD(),{menu:d,item:w})})}),Zt(m_(),(d,g)=>{const p=g.event.item;Hs.highlight(d,p)}),Zt(f_(),(d,g)=>{const{item:p,state:w}=g.event;w&&sr(p.element,"role")==="menuitemradio"&&x5(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),Gu=jc({name:"Menu",configFields:S5(),partFields:C5(),factory:k5}),T5=t=>On(t,(s,a)=>({k:s,v:a})),vD=(t,s,a,i)=>Jt(a,i).bind(d=>Jt(t,d).bind(g=>{const p=vD(t,s,a,g);return _.some([g].concat(p))})).getOr([]),Db=(t,s)=>{const a={};Lt(t,(p,w)=>{R(p,T=>{a[T]=w})});const i=s,d=T5(s),g=fn(d,(p,w)=>[w].concat(vD(a,i,d,w)));return fn(a,p=>Jt(g,p).getOr([p]))},E5=()=>{const t=V({}),s=V({}),a=V({}),i=Vr(),d=V({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},p=()=>i.get().isNone(),w=(An,Gn)=>{s.set({...s.get(),[An]:{type:"prepared",menu:Gn}})},T=(An,Gn,Ln,vo)=>{i.set(An),t.set(Ln),s.set(Gn),d.set(vo);const wo=Db(vo,Ln);a.set(wo)},A=An=>un(t.get(),(Gn,Ln)=>Gn===An),D=(An,Gn,Ln)=>pe(An).bind(vo=>A(An).bind(wo=>Gn(wo).map(Zo=>({triggeredMenu:vo,triggeringItem:Zo,triggeringPath:Ln})))),N=(An,Gn)=>{const Ln=xe($e(An).toArray(),vo=>pe(vo).isSome());return Jt(a.get(),An).bind(vo=>{const wo=Z(Ln.concat(vo)),Zo=Y(wo,(ws,io)=>D(ws,Gn,wo.slice(0,io+1)).fold(()=>Tr(i.get(),ws)?[]:[_.none()],Jo=>[_.some(Jo)]));return vc(Zo)})},U=An=>Jt(t.get(),An).map(Gn=>{const Ln=Jt(a.get(),An).getOr([]);return[Gn].concat(Ln)}),W=An=>Jt(a.get(),An).bind(Gn=>Gn.length>1?_.some(Gn.slice(1)):_.none()),le=An=>Jt(a.get(),An),pe=An=>st(An).bind(yD),st=An=>Jt(s.get(),An),$e=An=>Jt(t.get(),An);return{setMenuBuilt:w,setContents:T,expand:U,refresh:le,collapse:W,lookupMenu:st,lookupItem:$e,otherMenus:An=>{const Gn=d.get();return Be(Re(Gn),An)},getPrimary:()=>i.get().bind(pe),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:N}},yD=t=>t.type==="prepared"?_.some(t.menu):_.none(),$g={init:E5,extractPreparedMenu:yD},wD=Yn("tiered-menu-item-highlight"),CD=Yn("tiered-menu-item-dehighlight");var na;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(na||(na={}));const SD=(t,s)=>{const a=Vr(),i=(gn,Fn,Bo)=>fn(Bo,(es,js)=>{const As=()=>Gu.sketch({...es,value:js,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(qc,Rr)=>{yo(qc,wD,{menuComp:qc,itemComp:Rr})},onDehighlight:(qc,Rr)=>{yo(qc,CD,{menuComp:qc,itemComp:Rr})},focusManager:t.fakeFocus?F():O()});return js===Fn?{type:"prepared",menu:gn.getSystem().build(As())}:{type:"notbuilt",nbMenu:As}}),d=$g.init(),g=gn=>{const Fn=i(gn,t.data.primary,t.data.menus),Bo=T();return d.setContents(t.data.primary,Fn,t.data.expansions,Bo),d.getPrimary()},p=gn=>_n.getValue(gn).value,w=(gn,Fn,Bo)=>ao(Fn,es=>{if(!es.getSystem().isConnected())return _.none();const js=Hs.getCandidates(es);return se(js,As=>p(As)===Bo)}),T=gn=>fn(t.data.menus,(Fn,Bo)=>Y(Fn.items,es=>es.type==="separator"?[]:[es.data.value])),A=Hs.highlight,D=(gn,Fn)=>{A(gn,Fn),Hs.getHighlighted(Fn).orThunk(()=>Hs.getFirst(Fn)).each(Bo=>{t.fakeFocus?Hs.highlight(Fn,Bo):Z0(gn,Bo.element,tf())})},N=(gn,Fn)=>bs(Ve(Fn,Bo=>gn.lookupMenu(Bo).bind(es=>es.type==="prepared"?_.some(es.menu):_.none()))),U=(gn,Fn,Bo)=>{const es=N(Fn,Fn.otherMenus(Bo));R(es,js=>{gl(js.element,[t.markers.backgroundMenu]),t.stayInDom||zo.remove(gn,js)})},W=gn=>a.get().getOrThunk(()=>{const Fn={},Bo=Wc(gn.element,`.${t.markers.item}`),es=xe(Bo,js=>sr(js,"aria-haspopup")==="true");return R(es,js=>{gn.getSystem().getByDom(js).each(As=>{const qc=p(As);Fn[qc]=As})}),a.set(Fn),Fn}),le=(gn,Fn)=>{const Bo=W(gn);Lt(Bo,(es,js)=>{const As=dn(Fn,js);To(es.element,"aria-expanded",As)})},pe=(gn,Fn,Bo)=>_.from(Bo[0]).bind(es=>Fn.lookupMenu(es).bind(js=>{if(js.type==="notbuilt")return _.none();{const As=js.menu,qc=N(Fn,Bo.slice(1));return R(qc,Rr=>{wa(Rr.element,t.markers.backgroundMenu)}),Gr(As.element)||zo.append(gn,pl(As)),gl(As.element,[t.markers.backgroundMenu]),D(gn,As),U(gn,Fn,Bo),_.some(As)}}));let st;(function(gn){gn[gn.HighlightSubmenu=0]="HighlightSubmenu",gn[gn.HighlightParent=1]="HighlightParent"})(st||(st={}));const $e=(gn,Fn,Bo)=>{if(Bo.type==="notbuilt"){const es=gn.getSystem().build(Bo.nbMenu());return d.setMenuBuilt(Fn,es),es}else return Bo.menu},at=(gn,Fn,Bo=st.HighlightSubmenu)=>{if(Fn.hasConfigured(Eo)&&Eo.isDisabled(Fn))return _.some(Fn);{const es=p(Fn);return d.expand(es).bind(js=>(le(gn,js),_.from(js[0]).bind(As=>d.lookupMenu(As).bind(qc=>{const Rr=$e(gn,As,qc);return Gr(Rr.element)||zo.append(gn,pl(Rr)),t.onOpenSubmenu(gn,Fn,Rr,Z(js)),Bo===st.HighlightSubmenu?(Hs.highlightFirst(Rr),pe(gn,d,js)):(Hs.dehighlightAll(Rr),_.some(Fn))}))))}},Sn=(gn,Fn)=>{const Bo=p(Fn);return d.collapse(Bo).bind(es=>(le(gn,es),pe(gn,d,es).map(js=>(t.onCollapseMenu(gn,Fn,js),js))))},dt=(gn,Fn)=>{const Bo=p(Fn);return d.refresh(Bo).bind(es=>(le(gn,es),pe(gn,d,es)))},An=(gn,Fn)=>Ef(Fn.element)?_.none():at(gn,Fn,st.HighlightSubmenu),Gn=(gn,Fn)=>Ef(Fn.element)?_.none():Sn(gn,Fn),Ln=(gn,Fn)=>Sn(gn,Fn).orThunk(()=>t.onEscape(gn,Fn).map(()=>gn)),vo=gn=>(Fn,Bo)=>Ml(Bo.getSource(),`.${t.markers.item}`).bind(es=>Fn.getSystem().getByDom(es).toOptional().bind(js=>gn(Fn,js).map(De))),wo=lr([Zt(bD(),(gn,Fn)=>{const Bo=Fn.event.item;d.lookupItem(p(Bo)).each(()=>{const es=Fn.event.menu;Hs.highlight(gn,es);const js=p(Fn.event.item);d.refresh(js).each(As=>U(gn,d,As))})}),ml((gn,Fn)=>{const Bo=Fn.event.target;gn.getSystem().getByDom(Bo).each(es=>{p(es).indexOf("collapse-item")===0&&Sn(gn,es),at(gn,es,st.HighlightSubmenu).fold(()=>{t.onExecute(gn,es)},te)})}),zr((gn,Fn)=>{g(gn).each(Bo=>{zo.append(gn,pl(Bo)),t.onOpenMenu(gn,Bo),t.highlightOnOpen===na.HighlightMenuAndItem?D(gn,Bo):t.highlightOnOpen===na.HighlightJustMenu&&A(gn,Bo)})}),Zt(wD,(gn,Fn)=>{t.onHighlightItem(gn,Fn.event.menuComp,Fn.event.itemComp)}),Zt(CD,(gn,Fn)=>{t.onDehighlightItem(gn,Fn.event.menuComp,Fn.event.itemComp)}),...t.navigateOnHover?[Zt(m_(),(gn,Fn)=>{const Bo=Fn.event.item;dt(gn,Bo),at(gn,Bo,st.HighlightParent),t.onHover(gn,Bo)})]:[]]),Zo=gn=>Hs.getHighlighted(gn).bind(Hs.getHighlighted),ws=gn=>{Zo(gn).each(Fn=>{Sn(gn,Fn)})},io=gn=>{d.getPrimary().each(Fn=>{D(gn,Fn)})},Jo=gn=>_.from(gn.components()[0]).filter(Fn=>sr(Fn.element,"role")==="menu"),hs={collapseMenu:ws,highlightPrimary:io,repositionMenus:gn=>{d.getPrimary().bind(Bo=>Zo(gn).bind(es=>{const js=p(es),As=ln(d.getMenus()),qc=bs(Ve(As,$g.extractPreparedMenu));return d.getTriggeringPath(js,Rr=>w(gn,qc,Rr))}).map(es=>({primary:Bo,triggeringPath:es}))).fold(()=>{Jo(gn).each(Bo=>{t.onRepositionMenu(gn,Bo,[])})},({primary:Bo,triggeringPath:es})=>{t.onRepositionMenu(gn,Bo,es)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:gc(t.tmenuBehaviours,[ho.config({mode:"special",onRight:vo(An),onLeft:vo(Gn),onEscape:vo(Ln),focusIn:(gn,Fn)=>{d.getPrimary().each(Bo=>{Z0(gn,Bo.element,tf())})}}),Hs.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),ss.config({find:gn=>Hs.getHighlighted(gn)}),zo.config({})]),eventOrder:t.eventOrder,apis:hs,events:wo}},xD=K("collapse-item"),kD=(t,s,a)=>({primary:t,menus:s,expansions:a}),_5=(t,s)=>({primary:t,menus:Ws(t,s),expansions:{}}),TD=t=>({value:Yn(xD()),meta:{text:t}}),Rb=Il({name:"TieredMenu",configFields:[ty("onExecute"),ty("onEscape"),mf("onOpenMenu"),mf("onOpenSubmenu"),ds("onRepositionMenu"),ds("onCollapseMenu"),Ke("highlightOnOpen",na.HighlightMenuAndItem),il("data",[Mt("primary"),Mt("menus"),Mt("expansions")]),Ke("fakeFocus",!1),ds("onHighlightItem"),ds("onDehighlightItem"),ds("onHover"),Gp(),Mt("dom"),Ke("navigateOnHover",!0),Ke("stayInDom",!1),Ra("tmenuBehaviours",[ho,Hs,ss,zo]),Ke("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:SD,extraApis:{tieredData:kD,singleData:_5,collapseItem:TD}}),A5=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>Q1(),onRtl:()=>ry()}}:{},w=A=>A.length===2,T=A=>w(A)?p:{};return Rb.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(ms.close(s),t.onEscape.map(A=>A(s)),_.some(!0)),onExecute:()=>_.some(!0),onOpenMenu:(A,D)=>{ci.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(A,D,N,U)=>{const W=g().getOrDie();ci.position(W,N,{anchor:{type:"submenu",item:D,...T(U)}})},onRepositionMenu:(A,D,N)=>{const U=g().getOrDie();ci.positionWithinBounds(U,D,a,d()),R(N,W=>{const le=T(W.triggeringPath);ci.position(U,W.triggeredMenu,{anchor:{type:"submenu",item:W.triggeringItem,...le}})})}})},O5=(t,s)=>{const a=(W,le)=>t.getRelated(W).exists(st=>rm(st,le)),i=(W,le)=>{ms.setContent(W,le)},d=(W,le,pe)=>{g(W,le,pe,_.none())},g=(W,le,pe,st)=>{p(W,le,pe,()=>st.map($e=>os($e)))},p=(W,le,pe,st)=>{const $e=t.lazySink(W).getOrDie();ms.openWhileCloaked(W,le,()=>ci.positionWithinBounds($e,W,pe,st())),_n.setValue(W,_.some({mode:"position",config:pe,getBounds:st}))},w=(W,le,pe)=>{T(W,le,pe,_.none)},T=(W,le,pe,st)=>{const $e=A5(t,W,le,pe,st);ms.open(W,$e),_n.setValue(W,_.some({mode:"menu",menu:$e}))},A=W=>{ms.isOpen(W)&&(_n.setValue(W,_.none()),ms.close(W))},D=W=>ms.getState(W),N=W=>{ms.isOpen(W)&&_n.getValue(W).each(le=>{switch(le.mode){case"menu":ms.getState(W).each(Rb.repositionMenus);break;case"position":const pe=t.lazySink(W).getOrDie();ci.positionWithinBounds(pe,W,le.config,le.getBounds());break}})},U={setContent:i,showAt:d,showWithin:g,showWithinBounds:p,showMenuAt:w,showMenuWithinBounds:T,hide:A,getContent:D,reposition:N,isOpen:ms.isOpen};return{uid:t.uid,dom:t.dom,behaviours:gc(t.inlineBehaviours,[ms.config({isPartOf:(W,le,pe)=>rm(le,pe)||a(W,pe),getAttachPoint:W=>t.lazySink(W).getOrDie(),onOpen:W=>{t.onShow(W)},onClose:W=>{t.onHide(W)}}),_n.config({store:{mode:"memory",initialValue:_.none()}}),Nl.config({channels:{...jh({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({})}),...Cv({...t.fireRepositionEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({}),doReposition:N})}})]),eventOrder:t.eventOrder,apis:U}},Yr=Il({name:"InlineView",configFields:[Mt("lazySink"),ds("onShow"),ds("onHide"),Qf("onEscape"),Ra("inlineBehaviours",[ms,_n,Nl]),pi("fireDismissalEventInstead",[Ke("event",Xd())]),pi("fireRepositionEventInstead",[Ke("event",_1())]),Ke("getRelated",_.none),Ke("isExtraPart",Me),Ke("eventOrder",_.none)],factory:O5,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithin:(t,s,a,i,d)=>{t.showWithin(s,a,i,d)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Wv=tinymce.util.Tools.resolve("tinymce.util.Delay");const el=Il({name:"Button",factory:t=>{const s=BS(t.action),a=t.dom.tag,i=g=>Jt(t.dom,"attributes").bind(p=>Jt(p,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),p=i("role").map(w=>({role:w})).getOr({});return{type:g,...p}}else return{role:i("role").getOr("button")}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Pl.augment(t.buttonBehaviours,[Oo.config({}),ho.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Ke("uid",void 0),Mt("dom"),Ke("components",[]),Pl.field("buttonBehaviours",[Oo,ho]),Ns("action"),Ns("role"),Ke("eventOrder",{})]}),Cr=t=>{const s=BE(t)&&Ts(t,"uid")?t.uid:yd("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var Rd=tinymce.util.Tools.resolve("tinymce.util.I18n");const p_={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},ED="temporary-placeholder",fw=t=>()=>Jt(t,ED).getOr("!not found!"),b_=(t,s)=>{const a=t.toLowerCase();if(Rd.isRtl()){const i=rc(a,"-rtl");return Kn(s,i)?i:a}else return a},Zv=(t,s)=>Jt(s,b_(t,s)),gw=(t,s)=>{const a=s();return Zv(t,a).getOrThunk(fw(a))},_D=(t,s,a)=>{const i=s();return Zv(t,i).or(a).getOrThunk(fw(i))},AD=t=>Rd.isRtl()?Kn(p_,t):!1,v_=()=>fs("add-focusable",[zr(t=>{OT(t.element,"svg").each(s=>To(s,"focusable","false"))})]),OD=(t,s,a,i)=>{var d,g;const p=AD(s)?["tox-icon--flip"]:[],w=Jt(a,b_(s,a)).or(i).getOrThunk(fw(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:w},behaviours:pn([...(g=t.behaviours)!==null&&g!==void 0?g:[],v_()])}},ym=(t,s,a,i=_.none())=>OD(s,t,a(),i),D5=(t,s,a)=>{const i=a(),d=se(t,g=>Kn(i,b_(g,i)));return OD(s,d.getOr(ED),i,_.none())},y_={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},IS=Il({name:"Notification",factory:t=>{const s=Cr({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:pn([zo.config({})])}),a=W=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${W}%`}}}),i=W=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${W}%`}}),d=Cr({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},i(0)],behaviours:pn([zo.config({})])}),w={updateProgress:(W,le)=>{W.getSystem().isConnected()&&d.getOpt(W).each(pe=>{zo.set(pe,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(le)]},i(le)])})},updateText:(W,le)=>{if(W.getSystem().isConnected()){const pe=s.get(W);zo.set(pe,[Va(le)])}}},T=z([t.icon.toArray(),t.level.toArray(),t.level.bind(W=>_.from(y_[W])).toArray()]),A=Cr(el.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[ym("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:W=>{t.onAction(W)}})),D=D5(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),N={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:pn([zo.config({})])},U=[D,N];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(W=>["tox-notification","tox-notification--in",`tox-notification--${W}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:pn([Oo.config({}),fs("notification-events",[Zt(Qm(),W=>{A.getOpt(W).each(Oo.focus)})])]),components:U.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[A.asSpec()]:[]),apis:w}},configFields:[Ns("level"),Mt("progress"),Ns("icon"),Mt("onAction"),Mt("text"),Mt("iconProvider"),Mt("translationProvider"),Oa("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var w_=(t,s,a)=>{const i=s.backstage.shared,d=()=>{const T=os(Wt.fromDom(t.getContentAreaContainer())),A=Ka(),D=bl(A.x,T.x,T.right),N=bl(A.y,T.y,T.bottom),U=Math.max(T.right,A.right),W=Math.max(T.bottom,A.bottom);return _.some(to(D,N,U-D,W-N))};return{open:(T,A)=>{const D=()=>{A(),Yr.hide(U)},N=yi(IS.sketch({text:T.text,level:dn(["success","error","warning","warn","info"],T.type)?T.type:void 0,progress:T.progressBar===!0,icon:T.icon,closeButton:T.closeButton,onAction:D,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),U=yi(Yr.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(U),et(T.timeout)&&T.timeout>0&&Wv.setEditorTimeout(t,()=>{D()},T.timeout);const le={close:D,reposition:()=>{const pe=pl(N),st={maxHeightFunction:nb()},$e=t.notificationManager.getNotifications();if($e[0]===le){const at={...i.anchors.banner(),overrides:st};Yr.showWithinBounds(U,pe,{anchor:at},d)}else tn($e,le).each(at=>{const Sn=$e[at-1].getEl(),dt={type:"node",root:Qr(),node:_.some(Wt.fromDom(Sn)),overrides:st,layouts:{onRtl:()=>[Ua],onLtr:()=>[Ua]}};Yr.showWithinBounds(U,pe,{anchor:dt},d)})},text:pe=>{IS.updateText(N,pe)},settings:T,getEl:()=>N.element.dom,progressBar:{value:pe=>{IS.updateProgress(N,pe)}}};return le},close:T=>{T.close()},getArgs:T=>T.settings}},hw=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),DD=tinymce.util.Tools.resolve("tinymce.EditorManager"),jv=tinymce.util.Tools.resolve("tinymce.Env"),qu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(qu||(qu={}));var pw;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(pw||(pw={}));const Sr=t=>s=>s.options.get(t),bw=t=>s=>_.from(t(s)),RD=t=>{const s=jv.deviceType.isPhone(),a=jv.deviceType.isTablet()||s,i=t.options.register,d=p=>Tt(p)||p===!1,g=p=>Tt(p)||et(p);i("skin",{processor:p=>Tt(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:hw.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>Tt(p)||Ot(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>Ot(p)||Tt(p)||mn(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),jt(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:pw.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:p=>p==="both"||Ot(p),default:!jv.deviceType.isTouch()}),i("sidebar_show",{processor:"string"})},LS=Sr("readonly"),HS=Sr("height"),zS=Sr("width"),C_=bw(Sr("min_width")),vw=bw(Sr("min_height")),VS=bw(Sr("max_width")),S_=bw(Sr("max_height")),MD=bw(Sr("style_formats")),ND=Sr("style_formats_merge"),$D=Sr("style_formats_autohide"),x_=Sr("content_langs"),US=Sr("removed_menuitems"),Gv=Sr("toolbar_mode"),yw=Sr("toolbar_groups"),k_=Sr("toolbar_location"),M5=Sr("fixed_toolbar_container"),N5=Sr("fixed_toolbar_container_target"),BD=Sr("toolbar_persist"),PD=Sr("toolbar_sticky_offset"),FD=Sr("menubar"),ww=Sr("toolbar"),ID=Sr("file_picker_callback"),LD=Sr("file_picker_validator_handler"),WS=Sr("file_picker_types"),ip=Sr("typeahead_urls"),HD=Sr("anchor_top"),zD=Sr("anchor_bottom"),ZS=Sr("draggable_modal"),VD=Sr("statusbar"),T_=Sr("elementpath"),UD=Sr("branding"),E_=Sr("resize"),__=Sr("paste_as_text"),jS=Sr("sidebar_show"),WD=Sr("promotion"),GS=t=>t.options.get("skin")===!1,qS=t=>t.options.get("menubar")!==!1,qv=t=>{const s=t.options.get("skin_url");if(GS(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return DD.baseURL+"/skins/ui/"+a}},ZD=t=>t.options.get("line_height_formats").split(" "),Kv=t=>{const s=ww(t),a=Tt(s),i=mn(s)&&s.length>0;return!Sw(t)&&(i||a||s===!0)},Cw=t=>{const s=jt(9,i=>t.options.get("toolbar"+(i+1))),a=xe(s,Tt);return mr(a.length>0,a)},Sw=t=>Cw(t).fold(()=>{const s=ww(t);return Ee(s,Tt)&&s.length>0},De),KS=t=>k_(t)===pw.bottom,jD=t=>{var s;if(!t.inline)return _.none();const a=(s=M5(t))!==null&&s!==void 0?s:"";if(a.length>0)return la(Qr(),a);const i=N5(t);return cn(i)?_.some(Wt.fromDom(i)):_.none()},xw=t=>t.inline&&jD(t).isSome(),kw=t=>jD(t).getOrThunk(()=>Er(Ko(Wt.fromDom(t.getElement())))),A_=t=>t.inline&&!qS(t)&&!Kv(t)&&!Sw(t),Tw=t=>(t.options.get("toolbar_sticky")||t.inline)&&!xw(t)&&!A_(t),GD=t=>{const s=t.options.get("menu");return fn(s,a=>({...a,items:a.items}))};var $5=Object.freeze({__proto__:null,get ToolbarMode(){return qu},get ToolbarLocation(){return pw},register:RD,getSkinUrl:qv,isReadOnly:LS,isSkinDisabled:GS,getHeightOption:HS,getWidthOption:zS,getMinWidthOption:C_,getMinHeightOption:vw,getMaxWidthOption:VS,getMaxHeightOption:S_,getUserStyleFormats:MD,shouldMergeStyleFormats:ND,shouldAutoHideStyleFormats:$D,getLineHeightFormats:ZD,getContentLanguages:x_,getRemovedMenuItems:US,isMenubarEnabled:qS,isMultipleToolbars:Sw,isToolbarEnabled:Kv,isToolbarPersist:BD,getMultipleToolbarsOption:Cw,getUiContainer:kw,useFixedContainer:xw,getToolbarMode:Gv,isDraggableModal:ZS,isDistractionFree:A_,isStickyToolbar:Tw,getStickyToolbarOffset:PD,getToolbarLocation:k_,isToolbarLocationBottom:KS,getToolbarGroups:yw,getMenus:GD,getMenubar:FD,getToolbar:ww,getFilePickerCallback:ID,getFilePickerTypes:WS,useTypeaheadUrls:ip,getAnchorTop:HD,getAnchorBottom:zD,getFilePickerValidatorHandler:LD,useStatusBar:VD,useElementPath:T_,promotionEnabled:WD,useBranding:UD,getResize:E_,getPasteAsText:__,getSidebarShow:jS});const qD="[data-mce-autocompleter]",KD=t=>Ml(t,qD),B5=t=>la(t,qD),P5={setup:(t,s)=>{const a=(d,g)=>{yo(d,ef(),{raw:g})},i=()=>t.getMenu().bind(Hs.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Jd),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(Hs.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&KD(Wt.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var O_;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(O_||(O_={}));var wm=O_;const D_="tox-menu-nav__js",Yv="tox-collection__item",R_="tox-swatch",F5={normal:D_,color:R_},YD="tox-collection__item--enabled",XD="tox-collection__group-heading",JD="tox-collection__item-icon",M_="tox-collection__item-label",I5="tox-collection__item-accessory",QD="tox-collection__item-caret",L5="tox-collection__item-checkmark",Ew="tox-collection__item--active",YS="tox-collection__item-container",H5="tox-collection__item-container--column",eR="tox-collection__item-container--row",z5="tox-collection__item-container--align-right",V5="tox-collection__item-container--align-left",U5="tox-collection__item-container--valign-top",W5="tox-collection__item-container--valign-middle",Z5="tox-collection__item-container--valign-bottom",tR=t=>Jt(F5,t).getOr(D_),j5=t=>t==="color"?"tox-swatches":"tox-menu",N_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:j5(t),tieredMenu:"tox-tiered-menu"}),Mb=t=>{const s=N_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:tR(t)}},XS=(t,s,a)=>{const i=N_(a);return{tag:"div",classes:z([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},G5=[Gu.parts.items({})],Xv=(t,s,a)=>{const i=N_(a);return{dom:{tag:"div",classes:z([[i.tieredMenu]])},markers:Mb(a)}},nR=K([Ns("data"),Ke("inputAttributes",{}),Ke("inputStyles",{}),Ke("tag","input"),Ke("inputClasses",[]),ds("onSetValue"),Ke("styles",{}),Ke("eventOrder",{}),Ra("inputBehaviours",[_n,Oo]),Ke("selectOnFocus",!0)]),oR=t=>pn([Oo.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=hl(a);a.dom.setSelectionRange(0,i.length)}:te})]),q5=t=>({...oR(t),...gc(t.inputBehaviours,[_n.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>hl(s.element),setValue:(s,a)=>{hl(s.element)!==a&&af(s.element,a)}},onSetValue:t.onSetValue})])}),sR=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),rR=(t,s)=>({uid:t.uid,dom:sR(t),components:[],behaviours:q5(t),eventOrder:t.eventOrder}),Jv=Il({name:"Input",configFields:nR(),factory:rR}),JS=Yn("refetch-trigger-event"),QS=Yn("redirect-menu-item-interaction"),$_="tox-menu__searcher",Qv=t=>la(t.element,`.${$_}`).bind(s=>t.getSystem().getByDom(s).toOptional()),_w=Qv,aR=(t,s)=>{_n.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},Cm=t=>{const s=_n.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},B_=(t,s)=>{B(s.element,"id").each(a=>To(t.element,"aria-activedescendant",a))},K5=t=>{const s=(d,g)=>(g.cut(),_.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return yo(d,QS,p),_.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[Yv]},components:[Jv.sketch({inputClasses:[$_,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:pn([fs(i,[Zt(tg(),d=>{Vs(d,JS)}),Zt(ef(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),ho.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,ho.name()]}})]}},ex="tox-collection--results__js",cR=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Yn("aria-item-search-result-id"),"aria-selected":"false"}}}:t},P_=(t,s)=>a=>{const i=Nt(a,s);return Ve(i,d=>({dom:t,components:d}))},e0=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Gu.parts.items({preprocess:t!=="auto"?P_({tag:"div",classes:["tox-swatches__row"]},t):xt})]}]}),Y5=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Gu.parts.items({preprocess:P_({tag:"div",classes:["tox-collection__group"]},t)})]}),iR=(t,s)=>{const a=[];let i=[];return R(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Kn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Ve(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},tx=(t,s,a)=>Gu.parts.items({preprocess:i=>{const d=Ve(i,a);return t!=="auto"&&t>1?P_({tag:"div",classes:["tox-collection__group"]},t)(d):iR(d,(g,p)=>s[p].type==="separator")}}),F_=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[tx(t,s,xt)]}),I_=(t,s,a=!0)=>{const i=Yn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",ex].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[tx(t,s,cR)]}},X5=(t,s,a)=>{const i=Yn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[K5({i18n:Rd.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],ex],attributes:{id:i}},components:[tx(t,s,cR)]}]}},L_=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Gu.parts.items({preprocess:a=>iR(a,(i,d)=>t[d].type==="separator")})]}),t0=t=>ze(t,s=>"icon"in s&&s.icon!==void 0),Bg=t=>(console.error(tu(t)),console.log(t),_.none()),lR=(t,s,a,i,d)=>{const g=L_(a);return{value:t,dom:g.dom,components:g.components,items:a}},nx=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?F_(i,a):d.searchMode.searchMode==="search-with-field"?X5(i,a,d.searchMode):I_(i,a);if(d.menuType==="color"){const p=e0(i);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const p=F_(i,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=Y5(i);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:XS(s,i,d.menuType),components:G5,items:a}},Ma=ca("type"),H_=ca("name"),z_=ca("label"),Pg=ca("text"),J5=ca("title"),uR=ca("icon"),Aw=ca("value"),Q5=va("fetch"),Ow=va("getSubmenuItems"),Nb=va("onAction"),eI=va("onItemAction"),$b=Da("onSetup",()=>te),dR=Ja("name"),n0=Ja("text"),Sm=Ja("icon"),Dw=Ja("tooltip"),ox=Ja("label"),mR=Ja("shortcut"),fR=Qf("select"),sx=Oa("active",!1),tI=Oa("borderless",!1),Ku=Oa("enabled",!0),o0=Oa("primary",!1),rx=t=>Ke("columns",t),ax=Ke("meta",{}),cx=Da("onAction",te),lp=t=>wr("type",t),V_=t=>Xa("name","name",Jl(()=>Yn(`${t}-name`)),_a),U_=t=>Xa("value","value",Jl(()=>Yn(`${t}-value`)),ti()),gR=lo([Ma,n0]),hR=t=>Ms("separatormenuitem",gR,t),pR=lo([lp("autocompleteitem"),sx,Ku,ax,Aw,n0,Sm]),Bb=t=>Ms("Autocompleter.Separator",gR,t),nI=t=>Ms("Autocompleter.Item",pR,t),Pb=[Ku,Dw,Sm,n0,$b],ix=lo([Ma,Nb].concat(Pb)),bR=t=>Ms("toolbarbutton",ix,t),lx=[sx].concat(Pb),vR=lo(lx.concat([Ma,Nb])),W_=t=>Ms("ToggleButton",vR,t),ux=[Da("predicate",Me),ll("scope","node",["node","editor"]),ll("position","selection",["node","selection","line"])],yR=Pb.concat([lp("contextformbutton"),o0,Nb,kc("original",xt)]),oI=lx.concat([lp("contextformbutton"),o0,Nb,kc("original",xt)]),wR=Pb.concat([lp("contextformbutton")]),CR=lx.concat([lp("contextformtogglebutton")]),SR=gi("type",{contextformbutton:yR,contextformtogglebutton:oI}),xR=lo([lp("contextform"),Da("initValue",K("")),ox,hi("commands",SR),ji("launch",gi("type",{contextformbutton:wR,contextformtogglebutton:CR}))].concat(ux)),sI=t=>Ms("ContextForm",xR,t),kR=lo([lp("contexttoolbar"),ca("items")].concat(ux)),Rw=t=>Ms("ContextToolbar",kR,t),rI=[Ma,ca("src"),Ja("alt"),k("classes",[],_a)],aI=lo(rI),cI=[Ma,Pg,dR,k("classes",["tox-collection__item-label"],_a)],TR=lo(cI),Z_=Ou(()=>gh("type",{cardimage:aI,cardtext:TR,cardcontainer:iI})),iI=lo([Ma,wr("direction","horizontal"),wr("align","left"),wr("valign","middle"),hi("items",Z_)]),s0=[Ku,n0,mR,U_("menuitem"),ax],lI=lo([Ma,ox,hi("items",Z_),$b,cx].concat(s0)),uI=t=>Ms("cardmenuitem",lI,t),dI=lo([Ma,sx,Sm].concat(s0)),dx=t=>Ms("choicemenuitem",dI,t),ER=[Ma,ca("fancytype"),cx],_R=[Ke("initData",{})].concat(ER),AR=[I("initData",{},[Oa("allowCustomColors",!0),wr("storageKey","default"),eg("colors",ti())])].concat(ER),OR=gi("fancytype",{inserttable:_R,colorswatch:AR}),mI=t=>Ms("fancymenuitem",OR,t),DR=lo([Ma,$b,cx,Sm].concat(s0)),RR=t=>Ms("menuitem",DR,t),MR=lo([Ma,Ow,$b,Sm].concat(s0)),NR=t=>Ms("nestedmenuitem",MR,t),fI=lo([Ma,Sm,sx,$b,Nb].concat(s0)),gI=t=>Ms("togglemenuitem",fI,t),j_=(t,s,a)=>{const i=Wc(t.element,"."+a);if(i.length>0){const d=re(i,g=>{const p=g.dom.getBoundingClientRect().top,w=i[0].dom.getBoundingClientRect().top;return Math.abs(p-w)>s}).getOr(i.length);return _.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return _.none()},$R=(t,s)=>pn([fs(t,s)]),Fb={namedEvents:$R,unnamedEvents:t=>$R(Yn("unnamed-events"),t)},BR=Yn("tooltip.exclusive"),up=Yn("tooltip.show"),Ll=Yn("tooltip.hide"),PR=(t,s,a)=>{t.getSystem().broadcastOn([BR],{})};var hI=Object.freeze({__proto__:null,hideAllExclusive:PR,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&zo.set(d,i)})}}),pI=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Dc(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){PR(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:lr(t.mode==="normal"?[Zt(qd(),w=>{Vs(d,up)}),Zt($u(),w=>{Vs(d,Ll)})]:[]),behaviours:pn([zo.config({})])});s.setTooltip(p),Oc(g,p),t.onShow(d,p),ci.position(g,p,{anchor:t.anchor(d)})}};return lr(z([[Zt(up,d=>{s.resetTimer(()=>{i(d)},t.delay)}),Zt(Ll,d=>{s.resetTimer(()=>{a(d)},t.delay)}),Zt(ou(),(d,g)=>{const p=g;p.universal||dn(p.channels,BR)&&a(d)}),Rl(d=>{a(d)})],t.mode==="normal"?[Zt(Qm(),d=>{Vs(d,up)}),Zt(Mp(),d=>{Vs(d,Ll)}),Zt(qd(),d=>{Vs(d,up)}),Zt($u(),d=>{Vs(d,Ll)})]:[Zt(W0(),(d,g)=>{Vs(d,up)}),Zt(O1(),d=>{Vs(d,Ll)})]]))}}),bI=[Mt("lazySink"),Mt("tooltipDom"),Ke("exclusive",!0),Ke("tooltipComponents",[]),Ke("delay",300),ll("mode","normal",["normal","follow-highlight"]),Ke("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:K([Ua,Ki,Ec,ri,_c,Uc]),onRtl:K([Ua,Ki,Ec,ri,_c,Uc])}})),ds("onHide"),ds("onShow")],yI=Object.freeze({__proto__:null,init:()=>{const t=Vr(),s=Vr(),a=()=>{t.on(clearTimeout)},i=(g,p)=>{a(),t.set(setTimeout(g,p))},d=K("not-implemented");return Mi({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const IR=fc({fields:bI,name:"tooltipping",active:pI,state:yI,apis:hI}),wI=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Sl="silver.readonly",Rf=lo([gd("readonly")]),mx=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&R(d,g=>{g.broadcastOn([Ed()],{target:i})}),R(d,g=>{g.broadcastOn([Sl],{readonly:s})})},G_=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&mx(s,!0)}),t.on("SwitchMode",()=>mx(s,t.mode.isReadOnly())),LS(t)&&t.mode.set("readonly")},Sa=()=>Nl.config({channels:{[Sl]:{schema:Rf,onReceive:(t,s)=>{Eo.set(t,s.readonly)}}}}),Hl={item:t=>Eo.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Eo.config({disabled:t}),splitButton:t=>Eo.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Eo.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},gx=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},Md=(t,s)=>zr(a=>{gx(t,a)(d=>{const g=t.onSetup(d);Ze(g)&&s.set(g)})}),Mw=(t,s)=>Rl(a=>gx(t,a)(s.get())),CI=(t,s)=>ml((a,i)=>{gx(t,a)(t.onAction),!t.triggersSubmenu&&s===wm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Vs(a,Np()),i.stop())}),zl={[dl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Ib=bs,xl=(t,s,a,i)=>{const d=V(te);return{type:"item",dom:s.dom,components:Ib(s.optComponents),data:t.data,eventOrder:zl,hasSubmenu:t.triggersSubmenu,itemBehaviours:pn([fs("item-events",[CI(t,a),Md(t,d),Mw(t,d)]),Hl.item(()=>!t.enabled||i.isDisabled()),Sa(),zo.config({})].concat(t.itemBehaviours))}},a0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),ur=t=>{const s=jv.os.isMacOS()||jv.os.isiOS(),d=s?{alt:"â¥",ctrl:"â",shift:"â§",meta:"â",access:"ââ¥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=Ve(g,w=>{const T=w.toLowerCase().trim();return Kn(d,T)?d[T]:w});return s?p.join(""):p.join("+")},Fg=(t,s,a=[JD])=>ym(t,{tag:"div",classes:a},s),Nw=t=>({dom:{tag:"div",classes:[M_]},components:[Va(Rd.translate(t))]}),q_=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),K_=(t,s)=>({dom:{tag:"div",classes:[M_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Va(Rd.translate(s))]}]}),Y_=t=>({dom:{tag:"div",classes:[I5]},components:[Va(ur(t))]}),HR=t=>Fg("checkmark",t,[L5]),X_=t=>Fg("chevron-right",t,[QD]),SI=t=>Fg("chevron-down",t,[QD]),zR=(t,s)=>{const a=t.direction==="vertical"?H5:eR,i=t.align==="left"?V5:z5;return{dom:{tag:"div",classes:[YS,a,i,(()=>{switch(t.valign){case"top":return U5;case"middle":return W5;case"bottom":return Z5}})()]},components:s}},VR=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),J_=(t,s,a)=>{const i="custom",d="remove",g=t.ariaLabel,p=t.value,w=t.iconContent.map(A=>_D(A,s.icons,a));return{dom:(()=>{const A=R_,D=w.getOr(""),U={tag:"div",attributes:g.map(W=>({title:s.translate(W)})).getOr({}),classes:[A]};return p===i?{...U,tag:"button",classes:[...U.classes,"tox-swatches__picker-btn"],innerHtml:D}:p===d?{...U,classes:[...U.classes,"tox-swatch--remove"],innerHtml:D}:cn(p)?{...U,attributes:{...U.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:D}:U})(),optComponents:[]}},Q_=t=>{const s=t.map(a=>({attributes:{title:Rd.translate(a)}})).getOr({});return{tag:"div",classes:[D_,Yv],...s}},hx=(t,s,a,i)=>{const d={tag:"div",classes:[JD]},g=U=>ym(U,d,s.icons,i),p=()=>_.some({dom:d}),w=a?t.iconContent.map(g).orThunk(p):_.none(),T=t.checkMark,A=_.from(t.meta).fold(()=>Nw,U=>Kn(U,"style")?St(K_,U.style):Nw),D=t.htmlContent.fold(()=>t.textContent.map(A),U=>_.some(q_(U,[M_])));return{dom:Q_(t.ariaLabel),optComponents:[w,D,t.shortcutContent.map(Y_),T,t.caret]}},$w=(t,s,a,i=_.none())=>t.presets==="color"?J_(t,s,i):hx(t,s,a,i),UR=(t,s)=>Jt(t,"tooltipWorker").map(a=>[IR.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:nb}}),mode:"follow-highlight",onShow:(i,d)=>{a(g=>{IR.setComponents(i,[L1({element:Wt.fromDom(g)})])})}})]).getOr([]),xI=t=>hw.DOM.encode(t),WR=(t,s)=>{const a=Rd.translate(t),i=xI(a);if(s.length>0){const d=new RegExp(wI(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},kI=(t,s,a,i,d,g,p,w=!0)=>{const T=$w({presets:i,textContent:_.none(),htmlContent:a?t.text.map(A=>WR(A,s)):_.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:_.none(),checkMark:_.none(),caret:_.none(),value:t.value},p.providers,w,t.icon);return xl({data:a0(t),enabled:t.enabled,getApi:K({}),onAction:A=>d(t.value,t.meta),onSetup:K(te),triggersSubmenu:!1,itemBehaviours:UR(t.meta,p)},T,g,p.providers)},ZR=(t,s)=>Ve(t,a=>{switch(a.type){case"cardcontainer":return zR(a,ZR(a.items,s));case"cardimage":return VR(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>dn(s.cardText.highlightOn,g))?_.from(s.cardText.matchText).getOr(""):"";return q_(WR(a.text,d),a.classes)}}),TI=(t,s,a,i)=>{const d=p=>({isEnabled:()=>!Eo.isDisabled(p),setEnabled:w=>{Eo.set(p,!w),R(Wc(p.element,"*"),T=>{p.getSystem().getByDom(T).each(A=>{A.hasConfigured(Eo)&&Eo.set(A,!w)})})}}),g={dom:Q_(t.label),optComponents:[_.some({dom:{tag:"div",classes:[YS,eR]},components:ZR(t.items,i)})]};return xl({data:a0({text:_.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:_.from(i.itemBehaviours).getOr([])},g,s,a.providers)},EI=(t,s,a,i,d,g,p,w=!0)=>{const T=D=>({setActive:N=>{Es.set(D,N)},isActive:()=>Es.isOn(D),isEnabled:()=>!Eo.isDisabled(D),setEnabled:N=>Eo.set(D,!N)}),A=$w({presets:a,textContent:s?t.text:_.none(),htmlContent:_.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:_.none(),checkMark:s?_.some(HR(p.icons)):_.none(),caret:_.none(),value:t.value},p,w);return pr(xl({data:a0(t),enabled:t.enabled,getApi:T,onAction:D=>i(t.value),onSetup:D=>(D.setActive(d),te),triggersSubmenu:!1,itemBehaviours:[]},A,g,p),{toggling:{toggleClass:YD,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},jR=Ky(FS(),h_()),GR=t=>({value:t}),eA=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,qR=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,tA=t=>eA.test(t)||qR.test(t),KR=t=>jr(t,"#").toUpperCase(),_I=t=>tA(t)?_.some({value:KR(t)}):_.none(),AI=t=>({value:t.value.replace(eA,(a,i,d,g)=>i+i+d+d+g+g)}),OI=t=>{const s=AI(t),a=qR.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},nA=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},Bw=t=>{const s=nA(t.red)+nA(t.green)+nA(t.blue);return GR(s)},YR=Math.min,XR=Math.max,c0=Math.round,JR=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,DI=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,dp=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),px=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},QR=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=XR(0,YR(g,1)),p=XR(0,YR(p,1)),g===0)return s=a=i=c0(255*p),dp(s,a,i,1);const w=d/60,T=p*g,A=T*(1-Math.abs(w%2-1)),D=p-T;switch(Math.floor(w)){case 0:s=T,a=A,i=0;break;case 1:s=A,a=T,i=0;break;case 2:s=0,a=T,i=A;break;case 3:s=0,a=A,i=T;break;case 4:s=A,a=0,i=T;break;case 5:s=T,a=0,i=A;break;default:s=a=i=0}return s=c0(255*(s+D)),a=c0(255*(a+D)),i=c0(255*(i+D)),dp(s,a,i,1)},Pw=t=>{const s=OI(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return dp(a,i,d,1)},oA=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),w=parseFloat(i);return dp(d,g,p,w)},sA=t=>{if(t==="transparent")return _.some(dp(0,0,0,0));const s=JR.exec(t);if(s!==null)return _.some(oA(s[1],s[2],s[3],"1"));const a=DI.exec(t);return a!==null?_.some(oA(a[1],a[2],a[3],a[4])):_.none()},rA=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,eM=dp(255,0,0,1),RI=t=>{t.dispatch("SkinLoaded")},MI=(t,s)=>{t.dispatch("SkinLoadError",s)},NI=t=>{t.dispatch("ResizeEditor")},aA=(t,s)=>{t.dispatch("ResizeContent",s)},tM=(t,s)=>{t.dispatch("ScrollContent",s)},$I=(t,s)=>{t.dispatch("TextColorChange",s)},BI=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},PI=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),FI=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})};var Lb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const nM={},oM=(t,s=10)=>{const a=Lb.getItem(t),i=Tt(a)?JSON.parse(a):[],g=(A=>s-A.length<0?A.slice(0,s):A)(i),p=A=>{tn(g,A).each(w),g.unshift(A),g.length>s&&g.pop(),Lb.setItem(t,JSON.stringify(g))},w=A=>{g.splice(A,1)};return{add:p,state:()=>g.slice(0)}},Nd=t=>Jt(nM,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Lb.getItem(s);if(Bt(a)){const d=Lb.getItem("tinymce-custom-colors");Lb.setItem(s,cn(d)?d:"[]")}const i=oM(s,10);return nM[t]=i,i}),sM=t=>Ve(Nd(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),cA=(t,s)=>{Nd(t).add(s)},Fw=(t,s,a)=>({hue:t,saturation:s,value:a}),iA=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,w=Math.min(d,Math.min(g,p)),T=Math.max(d,Math.max(g,p));if(w===T)return i=w,Fw(0,0,i*100);const A=d===w?g-p:p===w?d-g:p-d;return s=d===w?3:p===w?1:5,s=60*(s-A/(T-w)),a=(T-w)/T,i=T,Fw(Math.round(s),Math.round(a*100),Math.round(i*100))},lA=t=>iA(Pw(t)),rM=t=>Bw(QR(t)),II=t=>_I(t).orThunk(()=>sA(t).map(Bw)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],w=i[3];return Bw(dp(d,g,p,w))}),bx="forecolor",uA="hilitecolor",dA=t=>Math.max(5,Math.ceil(Math.sqrt(t))),LI=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+II(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},lu=t=>s=>s.options.get(t),mA="#000000",aM=t=>{const s=t.options.register,a=i=>Ee(i,Tt)?{value:LI(i),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:dA(Hb(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:dA(Hb(t,bx).length)}),s("color_cols_background",{processor:"number",default:dA(Hb(t,uA).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:mA}),s("color_default_background",{processor:"string",default:mA})},fA=(t,s)=>s===bx?lu("color_cols_foreground")(t):s===uA?lu("color_cols_background")(t):lu("color_cols")(t),gA=lu("custom_colors"),Hb=(t,s)=>s===bx&&t.options.isSet("color_map_foreground")?lu("color_map_foreground")(t):s===uA&&t.options.isSet("color_map_background")?lu("color_map_background")(t):lu("color_map")(t),hA=lu("color_default_foreground"),pA=lu("color_default_background"),bA=(t,s)=>{const a=Pt(Wt.fromDom(t.selection.getStart()),s==="hilitecolor"?"background-color":"color");return sA(a).map(i=>"#"+Bw(i).value)},HI=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},cM=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},zI=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{HI(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{cM(t,s)})},iM=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},vA=(t,s,a,i)=>{a==="custom"?dM(t)(g=>{g.each(p=>{cA(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},bA(t,s).getOr(mA)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},yA=(t,s,a)=>t.concat(sM(s).concat(iM(a))),wA=(t,s,a)=>i=>{i(yA(t,s,a))},CA=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},lM=(t,s,a,i,d)=>{t.ui.registry.addSplitButton(s,{tooltip:i,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:g=>{const p=bA(t,a);return Tr(p,g.toUpperCase())},columns:fA(t,a),fetch:wA(Hb(t,a),a,gA(t)),onAction:g=>{vA(t,a,d.get(),te)},onItemAction:(g,p)=>{vA(t,a,p,w=>{d.set(w),$I(t,{name:s,color:w})})},onSetup:g=>{CA(g,s,d.get());const p=w=>{w.name===s&&CA(g,w.name,w.color)};return t.on("TextColorChange",p),()=>{t.off("TextColorChange",p)}}})},uM=(t,s,a,i)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",initData:{storageKey:a},onAction:d=>{vA(t,a,d.value,te)}}]})},dM=t=>(s,a)=>{let i=!1;const d=w=>{const A=w.getData().colorpicker;i?(s(_.from(A)),w.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",A]))},g=(w,T)=>{T.name==="hex-valid"&&(i=T.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:te,onCancel:()=>{s(_.none())}})},VI=t=>{zI(t);const s=hA(t),a=pA(t),i=V(s),d=V(a);lM(t,"forecolor","forecolor","Text color",i),lM(t,"backcolor","hilitecolor","Background color",d),uM(t,"forecolor","forecolor","Text color"),uM(t,"backcolor","hilitecolor","Background color")},SA=(t,s,a,i,d,g,p,w)=>{const T=t0(s),D=UI(s,a,i,d!=="color"?"normal":"color",g,p,w);return nx(t,T,D,i,{menuType:d})},UI=(t,s,a,i,d,g,p)=>bs(Ve(t,w=>w.type==="choiceitem"?dx(w).fold(Bg,T=>_.some(EI(T,a===1,i,s,g(T.value),d,p,t0(t)))):_.none())),vx=(t,s)=>{const a=Mb(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?la(d.element,"[aria-checked=true]"):_.none()}},WI=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${R_}`:`.${Yv}`}},ZI=(t,s)=>{const a=jI(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...SA(Yn("menu-value"),a,w=>{t.onAction({value:w})},i,d,wm.CLOSE_ON_EXECUTE,Me,s.shared.providers),markers:Mb(d),movement:vx(i,d)};return{type:"widget",data:{value:Yn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[jR.widget(Gu.sketch(p))]}},jI=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>yA(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(iM(a)))},mM=Yn("cell-over"),xA=Yn("cell-execute"),GI=(t,s,a)=>{const i=p=>yo(p,mM,{row:t,col:s}),d=p=>yo(p,xA,{row:t,col:s}),g=(p,w)=>{w.stop(),d(p)};return yi({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:pn([fs("insert-table-picker-cell",[Zt(qd(),Oo.focus),Zt(dl(),d),Zt(Rp(),g),Zt(vh(),g)]),Es.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Oo.config({onFocus:i})])})},qI=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(GI(d,p,t));i.push(g)}return i},KI=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)Es.set(t[g][p],g<=s&&p<=a)},YI=t=>Y(t,s=>Ve(s,pl)),fM=(t,s)=>Va(`${s}x${t}`),gM={inserttable:t=>{const i=Yn("size-label"),d=qI(i,10,10),g=fM(0,0),p=Cr({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:i}},components:[g],behaviours:pn([zo.config({})])});return{type:"widget",data:{value:Yn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[jR.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:YI(d).concat(p.asSpec()),behaviours:pn([fs("insert-table-picker",[zr(w=>{zo.set(p.get(w),[g])}),Ch(mM,(w,T,A)=>{const{row:D,col:N}=A.event;KI(d,D,N,10,10),zo.set(p.get(w),[fM(D+1,N+1)])}),Ch(xA,(w,T,A)=>{const{row:D,col:N}=A.event;t.onAction({numRows:D+1,numColumns:N+1}),Vs(w,Np())})]),ho.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:ZI},XI=(t,s)=>Jt(gM,t.fancytype).map(a=>a(t,s)),JI=(t,s,a,i=!0,d=!1)=>{const g=d?SI(a.icons):X_(a.icons),p=T=>({isEnabled:()=>!Eo.isDisabled(T),setEnabled:A=>Eo.set(T,!A)}),w=$w({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,caret:_.some(g),checkMark:_.none(),shortcutContent:t.shortcut},a,i);return xl({data:a0(t),getApi:p,enabled:t.enabled,onAction:te,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},w,s,a)},QI=(t,s,a,i=!0)=>{const d=p=>({isEnabled:()=>!Eo.isDisabled(p),setEnabled:w=>Eo.set(p,!w)}),g=$w({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,caret:_.none(),checkMark:_.none(),shortcutContent:t.shortcut},a,i);return xl({data:a0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},e8=t=>({type:"separator",dom:{tag:"div",classes:[Yv,XD]},components:t.text.map(Va).toArray()}),t8=(t,s,a,i=!0)=>{const d=p=>({setActive:w=>{Es.set(p,w)},isActive:()=>Es.isOn(p),isEnabled:()=>!Eo.isDisabled(p),setEnabled:w=>Eo.set(p,!w)}),g=$w({iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,checkMark:_.some(HR(a.icons)),caret:_.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return pr(xl({data:a0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:YD,toggleOnExecute:!1,selected:t.active}})},n8=kI,yx=e8,hM=QI,pM=JI,o8=t8,bM=XI,s8=TI;var r8=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),a8=[Di("others",hh(Fo.value,ti()))],c8=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(Re(g.others).length===0)throw new Error("Cannot find any known coupled components");return Jt(t,p)},a=(g,p,w)=>s(p,w).getOrThunk(()=>{const A=Jt(p.others,w).getOrDie("No information found for coupled component: "+w)(g),D=g.getSystem().build(A);return t[w]=D,D}),i=(g,p,w)=>s(p,w).orThunk(()=>(Jt(p.others,w).getOrDie("No information found for coupled component: "+w),_.none())),d=K({});return Mi({readState:d,getExisting:i,getOrCreate:a})}});const oa=fc({fields:a8,name:"coupling",apis:r8,state:c8}),TA=t=>{let s=_.none(),a=[];const i=A=>TA(D=>{d(N=>{D(A(N))})}),d=A=>{p()?T(A):a.push(A)},g=A=>{p()||(s=_.some(A),w(a),a=[])},p=()=>s.isSome(),w=A=>{R(A,T)},T=A=>{s.each(D=>{setTimeout(()=>{A(D)},0)})};return t(g),{get:d,map:i,isReady:p}},wx={nu:TA,pure:t=>TA(s=>{s(t)})},EA=t=>{setTimeout(()=>{throw t},0)},mp=t=>{const s=T=>{t().then(T,EA)};return{map:T=>mp(()=>t().then(T)),bind:T=>mp(()=>t().then(A=>T(A).toPromise())),anonBind:T=>mp(()=>t().then(()=>T.toPromise())),toLazy:()=>wx.nu(s),toCached:()=>{let T=null;return mp(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},li={nu:t=>mp(()=>new Promise(t)),pure:t=>mp(()=>Promise.resolve(t))},Cx=K("sink"),Sx=K(iu({name:Cx(),overrides:K({dom:{tag:"div"},behaviours:pn([ci.config({useFixed:De})]),events:lr([Sh(ef()),Sh(Hc()),Sh(Rp())])})})),Iw=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},vM=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},l8=(t,s,a,i,d,g,p)=>{const w=vM(t,s,i),T=yM(i,t);return w.map(A=>A.bind(D=>_.from(Rb.sketch({...g.menu(),uid:yd(""),data:D,highlightOnOpen:p,onOpenMenu:(N,U)=>{const W=T().getOrDie();ci.position(W,U,{anchor:a}),ms.decloak(d)},onOpenSubmenu:(N,U,W)=>{const le=T().getOrDie();ci.position(le,W,{anchor:{type:"submenu",item:U}}),ms.decloak(d)},onRepositionMenu:(N,U,W)=>{const le=T().getOrDie();ci.position(le,U,{anchor:a}),R(W,pe=>{ci.position(le,pe.triggeredMenu,{anchor:{type:"submenu",item:pe.triggeringItem}})})},onEscape:()=>(Oo.focus(i),ms.close(d),_.some(!0))}))))},xx=(t,s,a,i,d,g,p)=>{const w=Iw(t,a);return l8(t,s,w,a,i,d,p).map(A=>(A.fold(()=>{ms.isOpen(i)&&ms.close(i)},D=>{ms.cloak(i),ms.open(i,D),g(i)}),i))},u8=(t,s,a,i,d,g,p)=>(ms.close(i),li.pure(i)),_A=(t,s,a,i,d,g)=>{const p=oa.getCoupled(a,"sandbox");return(ms.isOpen(p)?u8:xx)(t,s,a,p,i,d,g)},d8=(t,s,a)=>{const i=ss.getCurrent(s).getOr(s),d=hr(t.element);a?zn(i.element,"min-width",d+"px"):Vi(i.element,d)},yM=(t,s)=>t.getSystem().getByUid(s.uid+"-"+Cx()).map(a=>()=>Fo.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Fo.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),wM=t=>{ms.getState(t).each(s=>{Rb.repositionMenus(s)})},AA=(t,s,a)=>{const i=V1(),d=(w,T)=>{const A=Iw(t,s);i.link(s.element),t.matchWidth&&d8(A.hotspot,T,t.useMinWidth),t.onOpen(A,w,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(w,T)},g=(w,T)=>{i.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(w,T)},p=yM(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:Pl.augment(t.sandboxBehaviours,[_n.config({store:{mode:"memory",initialValue:s}}),ms.config({onOpen:d,onClose:g,isPartOf:(w,T,A)=>rm(T,A)||rm(s,A),getAttachPoint:()=>p().getOrDie()}),ss.config({find:w=>ms.getState(w).bind(T=>ss.getCurrent(T))}),Nl.config({channels:{...jh({isExtraPart:Me}),...Cv({doReposition:wM})}})])}},CM=t=>{const s=oa.getCoupled(t,"sandbox");wM(s)},OA=()=>[Ke("sandboxClasses",[]),Pl.field("sandboxBehaviours",[ss,Nl,ms,_n])],m8=K([Mt("dom"),Mt("fetch"),ds("onOpen"),qi("onExecute"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",K({})),pf(),Ra("dropdownBehaviours",[Es,oa,ho,Oo]),Mt("toggleClass"),Ke("eventOrder",{}),Ns("lazySink"),Ke("matchWidth",!1),Ke("useMinWidth",!1),Ns("role")].concat(OA())),f8=K([Uu({schema:[Gp(),Ke("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),Sx()]),g8=(t,s,a,i)=>{const d=D=>Jt(t.dom,"attributes").bind(N=>Jt(N,D)),g=D=>{ms.getState(D).each(N=>{Rb.highlightPrimary(N)})},p=(D,N,U)=>_A(t,xt,D,i,N,U),w=D=>{p(D,g,na.HighlightMenuAndItem).get(te)},T={expand:D=>{Es.isOn(D)||p(D,te,na.HighlightNone).get(te)},open:D=>{Es.isOn(D)||p(D,te,na.HighlightMenuAndItem).get(te)},refetch:D=>oa.getExistingCoupled(D,"sandbox").fold(()=>p(D,te,na.HighlightMenuAndItem).map(te),U=>xx(t,xt,D,U,i,te,na.HighlightMenuAndItem).map(te)),isOpen:Es.isOn,close:D=>{Es.isOn(D)&&p(D,te,na.HighlightMenuAndItem).get(te)},repositionMenus:D=>{Es.isOn(D)&&CM(D)}},A=(D,N)=>(Jd(D),_.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.dropdownBehaviours,[Es.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),oa.config({others:{sandbox:D=>AA(t,D,{onOpen:()=>Es.on(D),onClose:()=>Es.off(D)})}}),ho.config({mode:"special",onSpace:A,onEnter:A,onDown:(D,N)=>{if(uu.isOpen(D)){const U=oa.getCoupled(D,"sandbox");g(U)}else uu.open(D);return _.some(!0)},onEscape:(D,N)=>uu.isOpen(D)?(uu.close(D),_.some(!0)):_.none()}),Oo.config({})]),events:BS(_.some(w)),eventOrder:{...t.eventOrder,[dl()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},uu=jc({name:"Dropdown",configFields:m8(),partFields:f8(),factory:g8,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),h8=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},p8=t=>{const s=_n.getValue(t),a=Qv(t).map(Cm);uu.refetch(s).get(()=>{const i=oa.getCoupled(s,"sandbox");a.each(d=>Qv(i).each(g=>aR(g,d)))})},Mf=(t,s)=>{b8(t).each(a=>{D1(t,a.element,s.event.eventType,s.event.interactionEvent)})},b8=t=>ms.getState(t).bind(Hs.getHighlighted).bind(Hs.getHighlighted),v8=t=>Gi(t.element,ex)?_.some(t.element):la(t.element,"."+ex),kx=(t,s,a)=>{_w(t).each(i=>{B_(i,a),v8(s).each(g=>{B(g,"id").each(p=>To(i.element,"aria-controls",p))})}),To(a.element,"aria-selected","true")},Za=(t,s,a)=>{To(a.element,"aria-selected","false")},y8=t=>{_w(t).each(s=>Oo.focus(s))},w8=t=>oa.getExistingCoupled(t,"sandbox").bind(Qv).map(Cm).map(a=>a.fetchPattern).getOr("");var Tx;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(Tx||(Tx={}));const C8=(t,s,a,i,d)=>{const g=a.shared.providers,p=w=>d?{...w,shortcut:_.none(),icon:w.text.isSome()?_.none():w.icon}:w;switch(t.type){case"menuitem":return RR(t).fold(Bg,w=>_.some(hM(p(w),s,g,i)));case"nestedmenuitem":return NR(t).fold(Bg,w=>_.some(pM(p(w),s,g,i,d)));case"togglemenuitem":return gI(t).fold(Bg,w=>_.some(o8(p(w),s,g,i)));case"separator":return hR(t).fold(Bg,w=>_.some(yx(w)));case"fancymenuitem":return mI(t).fold(Bg,w=>bM(w,a));default:return console.error("Unknown item in general menu",t),_.none()}},S8=(t,s,a,i,d,g,p)=>{const w=i===1,T=!w||t0(t);return bs(Ve(t,A=>{switch(A.type){case"separator":return Bb(A).fold(Bg,D=>_.some(yx(D)));case"cardmenuitem":return uI(A).fold(Bg,D=>_.some(s8({...D,onAction:N=>{D.onAction(N),a(D.value,D.meta)}},d,g,{itemBehaviours:UR(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return nI(A).fold(Bg,D=>_.some(n8(D,s,w,"normal",a,d,g,T)))}}))},SM=(t,s,a,i,d,g)=>{const p=t0(s),w=bs(Ve(s,D=>{const N=W=>d?!Kn(W,"text"):p,U=W=>C8(W,a,i,N(W),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?U({...D,enabled:!1}):U(D)})),T=h8(g);return(d?lR:nx)(t,p,w,1,T)},DA=t=>Rb.singleData(t.value,t),x8=(t,s,a,i)=>{const d=vx(s,i),g=Mb(i);return{data:DA({...t,movement:d,menuBehaviours:Fb.unnamedEvents(s!=="auto"?[]:[zr((p,w)=>{j_(p,4,g.item).each(({numColumns:T,numRows:A})=>{ho.setGridSize(p,A,T)})})])}),menu:{markers:Mb(i),fakeFocus:a===Tx.ContentFocus}}},k8=(t,s)=>KD(Wt.fromDom(s.startContainer)).map(a=>{const i=t.createRng();return i.selectNode(a.dom),i}),T8={register:(t,s)=>{const a=V(!1),i=V(!1),d=yi(Yr.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:pn([fs("dismissAutocompleter",[Zt(Xd(),()=>A())])]),lazySink:s.getSink})),g=()=>Yr.isOpen(d),p=i.get,w=()=>{g()&&Yr.hide(d)},T=()=>Yr.getContent(d).bind(le=>ro(le.components(),0)),A=()=>t.execCommand("mceAutocompleterClose"),D=le=>{const pe=ao(le,st=>_.from(st.columns)).getOr(1);return Y(le,st=>{const $e=st.items;return S8($e,st.matchText,(at,Sn)=>{const dt=t.selection.getRng();k8(t.dom,dt).each(An=>{const Gn={hide:()=>A(),reload:Ln=>{w(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ln})}};a.set(!0),st.onAction(Gn,An,at,Sn),a.set(!1)})},pe,wm.BUBBLE_TO_SANDBOX,s,st.highlightOn)})},N=(le,pe)=>{B5(Wt.fromDom(t.getBody())).each(st=>{const $e=ao(le,at=>_.from(at.columns)).getOr(1);Yr.showMenuAt(d,{anchor:{type:"node",root:Wt.fromDom(t.getBody()),node:_.from(st)}},x8(nx("autocompleter-value",!0,pe,$e,{menuType:"normal"}),$e,Tx.ContentFocus,"normal"))}),T().each(Hs.highlightFirst)},U=le=>{const pe=D(le);pe.length>0?N(le,pe):w()};t.on("AutocompleterStart",({lookupData:le})=>{i.set(!0),a.set(!1),U(le)}),t.on("AutocompleterUpdate",({lookupData:le})=>U(le)),t.on("AutocompleterEnd",()=>{w(),i.set(!1),a.set(!1)});const W={cancelIfNecessary:A,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:T};P5.setup(W,t)}},Lw=(t,s,a)=>Ml(t,s,a).isSome(),xM=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},kM=5,E8=400,TM=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?_.none():_.some(s.touches[0])},_8=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>kM||i>kM},A8=t=>{const s=Vr(),a=V(!1),i=xM(A=>{t.triggerEvent(k1(),A),a.set(!0)},E8),d=A=>(TM(A).each(D=>{i.cancel();const N={x:D.clientX,y:D.clientY,target:A.target};i.schedule(A),a.set(!1),s.set(N)}),_.none()),g=A=>(i.cancel(),TM(A).each(D=>{s.on(N=>{_8(D,N)&&s.clear()})}),_.none()),p=A=>{i.cancel();const D=N=>zs(N.target,A.target);return s.get().filter(D).map(N=>a.get()?(A.prevent(),!1):t.triggerEvent(vh(),A))},w=er([{key:tr(),value:d},{key:za(),value:g},{key:Lc(),value:p}]);return{fireIfReady:(A,D)=>Jt(w,D).bind(N=>N(A))}},O8=t=>t.raw.which===WE[0]&&!dn(["input","textarea"],qo(t.target))&&!Lw(t.target,'[contenteditable="true"]'),D8=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=A8(a),g=Ve(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),W=>ai(t,W,le=>{d.fireIfReady(le,W).each(st=>{st&&le.kill()}),a.triggerEvent(W,le)&&le.kill()})),p=Vr(),w=ai(t,"paste",W=>{d.fireIfReady(W,"paste").each(pe=>{pe&&W.kill()}),a.triggerEvent("paste",W)&&W.kill(),p.set(setTimeout(()=>{a.triggerEvent(V0(),W)},0))}),T=ai(t,"keydown",W=>{a.triggerEvent("keydown",W)?W.kill():a.stopBackspace&&O8(W)&&W.prevent()}),A=ai(t,"focusin",W=>{a.triggerEvent("focusin",W)&&W.kill()}),D=Vr(),N=ai(t,"focusout",W=>{a.triggerEvent("focusout",W)&&W.kill(),D.set(setTimeout(()=>{a.triggerEvent(Mp(),W)},0))});return{unbind:()=>{R(g,W=>{W.unbind()}),T.unbind(),A.unbind(),N.unbind(),w.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},EM=(t,s)=>{const a=Jt(t,"target").getOr(s);return V(a)},R8=(t,s)=>{const a=V(!1),i=V(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},M8=t=>{const s=V(!1);return{stop:()=>{s.set(!0)},cut:te,isStopped:s.get,isCut:Me,event:t,setSource:Q("Cannot set source of a broadcasted event"),getSource:Q("Cannot get source of a broadcasted event")}},Hw=ht.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),_M=(t,s,a,i,d,g)=>{const p=t(s,i),w=R8(a,d);return p.fold(()=>(g.logEventNoHandlers(s,i),Hw.complete()),T=>{const A=T.descHandler;return ag(A)(w),w.isStopped()?(g.logEventStopped(s,T.element,A.purpose),Hw.stopped()):w.isCut()?(g.logEventCut(s,T.element,A.purpose),Hw.complete()):sa(T.element).fold(()=>(g.logNoParent(s,T.element,A.purpose),Hw.complete()),N=>(g.logEventResponse(s,T.element,A.purpose),Hw.resume(N)))})},RA=(t,s,a,i,d,g)=>_M(t,s,a,i,d,g).fold(De,p=>RA(t,s,a,p,d,g),Me),N8=(t,s,a,i,d)=>{const g=EM(a,i);return _M(t,s,a,i,g,d)},$8=(t,s,a)=>{const i=M8(s);return R(t,d=>{const g=d.descHandler;ag(g)(i)}),i.isStopped()},B8=(t,s,a,i)=>MA(t,s,a,a.target,i),MA=(t,s,a,i,d)=>{const g=EM(a,i);return RA(t,s,a,i,g,d)},P8=(t,s)=>({element:t,descHandler:s}),F8=(t,s)=>({id:t,descHandler:s}),I8=()=>{const t={},s=(p,w,T)=>{Lt(T,(A,D)=>{const N=t[D]!==void 0?t[D]:{};N[w]=Hp(A,p),t[D]=N})},a=(p,w)=>sg(w).bind(T=>Jt(p,T)).map(T=>P8(w,T));return{registerId:s,unregisterId:p=>{Lt(t,(w,T)=>{Kn(w,p)&&delete w[p]})},filterByType:p=>Jt(t,p).map(w=>Le(w,(T,A)=>F8(A,T))).getOr([]),find:(p,w,T)=>Jt(t,w).bind(A=>pd(T,D=>a(A,D),p))}},AM=()=>{const t=I8(),s={},a=A=>{const D=A.element;return sg(D).getOrThunk(()=>N1("uid-",A.element))},i=(A,D)=>{const N=s[D];if(N===A)g(A);else throw new Error('The tagId "'+D+'" is already used by: '+of(N.element)+`
Cannot use it for: `+of(A.element)+`
The conflicting element is`+(Gr(N.element)?" ":" not ")+"already in the DOM")},d=A=>{const D=a(A);Ts(s,D)&&i(A,D);const N=[A];t.registerId(N,D,A.events),s[D]=A},g=A=>{sg(A.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(A,D,N)=>t.find(A,D,N),filter:A=>t.filterByType(A),register:d,unregister:g,getById:A=>Jt(s,A)}},xm=Il({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Ag(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Ke("components",[]),Ra("containerBehaviours",[]),Ke("events",{}),Ke("domModification",{}),Ke("eventOrder",{})]}),OM=t=>{const s=$e=>sa(t.element).fold(De,at=>zs($e,at)),a=AM(),i=($e,at)=>a.find(s,$e,at),d=D8(t.element,{triggerEvent:($e,at)=>$h($e,at.target,Sn=>B8(i,$e,at,Sn))}),g={debugInfo:K("real"),triggerEvent:($e,at,Sn)=>{$h($e,at,dt=>MA(i,$e,Sn,at,dt))},triggerFocus:($e,at)=>{sg($e).fold(()=>{lm($e)},Sn=>{$h(Yd(),$e,dt=>(N8(i,Yd(),{originator:at,kill:te,prevent:te,target:$e},$e,dt),!1))})},triggerEscape:($e,at)=>{g.triggerEvent("keydown",$e.element,at.event)},getByUid:$e=>pe($e),getByDom:$e=>st($e),build:yi,buildOrPatch:H1,addToGui:$e=>{T($e)},removeFromGui:$e=>{A($e)},addToWorld:$e=>{p($e)},removeFromWorld:$e=>{w($e)},broadcast:$e=>{U($e)},broadcastOn:($e,at)=>{W($e,at)},broadcastEvent:($e,at)=>{le($e,at)},isConnected:De},p=$e=>{$e.connect(g),Fr($e.element)||(a.register($e),R($e.components(),p),g.triggerEvent(T1(),$e.element,{target:$e.element}))},w=$e=>{Fr($e.element)||(R($e.components(),w),a.unregister($e)),$e.disconnect()},T=$e=>{Oc(t,$e)},A=$e=>{Dc($e)},D=()=>{d.unbind(),Yl(t.element)},N=$e=>{const at=a.filter(ou());R(at,Sn=>{const dt=Sn.descHandler;ag(dt)($e)})},U=$e=>{N({universal:!0,data:$e})},W=($e,at)=>{N({universal:!1,channels:$e,data:at})},le=($e,at)=>{const Sn=a.filter($e);return $8(Sn,at)},pe=$e=>a.getById($e).fold(()=>Fo.error(new Error('Could not find component with uid: "'+$e+'" in system.')),Fo.value),st=$e=>{const at=sg($e).getOr("not found");return pe(at)};return p(t),{root:t,element:t.element,destroy:D,add:T,remove:A,getByUid:pe,getByDom:st,addToWorld:p,removeFromWorld:w,broadcast:U,broadcastOn:W,broadcastEvent:le}},L8=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ve(t.items,s.interpreter)}),DM=K([Ke("prefix","form-field"),Ra("fieldBehaviours",[ss,_n])]),H8=K([iu({schema:[Mt("dom")],name:"label"}),iu({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Mt("text")],name:"aria-descriptor"}),Zc({factory:{sketch:t=>{const s=ir(t,["factory"]);return t.factory.sketch(s)}},schema:[Mt("factory")],name:"field"})]),RM=(t,s,a,i)=>{const d=gc(t.fieldBehaviours,[ss.config({find:w=>rr(w,t,"field")}),_n.config({store:{mode:"manual",getValue:w=>ss.getCurrent(w).bind(_n.getValue),setValue:(w,T)=>{ss.getCurrent(w).each(A=>{_n.setValue(A,T)})}}})]),g=lr([zr((w,T)=>{const A=kf(w,t,["label","field","aria-descriptor"]);A.field().each(D=>{const N=Yn(t.prefix);A.label().each(U=>{To(U.element,"for",N),To(D.element,"id",N)}),A["aria-descriptor"]().each(U=>{const W=Yn(t.prefix);To(U.element,"id",W),To(D.element,"aria-describedby",W)})})})]),p={getField:w=>rr(w,t,"field"),getLabel:w=>rr(w,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},Us=jc({name:"FormField",configFields:DM(),partFields:H8(),factory:RM,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var V8=Object.freeze({__proto__:null,exhibit:(t,s)=>ru({attributes:er([{key:s.tabAttr,value:"true"}])})}),U8=[Ke("tabAttr","data-alloy-tabstop")];const xa=fc({fields:U8,name:"tabstopping",active:V8});var W8=tinymce.util.Tools.resolve("tinymce.html.Entities");const zw=(t,s,a,i)=>{const d=j8(t,s,a,i);return Us.sketch(d)},Z8=(t,s)=>zw(t,s,[],[]),j8=(t,s,a,i)=>({dom:MM(a),components:t.toArray().concat([s]),fieldBehaviours:pn(i)}),G8=()=>MM([]),MM=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),fp=(t,s)=>Us.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Va(s.translate(t))]}),Vl=Yn("form-component-change"),Vw=Yn("form-close"),gp=Yn("form-cancel"),Ig=Yn("form-action"),Uw=Yn("form-submit"),NA=Yn("form-block"),$A=Yn("form-unblock"),NM=Yn("form-tabchange"),Ex=Yn("form-resize"),q8=(t,s,a)=>{const i=t.label.map(N=>fp(N,s)),d=N=>(U,W)=>{Ml(W.event.target,"[data-collection-item-value]").each(le=>{N(U,W,le,sr(le,"data-collection-item-value"))})},g=(N,U)=>{const W=Ve(U,st=>{const $e=Rd.translate(st.text),at=t.columns===1?`<div class="tox-collection__item-label">${$e}</div>`:"",Sn=`<div class="tox-collection__item-icon">${st.icon}</div>`,dt={_:" "," - ":" ","-":" "},An=$e.replace(/\_| \- |\-/g,Ln=>dt[Ln]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${W8.encodeAllRaw(st.value)}" title="${An}" aria-label="${An}">${Sn}${at}</div>`}),le=t.columns!=="auto"&&t.columns>1?Nt(W,t.columns):[W],pe=Ve(le,st=>`<div class="tox-collection__group">${st.join("")}</div>`);nf(N.element,pe.join(""))},p=d((N,U,W,le)=>{U.stop(),s.isDisabled()||yo(N,Ig,{name:t.name,value:le})}),w=[Zt(qd(),d((N,U,W)=>{lm(W)})),Zt(Rp(),p),Zt(vh(),p),Zt(Qm(),d((N,U,W)=>{la(N.element,"."+Ew).each(le=>{ia(le,Ew)}),wa(W,Ew)})),Zt(mT(),d(N=>{la(N.element,"."+Ew).each(U=>{ia(U,Ew)})})),ml(d((N,U,W,le)=>{yo(N,Ig,{name:t.name,value:le})}))],T=(N,U)=>Ve(Wc(N.element,".tox-collection__item"),U),A=Us.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:xt},behaviours:pn([Eo.config({disabled:s.isDisabled,onDisabled:N=>{T(N,U=>{wa(U,"tox-collection__item--state-disabled"),To(U,"aria-disabled",!0)})},onEnabled:N=>{T(N,U=>{ia(U,"tox-collection__item--state-disabled"),de(U,"aria-disabled")})}}),Sa(),zo.config({}),_n.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(N,U)=>{g(N,U),t.columns==="auto"&&j_(N,5,"tox-collection__item").each(({numRows:W,numColumns:le})=>{ho.setGridSize(N,W,le)}),Vs(N,Ex)}}),xa.config({}),ho.config(WI(t.columns,"normal")),fs("collection-events",w)]),eventOrder:{[dl()]:["disabling","alloy.base.behaviour","collection-events"]}});return zw(i,A,["tox-form__group--collection"],[])},K8=["input","textarea"],$M=t=>{const s=qo(t);return dn(K8,s)},BM=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ia(a,s.invalidClass),s.notify.each(i=>{$M(t.element)&&To(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{nf(d,i.validHtml)}),i.onValid(t)})},PM=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);wa(d,s.invalidClass),s.notify.each(g=>{$M(t.element)&&To(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{nf(p,i)}),g.onInvalid(t,i)})},FM=(t,s,a)=>s.validator.fold(()=>li.pure(Fo.value(!0)),i=>i.validate(t)),i0=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),FM(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(PM(t,s,a,d),Fo.error(d)),d=>(BM(t,s),Fo.value(d))):Fo.error("No longer in system")));var _x=Object.freeze({__proto__:null,markValid:BM,markInvalid:PM,query:FM,run:i0,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Gi(a,s.invalidClass)}}),Y8=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>lr([Zt(a.onEvent,i=>{i0(i,t,s).get(xt)})].concat(a.validateOnLoad?[zr(i=>{i0(i,t,s).get(te)})]:[]))).getOr({})}),X8=[Mt("invalidClass"),Ke("getRoot",_.none),pi("notify",[Ke("aria","alert"),Ke("getContainer",_.none),Ke("validHtml",""),ds("onValid"),ds("onInvalid"),ds("onValidate")]),pi("validator",[Mt("validate"),Ke("onEvent","input"),Ke("validateOnLoad",!0)])];const Nf=fc({fields:X8,name:"invalidating",active:Y8,apis:_x,extra:{validation:t=>s=>{const a=_n.getValue(s);return li.pure(t(a))}}});var l0=Object.freeze({__proto__:null,events:()=>lr([zC(x1(),De)]),exhibit:()=>ru({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const u0=fc({fields:[],name:"unselecting",active:l0}),IM=(t,s)=>uu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:pn([Hl.button(s.providers.isDisabled),Sa(),u0.config({}),xa.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>li.nu(i=>t.fetch(i)).map(i=>_.from(DA(pr(SA(Yn("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,wm.CLOSE_ON_EXECUTE,Me,s.providers),{movement:vx(t.columns,t.presets)})))),parts:{menu:Xv(!1,1,t.presets)}}),LM=Yn("color-input-change"),HM=Yn("color-swatch-change"),zM=Yn("color-picker-cancel"),J8=(t,s,a,i)=>{const d=Us.parts.field({factory:Jv,inputClasses:["tox-textfield"],data:i,onSetValue:A=>Nf.run(A).get(te),inputBehaviours:pn([Eo.config({disabled:s.providers.isDisabled}),Sa(),xa.config({}),Nf.config({invalidClass:"tox-textbox-field-invalid",getRoot:A=>Ei(A.element),notify:{onValid:A=>{const D=_n.getValue(A);yo(A,LM,{color:D})}},validator:{validateOnLoad:!1,validate:A=>{const D=_n.getValue(A);if(D.length===0)return li.pure(Fo.value(!0));{const N=Wt.fromTag("span");zn(N,"background-color",D);const U=Qs(N,"background-color").fold(()=>Fo.error("blah"),W=>Fo.value(D));return li.pure(U)}}}})]),selectOnFocus:!1}),g=t.label.map(A=>fp(A,s.providers)),p=(A,D)=>{yo(A,HM,{value:D})},w=(A,D)=>{T.getOpt(A).each(N=>{D==="custom"?a.colorPicker(U=>{U.fold(()=>Vs(N,zM),W=>{p(N,W),cA(t.storageKey,W)})},"#ffffff"):D==="remove"?p(N,""):p(N,D)})},T=Cr(IM({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[_c,Ec,Ua],onLtr:()=>[Ec,_c,Ua]},components:[],fetch:wA(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:w},s));return Us.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:pn([fs("form-field-events",[Zt(LM,(A,D)=>{T.getOpt(A).each(N=>{zn(N.element,"background-color",D.event.color)}),yo(A,Vl,{name:t.name})}),Zt(HM,(A,D)=>{Us.getField(A).each(N=>{_n.setValue(N,D.event.value),ss.getCurrent(A).each(Oo.focus)})}),Zt(zM,(A,D)=>{Us.getField(A).each(N=>{ss.getCurrent(A).each(Oo.focus)})})])])})},Q8=iu({schema:[Mt("dom")],name:"label"}),hp=t=>iu({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:lr([vd(tr(),(d,g,p)=>i(d,p),[s]),vd(Hc(),(d,g,p)=>i(d,p),[s]),vd(Ri(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),e6=hp("top-left"),t6=hp("top"),n6=hp("top-right"),o6=hp("right"),s6=hp("bottom-right"),VM=hp("bottom"),d0=hp("bottom-left"),zb=hp("left"),r6=Zc({name:"thumb",defaults:K({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:lr([og(tr(),t,"spectrum"),og(za(),t,"spectrum"),og(Lc(),t,"spectrum"),og(Hc(),t,"spectrum"),og(Ri(),t,"spectrum"),og(Op(),t,"spectrum")])})}),UM=Zc({schema:[kc("mouseIsDown",()=>V(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:pn([ho.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),Oo.config({})]),events:lr([Zt(tr(),i),Zt(za(),i),Zt(Hc(),i),Zt(Ri(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var WM=[Q8,zb,o6,t6,VM,e6,n6,d0,s6,r6,UM];const Ww=K("slider.change.value"),Zw=t=>t.type.indexOf("touch")!==-1,Vb=t=>{const s=t.event.raw;if(Zw(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?_.some(a.touches[0]).map(i=>Yo(i.clientX,i.clientY)):_.none()}else{const a=s;return a.clientX!==void 0?_.some(a).map(i=>Yo(i.clientX,i.clientY)):_.none()}},a6="top",c6="right",i6="bottom",l6="left",Ub=t=>t.model.minX,Wb=t=>t.model.minY,Zb=t=>t.model.minX-1,Ax=t=>t.model.minY-1,jb=t=>t.model.maxX,Gb=t=>t.model.maxY,jw=t=>t.model.maxX+1,Ox=t=>t.model.maxY+1,ZM=(t,s,a)=>s(t)-a(t),FA=t=>ZM(t,jb,Ub),IA=t=>ZM(t,Gb,Wb),jM=t=>FA(t)/2,LA=t=>IA(t)/2,m0=t=>t.stepSize,GM=t=>t.snapToGrid,qM=t=>t.snapStart,KM=t=>t.rounded,Dx=(t,s)=>t[s+"-edge"]!==void 0,HA=t=>Dx(t,l6),zA=t=>Dx(t,c6),YM=t=>Dx(t,a6),XM=t=>Dx(t,i6),Lg=t=>t.model.value.get(),Hg=(t,s)=>({x:t,y:s}),tl=(t,s)=>{yo(t,Ww(),{value:s})},u6=(t,s)=>{tl(t,Hg(Zb(s),Ax(s)))},d6=(t,s)=>{tl(t,Ax(s))},m6=(t,s)=>{tl(t,Hg(jM(s),Ax(s)))},Rx=(t,s)=>{tl(t,Hg(jw(s),Ax(s)))},Yu=(t,s)=>{tl(t,jw(s))},VA=(t,s)=>{tl(t,Hg(jw(s),LA(s)))},JM=(t,s)=>{tl(t,Hg(jw(s),Ox(s)))},f6=(t,s)=>{tl(t,Ox(s))},g6=(t,s)=>{tl(t,Hg(jM(s),Ox(s)))},h6=(t,s)=>{tl(t,Hg(Zb(s),Ox(s)))},p6=(t,s)=>{tl(t,Zb(s))},QM=(t,s)=>{tl(t,Hg(Zb(s),LA(s)))},Mx=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),UA=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),eN=(t,s,a)=>Math.max(s,Math.min(a,t)),tN=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return eN(s+p,s-1,a+1)},g=>{const p=(t-g)%i,w=Math.round(p/i),T=Math.floor((t-g)/i),A=Math.floor((a-g)/i),D=Math.min(A,T+w),N=g+D*i;return Math.max(g,N)}),b6=(t,s,a)=>Math.min(a,Math.max(t,s))-s,WA=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:p,snapStart:w,rounded:T,hasMinEdge:A,hasMaxEdge:D,minBound:N,maxBound:U,screenRange:W}=t,le=A?s-1:s,pe=D?a+1:a;if(d<N)return le;if(d>U)return pe;{const st=b6(d,N,U),$e=eN(st/W*i+s,le,pe);return p&&$e>=s&&$e<=a?tN($e,s,a,g,w):T?Math.round($e):$e}},ZA=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:w,maxOffset:T,centerMinEdge:A,centerMaxEdge:D}=t;return d<s?g?0:A:d>a?p?w:D:(d-s)/i*T},Nx="top",nN="right",oN="bottom",jA="left",v6="width",y6="height",$f=t=>t.element.dom.getBoundingClientRect(),du=(t,s)=>t[s],$x=t=>{const s=$f(t);return du(s,jA)},GA=t=>{const s=$f(t);return du(s,nN)},Bx=t=>{const s=$f(t);return du(s,Nx)},sN=t=>{const s=$f(t);return du(s,oN)},rN=t=>{const s=$f(t);return du(s,v6)},aN=t=>{const s=$f(t);return du(s,y6)},cN=(t,s,a)=>(t+s)/2-a,iN=(t,s)=>{const a=$f(t),i=$f(s),d=du(a,jA),g=du(a,nN),p=du(i,jA);return cN(d,g,p)},lN=(t,s)=>{const a=$f(t),i=$f(s),d=du(a,Nx),g=du(a,oN),p=du(i,Nx);return cN(d,g,p)},Gw=(t,s)=>{yo(t,Ww(),{value:s})},Px=(t,s,a)=>{const i={min:Ub(s),max:jb(s),range:FA(s),value:a,step:m0(s),snap:GM(s),snapStart:qM(s),rounded:KM(s),hasMinEdge:HA(s),hasMaxEdge:zA(s),minBound:$x(t),maxBound:GA(t),screenRange:rN(t)};return WA(i)},w6=(t,s,a)=>{const i=Px(t,s,a);return Gw(t,i),i},C6=(t,s)=>{const a=Ub(s);Gw(t,a)},S6=(t,s)=>{const a=jb(s);Gw(t,a)},x6=(t,s,a)=>{const d=(t>0?UA:Mx)(Lg(a),Ub(a),jb(a),m0(a));return Gw(s,d),_.some(d)},uN=t=>(s,a)=>x6(t,s,a).map(De),dN=t=>Vb(t).map(a=>a.left),mN=(t,s,a,i,d)=>{const p=rN(t),w=i.bind(D=>_.some(iN(D,t))).getOr(0),T=d.bind(D=>_.some(iN(D,t))).getOr(p),A={min:Ub(s),max:jb(s),range:FA(s),value:a,hasMinEdge:HA(s),hasMaxEdge:zA(s),minBound:$x(t),minOffset:0,maxBound:GA(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:T};return ZA(A)},Fx=(t,s,a,i,d,g)=>{const p=mN(s,g,a,i,d);return $x(s)-$x(t)+p},qA=(t,s,a,i)=>{const d=Lg(a),g=Fx(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),p=hr(s.element)/2;zn(s.element,"left",g-p+"px")},k6=uN(-1),fN=uN(1),T6=_.none,E6=_.none,_6={"top-left":_.none(),top:_.none(),"top-right":_.none(),right:_.some(Yu),"bottom-right":_.none(),bottom:_.none(),"bottom-left":_.none(),left:_.some(p6)};var A6=Object.freeze({__proto__:null,setValueFrom:w6,setToMin:C6,setToMax:S6,findValueOfOffset:Px,getValueFromEvent:dN,findPositionOfValue:Fx,setPositionFromValue:qA,onLeft:k6,onRight:fN,onUp:T6,onDown:E6,edgeActions:_6});const f0=(t,s)=>{yo(t,Ww(),{value:s})},km=(t,s,a)=>{const i={min:Wb(s),max:Gb(s),range:IA(s),value:a,step:m0(s),snap:GM(s),snapStart:qM(s),rounded:KM(s),hasMinEdge:YM(s),hasMaxEdge:XM(s),minBound:Bx(t),maxBound:sN(t),screenRange:aN(t)};return WA(i)},O6=(t,s,a)=>{const i=km(t,s,a);return f0(t,i),i},qw=(t,s)=>{const a=Wb(s);f0(t,a)},D6=(t,s)=>{const a=Gb(s);f0(t,a)},KA=(t,s,a)=>{const d=(t>0?UA:Mx)(Lg(a),Wb(a),Gb(a),m0(a));return f0(s,d),_.some(d)},gN=t=>(s,a)=>KA(t,s,a).map(De),R6=t=>Vb(t).map(a=>a.top),M6=(t,s,a,i,d)=>{const p=aN(t),w=i.bind(D=>_.some(lN(D,t))).getOr(0),T=d.bind(D=>_.some(lN(D,t))).getOr(p),A={min:Wb(s),max:Gb(s),range:IA(s),value:a,hasMinEdge:YM(s),hasMaxEdge:XM(s),minBound:Bx(t),minOffset:0,maxBound:sN(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:T};return ZA(A)},Ix=(t,s,a,i,d,g)=>{const p=M6(s,g,a,i,d);return Bx(s)-Bx(t)+p},N6=(t,s,a,i)=>{const d=Lg(a),g=Ix(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),p=ft(s.element)/2;zn(s.element,"top",g-p+"px")},YA=_.none,XA=_.none,JA=gN(-1),$6=gN(1),mu={"top-left":_.none(),top:_.some(d6),"top-right":_.none(),right:_.none(),"bottom-right":_.none(),bottom:_.some(f6),"bottom-left":_.none(),left:_.none()};var B6=Object.freeze({__proto__:null,setValueFrom:O6,setToMin:qw,setToMax:D6,findValueOfOffset:km,getValueFromEvent:R6,findPositionOfValue:Ix,setPositionFromValue:N6,onLeft:YA,onRight:XA,onUp:JA,onDown:$6,edgeActions:mu});const Lx=(t,s)=>{yo(t,Ww(),{value:s})},Kw=(t,s)=>({x:t,y:s}),hN=(t,s,a)=>{const i=Px(t,s,a.left),d=km(t,s,a.top),g=Kw(i,d);return Lx(t,g),g},P6=(t,s,a,i)=>{const d=t>0?UA:Mx,g=s?Lg(i).x:d(Lg(i).x,Ub(i),jb(i),m0(i)),p=s?d(Lg(i).y,Wb(i),Gb(i),m0(i)):Lg(i).y;return Lx(a,Kw(g,p)),_.some(g)},Hx=(t,s)=>(a,i)=>P6(t,s,a,i).map(De),F6=(t,s)=>{const a=Ub(s),i=Wb(s);Lx(t,Kw(a,i))},I6=(t,s)=>{const a=jb(s),i=Gb(s);Lx(t,Kw(a,i))},L6=t=>Vb(t),H6=(t,s,a,i)=>{const d=Lg(a),g=Fx(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),p=Ix(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),w=hr(s.element)/2,T=ft(s.element)/2;zn(s.element,"left",g-w+"px"),zn(s.element,"top",p-T+"px")},z6=Hx(-1,!1),pN=Hx(1,!1),V6=Hx(-1,!0),U6=Hx(1,!0),W6={"top-left":_.some(u6),top:_.some(m6),"top-right":_.some(Rx),right:_.some(VA),"bottom-right":_.some(JM),bottom:_.some(g6),"bottom-left":_.some(h6),left:_.some(QM)};var bN=Object.freeze({__proto__:null,setValueFrom:hN,setToMin:F6,setToMax:I6,getValueFromEvent:L6,setPositionFromValue:H6,onLeft:z6,onRight:pN,onUp:V6,onDown:U6,edgeActions:W6});const QA=[Ke("stepSize",1),Ke("onChange",te),Ke("onChoose",te),Ke("onInit",te),Ke("onDragStart",te),Ke("onDragEnd",te),Ke("snapToGrid",!1),Ke("rounded",!0),Ns("snapStart"),Di("model",gi("mode",{x:[Ke("minX",0),Ke("maxX",100),kc("value",t=>V(t.mode.minX)),Mt("getInitialValue"),vr("manager",A6)],y:[Ke("minY",0),Ke("maxY",100),kc("value",t=>V(t.mode.minY)),Mt("getInitialValue"),vr("manager",B6)],xy:[Ke("minX",0),Ke("maxX",100),Ke("minY",0),Ke("maxY",100),kc("value",t=>V({x:t.mode.minX,y:t.mode.minY})),Mt("getInitialValue"),vr("manager",bN)]})),Ra("sliderBehaviours",[ho,_n]),kc("mouseIsDown",()=>V(!1))],fu=jc({name:"Slider",configFields:QA,partFields:WM,factory:(t,s,a,i)=>{const d=dt=>Wn(dt,t,"thumb"),g=dt=>Wn(dt,t,"spectrum"),p=dt=>rr(dt,t,"left-edge"),w=dt=>rr(dt,t,"right-edge"),T=dt=>rr(dt,t,"top-edge"),A=dt=>rr(dt,t,"bottom-edge"),D=t.model,N=D.manager,U=(dt,An)=>{N.setPositionFromValue(dt,An,t,{getLeftEdge:p,getRightEdge:w,getTopEdge:T,getBottomEdge:A,getSpectrum:g})},W=(dt,An)=>{D.value.set(An);const Gn=d(dt);U(dt,Gn)},le=(dt,An)=>{W(dt,An);const Gn=d(dt);return t.onChange(dt,Gn,An),_.some(!0)},pe=dt=>{N.setToMin(dt,t)},st=dt=>{N.setToMax(dt,t)},$e=dt=>{const An=()=>{rr(dt,t,"thumb").each(Ln=>{const vo=D.value.get();t.onChoose(dt,Ln,vo)})},Gn=t.mouseIsDown.get();t.mouseIsDown.set(!1),Gn&&An()},at=(dt,An)=>{An.stop(),t.mouseIsDown.set(!0),t.onDragStart(dt,d(dt))},Sn=(dt,An)=>{An.stop(),t.onDragEnd(dt,d(dt)),$e(dt)};return{uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.sliderBehaviours,[ho.config({mode:"special",focusIn:dt=>rr(dt,t,"spectrum").map(ho.focusIn).map(De)}),_n.config({store:{mode:"manual",getValue:dt=>D.value.get(),setValue:W}}),Nl.config({channels:{[Cf()]:{onReceive:$e}}})]),events:lr([Zt(Ww(),(dt,An)=>{le(dt,An.event.value)}),zr((dt,An)=>{const Gn=D.getInitialValue();D.value.set(Gn);const Ln=d(dt);U(dt,Ln);const vo=g(dt);t.onInit(dt,Ln,vo,D.value.get())}),Zt(tr(),at),Zt(Lc(),Sn),Zt(Hc(),at),Zt(Op(),Sn)]),apis:{resetToMin:pe,resetToMax:st,setValue:W,refresh:U},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),pp=Yn("rgb-hex-update"),e3=Yn("slider-update"),t3=Yn("palette-update"),vN=(t,s)=>{const a=fu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=fu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return fu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:K(0)},components:[a,i],sliderBehaviours:pn([Oo.config({})]),onChange:(d,g,p)=>{yo(d,e3,{value:p})}})},yN="form",Z6=[Ra("formBehaviours",[_n])],Yw=t=>"<alloy.field."+t+">",j6=t=>{const s=(()=>{const g=[];return{field:(w,T)=>(g.push(w),Yy(yN,Yw(w),T)),record:K(g)}})(),a=t(s),i=s.record(),d=Ve(i,g=>Zc({name:g,pname:Yw(g)}));return Sb(yN,Z6,d,wN,a)},G6=(t,s)=>t.fold(()=>Fo.error(s),Fo.value),wN=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.formBehaviours,[_n.config({store:{mode:"manual",getValue:a=>{const i=gS(a,t);return fn(i,(d,g)=>d().bind(p=>{const w=ss.getCurrent(p);return G6(w,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+of(p.element)))}).map(_n.getValue))},setValue:(a,i)=>{Lt(i,(d,g)=>{rr(a,t,g).each(p=>{ss.getCurrent(p).each(w=>{_n.setValue(w,d)})})})}}})]),apis:{getField:(a,i)=>rr(a,t,i).bind(ss.getCurrent)}}),qb={getField:Th((t,s,a)=>t.getField(s,a)),sketch:j6},zx=Yn("valid-input"),n3=Yn("invalid-input"),Fi=Yn("validating-input"),Vx="colorcustom.rgb.",q6=(t,s,a,i)=>{const d=(U,W)=>Nf.config({invalidClass:s("invalid"),notify:{onValidate:le=>{yo(le,Fi,{type:U})},onValid:le=>{yo(le,zx,{type:U,value:_n.getValue(le)})},onInvalid:le=>{yo(le,n3,{type:U,value:_n.getValue(le)})}},validator:{validate:le=>{const pe=_n.getValue(le),st=W(pe)?Fo.value(!0):Fo.error(t("aria.input.invalid"));return li.pure(st)},validateOnLoad:!1}}),g=(U,W,le,pe,st)=>{const $e=t(Vx+"range"),at=Us.parts.label({dom:{tag:"label",attributes:{"aria-label":pe}},components:[Va(le)]}),Sn=Us.parts.field({data:st,factory:Jv,inputAttributes:{type:"text",...W==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:pn([d(W,U),xa.config({})]),onSetValue:Ln=>{Nf.isInvalid(Ln)&&Nf.run(Ln).get(te)}}),dt=[at,Sn],An=W!=="hex"?[Us.parts["aria-descriptor"]({text:$e})]:[],Gn=dt.concat(An);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Gn}},p=(U,W)=>{const le=Bw(W);return qb.getField(U,"hex").each(pe=>{Oo.isFocused(pe)||_n.setValue(U,{hex:le.value})}),le},w=(U,W)=>{const le=W.red,pe=W.green,st=W.blue;_n.setValue(U,{red:le,green:pe,blue:st})},T=Cr({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),A=(U,W)=>{T.getOpt(U).each(le=>{zn(le.element,"background-color","#"+W.value)})};return Il({factory:()=>{const U={red:V(_.some(255)),green:V(_.some(255)),blue:V(_.some(255)),hex:V(_.some("ffffff"))},W=(io,Jo)=>{const $s=Pw(Jo);w(io,$s),$e($s)},le=io=>U[io].get(),pe=(io,Jo)=>{U[io].set(Jo)},st=()=>le("red").bind(io=>le("green").bind(Jo=>le("blue").map($s=>dp(io,Jo,$s,1)))),$e=io=>{const Jo=io.red,$s=io.green,hs=io.blue;pe("red",_.some(Jo)),pe("green",_.some($s)),pe("blue",_.some(hs))},at=(io,Jo)=>{const $s=Jo.event;$s.type!=="hex"?pe($s.type,_.none()):i(io)},Sn=(io,Jo)=>{a(io);const $s=GR(Jo);pe("hex",_.some(Jo));const hs=Pw($s);w(io,hs),$e(hs),yo(io,pp,{hex:$s}),A(io,$s)},dt=(io,Jo,$s)=>{const hs=parseInt($s,10);pe(Jo,_.some(hs)),st().each(gn=>{const Fn=p(io,gn);yo(io,pp,{hex:Fn}),A(io,Fn)})},An=io=>io.type==="hex",Gn=(io,Jo)=>{const $s=Jo.event;An($s)?Sn(io,$s.value):dt(io,$s.type,$s.value)},Ln=io=>({label:t(Vx+io+".label"),description:t(Vx+io+".description")}),vo=Ln("red"),wo=Ln("green"),Zo=Ln("blue"),ws=Ln("hex");return pr(qb.sketch(io=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[io.field("red",Us.sketch(g(px,"red",vo.label,vo.description,255))),io.field("green",Us.sketch(g(px,"green",wo.label,wo.description,255))),io.field("blue",Us.sketch(g(px,"blue",Zo.label,Zo.description,255))),io.field("hex",Us.sketch(g(tA,"hex",ws.label,ws.description,"ffffff"))),T.asSpec()],formBehaviours:pn([Nf.config({invalidClass:s("form-invalid")}),fs("rgb-form-events",[Zt(zx,Gn),Zt(n3,at),Zt(Fi,at)])])})),{apis:{updateHex:(io,Jo)=>{_n.setValue(io,{hex:Jo.value}),W(io,Jo),A(io,Jo)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(U,W,le)=>{U.updateHex(W,le)}},extraApis:{}})},K6=(t,s)=>{const a=fu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=fu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(A,D)=>{const{width:N,height:U}=A,W=A.getContext("2d");if(W===null)return;W.fillStyle=D,W.fillRect(0,0,N,U);const le=W.createLinearGradient(0,0,N,0);le.addColorStop(0,"rgba(255,255,255,1)"),le.addColorStop(1,"rgba(255,255,255,0)"),W.fillStyle=le,W.fillRect(0,0,N,U);const pe=W.createLinearGradient(0,0,0,U);pe.addColorStop(0,"rgba(0,0,0,0)"),pe.addColorStop(1,"rgba(0,0,0,1)"),W.fillStyle=pe,W.fillRect(0,0,N,U)},g=(A,D)=>{const N=A.components()[0].element.dom,U=Fw(D,100,100),W=QR(U);d(N,rA(W))},p=(A,D)=>{const N=iA(Pw(D));fu.setValue(A,{x:N.saturation,y:100-N.value})};return Il({factory:A=>{const D=K({x:0,y:0}),N=(le,pe,st)=>{yo(le,t3,{value:st})},U=(le,pe,st,$e)=>{d(st.element.dom,rA(eM))},W=pn([ss.config({find:_.some}),Oo.config({})]);return fu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,i],onChange:N,onInit:U,sliderBehaviours:W})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(A,D,N)=>{g(D,N)},setThumb:(A,D,N)=>{p(D,N)}},extraApis:{}})},CN=(t,s)=>{const a=d=>{const g=q6(t,s,d.onValidHex,d.onInvalidHex),p=K6(t,s),w=Gn=>(100-Gn)/100*360,T=Gn=>100-Gn/360*100,A={paletteRgba:V(eM),paletteHue:V(0)},D=Cr(vN(t,s)),N=Cr(p.sketch({})),U=Cr(g.sketch({})),W=(Gn,Ln,vo)=>{N.getOpt(Gn).each(wo=>{p.setHue(wo,vo)})},le=(Gn,Ln)=>{U.getOpt(Gn).each(vo=>{g.updateHex(vo,Ln)})},pe=(Gn,Ln,vo)=>{D.getOpt(Gn).each(wo=>{fu.setValue(wo,T(vo))})},st=(Gn,Ln)=>{N.getOpt(Gn).each(vo=>{p.setThumb(vo,Ln)})},$e=(Gn,Ln)=>{const vo=Pw(Gn);A.paletteRgba.set(vo),A.paletteHue.set(Ln)},at=(Gn,Ln,vo,wo)=>{$e(Ln,vo),R(wo,Zo=>{Zo(Gn,Ln,vo)})},Sn=()=>{const Gn=[le];return(Ln,vo)=>{const wo=vo.event.value,Zo=A.paletteHue.get(),ws=Fw(Zo,wo.x,100-wo.y),io=rM(ws);at(Ln,io,Zo,Gn)}},dt=()=>{const Gn=[W,le];return(Ln,vo)=>{const wo=w(vo.event.value),Zo=A.paletteRgba.get(),ws=iA(Zo),io=Fw(wo,ws.saturation,ws.value),Jo=rM(io);at(Ln,Jo,wo,Gn)}},An=()=>{const Gn=[W,pe,st];return(Ln,vo)=>{const wo=vo.event.hex,Zo=lA(wo);at(Ln,wo,Zo.hue,Gn)}};return{uid:d.uid,dom:d.dom,components:[N.asSpec(),D.asSpec(),U.asSpec()],behaviours:pn([fs("colour-picker-events",[Zt(pp,An()),Zt(t3,Sn()),Zt(e3,dt())]),ss.config({find:Gn=>U.getOpt(Gn)}),ho.config({mode:"acyclic"})])}};return Il({name:"ColourPicker",configFields:[Mt("dom"),Ke("onValidHex",te),Ke("onInvalidHex",te)],factory:a})},Xu={self:()=>ss.config({find:_.some}),memento:t=>ss.config({find:t.getOpt}),childAt:t=>ss.config({find:s=>ha(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},Bf=lo([Ke("preprocess",xt),Ke("postprocess",xt)]),o3=(t,s)=>{const a=xc("RepresentingConfigs.memento processors",Bf,s);return _n.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=_n.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),p=t.get(i);_n.setValue(p,g)}}})},s3=(t,s,a)=>_n.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),g0=(t,s,a)=>s3(t,i=>s(i.element),(i,d)=>a(i.element,d)),Ju={memento:o3,withElement:g0,withComp:s3,domValue:t=>g0(t,hl,af),domHtml:t=>g0(t,tm,nf),memory:t=>_n.config({store:{mode:"memory",initialValue:t}})},Y6={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},X6=t=>s=>t.translate(Y6[s]),J6=(t,s,a)=>{const i=T=>"tox-"+T,d=CN(X6(s),i),g=T=>{yo(T,Ig,{name:"hex-valid",value:!0})},p=T=>{yo(T,Ig,{name:"hex-valid",value:!1})},w=Cr(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[w.asSpec()],behaviours:pn([Ju.withComp(a,T=>{const A=w.get(T);return ss.getCurrent(A).bind(U=>_n.getValue(U).hex).map(U=>"#"+U).getOr("")},(T,A)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,N=_.from(D.exec(A)).bind(le=>ro(le,1)),U=w.get(T);ss.getCurrent(U).fold(()=>{console.log("Can not find form")},le=>{_n.setValue(le,{hex:N.getOr("")}),qb.getField(le,"hex").each(pe=>{Vs(pe,tg())})})}),Xu.self()])}};var Q6=tinymce.util.Tools.resolve("tinymce.Resource");const xN=t=>Kn(t,"init"),eL=t=>{const s=Vr(),a=Cr({dom:{tag:t.tag}}),i=Vr();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:pn([fs("custom-editor-events",[zr(d=>{a.getOpt(d).each(g=>{(xN(t)?t.init(g.element.dom):Q6.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{i.on(w=>{p.setValue(w)}),i.clear(),s.set(p)})})})]),Ju.withComp(_.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>i.set(g),p=>p.setValue(g))}),Xu.self()]),components:[a.asSpec()]}};var kl=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ux=(t,s)=>{const a=kl.explode(s.getOption("images_file_types")),i=d=>ze(a,g=>ye(d.name.toLowerCase(),`.${g.toLowerCase()}`));return xe(kn(t),i)},tL=(t,s,a)=>{const i=(U,W)=>{W.stop()},d=U=>(W,le)=>{R(U,pe=>{pe(W,le)})},g=(U,W)=>{var le;if(!Eo.isDisabled(U)){const pe=W.event.raw;w(U,(le=pe.dataTransfer)===null||le===void 0?void 0:le.files)}},p=(U,W)=>{const le=W.event.raw.target;w(U,le.files)},w=(U,W)=>{W&&(_n.setValue(U,Ux(W,s)),yo(U,Vl,{name:t.name}))},T=Cr({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:pn([fs("input-file-events",[Sh(Rp()),Sh(vh())])])}),A=U=>({uid:U.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:pn([Ju.memory(a.getOr([])),Xu.self(),Eo.config({}),Es.config({toggleClass:"dragenter",toggleOnExecute:!1}),fs("dropzone-events",[Zt("dragenter",d([i,Es.toggle])),Zt("dragleave",d([i,Es.toggle])),Zt("dragover",i),Zt("drop",d([i,g])),Zt(Dp(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Va(s.translate("Drop an image here"))]},el.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Va(s.translate("Browse for an image")),T.asSpec()],action:W=>{T.get(W).element.dom.click()},buttonBehaviours:pn([xa.config({}),Hl.button(s.isDisabled),Sa()])})]}]}),D=t.label.map(U=>fp(U,s)),N=Us.parts.field({factory:{sketch:A}});return zw(D,N,["tox-form__group--stretched"],[])},nL=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ve(t.items,s.interpreter)}),Wx=Yn("alloy-fake-before-tabstop"),Zx=Yn("alloy-fake-after-tabstop"),jx=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:pn([Oo.config({ignore:!0}),xa.config({})])}),Xw=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[jx([Wx]),t,jx([Zx])],behaviours:pn([Xu.childAt(1)])}),h0=(t,s)=>{yo(t,ef(),{raw:{which:9,shiftKey:s}})},Jw=(t,s)=>{const a=s.element;Gi(a,Wx)?h0(t,!0):Gi(a,Zx)&&h0(t,!1)},p0=t=>Lw(t,["."+Wx,"."+Zx].join(","),Me),kN=t=>{const s=V(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,i)=>{s.get()!==i&&To(a.element,"srcdoc",i),s.set(i)}}},oL=(t,s,a)=>{const i=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p={...t.label.map(N=>({title:N})).getOr({}),...a.map(N=>({srcdoc:N})).getOr({}),...i?{sandbox:"allow-scripts allow-same-origin"}:{}},w=kN(a),T=t.label.map(N=>fp(N,s)),A=N=>Xw({uid:N.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:pn([xa.config({}),Oo.config({}),Ju.withComp(a,w.getValue,w.setValue)])}),D=Us.parts.field({factory:{sketch:A}});return zw(T,D,["tox-form__group--stretched"],[])},sL=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[ai(t,"load",i),ai(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>R(d,p=>p.unbind());t.dom.complete&&i()}),rL=(t,s,a,i,d)=>{const g=a*d,p=i*d,w=Math.max(0,t/2-g/2),T=Math.max(0,s/2-p/2);return{left:w.toString()+"px",top:T.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},aL=(t,s,a)=>{const i=hr(t),d=ft(t);return Math.min(i/s,d/a,1)},cL=(t,s)=>{const a=V(s.getOr({url:""})),i=Cr({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=Cr({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(T,A)=>{const D={url:A.url};A.zoom.each(U=>D.zoom=U),A.cachedWidth.each(U=>D.cachedWidth=U),A.cachedHeight.each(U=>D.cachedHeight=U),a.set(D);const N=()=>{const{cachedWidth:U,cachedHeight:W,zoom:le}=D;if(!ct(U)&&!ct(W)){if(ct(le)){const st=aL(T.element,U,W);D.zoom=st}const pe=rL(hr(T.element),ft(T.element),U,W,D.zoom);d.getOpt(T).each(st=>{Ir(st.element,pe)})}};i.getOpt(T).each(U=>{const W=U.element;A.url!==sr(W,"src")&&(To(W,"src",A.url),ia(T.element,"tox-imagepreview__loaded")),N(),sL(W).then(le=>{T.getSystem().isConnected()&&(wa(T.element,"tox-imagepreview__loaded"),D.cachedWidth=le.dom.naturalWidth,D.cachedHeight=le.dom.naturalHeight,N())})})},p={};t.height.each(T=>p.height=T);const w=s.map(T=>({url:T.url,zoom:_.from(T.zoom),cachedWidth:_.from(T.cachedWidth),cachedHeight:_.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:pn([Xu.self(),Ju.withComp(w,()=>a.get(),g)])}},iL=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[Va(s.providers.translate(t.label))]},i=Ve(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...i],behaviours:pn([Xu.self(),zo.config({}),Ju.domHtml(_.none()),ho.config({mode:"acyclic"})])}},TN=Yn("toolbar.button.execute"),EN=t=>ml((s,a)=>{gx(t,s)(i=>{yo(s,TN,{buttonApi:i}),t.onAction(i)})}),r3={[dl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},_N=(t,s,a)=>ym(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),Qw=(t,s)=>_N(t,s,[]),AN=(t,s)=>_N(t,s,[zo.config({})]),Gx=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Va(a.translate(t))],behaviours:pn([zo.config({})])}),Pf=Yn("update-menu-text"),ON=Yn("update-menu-icon"),qx=(t,s,a)=>{const i=V(te),d=t.text.map(N=>Cr(Gx(N,s,a.providers))),g=t.icon.map(N=>Cr(AN(N,a.providers.icons))),p=(N,U)=>{const W=_n.getValue(N);return Oo.focus(W),yo(W,"keydown",{raw:U.event.raw}),uu.close(W),_.some(!0)},w=t.role.fold(()=>({}),N=>({role:N})),T=t.tooltip.fold(()=>({}),N=>{const U=a.providers.translate(N);return{title:U,"aria-label":U}}),A=ym("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons);return Cr(uu.sketch({...t.uid?{uid:t.uid}:{},...w,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ve(t.classes,N=>`${s}--${N}`)),attributes:{...T}},components:Ib([g.map(N=>N.asSpec()),d.map(N=>N.asSpec()),_.some(A)]),matchWidth:!0,useMinWidth:!0,onOpen:(N,U,W)=>{t.searchable&&y8(W)},dropdownBehaviours:pn([...t.dropdownBehaviours,Hl.button(()=>t.disabled||a.providers.isDisabled()),Sa(),u0.config({}),zo.config({}),fs("dropdown-events",[Md(t,i),Mw(t,i)]),fs("menubutton-update-display-text",[Zt(Pf,(N,U)=>{d.bind(W=>W.getOpt(N)).each(W=>{zo.set(W,[Va(a.providers.translate(U.event.text))])})}),Zt(ON,(N,U)=>{g.bind(W=>W.getOpt(N)).each(W=>{zo.set(W,[AN(U.event.icon,a.providers.icons)])})})])]),eventOrder:pr(r3,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:pn([ho.config({mode:"special",onLeft:p,onRight:p}),fs("dropdown-sandbox-events",[Zt(JS,(N,U)=>{p8(N),U.stop()}),Zt(QS,(N,U)=>{Mf(N,U),U.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Xv(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:kx,onCollapseMenu:(N,U,W)=>{Hs.getHighlighted(W).each(le=>{kx(N,W,le)})},onDehighlightItem:Za}},fetch:N=>li.nu(St(t.fetch,N))})).asSpec()},lL=t=>Tt(t),DN=t=>t.type==="separator",uL=t=>Kn(t,"getSubmenuItems"),dL={type:"separator"},RN=(t,s)=>{const a=ke(t,(i,d)=>lL(d)?d===""?i:d==="|"?i.length>0&&!DN(i[i.length-1])?i.concat([dL]):i:Kn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&DN(a[a.length-1])&&a.pop(),a},mL=(t,s)=>{const a=t.getSubmenuItems(),i=Kx(a,s),d=pr(i.menus,{[t.value]:i.items}),g=pr(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},MN=t=>{const s=Jt(t,"value").getOrThunk(()=>Yn("generated-menu-item"));return pr({value:s},t)},Kx=(t,s)=>{const a=RN(Tt(t)?t.split(" "):t,s);return We(a,(i,d)=>{if(uL(d)){const g=MN(d),p=mL(g,s);return{menus:pr(i.menus,p.menus),items:[p.item,...i.items],expansions:pr(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},zg=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),a3=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Kb=(t,s,a,i)=>{const d=Yn("primary-menu"),g=Kx(t,a.shared.providers.menuItems());if(g.items.length===0)return _.none();const p=zg(i),w=SM(d,g.items,s,a,i.isHorizontalMenu,p),T=a3(i),A=fn(g.menus,(N,U)=>SM(U,N,s,a,!1,T)),D=pr(A,Ws(d,w));return _.from(Rb.tieredData(d,D,g.expansions))},Yx=t=>!Kn(t,"items"),Xx="data-value",c3=(t,s,a,i)=>Ve(a,d=>Yx(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{_n.setValue(t,d.value),yo(t,Vl,{name:s}),Oo.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>c3(t,s,d.items,i)}),b0=(t,s)=>ao(t,a=>Yx(a)?mr(a.value===s,a):b0(a.items,s)),NN=(t,s,a)=>{const i=s.shared.providers,d=a.bind(T=>b0(t.items,T)).orThunk(()=>uo(t.items).filter(Yx)),g=t.label.map(T=>fp(T,i)),p=Us.parts.field({dom:{},factory:{sketch:T=>qx({uid:T.uid,text:d.map(A=>A.text),icon:_.none(),tooltip:t.label,role:_.none(),fetch:(A,D)=>{const N=c3(A,t.name,t.items,_n.getValue(A));D(Kb(N,wm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:_.none()}))},onSetup:K(te),getApi:K({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[xa.config({}),Ju.withComp(d.map(A=>A.value),A=>sr(A.element,Xx),(A,D)=>{b0(t.items,D).each(N=>{To(A.element,Xx,N.value),yo(A,Pf,{text:N.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Us.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:z([g.toArray(),[w]]),fieldBehaviours:pn([Eo.config({disabled:K(!t.enabled),onDisabled:T=>{Us.getField(T).each(Eo.disable)},onEnabled:T=>{Us.getField(T).each(Eo.enable)}})])})},$N=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ve(t.items,s.shared.interpreter)}),fL=(t,s)=>{const a=Ve(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Ws("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:gc(t.selectBehaviours,[Oo.config({}),_n.config({store:{mode:"manual",getValue:d=>hl(d.element),setValue:(d,g)=>{se(t.options,w=>w.value===g).isSome()&&af(d.element,g)},...i}})])}},gL=Il({name:"HtmlSelect",configFields:[Mt("options"),Ra("selectBehaviours",[Oo,_n]),Ke("selectClasses",[]),Ke("selectAttributes",{}),Ns("data")],factory:fL}),hL=(t,s,a)=>{const i=Ve(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>fp(T,s)),g=Us.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:i,factory:gL,selectBehaviours:pn([Eo.config({disabled:()=>!t.enabled||s.isDisabled()}),xa.config({}),fs("selectbox-change",[Zt(Dp(),(T,A)=>{yo(T,Vl,{name:t.name})})])])}),p=t.size>1?_.none():_.some(ym("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),w={dom:{tag:"div",classes:["tox-selectfield"]},components:z([[g],p.toArray()])};return Us.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:z([d.toArray(),[w]]),fieldBehaviours:pn([Eo.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{Us.getField(T).each(Eo.disable)},onEnabled:T=>{Us.getField(T).each(Eo.enable)}}),Sa()])})},pL=K([Ke("field1Name","field1"),Ke("field2Name","field2"),mf("onLockedChange"),cm(["lockClass"]),Ke("locked",!1),Pl.field("coupledFieldBehaviours",[ss,_n])]),bL=(t,s,a)=>rr(t,s,a).bind(ss.getCurrent),i3=(t,s)=>Zc({factory:Us,name:t,overrides:a=>({fieldBehaviours:pn([fs("coupled-input-behaviour",[Zt(tg(),i=>{bL(i,a,s).each(d=>{rr(i,a,"lock").each(g=>{Es.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),BN=K([i3("field1","field2"),i3("field2","field1"),Zc({factory:el,schema:[Mt("dom")],name:"lock",overrides:t=>({buttonBehaviours:pn([Es.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),vL=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Pl.augment(t.coupledFieldBehaviours,[ss.config({find:_.some}),_n.config({store:{mode:"manual",getValue:d=>{const g=Ad(d,t,["field1","field2"]);return{[t.field1Name]:_n.getValue(g.field1()),[t.field2Name]:_n.getValue(g.field2())}},setValue:(d,g)=>{const p=Ad(d,t,["field1","field2"]);Ts(g,t.field1Name)&&_n.setValue(p.field1(),g[t.field1Name]),Ts(g,t.field2Name)&&_n.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>rr(d,t,"field1"),getField2:d=>rr(d,t,"field2"),getLock:d=>rr(d,t,"lock")}}),gu=jc({name:"FormCoupledInputs",configFields:pL(),partFields:BN(),factory:vL,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),yL=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},v0=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Fo.value({value:i,unit:d})}else return Fo.error(t)},PN=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Kn(a,d);return t.unit===s?_.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?_.some(t.value):_.some(t.value/a[t.unit]*a[s]):_.none()},l3=t=>_.none(),FN=(t,s)=>a=>PN(a,s).map(i=>({value:i*t,unit:s})),IN=(t,s)=>{const a=v0(t).toOptional(),i=v0(s).toOptional();return ys(a,i,(d,g)=>PN(d,g.unit).map(p=>g.value/p).map(p=>FN(p,g.unit)).getOr(l3)).getOr(l3)},wL=(t,s)=>{let a=l3;const i=Yn("ratio-event"),d=N=>ym(N,{tag:"span",classes:["tox-icon","tox-lock-icon__"+N]},s.icons),g=gu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:pn([Eo.config({disabled:()=>!t.enabled||s.isDisabled()}),Sa(),xa.config({})])}),p=N=>({dom:{tag:"div",classes:["tox-form__group"]},components:N}),w=N=>Us.parts.field({factory:Jv,inputClasses:["tox-textfield"],inputBehaviours:pn([Eo.config({disabled:()=>!t.enabled||s.isDisabled()}),Sa(),xa.config({}),fs("size-input-events",[Zt(Qm(),(U,W)=>{yo(U,i,{isField1:N})}),Zt(Dp(),(U,W)=>{yo(U,Vl,{name:t.name})})])]),selectOnFocus:!1}),T=N=>({dom:{tag:"label",classes:["tox-label"]},components:[Va(s.translate(N))]}),A=gu.parts.field1(p([Us.parts.label(T("Width")),w(!0)])),D=gu.parts.field2(p([Us.parts.label(T("Height")),w(!1)]));return gu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[A,D,p([T(ky),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(N,U,W)=>{v0(_n.getValue(N)).each(le=>{a(le).each(pe=>{_n.setValue(U,yL(pe))})})},coupledFieldBehaviours:pn([Eo.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:N=>{gu.getField1(N).bind(Us.getField).each(Eo.disable),gu.getField2(N).bind(Us.getField).each(Eo.disable),gu.getLock(N).each(Eo.disable)},onEnabled:N=>{gu.getField1(N).bind(Us.getField).each(Eo.enable),gu.getField2(N).bind(Us.getField).each(Eo.enable),gu.getLock(N).each(Eo.enable)}}),Sa(),fs("size-input-events2",[Zt(i,(N,U)=>{const W=U.event.isField1,le=W?gu.getField1(N):gu.getField2(N),pe=W?gu.getField2(N):gu.getField1(N),st=le.map(_n.getValue).getOr(""),$e=pe.map(_n.getValue).getOr("");a=IN(st,$e)})])])})},CL=(t,s,a)=>{const i=fu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Va(s.translate(t.label))]}),d=fu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=fu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return fu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:K(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:pn([Xu.self(),Oo.config({})]),onChoose:(p,w,T)=>{yo(p,Vl,{name:t.name,value:T})}})},u3=(t,s)=>{const a=w=>({dom:{tag:"th",innerHtml:s.translate(w)}}),i=w=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ve(w,a)}]}),d=w=>({dom:{tag:"td",innerHtml:s.translate(w)}}),g=w=>({dom:{tag:"tr"},components:Ve(w,d)}),p=w=>({dom:{tag:"tbody"},components:Ve(w,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:pn([xa.config({}),Oo.config({})])}},LN=(t,s)=>{const a=t.label.map(U=>fp(U,s)),i=[Eo.config({disabled:()=>t.disabled||s.isDisabled()}),Sa(),ho.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:U=>(Vs(U,Uw),_.some(!0))}),fs("textfield-change",[Zt(tg(),(U,W)=>{yo(U,Vl,{name:t.name})}),Zt(V0(),(U,W)=>{yo(U,Vl,{name:t.name})})]),xa.config({})],d=t.validation.map(U=>Nf.config({getRoot:W=>Ei(W.element),invalidClass:"tox-invalid",validator:{validate:W=>{const le=_n.getValue(W),pe=U.validator(le);return li.pure(pe===!0?Fo.value(le):Fo.error(pe))},validateOnLoad:U.validateOnLoad}})).toArray(),g=t.placeholder.fold(K({}),U=>({placeholder:s.translate(U)})),p=t.inputMode.fold(K({}),U=>({inputmode:U})),w={...g,...p},T=Us.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(U=>({data:U})).getOr({}),inputAttributes:w,inputClasses:[t.classname],inputBehaviours:pn(z([i,d])),selectOnFocus:!1,factory:Jv}),D=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),N=[Eo.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:U=>{Us.getField(U).each(Eo.disable)},onEnabled:U=>{Us.getField(U).each(Eo.enable)}}),Sa()];return zw(a,T,D,N)},SL=(t,s,a)=>LN({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:_.none(),maximized:t.maximized,data:a},s),xL=(t,s,a)=>LN({name:t.name,multiline:!0,label:t.label,inputMode:_.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:_.none(),maximized:t.maximized,data:a},s);var d3=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return lr([Zt(t.event,i),Rl(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Zt(d,()=>s.cancel())]).getOr([])))}});const m3=(t,s)=>{let a=null;return{cancel:()=>{Nn(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{Nn(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},HN=(t,s)=>{let a=null;const i=()=>{Nn(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},zN=t=>{const s=V(null);return Mi({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var kL=Object.freeze({__proto__:null,throttle:zN,init:t=>t.stream.streams.state(t)});const f3=(t,s)=>{const a=t.stream,i=HN(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var UN=[Di("stream",gi("mode",{throttle:[Mt("delay"),Ke("stopEvent",!0),vr("streams",{setup:f3,state:zN})]})),Ke("event","input"),Ns("cancelEvent"),mf("onStream")];const g3=fc({fields:UN,name:"streaming",active:d3,state:kL}),Jx=(t,s,a)=>{const i=_n.getValue(a);_n.setValue(s,i),p3(s)},h3=(t,s)=>{const a=t.element,i=hl(a),d=a.dom;sr(a,"type")!=="number"&&s(d,i)},p3=t=>{h3(t,(s,a)=>s.setSelectionRange(a.length,a.length))},TL=(t,s)=>{h3(t,(a,i)=>a.setSelectionRange(s,i.length))},WN=(t,s,a)=>{if(t.selectsOver){const i=_n.getValue(s),d=t.getDisplayText(i),g=_n.getValue(a);return t.getDisplayText(g).indexOf(d)===0?_.some(()=>{Jx(t,s,a),TL(s,d.length)}):_.none()}else return _.none()},Qx=K("alloy.typeahead.itemexecute"),EL=(t,s,a,i)=>{const d=(N,U,W)=>{t.previewing.set(!1);const le=oa.getCoupled(N,"sandbox");if(ms.isOpen(le))ss.getCurrent(le).each(pe=>{Hs.getHighlighted(pe).fold(()=>{W(pe)},()=>{HC(le,pe.element,"keydown",U)})});else{const pe=st=>{ss.getCurrent(st).each(W)};xx(t,p(N),N,le,i,pe,na.HighlightMenuAndItem).get(te)}},g=oR(t),p=N=>U=>U.map(W=>{const le=ln(W.menus),pe=Y(le,$e=>xe($e.items,at=>at.type==="item"));return _n.getState(N).update(Ve(pe,$e=>$e.data)),W}),w=N=>ss.getCurrent(N),T="typeaheadevents",A=[Oo.config({}),_n.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:N=>hl(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,U)=>{af(N.element,t.model.getDisplayText(U))},...t.initialData.map(N=>Ws("initialValue",N)).getOr({})}}),g3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(N,U)=>{const W=oa.getCoupled(N,"sandbox");if(Oo.isFocused(N)&&hl(N.element).length>=t.minChars){const pe=w(W).bind($e=>Hs.getHighlighted($e).map(_n.getValue));t.previewing.set(!0);const st=$e=>{w(W).each(at=>{pe.fold(()=>{t.model.selectsOver&&Hs.highlightFirst(at)},Sn=>{Hs.highlightBy(at,dt=>_n.getValue(dt).value===Sn.value),Hs.getHighlighted(at).orThunk(()=>(Hs.highlightFirst(at),_.none()))})})};xx(t,p(N),N,W,i,st,na.HighlightJustMenu).get(te)}},cancelEvent:ng()}),ho.config({mode:"special",onDown:(N,U)=>(d(N,U,Hs.highlightFirst),_.some(!0)),onEscape:N=>{const U=oa.getCoupled(N,"sandbox");return ms.isOpen(U)?(ms.close(U),_.some(!0)):_.none()},onUp:(N,U)=>(d(N,U,Hs.highlightLast),_.some(!0)),onEnter:N=>{const U=oa.getCoupled(N,"sandbox"),W=ms.isOpen(U);if(W&&!t.previewing.get())return w(U).bind(le=>Hs.getHighlighted(le)).map(le=>(yo(N,Qx(),{item:le}),!0));{const le=_n.getValue(N);return Vs(N,ng()),t.onExecute(U,N,le),W&&ms.close(U),_.some(!0)}}}),Es.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),oa.config({others:{sandbox:N=>AA(t,N,{onOpen:()=>Es.on(N),onClose:()=>Es.off(N)})}}),fs(T,[zr(N=>{t.lazyTypeaheadComp.set(_.some(N))}),Rl(N=>{t.lazyTypeaheadComp.set(_.none())}),ml(N=>{const U=te;_A(t,p(N),N,i,U,na.HighlightMenuAndItem).get(te)}),Zt(Qx(),(N,U)=>{const W=oa.getCoupled(N,"sandbox");Jx(t.model,N,U.event.item),Vs(N,ng()),t.onItemExecute(N,W,U.event.item,_n.getValue(N)),ms.close(W),p3(N)})].concat(t.dismissOnBlur?[Zt(Mp(),N=>{const U=oa.getCoupled(N,"sandbox");$l(U.element).isNone()&&ms.close(U)})]:[]))],D={[yh()]:[_n.name(),g3.name(),T],...t.eventOrder};return{uid:t.uid,dom:sR(pr(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...gc(t.typeaheadBehaviours,A)},eventOrder:D}},ZN=K([Ns("lazySink"),Mt("fetch"),Ke("minChars",5),Ke("responseTime",1e3),ds("onOpen"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",K({})),Ke("layouts",_.none()),Ke("eventOrder",{}),I("model",{},[Ke("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Ke("selectsOver",!0),Ke("populateFromBrowse",!0)]),ds("onSetValue"),qi("onExecute"),ds("onItemExecute"),Ke("inputClasses",[]),Ke("inputAttributes",{}),Ke("inputStyles",{}),Ke("matchWidth",!0),Ke("useMinWidth",!1),Ke("dismissOnBlur",!0),cm(["openClass"]),Ns("initialData"),Ra("typeaheadBehaviours",[Oo,_n,g3,ho,Es,oa]),kc("lazyTypeaheadComp",()=>V(_.none)),kc("previewing",()=>V(!0))].concat(nR()).concat(OA())),jN=K([Uu({schema:[Gp()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{WN(t.model,d,i).fold(()=>{t.model.selectsOver?(Hs.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&Jx(t.model,d,i)})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(yo(i,Qx(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&Jx(t.model,i,a)})}})})]),GN=jc({name:"Typeahead",configFields:ZN(),partFields:jN(),factory:EL}),$d=t=>({...t,toCached:()=>$d(t.toCached()),bindFuture:T=>$d(t.bind(A=>A.fold(D=>li.pure(Fo.error(D)),D=>T(D)))),bindResult:T=>$d(t.map(A=>A.bind(T))),mapResult:T=>$d(t.map(A=>A.map(T))),mapError:T=>$d(t.map(A=>A.mapError(T))),foldResult:(T,A)=>t.map(D=>D.fold(T,A)),withTimeout:(T,A)=>$d(li.nu(D=>{let N=!1;const U=setTimeout(()=>{N=!0,D(Fo.error(A()))},T);t.get(W=>{N||(clearTimeout(U),D(W))})}))}),qN=t=>$d(li.nu(t)),KN=t=>$d(li.pure(Fo.value(t))),OL={nu:qN,wrap:$d,pure:KN,value:KN,error:t=>$d(li.pure(Fo.error(t))),fromResult:t=>$d(li.pure(t)),fromFuture:t=>$d(t.map(Fo.value)),fromPromise:t=>qN(s=>{t.then(a=>{s(Fo.value(a))},a=>{s(Fo.error(a))})})},b3=t=>({isEnabled:()=>!Eo.isDisabled(t),setEnabled:s=>Eo.set(t,!s),setActive:s=>{const a=t.element;s?(wa(a,"tox-tbtn--enabled"),To(a,"aria-pressed",!0)):(ia(a,"tox-tbtn--enabled"),de(a,"aria-pressed"))},isActive:()=>Gi(t.element,"tox-tbtn--enabled")}),v3=(t,s,a,i)=>qx({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(d,g)=>{const p={pattern:t.search.isSome()?w8(d):""};t.fetch(w=>{g(Kb(w,wm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},p)},onSetup:t.onSetup,getApi:b3,columns:1,presets:"normal",classes:[],dropdownBehaviours:[xa.config({})]},s,a.shared),DL=(t,s,a)=>{const i=g=>p=>{const w=!p.isActive();p.setActive(w),g.storage.set(w),a.shared.getSink().each(T=>{s().getOpt(T).each(A=>{lm(A.element),yo(A,Ig,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(Ve(t,p=>{const w=p.text.fold(()=>({}),T=>({text:T}));return{type:p.type,active:!1,...w,onAction:i(p),onSetup:d(p)}}))}},YN=(t,s,a=[],i,d,g)=>{const p=s.fold(()=>({}),A=>({action:A})),w={buttonBehaviours:pn([Hl.button(()=>!t.enabled||g.isDisabled()),Sa(),xa.config({}),fs("button press",[VC("click"),VC("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},T=pr(w,{dom:i});return pr(T,{components:d})},XN=(t,s,a,i=[])=>{const d=t.tooltip.map(T=>({"aria-label":a.translate(T),title:a.translate(T)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(T=>Qw(T,a.icons)),w=Ib([p]);return YN(t,s,i,g,w,a)},RL=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},y3=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(U=>Qw(U,a.icons)),w=[p.getOrThunk(()=>Va(g))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),N={tag:"button",classes:[...RL(T),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return YN(t,s,i,N,w,a)},w3=(t,s,a,i=[],d=[])=>{const g=y3(t,_.some(s),a,i,d);return el.sketch(g)},C3=(t,s)=>a=>{s==="custom"?yo(a,Ig,{name:t,value:{}}):s==="submit"?Vs(a,Uw):s==="cancel"?Vs(a,gp):console.error("Unknown button type: ",s)},ML=(t,s)=>s==="menu",NL=(t,s)=>s==="custom"||s==="cancel"||s==="submit",ek=(t,s,a)=>{if(ML(t,s)){const i=()=>p,d=t,g={...t,type:"menubutton",search:_.none(),onSetup:w=>(w.setEnabled(t.enabled),te),fetch:DL(d.items,i,a)},p=Cr(v3(g,"tox-tbtn",a,_.none()));return p.asSpec()}else if(NL(t,s)){const i=C3(t.name,s),d={...t,borderless:!1};return w3(d,i,a.shared.providers,[])}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},$L=(t,s)=>{const a=C3(t.name,"custom");return Z8(_.none(),Us.parts.field({factory:el,...y3(t,_.some(a),s,[Ju.memory(""),Xu.self()])}))},JN={type:"separator"},BL=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:te}),S3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:te}),QN=t=>Ve(t,BL),PL=(t,s)=>xe(s,a=>a.type===t),e$=(t,s)=>QN(PL(t,s)),FL=t=>e$("header",t.targets),t$=t=>e$("anchor",t.targets),IL=t=>_.from(t.anchorTop).map(s=>S3("<top>",s)).toArray(),LL=t=>_.from(t.anchorBottom).map(s=>S3("<bottom>",s)).toArray(),n$=t=>Ve(t,s=>S3(s,s)),o$=t=>ke(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(JN,a),[]),tk=(t,s)=>{const a=t.toLowerCase();return xe(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,p=(d=i.value)!==null&&d!==void 0?d:"";return Xs(g.toLowerCase(),a)||Xs(p.toLowerCase(),a)})},nk=(t,s,a)=>{const i=_n.getValue(s),d=i.meta.text!==void 0?i.meta.text:i.value;return a.getLinkInformation().fold(()=>[],p=>{const w=tk(d,n$(a.getHistory(t)));return t==="file"?o$([w,tk(d,FL(p)),tk(d,z([IL(p),t$(p),LL(p)]))]):w})},s$=Yn("aria-invalid"),HL=(t,s,a,i)=>{const d=s.shared.providers,g=at=>{const Sn=_n.getValue(at);a.addToHistory(Sn.value,t.filetype)},p={...i.map(at=>({initialData:at})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":s$,type:"url"},minChars:0,responseTime:0,fetch:at=>{const Sn=nk(t.filetype,at,a),dt=Kb(Sn,wm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:_.none()});return li.pure(dt)},getHotspot:at=>le.getOpt(at),onSetValue:(at,Sn)=>{at.hasConfigured(Nf)&&Nf.run(at).get(te)},typeaheadBehaviours:pn([...a.getValidationHandler().map(at=>Nf.config({getRoot:Sn=>Ei(Sn.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Sn,dt)=>{D.getOpt(Sn).each(An=>{To(An.element,"title",d.translate(dt))})}},validator:{validate:Sn=>{const dt=_n.getValue(Sn);return OL.nu(An=>{at({type:t.filetype,url:dt.value},Gn=>{if(Gn.status==="invalid"){const Ln=Fo.error(Gn.message);An(Ln)}else{const Ln=Fo.value(Gn.message);An(Ln)}})})},validateOnLoad:!1}})).toArray(),Eo.config({disabled:()=>!t.enabled||d.isDisabled()}),xa.config({}),fs("urlinput-events",[Zt(tg(),at=>{const Sn=hl(at.element),dt=Sn.trim();dt!==Sn&&af(at.element,dt),t.filetype==="file"&&yo(at,Vl,{name:t.name})}),Zt(Dp(),at=>{yo(at,Vl,{name:t.name}),g(at)}),Zt(V0(),at=>{yo(at,Vl,{name:t.name}),g(at)})])]),eventOrder:{[tg()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:at=>at.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Xv(!1,1,"normal")},onExecute:(at,Sn,dt)=>{yo(Sn,Uw,{})},onItemExecute:(at,Sn,dt,An)=>{g(at),yo(at,Vl,{name:t.name})}},w=Us.parts.field({...p,factory:GN}),T=t.label.map(at=>fp(at,d)),D=Cr(((at,Sn,dt=at,An=at)=>ym(dt,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+at],attributes:{title:d.translate(An),"aria-live":"polite",...Sn.fold(()=>({}),Gn=>({id:Gn}))}},d.icons))("invalid",_.some(s$),"warning")),N=Cr({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),U=a.getUrlPicker(t.filetype),W=Yn("browser.url.event"),le=Cr({dom:{tag:"div",classes:["tox-control-wrap"]},components:[w,N.asSpec()],behaviours:pn([Eo.config({disabled:()=>!t.enabled||d.isDisabled()})])}),pe=Cr(w3({name:t.name,icon:_.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:_.none(),borderless:!0},at=>Vs(at,W),d,[],["tox-browse-url"])),st=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:z([[le.asSpec()],U.map(()=>pe.asSpec()).toArray()])}),$e=at=>{ss.getCurrent(at).each(Sn=>{const dt=_n.getValue(Sn),An={fieldname:t.name,...dt};U.each(Gn=>{Gn(An).get(Ln=>{_n.setValue(Sn,Ln),yo(at,Vl,{name:t.name})})})})};return Us.sketch({dom:G8(),components:T.toArray().concat([st()]),fieldBehaviours:pn([Eo.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:at=>{Us.getField(at).each(Eo.disable),pe.getOpt(at).each(Eo.disable)},onEnabled:at=>{Us.getField(at).each(Eo.enable),pe.getOpt(at).each(Eo.enable)}}),Sa(),fs("url-input-events",[Zt(W,$e)])])})},zL=(t,s)=>xm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[el.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:gw(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{yo(a,Ig,{name:"alert-banner",value:t.url})},buttonBehaviours:pn([v_()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),VL=(t,s)=>{t.dom.checked=s},r$=t=>t.dom.checked,a$=(t,s,a)=>{const i=T=>(T.element.dom.click(),_.some(!0)),d=Us.parts.field({factory:{sketch:xt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:pn([Xu.self(),Eo.config({disabled:()=>!t.enabled||s.isDisabled()}),xa.config({}),Oo.config({}),Ju.withElement(a,r$,VL),ho.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),fs("checkbox-events",[Zt(Dp(),(T,A)=>{yo(T,Vl,{name:t.name})})])])}),g=Us.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Va(s.translate(t.label))],behaviours:pn([u0.config({})])}),p=T=>ym(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),w=Cr({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Us.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,w.asSpec(),g],fieldBehaviours:pn([Eo.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:T=>{Us.getField(T).each(Eo.disable)},onEnabled:T=>{Us.getField(T).each(Eo.enable)}}),Sa()])})},UL=t=>t.presets==="presentation"?xm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):xm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:pn([xa.config({}),Oo.config({})])}),pc=t=>(s,a,i,d)=>Jt(a,"name").fold(()=>t(a,d,_.none()),g=>s.field(g,t(a,d,Jt(i,g)))),c$=t=>(s,a,i,d)=>{const g=pr(a,{source:"dynamic"});return pc(t)(s,g,i,d)},WL={bar:pc((t,s)=>L8(t,s.shared)),collection:pc((t,s,a)=>q8(t,s.shared.providers,a)),alertbanner:pc((t,s)=>zL(t,s.shared.providers)),input:pc((t,s,a)=>SL(t,s.shared.providers,a)),textarea:pc((t,s,a)=>xL(t,s.shared.providers,a)),label:pc((t,s)=>iL(t,s.shared)),iframe:c$((t,s,a)=>oL(t,s.shared.providers,a)),button:pc((t,s)=>$L(t,s.shared.providers)),checkbox:pc((t,s,a)=>a$(t,s.shared.providers,a)),colorinput:pc((t,s,a)=>J8(t,s.shared,s.colorinput,a)),colorpicker:pc((t,s,a)=>J6(t,s.shared.providers,a)),dropzone:pc((t,s,a)=>tL(t,s.shared.providers,a)),grid:pc((t,s)=>nL(t,s.shared)),listbox:pc((t,s,a)=>NN(t,s,a)),selectbox:pc((t,s,a)=>hL(t,s.shared.providers,a)),sizeinput:pc((t,s)=>wL(t,s.shared.providers)),slider:pc((t,s,a)=>CL(t,s.shared.providers,a)),urlinput:pc((t,s,a)=>HL(t,s,s.urlinput,a)),customeditor:pc(eL),htmlpanel:pc(UL),imagepreview:pc((t,s,a)=>cL(t,a)),table:pc((t,s)=>u3(t,s.shared.providers)),panel:pc((t,s)=>$N(t,s))},ZL={field:(t,s)=>s,record:K([])},rs=(t,s,a,i)=>{const d=pr(i,{shared:{interpreter:g=>Yb(t,g,a,d)}});return Yb(t,s,a,d)},Yb=(t,s,a,i)=>Jt(WL,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,i)),x3=(t,s,a)=>Yb(ZL,t,s,a),Vg="layout-inset",ok=t=>t.x,k3=(t,s)=>t.x+t.width/2-s.width/2,sk=(t,s)=>t.x+t.width-s.width,i$=t=>t.y,Xb=(t,s)=>t.y+t.height-s.height,l$=(t,s)=>t.y+t.height/2-s.height/2,eC=(t,s,a)=>mc(sk(t,s),Xb(t,s),a.insetSouthwest(),G1(),"southwest",ec(t,{right:0,bottom:3}),Vg),rk=(t,s,a)=>mc(ok(t),Xb(t,s),a.insetSoutheast(),j1(),"southeast",ec(t,{left:1,bottom:3}),Vg),tC=(t,s,a)=>mc(sk(t,s),i$(t),a.insetNorthwest(),Z1(),"northwest",ec(t,{right:0,top:2}),Vg),nC=(t,s,a)=>mc(ok(t),i$(t),a.insetNortheast(),Ph(),"northeast",ec(t,{left:1,top:2}),Vg),Tm=(t,s,a)=>mc(k3(t,s),i$(t),a.insetNorth(),g2(),"north",ec(t,{top:2}),Vg),Jb=(t,s,a)=>mc(k3(t,s),Xb(t,s),a.insetSouth(),oy(),"south",ec(t,{bottom:3}),Vg),T3=(t,s,a)=>mc(sk(t,s),l$(t,s),a.insetEast(),q1(),"east",ec(t,{right:0}),Vg),u$=(t,s,a)=>mc(ok(t),l$(t,s),a.insetWest(),h2(),"west",ec(t,{left:1}),Vg),jL=t=>{switch(t){case"north":return Tm;case"northeast":return nC;case"northwest":return tC;case"south":return Jb;case"southeast":return rk;case"southwest":return eC;case"east":return T3;case"west":return u$}},d$=(t,s,a,i,d)=>uy(i).map(jL).getOr(Tm)(t,s,a,i,d),m$=t=>{switch(t){case"north":return Jb;case"northeast":return rk;case"northwest":return eC;case"south":return Tm;case"southeast":return nC;case"southwest":return tC;case"east":return u$;case"west":return T3}},GL=(t,s,a,i,d)=>uy(i).map(m$).getOr(Tm)(t,s,a,i,d),f$={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},qL=(t,s,a)=>{const d={maxHeightFunction:nb()},g=()=>({type:"node",root:Er(Ko(t())),node:_.from(t()),bubble:bg(12,12,f$),layouts:{onRtl:()=>[nC],onLtr:()=>[tC]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:bg(-12,12,f$),layouts:{onRtl:()=>[Ec],onLtr:()=>[_c]},overrides:d});return()=>a()?g():p()},KL=(t,s,a)=>{const i=()=>({type:"node",root:Er(Ko(t())),node:_.from(t()),layouts:{onRtl:()=>[Tm],onLtr:()=>[Tm]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Ua],onLtr:()=>[Ua]}});return()=>a()?i():d()},g$=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng();return _.some(mm.range(Wt.fromDom(a.startContainer),a.startOffset,Wt.fromDom(a.endContainer),a.endOffset))}}),YL=t=>s=>({type:"node",root:t(),node:s}),XL=(t,s,a)=>{const i=xw(t),d=()=>Wt.fromDom(t.getBody()),g=()=>Wt.fromDom(t.getContentAreaContainer()),p=()=>i||!a();return{inlineDialog:qL(g,s,p),banner:KL(g,s,p),cursor:g$(t,d),node:YL(d)}},JL=t=>(s,a)=>{dM(t)(s,a)},QL=t=>()=>gA(t),e7=t=>s=>Hb(t,s),t7=t=>s=>fA(t,s),n7=t=>({colorPicker:JL(t),hasCustomColors:QL(t),getColors:e7(t),getColorCols:t7(t)}),o7=t=>()=>ZS(t),s7=t=>({isDraggableModal:o7(t)}),r7=t=>{const s=V(KS(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},h$=t=>Ts(t,"items"),E3=t=>Ts(t,"format"),p$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],a7=t=>Kn(t,"items"),c7=t=>Kn(t,"block"),i7=t=>Kn(t,"inline"),l7=t=>Kn(t,"selector"),b$=t=>ke(t,(s,a)=>{if(a7(a)){const i=b$(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(i7(a)||c7(a)||l7(a)){const d=`custom-${Tt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),v$=(t,s)=>{const a=b$(s),i=d=>{R(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},y$=t=>MD(t).map(s=>{const a=v$(t,s);return ND(t)?p$.concat(a):a}).getOr(p$),w$=t=>{const s=Re(t);return s.length===1&&dn(s,"title")},C$=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),_3=(t,s,a,i)=>{const d=T=>C$(T,a,i),g=T=>{const A=w(T.items);return{...T,type:"submenu",getStyleItems:K(A)}},p=T=>{const A=Tt(T.name)?T.name:Yn(T.title),D=`custom-${A}`,N={...T,type:"formatter",format:D,isSelected:a(D),getStylePreview:i(D)};return t.formatter.register(A,N),N},w=T=>Ve(T,A=>h$(A)?g(A):E3(A)?d(A):w$(A)?{...A,type:"separator"}:p(A));return w(s)},S$=t=>{const s=w=>()=>t.formatter.match(w),a=w=>()=>{const T=t.formatter.get(w);return T!==void 0?_.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):_.none()},i=V([]),d=V([]),g=V(!1);return t.on("PreInit",w=>{const T=y$(t),A=_3(t,T,s,a);i.set(A)}),t.on("addStyleModifications",w=>{const T=_3(t,w.items,s,a);d.set(T),g.set(w.replace)}),{getData:()=>{const w=g.get()?[]:i.get(),T=d.get();return w.concat(T)}}},x$=t=>cn(t)&&t.nodeType===1,u7=kl.trim,A3=t=>s=>!!(x$(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),k$=A3("true"),d7=A3("false"),O3=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),m7=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return k$(s)}return!1},f7=(t,s)=>Ve(Wc(Wt.fromDom(s),t),a=>a.dom),Bd=t=>t.innerText||t.textContent,ak=t=>t.id?t.id:Yn("h"),ck=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,g7=t=>ck(t)&&T$(t),ik=t=>t&&/^(H[1-6])$/.test(t.nodeName),T$=t=>m7(t)&&!d7(t),D3=t=>ik(t)&&T$(t),E$=t=>ik(t)?parseInt(t.nodeName.substr(1),10):0,R3=t=>{var s;const a=ak(t),i=()=>{t.id=a};return O3("header",(s=Bd(t))!==null&&s!==void 0?s:"","#"+a,E$(t),i)},h7=t=>{const s=t.id||t.name,a=Bd(t);return O3("anchor",a||"#"+s,"#"+s,0,te)},_$=t=>Ve(xe(t,D3),R3),A$=t=>Ve(xe(t,g7),h7),M3=t=>f7("h1,h2,h3,h4,h5,h6,a:not([href])",t),p7=t=>u7(t.title).length>0,O$={find:t=>{const s=M3(t);return xe(_$(s).concat(A$(s)),p7)}},lk="tinymce-url-history",D$=5,N3=t=>Tt(t)&&/^https?/.test(t),R$=t=>mn(t)&&t.length<=D$&&H(t,N3),M$=t=>Et(t)&&un(t,s=>!R$(s)).isNone(),N$=()=>{const t=Lb.getItem(lk);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+lk+" was not valid JSON",a),{};throw a}return M$(s)?s:(console.log("Local storage "+lk+" was not valid format",s),{})},b7=t=>{if(!M$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Lb.setItem(lk,JSON.stringify(t))},v7=t=>{const s=N$();return Jt(s,t).getOr([])},$$=(t,s)=>{if(!N3(t))return;const a=N$(),i=Jt(a,s).getOr([]),d=xe(i,g=>g!==t);a[s]=[t].concat(d).slice(0,D$),b7(a)},Pd=t=>!!t,$3=t=>fn(kl.makeMap(t,/[, ]/),Pd),B3=t=>_.from(ID(t)),y7=t=>{const s=_.from(WS(t)).filter(Pd).map($3);return B3(t).fold(Me,a=>s.fold(De,i=>Re(i).length>0?i:!1))},w7=(t,s)=>{const a=y7(t);return Ot(a)?a?B3(t):_.none():a[s]?B3(t):_.none()},C7=(t,s)=>w7(t,s).map(a=>i=>li.nu(d=>{const g=(w,T)=>{if(!Tt(w))throw new Error("Expected value to be string");if(T!==void 0&&!Et(T))throw new Error("Expected meta to be a object");d({value:w,meta:T})},p={filetype:s,fieldname:i.fieldname,..._.from(i.meta).getOr({})};a.call(t,g,i.value,p)})),B$=t=>_.from(t).filter(Tt).getOrUndefined(),P$=t=>ip(t)?_.some({targets:O$.find(t.getBody()),anchorTop:B$(HD(t)),anchorBottom:B$(zD(t))}):_.none(),F$=t=>_.from(LD(t)),WU=t=>({getHistory:v7,addToHistory:$$,getLinkInformation:()=>P$(t),getValidationHandler:()=>F$(t),getUrlPicker:s=>C7(t,s)}),ZU=(t,s,a)=>{const i=V(!1),d=r7(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Rd.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=WU(s),w=S$(s),T=n7(s),A=s7(s),D=()=>i.get(),N=pe=>i.set(pe),U={shared:{providers:g,anchors:XL(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:w,colorinput:T,dialog:A,isContextMenuOpen:D,setContextMenuState:N},W={...U,shared:{...U.shared,interpreter:pe=>x3(pe,{},W),getSink:t.popup}},le={...U,shared:{...U.shared,interpreter:pe=>x3(pe,{},le),getSink:t.dialog}};return{popup:W,dialog:le}},ui=(t,s,a)=>{const i=(dt,An)=>{R([s,...a],Gn=>{Gn.broadcastEvent(dt,An)})},d=(dt,An)=>{R([s,...a],Gn=>{Gn.broadcastOn([dt],An)})},g=dt=>d(Ed(),{target:dt.target}),p=E(),w=ai(p,"touchstart",g),T=ai(p,"touchmove",dt=>i(IC(),dt)),A=ai(p,"touchend",dt=>i(hT(),dt)),D=ai(p,"mousedown",g),N=ai(p,"mouseup",dt=>{dt.raw.button===0&&d(Cf(),{target:dt.target})}),U=dt=>d(Ed(),{target:Wt.fromDom(dt.target)}),W=dt=>{dt.button===0&&d(Cf(),{target:Wt.fromDom(dt.target)})},le=()=>{R(t.editorManager.get(),dt=>{t!==dt&&dt.dispatch("DismissPopups",{relatedTarget:t})})},pe=dt=>i(E1(),hy(dt)),st=dt=>{d(wf(),{}),i($p(),hy(dt))},$e=()=>d(wf(),{}),at=dt=>{dt.state&&d(Ed(),{target:Wt.fromDom(t.getContainer())})},Sn=dt=>{d(Ed(),{target:Wt.fromDom(dt.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",U),t.on("tap",U),t.on("mouseup",W),t.on("mousedown",le),t.on("ScrollWindow",pe),t.on("ResizeWindow",st),t.on("ResizeEditor",$e),t.on("AfterProgressState",at),t.on("DismissPopups",Sn)}),t.on("remove",()=>{t.off("click",U),t.off("tap",U),t.off("mouseup",W),t.off("mousedown",le),t.off("ScrollWindow",pe),t.off("ResizeWindow",st),t.off("ResizeEditor",$e),t.off("AfterProgressState",at),t.off("DismissPopups",Sn),D.unbind(),w.unbind(),T.unbind(),A.unbind(),N.unbind()}),t.on("detach",()=>{R([s,...a],wE),R([s,...a],dt=>dt.destroy())})},oc=Fl,Ff=lS,uk=K([Ke("shell",!1),Mt("makeItem"),Ke("setupItem",te),Pl.field("listBehaviours",[zo])]),S7=iu({name:"items",overrides:()=>({behaviours:pn([zo.config({})])})}),x7=K([S7]),k7=K("CustomList"),T7=(t,s,a,i)=>{const d=(w,T)=>{p(w).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},A=>{const D=zo.contents(A),N=T.length,U=N-D.length,W=U>0?jt(U,()=>t.makeItem()):[],le=D.slice(N);R(le,st=>zo.remove(A,st)),R(W,st=>zo.append(A,st));const pe=zo.contents(A);R(pe,(st,$e)=>{t.setupItem(w,st,T[$e],$e)})})},g=t.shell?{behaviours:[zo.config({})],components:[]}:{behaviours:[],components:s},p=w=>t.shell?_.some(w):rr(w,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:gc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},I$=jc({name:k7(),configFields:uk(),partFields:x7(),factory:T7,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),y0=K([Mt("dom"),Ke("shell",!0),Ra("toolbarBehaviours",[zo])]),L$=K([iu({name:"groups",overrides:()=>({behaviours:pn([zo.config({})])})})]),dk=(t,s,a,i)=>{const d=(w,T)=>{g(w).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},A=>{zo.set(A,T)})},g=w=>t.shell?_.some(w):rr(w,t,"groups"),p=t.shell?{behaviours:[zo.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:gc(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},Em=jc({name:"Toolbar",configFields:y0(),partFields:L$(),factory:dk,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),H$=te,E7=Me,P3=K([]);var _7=Object.freeze({__proto__:null,setup:H$,isDocked:E7,getBehaviours:P3});const z$=t=>(Tr(Qs(t,"position"),"fixed")?_.none():yc(t)).orThunk(()=>{const i=Wt.fromTag("span");return sa(t).bind(d=>{Sc(d,i);const g=yc(i);return Yl(i),g})}),F3=t=>z$(t).map(Ds).getOrThunk(()=>Yo(0,0)),V$=ht.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),qU=(t,s)=>{const a=t.element;wa(a,s.transitionClass),ia(a,s.fadeOutClass),wa(a,s.fadeInClass),s.onShow(t)},A7=(t,s)=>{const a=t.element;wa(a,s.transitionClass),ia(a,s.fadeInClass),wa(a,s.fadeOutClass),s.onHide(t)},O7=(t,s)=>t.y<s.bottom&&t.bottom>s.y,D7=(t,s)=>t.y>=s.y,U$=(t,s)=>t.bottom<=s.bottom,mk=(t,s,a)=>H(t,i=>{switch(i){case"bottom":return U$(s,a);case"top":return D7(s,a)}}),W$=(t,s)=>s.getInitialPos().map(a=>to(a.bounds.x,a.bounds.y,hr(t),ft(t))),R7=(t,s,a)=>{a.setInitialPos({style:Ur(t),position:Pt(t,"position")||"static",bounds:s})},I3=(t,s,a)=>a.getInitialPos().bind(i=>{switch(a.clearInitialPos(),i.position){case"static":return _.some(V$.static());case"absolute":const d=z$(t).map(os).getOrThunk(()=>os(Qr()));return _.some(V$.absolute(Lu("absolute",Jt(i.style,"left").map(g=>s.x-d.x),Jt(i.style,"top").map(g=>s.y-d.y),Jt(i.style,"right").map(g=>d.right-s.right),Jt(i.style,"bottom").map(g=>d.bottom-s.bottom))));default:return _.none()}}),M7=(t,s,a)=>W$(t,a).filter(i=>mk(a.getModes(),i,s)).bind(i=>I3(t,i,a)),N7=(t,s,a)=>{const i=os(t);if(mk(a.getModes(),i,s))return _.none();{R7(t,i,a);const d=Ka(),g=i.x-d.x,p=s.y-d.y,w=d.bottom-s.bottom,T=i.y<=s.y;return _.some(V$.fixed(Lu("fixed",_.some(g),T?_.some(p):_.none(),_.none(),T?_.none():_.some(w))))}},$7=(t,s,a)=>{const i=t.element;return Tr(Qs(i,"position"),"fixed")?M7(i,s,a):N7(i,s,a)},B7=(t,s)=>{const a=t.element;return W$(a,s).bind(i=>I3(a,i,s))},fk=(t,s,a)=>{a.setDocked(!1),R(["left","right","top","bottom","position"],i=>Po(t.element,i)),s.onUndocked(t)},gk=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Xp(t.element,i),(d?s.onDocked:s.onUndocked)(t)},Z$=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const w=O7(p,i);w!==a.isVisible()&&(a.setVisible(w),d&&!w?(om(t.element,[g.fadeOutClass]),g.onHide(t)):(w?qU:A7)(t,g))})})},P7=(t,s,a)=>{const i=s.lazyViewport(t);a.isDocked()&&Z$(t,s,a,i),$7(t,i,a).each(g=>{g.fold(()=>fk(t,s,a),p=>gk(t,s,a,p),p=>{Z$(t,s,a,i,!0),gk(t,s,a,p)})})},F7=(t,s,a)=>{const i=t.element;a.setDocked(!1),B7(t,a).each(d=>{d.fold(()=>fk(t,s,a),g=>gk(t,s,a,g),te)}),a.setVisible(!0),s.contextual.each(d=>{gl(i,[d.fadeInClass,d.fadeOutClass,d.transitionClass]),d.onShow(t)}),L3(t,s,a)},L3=(t,s,a)=>{t.getSystem().isConnected()&&P7(t,s,a)},H3=(t,s,a)=>{a.isDocked()&&F7(t,s,a)};var hk=Object.freeze({__proto__:null,refresh:L3,reset:H3,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i)}),V3=Object.freeze({__proto__:null,events:(t,s)=>lr([Qa(Kd(),(a,i)=>{t.contextual.each(d=>{Gi(a.element,d.transitionClass)&&(gl(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Zt(E1(),(a,i)=>{L3(a,t,s)}),Zt($p(),(a,i)=>{H3(a,t,s)})])}),oC=[pi("contextual",[ca("fadeInClass"),ca("fadeOutClass"),ca("transitionClass"),va("lazyContext"),ds("onShow"),ds("onShown"),ds("onHide"),ds("onHidden")]),Da("lazyViewport",Ka),k("modes",["top","bottom"],_a),ds("onDocked"),ds("onUndocked")],L7=Object.freeze({__proto__:null,init:t=>{const s=V(!1),a=V(!0),i=Vr(),d=V(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Mi({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Si=fc({fields:oC,name:"docking",active:V3,apis:hk,state:L7}),pk=K(Yn("toolbar-height-change")),_m={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},j$="tox-tinymce--toolbar-sticky-on",bk="tox-tinymce--toolbar-sticky-off",vk=(t,s)=>{const a=ga(s),d=Pc(s).dom.innerHeight,g=Wi(a),p=Wt.fromDom(t.elm),w=Ar(p),T=ft(p),A=w.y,D=A+T,N=Ds(s),U=ft(s),W=N.top,le=W+U,pe=Math.abs(W-g.top)<2,st=Math.abs(le-(g.top+d))<2;if(pe&&A<le)rh(g.left,A-U,a);else if(st&&D>W){const $e=A-d+T+U;rh(g.left,$e,a)}},U3=(t,s)=>dn(Si.getModes(t),s),W3=t=>{const s=i=>Vn(i)+(parseInt(Pt(i,"margin-top"),10)||0)+(parseInt(Pt(i,"margin-bottom"),10)||0),a=t.element;Ei(a).each(i=>{const d="padding-"+Si.getModes(t)[0];if(Si.isDocked(t)){const g=hr(i);zn(a,"width",g+"px"),zn(i,d,s(a)+"px")}else Po(a,"width"),Po(i,d)})},Qb=(t,s)=>{s?(ia(t,_m.fadeOutClass),om(t,[_m.transitionClass,_m.fadeInClass])):(ia(t,_m.fadeInClass),om(t,[_m.fadeOutClass,_m.transitionClass]))},Z3=(t,s)=>{const a=Wt.fromDom(t.getContainer());s?(wa(a,j$),ia(a,bk)):(wa(a,bk),ia(a,j$))},H7=(t,s)=>{const a=ga(s);Yi(a).filter(i=>!zs(s,i)).filter(i=>zs(i,Wt.fromDom(a.dom.body))||mi(t,i)).each(()=>lm(s))},G$=(t,s)=>$l(t).orThunk(()=>s().toOptional().bind(a=>$l(a.element))),j3=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Si.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(W3)}),t.on("SkinLoaded",()=>{a().each(i=>{Si.isDocked(i)?Si.reset(i):Si.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(Si.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{Si.refresh(d);const g=d.element;Ji(g)&&vk(i,g)})}),t.on("PostRender",()=>{Z3(t,!1)})},G3=t=>t().map(Si.isDocked).getOr(!1),z7=()=>[Nl.config({channels:{[pk()]:{onReceive:W3}}})],q$=(t,s)=>{const a=Vr(),i=s.getSink,d=w=>{i().each(T=>w(T.element))},g=w=>{t.inline||W3(w),Z3(t,Si.isDocked(w)),w.getSystem().broadcastOn([wf()],{}),i().each(T=>T.getSystem().broadcastOn([wf()],{}))},p=t.inline?[]:z7();return[Oo.config({}),Si.config({contextual:{lazyContext:w=>{const T=Vn(w.element),A=t.inline?t.getContentAreaContainer():t.getContainer(),D=os(Wt.fromDom(A)),N=D.height-T,U=D.y+(U3(w,"top")?0:T);return _.some(to(D.x,U,D.width,N))},onShow:()=>{d(w=>Qb(w,!0))},onShown:w=>{d(T=>gl(T,[_m.transitionClass,_m.fadeInClass])),a.get().each(T=>{H7(w.element,T),a.clear()})},onHide:w=>{G$(w.element,i).fold(a.clear,a.set),d(T=>Qb(T,!1))},onHidden:()=>{d(w=>gl(w,[_m.transitionClass]))},..._m},lazyViewport:w=>{const T=Ka(),A=PD(t),D=T.y+(U3(w,"top")?A:0),N=T.height-(U3(w,"bottom")?A:0);return to(T.x,D,T.width,N)},modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var V7=Object.freeze({__proto__:null,setup:j3,isDocked:G3,getBehaviours:q$});const q3=t=>{const s=t.editor,a=t.sticky?q$:P3;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:pn(a(s,t.sharedBackstage))}},U7=lo([Ma,Di("items",qt([cl([H_,hi("items",_a)]),_a]))].concat(Pb)),W7=t=>Ms("GroupToolbarButton",U7,t),Z7=[Ja("text"),Ja("tooltip"),Ja("icon"),Aa("search",!1,qt([ni,lo([Ja("placeholder")])],t=>Ot(t)?t?_.some({placeholder:_.none()}):_.none():_.some(t))),va("fetch"),Da("onSetup",()=>te)],j7=lo([Ma,...Z7]),K$=t=>Ms("menubutton",j7,t),G7=lo([Ma,Dw,Sm,n0,fR,Q5,$b,ll("presets","normal",["normal","color","listpreview"]),rx(1),Nb,eI]),q7=t=>Ms("SplitButton",G7,t);var K3=Il({factory:(t,s)=>{const a=(d,g)=>{const p=Ve(g,w=>{const T={type:"menubutton",text:w.text,fetch:D=>{D(w.getItems())}},A=K$(T).mapError(D=>tu(D)).getOrDie();return v3(A,"tox-mbtn",s.backstage,_.some("menuitem"))});zo.set(d,p)},i={focus:ho.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:pn([zo.config({}),fs("menubar-events",[zr(d=>{t.onSetup(d)}),Zt(qd(),(d,g)=>{la(d.element,".tox-mbtn--active").each(p=>{Ml(g.event.target,".tox-mbtn").each(w=>{zs(p,w)||d.getSystem().getByDom(p).each(T=>{d.getSystem().getByDom(w).each(A=>{uu.expand(A),uu.close(T),Oo.focus(A)})})})})}),Zt(Bp(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(w=>d.getSystem().getByDom(w).toOptional()).each(w=>{uu.isOpen(p)&&(uu.expand(w),uu.close(p))})})})]),ho.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),_.some(!0))}),xa.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Mt("dom"),Mt("uid"),Mt("onEscape"),Mt("backstage"),Ke("onSetup",te)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const sC="â¡ï¸Upgrade",Y7="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",X7=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:Y7,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:sC}}]}),e1=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),If=t=>t.dimension.property,t1=(t,s)=>t.dimension.getDimension(s),yk=(t,s)=>{const a=e1(t,s);gl(a,[s.shrinkingClass,s.growingClass])},Y3=(t,s)=>{ia(t.element,s.openClass),wa(t.element,s.closedClass),zn(t.element,If(s),"0px"),ne(t.element)},X3=(t,s)=>{ia(t.element,s.closedClass),wa(t.element,s.openClass),Po(t.element,If(s))},Y$=(t,s,a,i)=>{a.setCollapsed(),zn(t.element,If(s),t1(s,t.element)),yk(t,s),Y3(t,s),s.onStartShrink(t),s.onShrunk(t)},J7=(t,s,a,i)=>{const d=i.getOrThunk(()=>t1(s,t.element));a.setCollapsed(),zn(t.element,If(s),d),ne(t.element);const g=e1(t,s);ia(g,s.growingClass),wa(g,s.shrinkingClass),Y3(t,s),s.onStartShrink(t)},X$=(t,s,a)=>{const i=t1(s,t.element);(i==="0px"?Y$:J7)(t,s,a,_.some(i))},J$=(t,s,a)=>{const i=e1(t,s),d=Gi(i,s.shrinkingClass),g=t1(s,t.element);X3(t,s);const p=t1(s,t.element);(d?()=>{zn(t.element,If(s),g),ne(t.element)}:()=>{Y3(t,s)})(),ia(i,s.shrinkingClass),wa(i,s.growingClass),X3(t,s),zn(t.element,If(s),p),a.setExpanded(),s.onStartGrow(t)},Q7=(t,s,a)=>{if(a.isExpanded()){Po(t.element,If(s));const i=t1(s,t.element);zn(t.element,If(s),i)}},Q$=(t,s,a)=>{a.isExpanded()||J$(t,s,a)},J3=(t,s,a)=>{a.isExpanded()&&X$(t,s,a)},Q3=(t,s,a)=>{a.isExpanded()&&Y$(t,s,a)},eH=(t,s,a)=>a.isExpanded(),tH=(t,s,a)=>a.isCollapsed(),eB=(t,s,a)=>{const i=e1(t,s);return Gi(i,s.growingClass)===!0},tB=(t,s,a)=>{const i=e1(t,s);return Gi(i,s.shrinkingClass)===!0};var nH=Object.freeze({__proto__:null,refresh:Q7,grow:Q$,shrink:J3,immediateShrink:Q3,hasGrown:eH,hasShrunk:tH,isGrowing:eB,isShrinking:tB,isTransitioning:(t,s,a)=>eB(t,s)||tB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?X$:J$)(t,s,a)},disableTransitions:yk,immediateGrow:(t,s,a)=>{a.isExpanded()||(X3(t,s),zn(t.element,If(s),t1(s,t.element)),yk(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),oH=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return ru(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Ws(s.dimension.property,"0px")})},events:(t,s)=>lr([Qa(Kd(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(yk(a,t),s.isExpanded()&&Po(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),oB=[Mt("closedClass"),Mt("openClass"),Mt("shrinkingClass"),Mt("growingClass"),Ns("getAnimationRoot"),ds("onShrunk"),ds("onStartShrink"),ds("onGrown"),ds("onStartGrow"),Ke("expanded",!1),Di("dimension",gi("property",{width:[vr("property","width"),vr("getDimension",t=>hr(t)+"px")],height:[vr("property","height"),vr("getDimension",t=>ft(t)+"px")]}))],rH=Object.freeze({__proto__:null,init:t=>{const s=V(t.expanded),a=()=>"expanded: "+s.get();return Mi({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:St(s.set,!1),setExpanded:St(s.set,!0),readState:a})}});const Fd=fc({fields:oB,name:"sliding",active:oH,apis:nH,state:rH}),rC="container",Ck=[Ra("slotBehaviours",[])],sB=t=>"<alloy.field."+t+">",aH=t=>{const s=(()=>{const g=[];return{slot:(w,T)=>(g.push(w),Yy(rC,sB(w),T)),record:K(g)}})(),a=t(s),i=s.record(),d=Ve(i,g=>Zc({name:g,pname:sB(g)}));return Sb(rC,Ck,d,cH,a)},cH=(t,s)=>{const a=pe=>Tf(t),i=(pe,st)=>rr(pe,t,st),d=(pe,st)=>($e,at)=>rr($e,t,at).map(Sn=>pe(Sn,at)).getOr(st),g=pe=>(st,$e)=>{R($e,at=>pe(st,at))},p=(pe,st)=>sr(pe.element,"aria-hidden")!=="true",w=(pe,st)=>{if(!p(pe)){const $e=pe.element;Po($e,"display"),de($e,"aria-hidden"),yo(pe,U0(),{name:st,visible:!0})}},T=(pe,st)=>{if(p(pe)){const $e=pe.element;zn($e,"display","none"),To($e,"aria-hidden","true"),yo(pe,U0(),{name:st,visible:!1})}},A=d(p,!1),D=d(T),N=g(D),U=pe=>N(pe,a()),W=d(w),le={getSlotNames:a,getSlot:i,isShowing:A,hideSlot:D,hideAllSlots:U,showSlot:W};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ag(t.slotBehaviours),apis:le}},Gc={...fn({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Th(t)),sketch:aH},t4=lo([Sm,Dw,Da("onShow",te),Da("onHide",te),$b]),rB=t=>Ms("sidebar",t4,t),iH=t=>{const{sidebars:s}=t.ui.registry.getAll();R(Re(s),a=>{const i=s[a],d=()=>Tr(_.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},n4=t=>({element:()=>t.element.dom}),lH=(t,s)=>{const a=Ve(Re(s),i=>{const d=s[i],g=eu(rB(d));return{name:i,getApi:n4,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ve(a,i=>{const d=V(te);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Fb.unnamedEvents([Md(i,d),Mw(i,d),Zt(U0(),(g,p)=>{const w=p.event;se(a,A=>A.name===w.name).each(A=>{(w.visible?A.onShow:A.onHide)(A.getApi(g))})})])})})},uH=t=>Gc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:lH(s,t),slotBehaviours:Fb.unnamedEvents([zr(a=>Gc.hideAllSlots(a))])})),dH=(t,s,a)=>{ss.getCurrent(t).each(d=>{zo.set(d,[uH(s)]);const g=a==null?void 0:a.toLowerCase();Tt(g)&&Kn(s,g)&&ss.getCurrent(d).each(p=>{Gc.showSlot(p,g),Fd.immediateGrow(d),Po(d.element,"width")})})},aC=(t,s)=>{ss.getCurrent(t).each(i=>{ss.getCurrent(i).each(g=>{Fd.hasGrown(i)?Gc.isShowing(g,s)?Fd.shrink(i):(Gc.hideAllSlots(g),Gc.showSlot(g,s)):(Gc.hideAllSlots(g),Gc.showSlot(g,s),Fd.grow(i))})})},mH=t=>ss.getCurrent(t).bind(a=>Fd.isGrowing(a)||Fd.hasGrown(a)?ss.getCurrent(a).bind(g=>se(Gc.getSlotNames(g),p=>Gc.isShowing(g,p))):_.none()),o4=Yn("FixSizeEvent"),s4=Yn("AutoSizeEvent"),tW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:pn([xa.config({}),Oo.config({}),Fd.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{ss.getCurrent(s).each(Gc.hideAllSlots),Vs(s,s4)},onGrown:s=>{Vs(s,s4)},onStartGrow:s=>{yo(s,o4,{width:Qs(s.element,"width").getOr("")})},onStartShrink:s=>{yo(s,o4,{width:hr(s.element)+"px"})}}),zo.config({}),ss.config({find:s=>{const a=zo.contents(s);return uo(a)}})])}],behaviours:pn([Xu.childAt(0),fs("sidebar-sliding-events",[Zt(o4,(s,a)=>{zn(s.element,"width",a.event.width)}),Zt(s4,(s,a)=>{Po(s.element,"width")})])])});var gH=Object.freeze({__proto__:null,block:(t,s,a,i)=>{To(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=pn([ho.config({mode:"special",onTab:()=>_.some(!0),onShiftTab:()=>_.some(!0)}),Oo.config({})]),p=i(d,g),w=d.getSystem().build(p);zo.append(d,pl(w)),w.hasConfigured(ho)&&s.focus&&ho.focusIn(w),a.isBlocked()||s.onBlock(t),a.blockWith(()=>zo.remove(d,w))},unblock:(t,s,a)=>{de(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),aB=[Da("getRoot",_.none),Oa("focus",!0),ds("onBlock"),ds("onUnblock")],hH=Object.freeze({__proto__:null,init:()=>{const t=qT(),s=a=>{t.set({destroy:a})};return Mi({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Ug=fc({fields:aB,name:"blocking",apis:gH,state:hH}),pH=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return ke(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},bH=t=>Array.prototype.slice.call(t.dom.classList,0),Wg=t=>{const s=Wt.fromHtml(t),a=Js(s),i=pH(s),d=bH(s),g=a.length===0?{}:{innerHtml:tm(s)};return{tag:qo(s),classes:d,attributes:i,...g}},vH=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Wg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),cB=t=>ss.getCurrent(t).each(s=>lm(s.element)),yH=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;_.from(t.iframeElement).map(Wt.fromDom).each(d=>{s?(B(d,a).each(g=>To(d,i,g)),To(d,a,-1)):(de(d,a),B(d,i).each(g=>{To(d,a,g),de(d,i)}))})},oW=(t,s,a,i)=>{const d=s.element;if(yH(t,a),a)Ug.block(s,vH(i)),Po(d,"display"),de(d,"aria-hidden"),t.hasFocus()&&cB(s);else{const g=ss.getCurrent(s).exists(p=>cy(p.element));Ug.unblock(s),zn(d,"display","none"),To(d,"aria-hidden","true"),g&&t.focus()}},sW=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:pn([zo.config({}),Ug.config({focus:!1}),ss.config({find:s=>uo(s.components())})]),components:[]}),iB=t=>t.type==="focusin",lB=t=>iB(t)?(t.composed?uo(t.composedPath()):_.from(t.target)).map(Wt.fromDom).filter(xs).exists(a=>Gi(a,"mce-pastebin")):!1,wH=(t,s,a)=>{const i=V(!1),d=Vr(),g=w=>{i.get()&&!lB(w)&&(w.preventDefault(),cB(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",w=>{w.command.toLowerCase()==="mcefocus"&&w.value!==!0&&g(w)})});const p=w=>{w!==i.get()&&(i.set(w),oW(t,s(),w,a.providers),BI(t,w))};t.on("ProgressState",w=>{if(d.on(clearTimeout),et(w.time)){const T=Wv.setEditorTimeout(t,()=>p(w.state),w.time);d.set(T)}else p(w.state),d.clear()})},CH=(t,s)=>ke(t,(d,g)=>s(g,d.len).fold(K(d),w=>({len:w.finish,list:d.list.concat([w])})),{len:0,list:[]}).list,Ul=(t,s,a)=>({within:t,extra:s,withinWidth:a}),uB=(t,s,a)=>{const i=CH(t,(w,T)=>{const A=a(w);return _.some({element:w,start:T,finish:T+A,width:A})}),d=xe(i,w=>w.finish<=s),g=We(d,(w,T)=>w+T.width,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},cC=t=>Ve(t,s=>s.element),dB=(t,s,a)=>{const i=cC(t.concat(s));return Ul(i,[],a)},SH=(t,s,a,i)=>{const d=cC(t).concat([a]);return Ul(d,cC(s),i)},iC=(t,s,a)=>Ul(cC(t),[],a),xH=(t,s,a)=>{const i=uB(s,t,a);return i.extra.length===0?_.some(i):_.none()},Sk=(t,s,a,i)=>{const d=xH(t,s,a).getOrThunk(()=>uB(s,t-a(i),a)),g=d.within,p=d.extra,w=d.withinWidth;return p.length===1&&p[0].width<=a(i)?dB(g,p,w):p.length>=1?SH(g,p,i,w):iC(g,p,w)},mB=(t,s)=>{const a=Ve(s,i=>pl(i));Em.setGroups(t,a)},xk=t=>ao(t,s=>$l(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),fB=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Wn(t,s,"primary"),g=oa.getCoupled(t,"overflowGroup");zn(d.element,"visibility","hidden");const p=i.concat([g]),w=xk(p);a([]),mB(d,p);const T=hr(d.element),A=Sk(T,s.builtGroups.get(),D=>hr(D.element),g);A.extra.length===0?(zo.remove(d,g),a([])):(mB(d,A.within),a(A.extra)),Po(d.element,"visibility"),ne(d.element),w.each(Oo.focus)},Qu=K([Ra("splitToolbarBehaviours",[oa]),kc("builtGroups",()=>V([]))]),kH=K([cm(["overflowToggledClass"]),Qf("getOverflowBounds"),Mt("lazySink"),kc("overflowGroups",()=>V([])),ds("onOpened"),ds("onClosed")].concat(Qu())),kk=K([Zc({factory:Em,schema:y0(),name:"primary"}),Uu({schema:y0(),name:"overflow"}),Uu({name:"overflow-button"}),Uu({name:"overflow-group"})]),Tk=K((t,s)=>{Rs(t,Math.floor(s))}),TH=K([cm(["toggledClass"]),Mt("lazySink"),va("fetch"),Qf("getBounds"),pi("fireDismissalEventInstead",[Ke("event",Xd())]),pf(),ds("onToggled")]),EH=K([Uu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:pn([Es.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Uu({factory:Em,schema:y0(),name:"toolbar",overrides:t=>({toolbarBehaviours:pn([ho.config({mode:"cyclic",onEscape:s=>(rr(s,t,"button").each(Oo.focus),_.none())})])})})]),gB=(t,s)=>{const a=oa.getCoupled(t,"toolbarSandbox");ms.isOpen(a)?ms.close(a):ms.open(a,s.toolbar())},r4=(t,s,a,i)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();ci.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:Tk()}}},d)},hB=(t,s,a,i,d)=>{Em.setGroups(s,d),r4(t,s,a,i),Es.on(t)},_H=(t,s,a)=>{const i=V1(),d=(p,w)=>{a.fetch().get(T=>{hB(t,w,a,s.layouts,T),i.link(t.element),ho.focusIn(w)})},g=()=>{Es.off(t),Oo.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:pn([ho.config({mode:"special",onEscape:p=>(ms.close(p),_.some(!0))}),ms.config({onOpen:d,onClose:g,isPartOf:(p,w,T)=>rm(w,T)||rm(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Nl.config({channels:{...jh({isExtraPart:Me,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...Cv({doReposition:()=>{ms.getState(oa.getCoupled(t,"toolbarSandbox")).each(p=>{r4(t,p,a,s.layouts)})}})}})])}},bp=jc({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...el.sketch({...i.button(),action:d=>{gB(d,i)},buttonBehaviours:Pl.augment({dump:i.button().buttonBehaviours},[oa.config({others:{toolbarSandbox:d=>_H(d,a,t)}})])}),apis:{setGroups:(d,g)=>{ms.getState(oa.getCoupled(d,"toolbarSandbox")).each(p=>{hB(d,p,t,a.layouts,g)})},reposition:d=>{ms.getState(oa.getCoupled(d,"toolbarSandbox")).each(g=>{r4(d,g,t,a.layouts)})},toggle:d=>{gB(d,i)},getToolbar:d=>ms.getState(oa.getCoupled(d,"toolbarSandbox")),isOpen:d=>ms.isOpen(oa.getCoupled(d,"toolbarSandbox"))}}),configFields:TH(),partFields:EH(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),pB=K([Mt("items"),cm(["itemSelector"]),Ra("tgroupBehaviours",[ho])]),bB=K([Cb({name:"items",unit:"item"})]),AH=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.tgroupBehaviours,[ho.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),lC=jc({name:"ToolbarGroup",configFields:pB(),partFields:bB(),factory:AH}),vB=t=>Ve(t,s=>pl(s)),yB=(t,s,a)=>{fB(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{bp.setGroups(d,vB(i))})})},OH=(t,s,a,i)=>{const d=Cr(bp.sketch({fetch:()=>li.nu(g=>{g(vB(t.overflowGroups.get()))}),layouts:{onLtr:()=>[_c,Ec],onRtl:()=>[Ec,_c],onBottomLtr:()=>[Uc,ri],onBottomRtl:()=>[ri,Uc]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.splitToolbarBehaviours,[oa.config({others:{overflowGroup:()=>lC.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(Ve(p,g.getSystem().build)),yB(g,d,t)},refresh:g=>yB(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{bp.toggle(p)})},isOpen:g=>d.getOpt(g).map(bp.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{bp.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(bp.getToolbar)},domModification:{attributes:{role:"group"}}}},wB=jc({name:"SplitFloatingToolbar",configFields:kH(),partFields:kk(),factory:OH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),DH=K([cm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ds("onOpened"),ds("onClosed")].concat(Qu())),RH=K([Zc({factory:Em,schema:y0(),name:"primary"}),Zc({factory:Em,schema:y0(),name:"overflow",overrides:t=>({toolbarBehaviours:pn([Fd.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{rr(s,t,"overflow-button").each(a=>{Es.off(a),Oo.focus(a)}),t.onClosed(s)},onGrown:s=>{ho.focusIn(s),t.onOpened(s)},onStartGrow:s=>{rr(s,t,"overflow-button").each(Es.on)}}),ho.config({mode:"acyclic",onEscape:s=>(rr(s,t,"overflow-button").each(Oo.focus),_.some(!0))})])})}),Uu({name:"overflow-button",overrides:t=>({buttonBehaviours:pn([Es.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Uu({name:"overflow-group"})]),MH=(t,s)=>rr(t,s,"overflow").map(Fd.hasGrown).getOr(!1),CB=(t,s)=>{rr(t,s,"overflow-button").bind(()=>rr(t,s,"overflow")).each(a=>{a4(t,s),Fd.toggleGrow(a)})},a4=(t,s)=>{rr(t,s,"overflow").each(a=>{fB(t,s,i=>{const d=Ve(i,g=>pl(g));Em.setGroups(a,d)}),rr(t,s,"overflow-button").each(i=>{Fd.hasGrown(a)&&Es.on(i)}),Fd.refresh(a)})},NH=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(p,w)=>{const T=Ve(w,p.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:gc(t.splitToolbarBehaviours,[oa.config({others:{overflowGroup:p=>lC.sketch({...i["overflow-group"](),items:[el.sketch({...i["overflow-button"](),action:w=>{Vs(p,d)}})]})}}),fs("toolbar-toggle-events",[Zt(d,p=>{CB(p,t)})])]),apis:{setGroups:(p,w)=>{g(p,w),a4(p,t)},refresh:p=>a4(p,t),toggle:p=>CB(p,t),isOpen:p=>MH(p,t)},domModification:{attributes:{role:"group"}}}},c4=jc({name:"SplitSlidingToolbar",configFields:DH(),partFields:RH(),factory:NH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),SB=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[lC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:pn([xa.config({}),Oo.config({})])}},Ek=t=>lC.sketch(SB(t)),i4=(t,s)=>{const a=zr(i=>{const d=Ve(t.initGroups,Ek);Em.setGroups(i,d)});return pn([Hl.toolbarButton(t.providers.isDisabled),Sa(),ho.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),fs("toolbar-events",[a])])},uC=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":SB({title:_.none(),items:[]}),"overflow-button":XN({name:"more",icon:_.some("more-drawer"),enabled:!0,tooltip:_.some("More..."),primary:!1,buttonType:_.none(),borderless:!1},_.none(),t.providers)},splitToolbarBehaviours:i4(t,s)}},l4=t=>{const s=uC(t),a=4,i=wB.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return wB.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Ar(d),p=fi(d),w=Ar(p),T=Math.max(p.dom.scrollHeight,w.height);return to(g.x+a,w.y,g.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},$H=t=>{const s=c4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=c4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=uC(t);return c4.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([pk()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([pk()],{type:"closed"}),t.onToggled(d,!1)}})},_k=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Em.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===qu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Em.parts.groups({})],toolbarBehaviours:i4(t,s)})},xB=[Xf("type",["button"]),Pg,ll("buttonType","secondary",["primary","secondary"]),va("onAction")],BH=gi("type",{button:xB}),PH=lo([k("buttons",[],BH),va("onShow"),va("onHide")]),FH=t=>Ms("view",PH,t),kB=(t,s)=>w3({text:t.text,enabled:!0,primary:!1,name:"name",icon:_.none(),borderless:!1,buttonType:_.some(t.buttonType)},a=>{t.onAction()},s),IH=t=>{const s=Ve(t.buttons,a=>kB(a,t.providers));return{uid:t.uid,dom:{tag:"div",classes:["tox-view__header"]},components:[xm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),xm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:s})]}},LH=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),u4=(t,s,a,i)=>{const d={getPane:g=>oc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var w0=jc({name:"silver.View",configFields:[Mt("viewConfig")],partFields:[iu({factory:{sketch:IH},schema:[Mt("buttons"),Mt("providers")],name:"header"}),iu({factory:{sketch:LH},schema:[],name:"pane"})],factory:u4,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const HH=(t,s,a)=>Le(s,(i,d)=>{const g=eu(FH(i));return t.slot(d,w0.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[w0.parts.header({buttons:g.buttons,providers:a})]:[],w0.parts.pane({})]}))}),TB=(t,s)=>Gc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:HH(a,t,s),slotBehaviours:Fb.unnamedEvents([zr(i=>Gc.hideAllSlots(i))])})),EB=t=>se(Gc.getSlotNames(t),s=>Gc.isShowing(t,s)),_B=t=>{const s=t.element;zn(s,"display","none"),To(s,"aria-hidden","true")},zH=t=>{const s=t.element;Po(s,"display"),de(s,"aria-hidden")},AB=t=>({getContainer:K(t)}),OB=(t,s,a)=>{Gc.getSlot(t,s).each(i=>{w0.getPane(i).each(d=>{a(i)(AB(d.element.dom))})})},VH=(t,s)=>OB(t,s,w0.getOnShow),UH=(t,s)=>OB(t,s,w0.getOnHide);var Ak=Il({factory:(t,s)=>{const g={setViews:(p,w)=>{zo.set(p,[TB(w,s.backstage.shared.providers)])},whichView:p=>ss.getCurrent(p).bind(EB),toggleView:(p,w,T,A)=>ss.getCurrent(p).exists(D=>{const N=EB(D),U=N.exists(le=>A===le),W=Gc.getSlot(D,A).isSome();return W&&(Gc.hideAllSlots(D),U?(_B(p),w()):(T(),zH(p),Gc.showSlot(D,A),VH(D,A)),N.each(le=>UH(D,le))),W})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:pn([zo.config({}),ss.config({find:p=>{const w=zo.contents(p);return uo(w)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Mt("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const ZH=(t,s,a)=>{let i=!1;const d={getSocket:g=>oc.getPart(g,t,"socket"),setSidebar:(g,p,w)=>{oc.getPart(g,t,"sidebar").each(T=>dH(T,p,w))},toggleSidebar:(g,p)=>{oc.getPart(g,t,"sidebar").each(w=>aC(w,p))},whichSidebar:g=>oc.getPart(g,t,"sidebar").bind(mH).getOrNull(),getHeader:g=>oc.getPart(g,t,"header"),getToolbar:g=>oc.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{oc.getPart(g,t,"toolbar").each(w=>{const T=Ve(p,Ek);w.getApis().setGroups(w,T)})},setToolbars:(g,p)=>{oc.getPart(g,t,"multiple-toolbar").each(w=>{const T=Ve(p,A=>Ve(A,Ek));I$.setItems(w,T)})},refreshToolbar:g=>{oc.getPart(g,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:g=>{oc.getPart(g,t,"toolbar").each(p=>{go(p.getApis().toggle,w=>w(p))})},isToolbarDrawerToggled:g=>oc.getPart(g,t,"toolbar").bind(p=>_.from(p.getApis().isOpen).map(w=>w(p))).getOr(!1),getThrobber:g=>oc.getPart(g,t,"throbber"),focusToolbar:g=>{oc.getPart(g,t,"toolbar").orThunk(()=>oc.getPart(g,t,"multiple-toolbar")).each(w=>{ho.focusIn(w)})},setMenubar:(g,p)=>{oc.getPart(g,t,"menubar").each(w=>{K3.setMenus(w,p)})},focusMenubar:g=>{oc.getPart(g,t,"menubar").each(p=>{K3.focus(p)})},setViews:(g,p)=>{oc.getPart(g,t,"viewWrapper").each(w=>{Ak.setViews(w,p)})},toggleView:(g,p)=>oc.getPart(g,t,"viewWrapper").exists(w=>Ak.toggleView(w,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>oc.getPart(g,t,"viewWrapper").bind(Ak.whichView).getOrNull(),hideMainView:g=>{i=d.isToolbarDrawerToggled(g),i&&d.toggleToolbarDrawer(g),oc.getPart(g,t,"editorContainer").each(p=>{const w=p.element;zn(w,"display","none"),To(w,"aria-hidden","true")})},showMainView:g=>{i&&d.toggleToolbarDrawer(g),oc.getPart(g,t,"editorContainer").each(p=>{const w=p.element;Po(w,"display"),de(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},jH=Ff.optional({factory:K3,name:"menubar",schema:[Mt("backstage")]}),d4=t=>t.type===qu.sliding?$H:t.type===qu.floating?l4:_k,m4=Ff.optional({factory:{sketch:t=>I$.sketch({uid:t.uid,dom:t.dom,listBehaviours:pn([ho.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>_k({type:t.type,uid:Yn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),_.some(!0))}),setupItem:(s,a,i,d)=>{Em.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[Mt("dom"),Mt("onEscape")]}),GH=Ff.optional({factory:{sketch:t=>{const s=d4(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),_.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Mt("dom"),Mt("onEscape"),Mt("getSink")]}),qH=Ff.optional({factory:{sketch:q3},name:"header",schema:[Mt("dom")]}),KH=Ff.optional({factory:{sketch:X7},name:"promotion",schema:[Mt("dom")]}),YH=Ff.optional({name:"socket",schema:[Mt("dom")]}),XH=Ff.optional({factory:{sketch:tW},name:"sidebar",schema:[Mt("dom")]}),JH=Ff.optional({factory:{sketch:sW},name:"throbber",schema:[Mt("dom")]}),QH=Ff.optional({factory:Ak,name:"viewWrapper",schema:[Mt("backstage")]}),e9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),DB=Ff.optional({factory:{sketch:e9},name:"editorContainer",schema:[]});var dr=jc({name:"OuterContainer",factory:ZH,configFields:[Mt("dom"),Mt("behaviours")],partFields:[qH,jH,GH,m4,YH,XH,KH,JH,QH,DB],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const f4="file edit view insert format tools table help",g4={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},C0=(t,s,a)=>{const i=US(a).split(/[ ,]/);return{text:t.title,getItems:()=>Y(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:ze(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},Ok=t=>t.split(" "),RB=(t,s)=>{const a={...g4,...s.menus},i=Re(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?Ok(f4):Ok(s.menubar===!1?"":s.menubar),g=xe(d,w=>{const T=Kn(g4,w);return i?T||Jt(s.menus,w).exists(A=>Kn(A,"items")):T}),p=Ve(g,w=>{const T=a[w];return C0({title:T.title,items:Ok(T.items)},s,t)});return xe(p,w=>{const T=A=>Tt(A)||A.type!=="separator";return w.getItems().length>0&&ze(w.getItems(),T)})},MB=t=>{const s=()=>{t._skinLoaded=!0,RI(t)};return()=>{t.initialized?s():t.on("init",s)}},t9=(t,s)=>()=>MI(t,{message:s}),NB=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),n9=(t,s)=>{const a=s+"/skin.min.css";return NB(t,a,t.ui.styleSheetLoader)},o9=(t,s)=>{if(Ls(Wt.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.min.css";return NB(t,i,hw.DOM.styleSheetLoader)}else return Promise.resolve()},$B=(t,s)=>{const a=qv(s);a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!GS(s)&&Tt(a)?Promise.all([n9(s,a),o9(s,a)]).then(MB(s),t9(s,"Skin could not be loaded")):MB(s)()},BB=St($B,!1),s9=St($B,!0),Dk=(t,s)=>a=>{const i=pg(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},dC=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},PB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},ed=(t,s)=>()=>t.execCommand(s),r9=(t,s,a)=>{const i=(w,T,A,D)=>{const N=s.shared.providers.translate(w.title);if(w.type==="separator")return _.some({type:"separator",text:N});if(w.type==="submenu"){const U=Y(w.getStyleItems(),W=>d(W,T,D));return T===0&&U.length<=0?_.none():_.some({type:"nestedmenuitem",text:N,enabled:U.length>0,getSubmenuItems:()=>Y(w.getStyleItems(),W=>d(W,T,D))})}else return _.some({type:"togglemenuitem",text:N,icon:w.icon,active:w.isSelected(D),enabled:!A,onAction:a.onAction(w),...w.getStylePreview().fold(()=>({}),U=>({meta:{style:U}}))})},d=(w,T,A)=>{const D=w.type==="formatter"&&a.isInvalid(w);return T===0?D?[]:i(w,T,!1,A).toArray():i(w,T,D,A).toArray()},g=w=>{const T=a.getCurrentValue(),A=a.shouldHide?0:1;return Y(w,D=>d(D,A,T))};return{validateItems:g,getFetch:(w,T)=>(A,D)=>{const N=T(),U=g(N),W=Kb(U,wm.CLOSE_ON_EXECUTE,w,{isHorizontalMenu:!1,search:_.none()});D(W)}}},S0=(t,s,a)=>{const i=a.dataset,d=i.type==="basic"?()=>Ve(i.data,g=>C$(g,a.isSelectedFor,a.getPreviewFor)):i.getData;return{items:r9(t,s,a),getStyleItems:d}},mC=(t,s,a)=>{const{items:i,getStyleItems:d}=S0(t,s,a),g=w=>({getComponent:K(w)}),p=dC(t,"NodeChange",w=>{const T=w.getComponent();a.updateText(T)});return qx({text:a.icon.isSome()?_.none():a.text,icon:a.icon,tooltip:_.from(a.tooltip),role:_.none(),fetch:i.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},a9=t=>Ve(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),FB=t=>({type:"basic",data:t});var n1;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(n1||(n1={}));const IB=(t,s)=>s===n1.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),h4=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:a9(IB(i,a))}},Rk=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],LB=t=>{const s=()=>se(Rk,w=>t.formatter.match(w.format)),a=w=>()=>t.formatter.match(w),i=w=>_.none,d=w=>{const A=s().fold(K("left"),D=>D.title.toLowerCase());yo(w,ON,{icon:`align-${A}`})},g=FB(Rk),p=w=>()=>se(Rk,T=>T.format===w.format).each(T=>t.execCommand(T.command));return{tooltip:"Align",text:_.none(),icon:_.some("align-left"),isSelectedFor:a,getCurrentValue:_.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:w=>!t.formatter.canApply(w.format)}},c9=(t,s)=>mC(t,s,LB(t)),i9=(t,s)=>{const a=S0(t,s,LB(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},p4=(t,s)=>{const a=s(),i=Ve(a,d=>d.format);return _.from(t.formatter.closest(i)).bind(d=>se(a,g=>g.format===d)).orThunk(()=>mr(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},HB=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),i=p=>()=>{const w=t.formatter.get(p);return w?_.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):_.none()},d=p=>{const T=p4(t,()=>g.data).fold(K(s),A=>A.title);yo(p,Pf,{text:T})},g=h4(t,"block_formats",n1.SemiColon);return{tooltip:"Blocks",text:_.some(s),icon:_.none(),isSelectedFor:a,getCurrentValue:_.none,getPreviewFor:i,onAction:PB(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},zB=(t,s)=>mC(t,s,HB(t)),l9=(t,s)=>{const a=S0(t,s,HB(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},u9=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],VB=t=>{const s=t.split(/\s*,\s*/);return Ve(s,a=>a.replace(/^['"]+|['"]+$/g,""))},d9=t=>{const s=()=>{const a=VB(t.toLowerCase());return H(u9,i=>a.indexOf(i.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},UB=t=>{const s="System Font",a=()=>{const A=le=>le?VB(le)[0]:"",D=t.queryCommandValue("FontName"),N=T.data,U=D?D.toLowerCase():"";return{matchOpt:se(N,le=>{const pe=le.format;return pe.toLowerCase()===U||A(pe).toLowerCase()===A(U).toLowerCase()}).orThunk(()=>mr(d9(U),{title:s,format:U})),font:D}},i=A=>D=>D.exists(N=>N.format===A),d=()=>{const{matchOpt:A}=a();return A},g=A=>()=>_.some({tag:"div",styles:A.indexOf("dings")===-1?{"font-family":A}:{}}),p=A=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,A.format)})},w=A=>{const{matchOpt:D,font:N}=a(),U=D.fold(K(N),W=>W.title);yo(A,Pf,{text:U})},T=h4(t,"font_family_formats",n1.SemiColon);return{tooltip:"Fonts",text:_.some(s),icon:_.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:w,dataset:T,shouldHide:!1,isInvalid:Me}},WB=(t,s)=>mC(t,s,UB(t)),m9=(t,s)=>{const a=S0(t,s,UB(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},f9={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},g9={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},h9=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},p9=(t,s)=>/[0-9.]+px$/.test(t)?h9(parseInt(t,10)*72/96,s||0)+"pt":Jt(g9,t).getOr(t),b9=t=>Jt(f9,t).getOr(""),ZB=t=>{const s=()=>{let T=_.none();const A=w.data,D=t.queryCommandValue("FontSize");if(D)for(let N=3;T.isNone()&&N>=0;N--){const U=p9(D,N),W=b9(U);T=se(A,le=>le.format===D||le.format===U||le.format===W)}return{matchOpt:T,size:D}},a=T=>A=>A.exists(D=>D.format===T),i=()=>{const{matchOpt:T}=s();return T},d=K(_.none),g=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},p=T=>{const{matchOpt:A,size:D}=s(),N=A.fold(K(D),U=>U.title);yo(T,Pf,{text:N})},w=h4(t,"font_size_formats",n1.Space);return{tooltip:"Font sizes",text:_.some("12pt"),icon:_.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:w,shouldHide:!1,isInvalid:Me}},jB=(t,s)=>mC(t,s,ZB(t)),v9=(t,s)=>{const a=S0(t,s,ZB(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},GB=(t,s)=>{const a="Paragraph",i=p=>()=>t.formatter.match(p),d=p=>()=>{const w=t.formatter.get(p);return w!==void 0?_.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):_.none()},g=p=>{const w=N=>h$(N)?Y(N.items,w):E3(N)?[{title:N.title,format:N.format}]:[],T=Y(y$(t),w),D=p4(t,K(T)).fold(K(a),N=>N.title);yo(p,Pf,{text:D})};return{tooltip:"Formats",text:_.some(a),icon:_.none(),isSelectedFor:i,getCurrentValue:_.none,getPreviewFor:d,onAction:PB(t),updateText:g,shouldHide:$D(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},qB=(t,s)=>{const a={type:"advanced",...s.styles};return mC(t,s,GB(t,a))},y9=(t,s)=>{const a={type:"advanced",...s.styles},i=S0(t,s,GB(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})};var KB=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const p=g(i,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?zv:tD)(i,p)})};return lr([Zt(ou(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;dn(g.channels,p)&&a(i,g.data)}}),zr((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),C9=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),S9=[Mt("channel"),Ns("renderComponents"),Ns("updateState"),Ns("initialData"),Oa("reuseDom",!0)],x9=Object.freeze({__proto__:null,init:()=>{const t=V(_.none()),s=()=>t.set(_.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Wl=fc({fields:S9,name:"reflecting",active:KB,apis:C9,state:x9}),k9=K([Mt("toggleClass"),Mt("fetch"),mf("onExecute"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",K({})),pf(),mf("onItemExecute"),Ns("lazySink"),Mt("dom"),ds("onOpen"),Ra("splitDropdownBehaviours",[oa,ho,Oo]),Ke("matchWidth",!1),Ke("useMinWidth",!1),Ke("eventOrder",{}),Ns("role")].concat(OA())),T9=Zc({factory:el,schema:[Mt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:pn([Oo.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Jd)},buttonBehaviours:pn([Es.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),E9=Zc({factory:el,schema:[Mt("dom")],name:"button",defaults:()=>({buttonBehaviours:pn([Oo.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),_9=K([T9,E9,iu({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Mt("text")],name:"aria-descriptor"}),Uu({schema:[Gp()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),Sx()]),A9=(t,s,a,i)=>{const d=D=>{ss.getCurrent(D).each(N=>{Hs.highlightFirst(N),ho.focusIn(N)})},g=D=>{_A(t,xt,D,i,d,na.HighlightMenuAndItem).get(te)},p=D=>(g(D),_.some(!0)),w=D=>{const N=Wn(D,t,"button");return Jd(N),_.some(!0)},T={...lr([zr((D,N)=>{rr(D,t,"aria-descriptor").each(W=>{const le=Yn("aria");To(W.element,"id",le),To(D.element,"aria-describedby",le)})})]),...BS(_.some(g))},A={repositionMenus:D=>{Es.isOn(D)&&CM(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:A,eventOrder:{...t.eventOrder,[dl()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:gc(t.splitDropdownBehaviours,[oa.config({others:{sandbox:D=>{const N=Wn(D,t,"arrow");return AA(t,D,{onOpen:()=>{Es.on(N),Es.on(D)},onClose:()=>{Es.off(N),Es.off(D)}})}}}),ho.config({mode:"special",onSpace:w,onEnter:w,onDown:p}),Oo.config({}),Es.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},Mk=jc({name:"SplitDropdown",configFields:k9(),partFields:_9(),factory:A9,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),b4=t=>({isEnabled:()=>!Eo.isDisabled(t),setEnabled:s=>Eo.set(t,!s)}),O9=t=>({setActive:s=>{Es.set(t,s)},isActive:()=>Es.isOn(t),isEnabled:()=>!Eo.isDisabled(t),setEnabled:s=>Eo.set(t,!s)}),YB=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),v4=Yn("focus-button"),Nk=(t,s,a,i,d,g)=>({dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:YB(a,g)},components:Ib([t.map(p=>Qw(p,g.icons)),s.map(p=>Gx(p,"tox-tbtn",g))]),eventOrder:{[Hc()]:["focusing","alloy.base.behaviour","common-button-display-events"]},buttonBehaviours:pn([Hl.toolbarButton(g.isDisabled),Sa(),fs("common-button-display-events",[Zt(Hc(),(p,w)=>{w.event.prevent(),Vs(p,v4)})])].concat(i.map(p=>Wl.config({channel:p,initialData:{icon:t,text:s},renderComponents:(w,T)=>Ib([w.icon.map(A=>Qw(A,g.icons)),w.text.map(A=>Gx(A,"tox-tbtn",g))])})).toArray()).concat(d.getOr([])))}),D9=(t,s,a,i)=>{const d=s.shared;return bp.sketch({lazySink:d.getSink,fetch:()=>li.nu(g=>{g(Ve(a(t.items),Ek))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Nk(t.icon,t.text,t.tooltip,_.none(),_.none(),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},XB=(t,s,a)=>{const i=V(te),d=Nk(t.icon,t.text,t.tooltip,_.none(),_.none(),a);return el.sketch({dom:d.dom,components:d.components,eventOrder:r3,buttonBehaviours:pn([fs("toolbar-button-events",[EN({onAction:t.onAction,getApi:s.getApi}),Md(s,i),Mw(s,i)]),Hl.toolbarButton(()=>!t.enabled||a.isDisabled()),Sa()].concat(s.toolbarButtonBehaviours))})},R9=(t,s)=>JB(t,s,[]),JB=(t,s,a)=>XB(t,{toolbarButtonBehaviours:a.length>0?[fs("toolbarButtonWith",a)]:[],getApi:b4,onSetup:t.onSetup},s),M9=(t,s)=>QB(t,s,[]),QB=(t,s,a)=>XB(t,{toolbarButtonBehaviours:[zo.config({}),Es.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[fs("toolbarToggleButtonWith",a)]:[]),getApi:O9,onSetup:t.onSetup},s),$k=(t,s,a)=>i=>li.nu(d=>s.fetch(d)).map(d=>_.from(DA(pr(SA(Yn("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,wm.CLOSE_ON_EXECUTE,s.select.getOr(Me),a),{movement:vx(s.columns,s.presets),menuBehaviours:Fb.unnamedEvents(s.columns!=="auto"?[]:[zr((g,p)=>{j_(g,4,tR(s.presets)).each(({numRows:w,numColumns:T})=>{ho.setGridSize(g,w,T)})})])})))),N9=(t,s)=>{const a=Yn("channel-update-split-dropdown-display"),i=p=>({isEnabled:()=>!Eo.isDisabled(p),setEnabled:w=>Eo.set(p,!w),setIconFill:(w,T)=>{la(p.element,'svg path[id="'+w+'"], rect[id="'+w+'"]').each(A=>{To(A,"fill",T)})},setActive:w=>{To(p.element,"aria-pressed",w),la(p.element,"span").each(T=>{p.getSystem().getByDom(T).each(A=>Es.set(A,w))})},isActive:()=>la(p.element,"span").exists(w=>p.getSystem().getByDom(w).exists(Es.isOn))}),d=V(te),g={getApi:i,onSetup:t.onSetup};return Mk.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...YB(t.tooltip,s.providers)}},onExecute:p=>{t.onAction(i(p))},onItemExecute:(p,w,T)=>{},splitDropdownBehaviours:pn([Hl.splitButton(s.providers.isDisabled),Sa(),fs("split-dropdown-events",[Zt(v4,Oo.focus),Md(g,d),Mw(g,d)]),u0.config({})]),eventOrder:{[bd()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:$k(i,t,s.providers),parts:{menu:Xv(!1,t.columns,t.presets)},components:[Mk.parts.button(Nk(t.icon,t.text,_.none(),_.some(a),_.some([Es.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),Mk.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:gw("chevron-down",s.providers.icons)},buttonBehaviours:pn([Hl.splitButton(s.providers.isDisabled),Sa(),v_()])}),Mk.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},Bk=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],vp=(t,s)=>(a,i,d)=>{const g=t(a).mapError(p=>tu(p)).getOrDie();return s(g,i,d)},y4={button:vp(bR,(t,s)=>R9(t,s.shared.providers)),togglebutton:vp(W_,(t,s)=>M9(t,s.shared.providers)),menubutton:vp(K$,(t,s)=>v3(t,"tox-tbtn",s,_.none())),splitbutton:vp(q7,(t,s)=>N9(t,s.shared)),grouptoolbarbutton:vp(W7,(t,s,a)=>{const i=a.ui.registry.getAll().buttons,d=p=>gC(a,{buttons:i,toolbar:p,allowToolbarGroups:!1},s,_.none()),g={[vy]:s.shared.header.isPositionedAtTop()?um.TopToBottom:um.BottomToTop};switch(Gv(a)){case qu.floating:return D9(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},$9=(t,s,a)=>Jt(y4,t.type).fold(()=>(console.error("skipping button defined by",t),_.none()),i=>_.some(i(t,s,a))),eP={styles:qB,fontsize:jB,fontfamily:WB,blocks:zB,align:c9},B9=t=>{const s=Ve(Bk,a=>{const i=xe(a.items,d=>Kn(t,d)||Kn(eP,d));return{name:a.name,items:i}});return xe(s,a=>a.items.length>0)},P9=t=>{const s=t.split("|");return Ve(s,a=>({items:a.trim().split(" ")}))},F9=t=>Ee(t,s=>Kn(s,"name")&&Kn(s,"items")),I9=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?B9(a):Tt(s)?P9(s):F9(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Pk=(t,s,a,i,d,g)=>Jt(s,a.toLowerCase()).orThunk(()=>g.bind(p=>ao(p,w=>Jt(s,w+a.toLowerCase())))).fold(()=>Jt(eP,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),_.none()):$9(p,d,t)),gC=(t,s,a,i)=>{const d=I9(s),g=Ve(d,p=>{const w=Y(p.items,T=>T.trim().length===0?[]:Pk(t,s.buttons,T,s.allowToolbarGroups,a,i).toArray());return{title:_.from(t.translate(p.name)),items:w}});return xe(g,p=>p.items.length>0)},w4=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Ee(g,Tt)){const w=g.map(T=>{const A={toolbar:T,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return gC(t,A,i,_.none())});dr.setToolbars(d,w)}else dr.setToolbar(d,gC(t,a,i,_.none()))},C4=Ic(),tP=C4.os.isiOS()&&C4.os.version.major<=12,L9=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=V(Yo(d.innerWidth,d.innerHeight)),w=V(Yo(g.offsetWidth,g.offsetHeight)),T=()=>{const U=p.get();(U.left!==d.innerWidth||U.top!==d.innerHeight)&&(p.set(Yo(d.innerWidth,d.innerHeight)),aA(t))},A=()=>{const U=t.getDoc().documentElement,W=w.get();(W.left!==U.offsetWidth||W.top!==U.offsetHeight)&&(w.set(Yo(U.offsetWidth,U.offsetHeight)),aA(t))},D=U=>{tM(t,U)};i.bind(d,"resize",T),i.bind(d,"scroll",D);const N=gy(Wt.fromDom(t.getBody()),"load",A);t.on("hide",()=>{R(a,U=>{zn(U.element,"display","none")})}),t.on("show",()=>{R(a,U=>{Po(U.element,"display")})}),t.on("NodeChange",A),t.on("remove",()=>{N.unbind(),i.unbind(d,"resize",T),i.unbind(d,"scroll",D),d=null})},nP=(t,s)=>{cu(t,s.dialogUi.mothership)};var H9=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=s,w=V(0),T=g.outerContainer;BB(t);const A=Wt.fromDom(d.targetNode),D=Er(Ko(A));$y(A,g.mothership),nP(D,s),t.on("PostRender",()=>{dr.setSidebar(T,a.sidebar,jS(t)),w4(t,s,a,i),w.set(t.getWin().innerWidth),dr.setMenubar(T,RB(t,a)),dr.setViews(T,a.views),L9(t,s)});const N=dr.getSocket(T).getOrDie("Could not find expected socket element");if(tP){Ir(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const pe=m3(()=>{t.dispatch("ScrollContent")},20),st=ai(N.element,"scroll",pe.throttle);t.on("remove",st.unbind)}G_(t,s),t.addCommand("ToggleSidebar",(pe,st)=>{dr.toggleSidebar(T,st),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var pe;return(pe=dr.whichSidebar(T))!==null&&pe!==void 0?pe:""}),t.addCommand("ToggleView",(pe,st)=>{if(dr.toggleView(T,st)){const $e=T.element;g.mothership.broadcastOn([Ed()],{target:$e}),R(p,at=>{at.broadcastOn([Ed()],{target:$e})}),Nn(dr.whichView(T))&&(t.focus(),t.nodeChanged())}}),t.addQueryValueHandler("ToggleView",()=>{var pe;return(pe=dr.whichView(T))!==null&&pe!==void 0?pe:""});const U=Gv(t),W=()=>{dr.refreshToolbar(s.mainUi.outerContainer)};(U===qu.sliding||U===qu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const pe=t.getWin().innerWidth;pe!==w.get()&&(W(),w.set(pe))});const le={setEnabled:pe=>{mx(s,!pe)},isEnabled:()=>!Eo.isDisabled(T)};return{iframeContainer:N.element.dom,editorContainer:T.element.dom,api:le}}});const S4=t=>/^[0-9\.]+(|px)$/i.test(""+t)?_.some(parseInt(""+t,10)):_.none(),x4=t=>et(t)?t+"px":t,Fk=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},z9=t=>{const s=HS(t),a=vw(t),i=S_(t);return S4(s).map(d=>Fk(d,a,i))},V9=t=>z9(t).getOr(HS(t)),k4=t=>{const s=zS(t),a=C_(t),i=VS(t);return S4(s).map(d=>Fk(d,a,i))},U9=t=>k4(t).getOr(zS(t)),{ToolbarLocation:T4,ToolbarMode:oP}=$5,W9=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=a,w=hw.DOM,T=xw(t),A=Tw(t),D=VS(t).or(k4(t)),N=i.shared.header,U=N.isPositionedAtTop,W=Gv(t),le=W===oP.sliding||W===oP.floating,pe=V(!1),st=()=>pe.get()&&!t.removed,$e=ws=>le?ws.fold(K(0),io=>io.components().length>1?ft(io.components()[1].element):0):0,at=ws=>{switch(k_(t)){case T4.auto:const io=dr.getToolbar(g.outerContainer),Jo=$e(io),$s=ft(ws.element)-Jo,hs=os(s);if(hs.y>$s)return"top";{const Fn=fi(s),Bo=Math.max(Fn.dom.scrollHeight,ft(Fn));return hs.bottom<Bo-$s||Ka().bottom<hs.bottom-$s?"bottom":"top"}case T4.bottom:return"bottom";case T4.top:default:return"top"}},Sn=ws=>{d.on(io=>{Si.setModes(io,[ws]),N.setDockingMode(ws);const Jo=U()?um.TopToBottom:um.BottomToTop;To(io.element,vy,Jo)})},dt=()=>{d.on(ws=>{const io=D.getOrThunk(()=>{const Jo=S4(Pt(Qr(),"margin-left")).getOr(0);return hr(Qr())-Ds(s).left+Jo});zn(ws.element,"max-width",io+"px")})},An=()=>{d.on(ws=>{const io=dr.getToolbar(g.outerContainer),Jo=$e(io),$s=os(s),hs=U()?Math.max($s.y-ft(ws.element)+Jo,0):$s.bottom;Ir(g.outerContainer.element,{position:"absolute",top:Math.round(hs)+"px",left:Math.round($s.x)+"px"})})},Gn=()=>{R(p,ws=>{ws.broadcastOn([wf()],{})})},Ln=(ws=!1)=>{if(st()){if(T||dt(),le&&dr.refreshToolbar(g.outerContainer),T||An(),A){const io=ws?Si.reset:Si.refresh;d.on(io)}Gn()}},vo=(ws=!0)=>{T||!A||!st()||d.on(io=>{const Jo=N.getDockingMode(),$s=at(io);$s!==Jo&&(Sn($s),ws&&Ln(!0))})};return{isVisible:st,isPositionedAtTop:U,show:()=>{pe.set(!0),zn(g.outerContainer.element,"display","flex"),w.addClass(t.getBody(),"mce-edit-focus"),R(p,ws=>{Po(ws.element,"display")}),vo(!1),Ln()},hide:()=>{pe.set(!1),zn(g.outerContainer.element,"display","none"),w.removeClass(t.getBody(),"mce-edit-focus"),R(p,ws=>{zn(ws.element,"display","none")})},update:Ln,updateMode:vo,repositionPopups:Gn}},sP=(t,s)=>{const a=os(t);return{pos:s?a.y:a.bottom,bounds:a}},x0=(t,s,a,i)=>{const d=V(sP(s,a.isPositionedAtTop())),g=w=>{const{pos:T,bounds:A}=sP(s,a.isPositionedAtTop()),{pos:D,bounds:N}=d.get(),U=A.height!==N.height||A.width!==N.width;d.set({pos:T,bounds:A}),U&&aA(t,w),a.isVisible()&&(D!==T?a.update(!0):U&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(!0)),t.on("NodeChange keydown",w=>{requestAnimationFrame(()=>g(w))}),t.on("ScrollWindow",()=>a.updateMode());const p=pg();p.set(gy(Wt.fromDom(t.getBody()),"load",w=>g(w.raw))),t.on("remove",()=>{p.clear()})},E4=(t,s)=>{cu(t,s.dialogUi.mothership)};var Z9=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,p=Vr(),w=Wt.fromDom(d.targetNode),T=W9(t,w,s,i,p),A=BD(t);s9(t);const D=()=>{if(p.isSet()){T.show();return}p.set(dr.getHeader(g.outerContainer).getOrDie());const U=kw(t);cu(U,g.mothership),E4(U,s),w4(t,s,a,i),dr.setMenubar(g.outerContainer,RB(t,a)),T.show(),x0(t,w,T,A),t.nodeChanged()};t.on("show",D),t.on("hide",T.hide),A||(t.on("focus",D),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||A)&&D()}),G_(t,s);const N={show:D,hide:T.hide,setEnabled:U=>{mx(s,!U)},isEnabled:()=>!Eo.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:N}}});const rP=()=>{const t=Vr(),s=Vr(),a=Vr();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>[...t.get().map(g=>g.mothership).toArray()],setupDialogUi:g=>{t.set(g)},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(w=>p(w.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},_4="contexttoolbar-show",A4="contexttoolbar-hide",aP=t=>({hide:()=>Vs(t,Np()),getValue:()=>_n.getValue(t)}),cP=(t,s)=>Zt(TN,(a,i)=>{const d=t.get(a),g=aP(d);s.onAction(g,i.event.buttonApi)}),k0=(t,s,a)=>{const{primary:i,...d}=s.original,g=eu(bR({...d,type:"button",onAction:te}));return JB(g,a,[cP(t,s)])},Ik=(t,s,a)=>{const{primary:i,...d}=s.original,g=eu(W_({...d,type:"togglebutton",onAction:te}));return QB(g,a,[cP(t,s)])},O4=t=>t.type==="contextformtogglebutton",iP=(t,s,a)=>O4(s)?Ik(t,s,a):k0(t,s,a),lP=(t,s,a)=>{const i=Ve(s,p=>Cr(iP(t,p,a)));return{asSpecs:()=>Ve(i,p=>p.asSpec()),findPrimary:p=>ao(s,(w,T)=>w.primary?_.from(i[T]).bind(A=>A.getOpt(p)).filter(he(Eo.isDisabled)):_.none())}},D4=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=Cr(Jv.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:pn([ho.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(Jd(p),!0)),onLeft:(g,p)=>(p.cut(),_.none()),onRight:(g,p)=>(p.cut(),_.none())})])})),d=lP(i,t.commands,s);return[{title:_.none(),items:[i.asSpec()]},{title:_.none(),items:d.asSpecs()}]},j9={renderContextForm:(t,s,a)=>_k({type:t,uid:Yn("context-toolbar"),initGroups:D4(s,a),onEscape:_.none,cyclicKeying:!0,providers:a}),buildInitGroups:D4},uP=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,G9=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Fe(Wt.fromDom(t.startContainer),t.startOffset).element;return(Fr(a)?sa(a):_.some(a)).filter(xs).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},R4=t=>{const s=t.selection.getRng(),a=G9(s);if(t.inline){const i=Wi();return to(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=Ar(Wt.fromDom(t.getBody()));return to(i.x+a.left,i.y+a.top,a.width,a.height)}},dP=(t,s)=>s.filter(a=>Gr(a)&&Cs(a)).map(Ar).getOrThunk(()=>R4(t)),Lk=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},mP=(t,s,a,i,d,g)=>{const p=Wt.fromDom(t.getContainer()),w=la(p,".tox-editor-header").getOr(p),T=os(w),A=T.y>=s.bottom,D=i&&!A;if(t.inline&&D)return{y:Math.max(T.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(T.y-g,a.bottom)};const N=d==="line"?os(p):s;return D?{y:Math.max(T.bottom+g,a.y),bottom:Math.min(N.bottom-g,a.bottom)}:{y:Math.max(N.y+g,a.y),bottom:Math.min(T.y-g,a.bottom)}},M4=(t,s,a,i=0)=>{const d=rl(window),g=os(Wt.fromDom(t.getContentAreaContainer())),p=qS(t)||Kv(t)||Sw(t),{x:w,width:T}=Lk(g,d,i);if(t.inline&&!p)return to(w,d.y,T,d.height);{const A=s.header.isPositionedAtTop(),{y:D,bottom:N}=mP(t,g,d,A,a,i);return to(w,D,T,N-D)}},T0=12,fP={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},N4={maxHeightFunction:nb(),maxWidthFunction:Tk()},q9=(t,s)=>{const a=t.selection.getRng(),i=Fe(Wt.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&zs(i.element,s)},K9=(t,s,a)=>{const i=Qs(t,"position");zn(t,"position",s);const d=a(t);return i.each(g=>zn(t,"position",g)),d},hC=t=>t==="node",gP=(t,s,a,i,d)=>{const g=R4(t),p=i.lastElement().exists(w=>zs(a,w));if(q9(t,a))return p?d$:Tm;if(p)return K9(s,i.getMode(),()=>uP(g,os(s),-20)&&!i.isReposition()?GL:d$);{const w=i.getMode()==="fixed"?d.y+Wi().top:d.y,T=ft(s)+T0;return w+T<=g.y?Tm:Jb}},Y9=(t,s,a,i)=>{const d=T=>(A,D,N,U,W)=>{const le=gP(t,U,T,a,W),pe={...A,y:W.y,height:W.height};return{...le(pe,D,N,U,W),alwaysFit:!0}},g=T=>hC(i)?[d(T)]:[];return s?{onLtr:T=>[Ua,Ec,_c,ri,Uc,Ki].concat(g(T)),onRtl:T=>[Ua,_c,Ec,Uc,ri,Ki].concat(g(T))}:{onLtr:T=>[Ki,Ua,ri,Ec,Uc,_c].concat(g(T)),onRtl:T=>[Ki,Ua,Uc,_c,ri,Ec].concat(g(T))}},X9=(t,s,a,i)=>s==="line"?{bubble:bg(T0,0,fP),layouts:{onLtr:()=>[Y1],onRtl:()=>[X1]},overrides:N4}:{bubble:bg(0,T0,fP,1/T0),layouts:Y9(t,a,i,s),overrides:N4},$4=(t,s)=>{const a=xe(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=_e(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},J9=t=>{if(t.length<=1)return t;{const s=g=>ze(t,p=>p.position===g),a=g=>xe(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),p=Ve(a("selection"),w=>({...w,position:"node"}));return g.concat(p)}else return a(i?"selection":"node");else return a("line")}},Q9=t=>{if(t.length<=1)return t;{const s=i=>se(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>xe(t,d=>d.position===i))}},hP=(t,s,a)=>{const i=$4(t,s);if(i.contextForms.length>0)return _.some({elem:t,toolbars:[i.contextForms[0]]});{const d=$4(t,a);if(d.contextForms.length>0)return _.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=J9(i.contextToolbars.concat(d.contextToolbars));return _.some({elem:t,toolbars:g})}else return _.none()}},pP=(t,s,a)=>t(s)?_.none():ph(s,i=>{if(xs(i)){const{contextToolbars:d,contextForms:g}=$4(i,a.inNodeScope),p=g.length>0?g:Q9(d);return p.length>0?_.some({elem:i,toolbars:p}):_.none()}else return _.none()},t),ez=(t,s)=>{const a=Wt.fromDom(s.getBody()),i=p=>zs(p,a),d=p=>!i(p)&&!mi(a,p),g=Wt.fromDom(s.selection.getNode());return d(g)?_.none():hP(g,t.inNodeScope,t.inEditorScope).orThunk(()=>pP(i,g,t))},tz=(t,s)=>{const a={},i=[],d=[],g={},p={},w=(D,N)=>{const U=eu(sI(N));a[D]=U,U.launch.map(W=>{g["form:"+D]={...N.launch,type:W.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(U)}}}),U.scope==="editor"?d.push(U):i.push(U),p[D]=U},T=(D,N)=>{Rw(N).each(U=>{N.scope==="editor"?d.push(U):i.push(U),p[D]=U})},A=Re(t);return R(A,D=>{const N=t[D];N.type==="contextform"?w(D,N):N.type==="contexttoolbar"&&T(D,N)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},B4=Yn("forward-slide"),bP=Yn("backward-slide"),P4=Yn("change-slide-event"),F4="tox-pop--resizing",nz=t=>{const s=V([]);return Yr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Yr.getContent(a).each(i=>{Po(i.element,"visibility")}),ia(a.element,F4),Po(a.element,"width")},inlineBehaviours:pn([fs("context-toolbar-events",[Qa(Kd(),(a,i)=>{i.event.raw.propertyName==="width"&&(ia(a.element,F4),Po(a.element,"width"))}),Zt(P4,(a,i)=>{const d=a.element;Po(d,"width");const g=hr(d);Yr.setContent(a,i.event.contents),wa(d,F4);const p=hr(d);zn(d,"width",g+"px"),Yr.getContent(a).each(w=>{i.event.focus.bind(T=>(lm(T),$l(d))).orThunk(()=>(ho.focusIn(w),Yi(Ko(d))))}),setTimeout(()=>{zn(a.element,"width",p+"px")},0)}),Zt(B4,(a,i)=>{Yr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Yi(Ko(a.element))}]))}),yo(a,P4,{contents:i.event.forwardContents,focus:_.none()})}),Zt(bP,(a,i)=>{Qn(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),yo(a,P4,{contents:pl(d.bar),focus:d.focus})})})]),ho.config({mode:"special",onEscape:a=>Qn(s.get()).fold(()=>t.onEscape(),i=>(Vs(a,bP),_.some(!0)))})]),lazySink:()=>Fo.value(t.sink)})},I4="tox-pop--transition",L4=(t,s,a,i)=>{const d=i.backstage,g=d.shared,p=Ic().deviceType.isTouch,w=Vr(),T=Vr(),A=Vr(),D=yi(nz({sink:a,onEscape:()=>(t.focus(),_.some(!0))})),N=()=>{const wo=A.get().getOr("node"),Zo=hC(wo)?1:0;return M4(t,g,wo,Zo)},U=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),W=wo=>Tr(ys(wo,w.get(),zs),!0),le=()=>{if(U()){const wo=N(),Zo=Tr(A.get(),"node")?dP(t,w.get()):R4(t);return wo.height<=0||!uP(Zo,wo,.01)}else return!0},pe=()=>{w.clear(),T.clear(),A.clear(),Yr.hide(D)},st=()=>{if(Yr.isOpen(D)){const wo=D.element;Po(wo,"display"),le()?zn(wo,"display","none"):(T.set(0),Yr.reposition(D))}},$e=wo=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[wo],behaviours:pn([ho.config({mode:"acyclic"}),fs("pop-dialog-wrap-events",[zr(Zo=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>ho.focusIn(Zo))}),Rl(Zo=>{t.shortcuts.remove("ctrl+F9")})])])}),at=Lr(()=>tz(s,wo=>{const Zo=An([wo]);yo(D,B4,{forwardContents:$e(Zo)})})),Sn=(wo,Zo)=>gC(t,{buttons:wo,toolbar:Zo.items,allowToolbarGroups:!1},i.backstage,_.some(["form:"])),dt=(wo,Zo)=>j9.buildInitGroups(wo,Zo),An=wo=>{const{buttons:Zo}=t.ui.registry.getAll(),ws=at(),io={...Zo,...ws.formNavigators},Jo=Gv(t)===qu.scrolling?qu.scrolling:qu.default,$s=z(Ve(wo,hs=>hs.type==="contexttoolbar"?Sn(io,hs):dt(hs,g.providers)));return _k({type:Jo,uid:Yn("context-toolbar"),initGroups:$s,onEscape:_.none,cyclicKeying:!0,providers:g.providers})},Gn=(wo,Zo)=>{const ws=wo==="node"?g.anchors.node(Zo):g.anchors.cursor(),io=X9(t,wo,p(),{lastElement:w.get,isReposition:()=>Tr(T.get(),0),getMode:()=>ci.getMode(a)});return pr(ws,io)},Ln=(wo,Zo)=>{if(vo.cancel(),!U())return;const ws=An(wo),io=wo[0].position,Jo=Gn(io,Zo);A.set(io),T.set(1);const $s=D.element;Po($s,"display"),W(Zo)||(ia($s,I4),ci.reset(a,D)),Yr.showWithinBounds(D,$e(ws),{anchor:Jo,transition:{classes:[I4],mode:"placement"}},()=>_.some(N())),Zo.fold(w.clear,w.set),le()&&zn($s,"display","none")},vo=HN(()=>{if(!(!t.hasFocus()||t.removed))if(Gi(D.element,I4))vo.throttle();else{const wo=at();ez(wo,t).fold(pe,Zo=>{Ln(Zo.toolbars,_.some(Zo.elem))})}},17);t.on("init",()=>{t.on("remove",pe),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",st),t.on("click keyup focus SetContent",vo.throttle),t.on(A4,pe),t.on(_4,wo=>{const Zo=at();Jt(Zo.lookupTable,wo.toolbarKey).each(ws=>{Ln([ws],mr(wo.target!==t,wo.target)),Yr.getContent(D).each(ho.focusIn)})}),t.on("focusout",wo=>{Wv.setEditorTimeout(t,()=>{$l(a.element).isNone()&&$l(D.element).isNone()&&pe()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&pe()}),t.on("AfterProgressState",wo=>{wo.state?pe():t.hasFocus()&&vo.throttle()}),t.on("NodeChange",wo=>{$l(D.element).fold(vo.throttle,te)})})},oz=t=>{R([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:ed(t,a.cmd),onSetup:Dk(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:ed(t,"JustifyNone")})},sz={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},H4=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=w=>`(?:${w})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),vP=(t,s)=>ze(s,a=>ze(sz[a],i=>t===i)),yP=(t,s)=>_.from(H4.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return vP(g,s)?_.some({value:d,unit:g}):_.none()}),rz=(t,s)=>yP(t,s).map(({value:a,unit:i})=>a+i),wP=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Vr();return Ve(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:w=>{const T=D=>{D&&(g.on(N=>N.setActive(!1)),g.set(w)),w.setActive(D)};T(Tr(d,s.hash(p)));const A=s.watcher(t,p,T);return()=>{g.clear(),A()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},az={name:"lineheight",text:"Line height",icon:"line-height",getOptions:ZD,hash:t=>rz(t,["fixed","relative","empty"]).getOr(t),display:xt,watcher:(t,s,a)=>t.formatter.formatChanged("lineheight",a,!1,{value:s}).unbind,getCurrent:t=>_.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},cz=t=>_.from(x_(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:K(a),hash:i=>ct(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var p;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:i=>{const d=Wt.fromDom(i.selection.getNode());return pd(d,g=>_.some(g).filter(xs).bind(p=>B(p,"lang").map(T=>{const A=B(p,"data-mce-lang").getOrUndefined();return{code:T,customCode:A,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=pg();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),d.clear}})),iz=t=>{wP(t,az),cz(t).each(s=>wP(t,s))},CP=(t,s)=>{i9(t,s),m9(t,s),y9(t,s),l9(t,s),v9(t,s)},lz=t=>dC(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),SP=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:lz(t),onAction:ed(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:ed(t,"indent")})},uz=t=>{SP(t)},xP=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),()=>t.off("PastePlainTextToggle",i)},z4=t=>{const s=V(__(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:xP(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:xP(t,s)})},Hk=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},kP=t=>{kl.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Dk(t,s.name),onAction:Hk(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:Dk(t,a),onAction:Hk(t,a)})}},V4=t=>{kl.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ed(t,s.action)})})},dz=t=>{kl.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:ed(t,s.action),onSetup:Dk(t,s.name)})})},mz=t=>{kP(t),V4(t),dz(t)},fz=t=>{kl.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:ed(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:Hk(t,"code")})},gz=t=>{mz(t),fz(t)},pC=(t,s)=>dC(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),hz=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:pC(t,"hasUndo"),onAction:ed(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:pC(t,"hasRedo"),onAction:ed(t,"redo")})},pz=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:pC(t,"hasUndo"),onAction:ed(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:pC(t,"hasRedo"),onAction:ed(t,"redo")})},bz=t=>{hz(t),pz(t)},vz=t=>dC(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),yz=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:vz(t),onAction:ed(t,"mceToggleVisualAid")})},wz=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ed(t,"mceToggleVisualAid")})},Cz=t=>{wz(t),yz(t)},Sz=(t,s)=>{oz(t),gz(t),CP(t,s),bz(t),VI(t),Cz(t),uz(t),iz(t),z4(t)},TP=t=>Tt(t)?t.split(/[ ,]/):t,EP=t=>s=>s.options.get(t),_P=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Tt(a)||Ee(a,Tt)?{value:TP(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},AP=EP("contextmenu_never_use_native"),xz=EP("contextmenu_avoid_overlap"),kz=t=>yp(t).length===0,yp=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:xe(a,i=>Kn(s,i))},E0=(t,s)=>({type:"makeshift",x:t,y:s}),Tz=(t,s,a)=>E0(t.x+s,t.y+a),OP=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Ez=t=>{if(OP(t)){const s=t.touches[0];return E0(s.pageX,s.pageY)}else return E0(t.pageX,t.pageY)},_z=t=>{if(OP(t)){const s=t.touches[0];return E0(s.clientX,s.clientY)}else return E0(t.clientX,t.clientY)},DP=(t,s)=>{const a=hw.DOM.getPos(t);return Tz(s,a.x,a.y)},Az=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Ez(s):DP(t.getContentAreaContainer(),_z(s)):RP(t),RP=t=>({type:"selection",root:Wt.fromDom(t.selection.getNode())}),Oz=t=>({type:"node",node:_.some(Wt.fromDom(t.selection.getNode())),root:Wt.fromDom(t.getBody())}),MP=(t,s,a)=>{switch(a){case"node":return Oz(t);case"point":return Az(t,s);case"selection":return RP(t)}},Dz=(t,s,a,i,d,g)=>{const p=a(),w=MP(t,s,g);Kb(p,wm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:_.none()}).map(T=>{s.preventDefault(),Yr.showMenuAt(d,{anchor:w},{menu:{markers:Mb("normal")},data:T})})},Rz={onLtr:()=>[Ua,Ec,_c,ri,Uc,Ki,Tm,Jb,nC,rk,tC,eC],onRtl:()=>[Ua,_c,Ec,Uc,ri,Ki,Tm,Jb,tC,eC,nC,rk]},Mz=12,Nz={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},NP=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return gv(t.getWin(),mm.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},$P=t=>{const s=t.selection.getRng(),a=()=>{Wv.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},$z=(t,s,a)=>{const i=MP(t,s,a);return{bubble:bg(0,a==="point"?Mz:0,Nz),layouts:Rz,overrides:{maxWidthFunction:Tk(),maxHeightFunction:nb()},...i}},bC=(t,s,a,i,d,g,p)=>{const w=$z(t,s,g);Kb(a,wm.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:_.none()}).map(T=>{s.preventDefault();const A=p?na.HighlightMenuAndItem:na.HighlightNone;Yr.showMenuWithinBounds(d,{anchor:w},{menu:{markers:Mb("normal"),highlightOnOpen:A},data:T,type:"horizontal"},()=>_.some(M4(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(A4)})},Bz=(t,s,a,i,d,g)=>{const p=Ic(),w=p.os.isiOS(),T=p.os.isMacOS(),A=p.os.isAndroid(),D=p.deviceType.isTouch(),N=()=>!(A||w||T&&D),U=()=>{const W=a();bC(t,s,W,i,d,g,N())};if((T||w)&&g!=="node"){const W=()=>{$P(t),U()};NP(t,s)?W():(t.once("selectionchange",W),t.once("touchend",()=>t.off("selectionchange",W)))}else U()},BP=t=>Tt(t)?t==="|":t.type==="separator",vC={type:"separator"},PP=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Tt(t))return t;switch(t.type){case"separator":return vC;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return Tt(i)?i:Ve(i,PP)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Je(a.onAction)}}},FP=(t,s)=>{if(s.length===0)return t;const i=Qn(t).filter(d=>!BP(d)).fold(()=>[],d=>[vC]);return t.concat(i).concat(s).concat([vC])},Pz=(t,s,a)=>{const i=ke(s,(d,g)=>Jt(t,g.toLowerCase()).map(p=>{const w=p.update(a);if(Tt(w))return FP(d,w.split(" "));if(w.length>0){const T=Ve(w,PP);return FP(d,T)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&BP(i[i.length-1])&&i.pop(),i},Fz=(t,s)=>s.ctrlKey&&!AP(t),Iz=t=>t.type==="longpress"||Kn(t,"touches"),IP=(t,s)=>!Iz(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),LP=(t,s)=>IP(t,s)?t.selection.getStart(!0):s.target,Lz=(t,s)=>{const a=xz(t),i=IP(t,s)?"selection":"point";if(wt(a)){const d=LP(t,s);return Lw(Wt.fromDom(d),a)?"node":i}else return i},Hz=(t,s,a)=>{const d=Ic().deviceType.isTouch,g=yi(Yr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:pn([fs("dismissContextMenu",[Zt(Xd(),(T,A)=>{ms.close(T),t.focus()})])])})),p=()=>Yr.hide(g),w=T=>{if(AP(t)&&T.preventDefault(),Fz(t,T)||kz(t))return;const A=Lz(t,T),D=()=>{const U=LP(t,T),W=t.ui.registry.getAll(),le=yp(t);return Pz(W.contextMenus,le,U)};(d()?Bz:Dz)(t,T,D,a,g,A)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,p),t.on("longpress contextmenu",w)})},U4=ht.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),zk=t=>s=>s.translate(-t.left,-t.top),Vk=t=>s=>s.translate(t.left,t.top),Zg=t=>(s,a)=>ke(t,(i,d)=>d(i),Yo(s,a)),Uk=(t,s,a)=>t.fold(Zg([Vk(a),zk(s)]),Zg([zk(s)]),Zg([])),_0=(t,s,a)=>t.fold(Zg([Vk(a)]),Zg([]),Zg([Vk(s)])),HP=(t,s,a)=>t.fold(Zg([]),Zg([zk(a)]),Zg([Vk(s),zk(a)])),zz=(t,s,a,i,d,g)=>{const p=_0(t,d,g),w=_0(s,d,g);return Math.abs(p.left-w.left)<=a&&Math.abs(p.top-w.top)<=i},Wk=(t,s,a,i,d,g)=>{const p=_0(t,d,g),w=_0(s,d,g),T=Math.abs(p.left-w.left),A=Math.abs(p.top-w.top);return Yo(T,A)},zP=(t,s,a)=>{const i=t.fold((d,g)=>({position:_.some("absolute"),left:_.some(d+"px"),top:_.some(g+"px")}),(d,g)=>({position:_.some("absolute"),left:_.some(d-a.left+"px"),top:_.some(g-a.top+"px")}),(d,g)=>({position:_.some("fixed"),left:_.some(d+"px"),top:_.some(g+"px")}));return{right:_.none(),bottom:_.none(),...i}},Vz=(t,s,a)=>t.fold((i,d)=>Zk(i+s,d+a),(i,d)=>wp(i+s,d+a),(i,d)=>o1(i+s,d+a)),W4=(t,s,a,i)=>{const d=(g,p)=>(w,T)=>{const A=g(s,a,i);return p(w.getOr(A.left),T.getOr(A.top))};return t.fold(d(HP,Zk),d(_0,wp),d(Uk,o1))},Zk=U4.offset,wp=U4.absolute,o1=U4.fixed,Z4=(t,s)=>{const a=sr(t,s);return ct(a)?NaN:parseInt(a,10)},Uz=(t,s)=>{const a=t.element,i=Z4(a,s.leftAttr),d=Z4(a,s.topAttr);return isNaN(i)||isNaN(d)?_.none():_.some(Yo(i,d))},Wz=(t,s,a)=>{const i=t.element;To(i,s.leftAttr,a.left+"px"),To(i,s.topAttr,a.top+"px")},Zz=(t,s)=>{const a=t.element;de(a,s.leftAttr),de(a,s.topAttr)},jz=(t,s,a,i)=>Uz(t,s).fold(()=>a,d=>o1(d.left+i.left,d.top+i.top)),Gz=(t,s,a,i,d,g)=>{const p=jz(t,s,a,i),w=s.mustSnap?qz(t,s,p,d,g):Kz(t,s,p,d,g),T=Uk(p,d,g);return Wz(t,s,T),w.fold(()=>({coord:o1(T.left,T.top),extra:_.none()}),A=>({coord:A.output,extra:A.extra}))},j4=(t,s)=>{Zz(t,s)},G4=(t,s,a,i)=>ao(t,d=>{const g=d.sensor;return zz(s,g,d.range.left,d.range.top,a,i)?_.some({output:W4(d.output,s,a,i),extra:d.extra}):_.none()}),qz=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return G4(g,a,i,d).orThunk(()=>ke(g,(T,A)=>{const D=A.sensor,N=Wk(a,D,A.range.left,A.range.top,i,d);return T.deltas.fold(()=>({deltas:_.some(N),snap:_.some(A)}),U=>{const W=(N.left+N.top)/2,le=(U.left+U.top)/2;return W<=le?{deltas:_.some(N),snap:_.some(A)}:T})},{deltas:_.none(),snap:_.none()}).snap.map(T=>({output:W4(T.output,a,i,d),extra:T.extra})))},Kz=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return G4(g,a,i,d)},Yz=(t,s,a)=>({coord:W4(t.output,t.output,s,a),extra:t.extra});var Xz=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ga(t.element),p=Wi(g),w=F3(d),T=Yz(i,p,w),A=zP(T.coord,p,w);gr(d,A)}}});const q4="data-initial-z-index",Jz=t=>{sa(t.element).filter(xs).each(s=>{B(s,q4).fold(()=>Po(s,"z-index"),a=>zn(s,"z-index",a)),de(s,q4)})},Qz=t=>{sa(t.element).filter(xs).each(s=>{Qs(s,"z-index").each(a=>{To(s,q4,a)}),zn(s,"z-index",Pt(t.element,"z-index"))})},VP=(t,s)=>{t.getSystem().addToGui(s),Qz(s)},eV=t=>{Jz(t),t.getSystem().removeFromGui(t)},UP=(t,s,a)=>t.getSystem().build(xm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var tV=pi("snaps",[Mt("getSnapPoints"),ds("onSensor"),Mt("leftAttr"),Mt("topAttr"),Ke("lazyViewport",Ka),Ke("mustSnap",!1)]);const K4=[Ke("useFixed",Me),Mt("blockerClass"),Ke("getTarget",xt),Ke("onDrag",te),Ke("repositionTarget",!0),Ke("onDrop",te),Da("getBounds",Ka),tV],nV=t=>cs(Qs(t,"left"),Qs(t,"top"),Qs(t,"position"),(s,a,i)=>(i==="fixed"?o1:Zk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Ds(t);return wp(s.left,s.top)}),oV=(t,s,a,i,d)=>{const g=d.bounds,p=_0(s,a,i),w=bl(p.left,g.x,g.x+g.width-d.width),T=bl(p.top,g.y,g.y+g.height-d.height),A=wp(w,T);return s.fold(()=>{const D=HP(A,a,i);return Zk(D.left,D.top)},K(A),()=>{const D=Uk(A,a,i);return o1(D.left,D.top)})},sV=(t,s,a,i,d,g,p)=>{const w=s.fold(()=>{const T=Vz(a,g.left,g.top),A=Uk(T,i,d);return o1(A.left,A.top)},T=>{const A=Gz(t,T,a,g,i,d);return A.extra.each(D=>{T.onSensor(t,D)}),A.coord});return oV(t,w,i,d,p)},rV=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=ga(t.element),p=Wi(g),w=F3(d),T=nV(d),A=sV(t,s.snaps,T,p,w,i,a),D=zP(A,p,w);gr(d,D)}s.onDrag(t,d,i)},WP=(t,s)=>({bounds:t.getBounds(),height:Vn(s.element),width:or(s.element)}),Y4=(t,s,a,i,d)=>{const g=a.update(i,d),p=a.getStartData().getOrThunk(()=>WP(s,t));g.each(w=>{rV(t,s,p,w)})},ZP=(t,s,a,i)=>{s.each(eV),a.snaps.each(g=>{j4(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},X4=t=>(s,a)=>{const i=d=>{a.setStartData(WP(s,d))};return lr([Zt(E1(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},jP=t=>lr([Zt(Hc(),t.forceDrop),Zt(Op(),t.drop),Zt(Ri(),(s,a)=>{t.move(a.event)}),Zt($u(),t.delayDrop)]);var cV=Object.freeze({__proto__:null,getData:t=>_.from(Yo(t.x,t.y)),getDelta:(t,s)=>Yo(s.left-t.left,s.top-t.top)});const jk=(t,s,a)=>[Zt(Hc(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>ZP(i,_.some(A),t,s),w=xM(p,200),T={drop:p,delayDrop:w.schedule,forceDrop:p,move:N=>{w.cancel(),Y4(i,t,s,cV,N)}},A=UP(i,t.blockerClass,jP(T));(()=>{a(i),VP(i,A)})()})],Gk=[...K4,vr("dragger",{handlers:X4(jk)})],iV=t=>lr([Zt(tr(),t.forceDrop),Zt(Lc(),t.drop),Zt(Dl(),t.drop),Zt(za(),(s,a)=>{t.move(a.event)})]),lV=t=>{const s=t[0];return _.some(Yo(s.clientX,s.clientY))};var GP=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?lV(a):_.none()},getDelta:(t,s)=>Yo(s.left-t.left,s.top-t.top)});const Cp=(t,s,a)=>{const i=Vr(),d=g=>{ZP(g,i.get(),t,s),i.clear()};return[Zt(tr(),(g,p)=>{p.stop();const w=()=>d(g),T={drop:w,delayDrop:te,forceDrop:w,move:N=>{Y4(g,t,s,GP,N)}},A=UP(g,t.blockerClass,iV(T));i.set(A),(()=>{a(g),VP(g,A)})()}),Zt(za(),(g,p)=>{p.stop(),Y4(g,t,s,GP,p.event)}),Zt(Lc(),(g,p)=>{p.stop(),d(g)}),Zt(Dl(),d)]},qP=[...K4,vr("dragger",{handlers:X4(Cp)})],uV=(t,s,a)=>[...jk(t,s,a),...Cp(t,s,a)],dV=[...K4,vr("dragger",{handlers:X4(uV)})];var mV=Object.freeze({__proto__:null,mouse:Gk,touch:qP,mouseOrTouch:dV}),fV=Object.freeze({__proto__:null,init:()=>{let t=_.none(),s=_.none();const a=()=>{t=_.none(),s=_.none()},i=(T,A)=>{const D=t.map(N=>T.getDelta(N,A));return t=_.some(A),D},d=(T,A)=>T.getData(A).bind(D=>i(T,D)),g=T=>{s=_.some(T)},p=()=>s,w=K({});return Mi({readState:w,reset:a,update:d,getStartData:p,setStartData:g})}});const jg=ay({branchKey:"mode",branches:mV,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:_.from(t.extra)})},state:fV,apis:Xz}),s1=40,O0=s1/2,yC=(t,s,a,i,d,g)=>t.fold(()=>jg.snap({sensor:wp(a-O0,i-O0),range:Yo(d,g),output:wp(_.some(a),_.some(i)),extra:{td:s}}),p=>{const w=a-O0,T=i-O0,A=s1,D=s1,N=p.element.dom.getBoundingClientRect();return jg.snap({sensor:wp(w,T),range:Yo(A,D),output:wp(_.some(a-N.width/2),_.some(i-N.height/2)),extra:{td:s}})}),Sp=(t,s,a)=>{const i=(d,g)=>d.exists(p=>zs(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},wC=t=>Cr(el.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:pn([jg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),u0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),gV=(t,s)=>{const a=V([]),i=V([]),d=V(!1),g=Vr(),p=Vr(),w=Ln=>{const vo=Ar(Ln);return yC(W.getOpt(s),Ln,vo.x,vo.y,vo.width,vo.height)},T=()=>Ve(a.get(),Ln=>w(Ln)),A=Ln=>{const vo=Ar(Ln);return yC(le.getOpt(s),Ln,vo.right,vo.bottom,vo.width,vo.height)},D=()=>Ve(i.get(),Ln=>A(Ln)),N=Sp(T,g,Ln=>{p.get().each(vo=>{t.dispatch("TableSelectorChange",{start:Ln,finish:vo})})}),U=Sp(D,p,Ln=>{g.get().each(vo=>{t.dispatch("TableSelectorChange",{start:vo,finish:Ln})})}),W=wC(N),le=wC(U),pe=yi(W.asSpec()),st=yi(le.asSpec()),$e=(Ln,vo,wo,Zo)=>{const ws=vo.dom.getBoundingClientRect();Po(Ln.element,"display");const io=Pc(Wt.fromDom(t.getBody())).dom.innerHeight,Jo=wo(ws),$s=Zo(ws,io);(Jo||$s)&&zn(Ln.element,"display","none")},at=(Ln,vo,wo,Zo)=>{const ws=wo(vo);jg.snapTo(Ln,ws),$e(Ln,vo,$s=>$s[Zo]<0,($s,hs)=>$s[Zo]>hs)},Sn=Ln=>at(pe,Ln,w,"top"),dt=()=>g.get().each(Sn),An=Ln=>at(st,Ln,A,"bottom"),Gn=()=>p.get().each(An);Ic().deviceType.isTouch()&&(t.on("TableSelectionChange",Ln=>{d.get()||(Oc(s,pe),Oc(s,st),d.set(!0)),g.set(Ln.start),p.set(Ln.finish),Ln.otherCells.each(vo=>{a.set(vo.upOrLeftCells),i.set(vo.downOrRightCells),Sn(Ln.start),An(Ln.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{dt(),Gn()}),t.on("TableSelectionClear",()=>{d.get()&&(Dc(pe),Dc(st),d.set(!1)),g.clear(),p.clear()}))};var KP=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const YP=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",XP=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"âº",g=(A,D,N)=>el.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":N,"aria-level":N+1}},components:[Va(A)],action:U=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:pn([Hl.button(a.isDisabled),Sa()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Va(` ${d} `)]}),w=A=>ke(A,(D,N,U)=>{const W=g(N.name,N.element,U);return U===0?D.concat([W]):D.concat([p(),W])},[]),T=A=>{const D=[];let N=A.length;for(;N-- >0;){const U=A[N];if(U.nodeType===1&&!YP(U)){const W=PI(t,U);if(W.isDefaultPrevented()||D.push({name:W.name,element:U}),W.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:pn([ho.config({mode:"flow",selector:"div[role=button]"}),Eo.config({disabled:a.isDisabled}),Sa(),xa.config({}),zo.config({}),fs("elementPathEvents",[zr((A,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>ho.focusIn(A)),t.on("NodeChange",N=>{const U=T(N.parents),W=U.length>0?w(U):[];zo.set(A,W)})})])]),components:[]}};var r1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(r1||(r1={}));const hV=(t,s,a,i,d)=>{const g={height:Fk(i+s.top,vw(t),S_(t))};return a===r1.Both&&(g.width=Fk(d+s.left,C_(t),VS(t))),g},JP=(t,s,a)=>{const i=Wt.fromDom(t.getContainer()),d=hV(t,s,a,ft(i),hr(i));Lt(d,(g,p)=>{et(g)&&zn(i,p,x4(g))}),NI(t)},QP=t=>{const s=E_(t);return s===!1?r1.None:s==="both"?r1.Both:r1.Vertical},CC=(t,s,a,i)=>{const g=Yo(a*20,i*20);return JP(t,g,s),_.some(!0)},J4=(t,s)=>{const a=QP(t);return a===r1.None?_.none():_.some(ym("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[jg.config({mode:"mouse",repositionTarget:!1,onDrag:(i,d,g)=>JP(t,g,a),blockerClass:"tox-blocker"}),ho.config({mode:"special",onLeft:()=>CC(t,a,-1,0),onRight:()=>CC(t,a,1,0),onUp:()=>CC(t,a,0,-1),onDown:()=>CC(t,a,0,1)}),xa.config({}),Oo.config({})]},s.icons))},pV=(t,s)=>{const a=(i,d,g)=>zo.set(i,[Va(s.translate(["{0} "+g,d[g]]))]);return el.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:pn([Hl.button(s.isDisabled),Sa(),xa.config({}),zo.config({}),_n.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),fs("wordcount-events",[ml(i=>{const d=_n.getValue(i),g=d.mode==="words"?"characters":"words";_n.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),zr(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=_n.getValue(i);_n.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[dl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},bV=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Rd.translate(["Powered by {0}","Tiny"])},innerHtml:KP.trim()},behaviours:pn([Oo.config({})])}]}),i=()=>{const g=[];return T_(t)&&g.push(XP(t,{},s)),t.hasPlugin("wordcount")&&g.push(pV(t,s)),UD(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=i(),p=J4(t,s);return g.concat(p.toArray())})()}},eF=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),tF=t=>{const s=t.inline,a=s?Z9:H9,i=Tw(t)?V7:_7,d=rP(),g=Vr(),p=Vr(),D=Ic().deviceType.isTouch()?["tox-platform-touch"]:[],N=KS(t),U=Gv(t),W=Cr({dom:{tag:"div",classes:["tox-anchorbar"]}}),le=()=>d.mainUi.get().map(hs=>hs.outerContainer).bind(dr.getHeader),pe=()=>Fo.fromOption(d.dialogUi.get().map(hs=>hs.sink),"UI has not been rendered"),st=()=>Fo.fromOption(d.popupUi.get().map(hs=>hs.sink),"(popup) UI has not been rendered"),$e=d.lazyGetInOuterOrDie("anchor bar",W.getOpt),at=d.lazyGetInOuterOrDie("toolbar",dr.getToolbar),Sn=d.lazyGetInOuterOrDie("throbber",dr.getThrobber),dt=ZU({popup:st,dialog:pe},t,$e),An=()=>{const hs={attributes:{[vy]:N?um.BottomToTop:um.TopToBottom}},gn=dr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:dt.popup,onEscape:()=>{t.focus()}}),Fn=dr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:dt.popup.shared.getSink,providers:dt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:RC=>{FI(t,RC)},type:U,lazyToolbar:at,lazyHeader:()=>le().getOrDie("Could not find header element"),...hs}),Bo=dr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:dt.popup.shared.providers,onEscape:()=>{t.focus()},type:U}),es=Sw(t),js=Kv(t),As=qS(t),qc=WD(t),Rr=Gn(),Xg=es||js||As,Ga=()=>es?[Bo]:js?[Fn]:[],u1=qc?[Rr,gn]:[gn];return dr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Xg?[]:["tox-editor-header--empty"]),...hs},components:z([As?u1:[],Ga(),xw(t)?[]:[W.asSpec()]]),sticky:Tw(t),editor:t,sharedBackstage:dt.popup.shared})},Gn=()=>dr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ln=()=>{const hs=dr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),gn=dr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[hs,gn]}},vo=()=>{const hs=kw(t),gn=zs(Qr(),hs)&&Pt(hs,"display")==="grid",Fn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(D),attributes:{...Rd.isRtl()?{dir:"rtl"}:{}}},behaviours:pn([ci.config({useFixed:()=>i.isDocked(le)})])},Bo={dom:{styles:{width:document.body.clientWidth+"px"}},events:lr([Zt($p(),As=>{zn(As.element,"width",document.body.clientWidth+"px")})])},es=yi(pr(Fn,gn?Bo:{})),js=OM(es);return p.set(js),{sink:es,mothership:js}},wo=xt,Zo=()=>{const hs=An(),gn=Ln(),Fn=dr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:dt.popup}),Bo=dr.parts.viewWrapper({backstage:dt.popup}),es=VD(t)&&!s?_.some(bV(t,dt.popup.shared.providers)):_.none(),js=z([N?[]:[hs],s?[]:[gn],N?[hs]:[]]),As=dr.parts.editorContainer({components:z([js,s?[]:es.toArray()])}),qc=A_(t),Rr={role:"application",...Rd.isRtl()?{dir:"rtl"}:{},...qc?{"aria-hidden":"true"}:{}},Xg=yi(dr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(s?["tox-tinymce-inline"]:[]).concat(N?["tox-tinymce--toolbar-bottom"]:[]).concat(D),styles:{visibility:"hidden",...qc?{opacity:"0",border:"0"}:{}},attributes:Rr},components:[As,...s?[]:[Bo],Fn],behaviours:pn([Sa(),Eo.config({disableClass:"tox-tinymce--disabled"}),ho.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Ga=OM(Xg);return g.set(Ga),{mothership:Ga,outerContainer:Xg}},ws=hs=>{const gn=x4(V9(t)),Fn=x4(U9(t));return t.inline||(nl("div","width",Fn)&&zn(hs.element,"width",Fn),nl("div","height",gn)?zn(hs.element,"height",gn):zn(hs.element,"height","400px")),gn},io=hs=>{t.addShortcut("alt+F9","focus menubar",()=>{dr.focusMenubar(hs)}),t.addShortcut("alt+F10","focus toolbar",()=>{dr.focusToolbar(hs)}),t.addCommand("ToggleToolbarDrawer",()=>{dr.toggleToolbarDrawer(hs)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>dr.isToolbarDrawerToggled(hs))},Jo=hs=>{const{mainUi:gn,popupUi:Fn,uiMotherships:Bo}=hs;fn(yw(t),(oO,pF)=>{t.ui.registry.addGroupToolbarButton(pF,oO)});const{buttons:es,menuItems:js,contextToolbars:As,sidebars:qc,views:Rr}=t.ui.registry.getAll(),Xg=Cw(t),Ga={menuItems:js,menus:GD(t),menubar:FD(t),toolbar:Xg.getOrThunk(()=>ww(t)),allowToolbarGroups:U===qu.floating,buttons:es,sidebar:qc,views:Rr};io(gn.outerContainer),ui(t,gn.mothership,Bo),i.setup(t,dt.popup.shared,le),Sz(t,dt.popup),Hz(t,dt.popup.shared.getSink,dt.popup),iH(t),wH(t,Sn,dt.popup.shared),L4(t,As,Fn.sink,{backstage:dt.popup}),gV(t,Fn.sink);const u1=t.getElement(),RC=ws(gn.outerContainer),hF={targetNode:u1,height:RC};return a.render(t,hs,Ga,dt.popup,hF)},$s=()=>{const hs=Zo(),gn=vo(),Fn=wo(gn);d.dialogUi.set(gn),d.popupUi.set(Fn),d.mainUi.set(hs);const Bo={popupUi:Fn,dialogUi:gn,mainUi:hs,uiMotherships:d.getUiMotherships()};return Jo(Bo)};return{popups:{backstage:dt.popup,getMothership:()=>eF("popups",p)},dialogs:{backstage:dt.dialog,getMothership:()=>eF("dialogs",p)},renderUI:$s}},vV=(t,s)=>{const a=_.from(sr(t,"id")).fold(()=>{const i=Yn("dialog-describe");return To(s,"id",i),i},xt);To(t,"aria-describedby",a)},yV=(t,s)=>{const a=B(t,"id").fold(()=>{const i=Yn("dialog-label");return To(s,"id",i),i},xt);To(t,"aria-labelledby",a)},wV=K([Mt("lazySink"),Ns("dragBlockClass"),Da("getBounds",Ka),Ke("useTabstopAt",De),Ke("eventOrder",{}),Ra("modalBehaviours",[ho]),qi("onExecute"),ty("onEscape")]),SC={sketch:xt},Q4=K([iu({name:"draghandle",overrides:(t,s)=>({behaviours:pn([jg.config({mode:"mouse",getTarget:a=>sm(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Zc({schema:[Mt("dom")],name:"title"}),Zc({factory:SC,schema:[Mt("dom")],name:"close"}),Zc({factory:SC,schema:[Mt("dom")],name:"body"}),iu({factory:SC,schema:[Mt("dom")],name:"footer"}),Uu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Ke("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ke("components",[])],name:"blocker"})]),CV=(t,s,a,i)=>{const d=Vr(),g=W=>{d.set(W);const le=t.lazySink(W).getOrDie(),pe=i.blocker(),st=le.getSystem().build({...pe,components:pe.components.concat([pl(W)]),behaviours:pn([Oo.config({}),fs("dialog-blocker-events",[Qa(Qm(),()=>{ho.focusIn(W)})])])});Oc(le,st),ho.focusIn(W)},p=W=>{d.clear(),sa(W.element).each(le=>{W.getSystem().getByDom(le).each(pe=>{Dc(pe)})})},w=W=>Wn(W,t,"body"),T=W=>Wn(W,t,"footer"),A=(W,le)=>{Ug.block(W,le)},D=W=>{Ug.unblock(W)},N=Yn("modal-events"),U={...t.eventOrder,[bd()]:[N].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:w,getFooter:T,setIdle:D,setBusy:A},eventOrder:U,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:gc(t.modalBehaviours,[zo.config({}),ho.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),Ug.config({getRoot:d.get}),fs(N,[zr(W=>{yV(W.element,Wn(W,t,"title").element),vV(W.element,Wn(W,t,"body").element)})])])}},ja=jc({name:"ModalDialog",configFields:wV(),partFields:Q4(),factory:CV,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),SV=lo([Ma,H_].concat(s0)),xV=ni,eO=[V_("button"),Sm,ll("align","end",["start","end"]),o0,Ku,Jf("buttonType",["primary","secondary"])],nF=[...eO,Pg],tO=[Xf("type",["submit","cancel","custom"]),...nF],a1=[Xf("type",["menu"]),n0,Dw,Sm,hi("items",SV),...eO],oF=gi("type",{submit:tO,cancel:tO,custom:tO,menu:a1}),kV=[Ma,Pg,Xf("level",["info","warn","error","success"]),uR,Ke("url","")],qk=lo(kV),D0=t=>[Ma,t],Kk=[Ma,Pg,Ku,V_("button"),Sm,tI,Jf("buttonType",["primary","secondary","toolbar"]),o0],sF=lo(Kk),Gg=[Ma,H_],Na=Gg.concat([ox]),Yk=Gg.concat([z_,Ku]),rF=lo(Yk),aF=ni,TV=Na.concat([rx("auto")]),EV=lo(TV),xp=cl([Aw,Pg,uR]),bW=Na.concat([wr("storageKey","default")]),_V=lo(bW),cF=_a,Xk=lo(Na),iF=_a,AV=Gg.concat([wr("tag","textarea"),ca("scriptId"),ca("scriptUrl"),C("settings",void 0)]),OV=Gg.concat([wr("tag","textarea"),va("init")]),DV=aa(t=>Ms("customeditor.old",Ya(OV),t).orThunk(()=>Ms("customeditor.new",Ya(AV),t))),RV=_a,vW=lo(Na),MV=Ym(),NV=t=>[Ma,L0("columns"),t],yW=[Ma,ca("html"),ll("presets","presentation",["presentation","document"])],$V=lo(yW),BV=Na.concat([Oa("sandboxed",!0),Oa("transparent",!0)]),TC=lo(BV),PV=_a,FV=lo(Gg.concat([Ja("height")])),lF=lo([ca("url"),Gd("zoom"),Gd("cachedWidth"),Gd("cachedHeight")]),IV=Na.concat([Ja("inputMode"),Ja("placeholder"),Oa("maximized",!1),Ku]),wW=lo(IV),e=_a,n=t=>[Ma,z_,t],o=[Pg,Aw],r=[Pg,hi("items",C1("items",()=>c))],c=qt([lo(o),lo(r)]),u=Na.concat([hi("items",c),Ku]),f=lo(u),b=_a,y=Na.concat([nu("items",[Pg,Aw]),S1("size",1),Ku]),x=lo(y),M=_a,P=Na.concat([Oa("constrain",!0),Ku]),L=lo(P),ce=lo([ca("width"),ca("height")]),ie=Gg.concat([z_,S1("min",0),S1("max",0)]),ee=lo(ie),ue=Wr,Ne=[Ma,hi("header",_a),hi("cells",ei(_a))],Oe=lo(Ne),Ge=Na.concat([Ja("placeholder"),Oa("maximized",!1),Ku]),nt=lo(Ge),Dt=_a,vn=Na.concat([ll("filetype","file",["image","media","file"]),Ku]),sn=lo(vn),mt=lo([Aw,ax]),Qe=t=>Xa("items","items",uc(),ei(aa(s=>Ms(`Checking item of ${t}`,Rn,s).fold(a=>Fo.error(tu(a)),a=>Fo.value(a))))),Rn=Ou(()=>gh("type",{alertbanner:qk,bar:lo(D0(Qe("bar"))),button:sF,checkbox:rF,colorinput:_V,colorpicker:Xk,dropzone:vW,grid:lo(NV(Qe("grid"))),iframe:TC,input:wW,listbox:f,selectbox:x,sizeinput:L,slider:ee,textarea:nt,urlinput:sn,customeditor:DV,htmlpanel:$V,imagepreview:FV,collection:EV,label:lo(n(Qe("label"))),table:Oe,panel:fo})),co=[Ma,Ke("classes",[]),hi("items",Rn)],fo=lo(co),Uo=[V_("tab"),J5,hi("items",Rn)],vs=[Ma,nu("tabs",Uo)],Gs=lo(vs),Zs=nF,$a=oF,xi=lo([ca("title"),Di("body",gh("type",{panel:fo,tabpanel:Gs})),wr("size","normal"),hi("buttons",$a),Ke("initialData",{}),Da("onAction",te),Da("onChange",te),Da("onSubmit",te),Da("onClose",te),Da("onCancel",te),Da("onTabChange",te)]),nn=t=>Ms("dialog",xi,t),Wo=lo([Xf("type",["cancel","custom"]),...Zs]),po=lo([ca("title"),ca("url"),Gd("height"),Gd("width"),eg("buttons",Wo),Da("onAction",te),Da("onCancel",te),Da("onClose",te),Da("onMessage",te)]),Dr=t=>Ms("dialog",po,t),Dn=t=>Et(t)?[t].concat(Y(ln(t),Dn)):mn(t)?Y(t,Dn):[],Do=t=>Tt(t.type)&&Tt(t.name),xo={checkbox:aF,colorinput:cF,colorpicker:iF,dropzone:MV,input:e,iframe:PV,imagepreview:lF,selectbox:M,sizeinput:ce,slider:ue,listbox:b,size:ce,textarea:Dt,urlinput:mt,customeditor:RV,collection:xp,togglemenuitem:xV},xn=t=>_.from(xo[t.type]),gs=t=>xe(Dn(t),Do),as=t=>{const s=gs(t),a=Y(s,i=>xn(i).fold(()=>[],d=>[Di(i.name,d)]));return lo(a)},sc=t=>{var s;const a=eu(nn(t)),i=as(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},xr={open:(t,s)=>{const a=sc(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=eu(Dr(s));return t(a)},redial:t=>sc(t)},No=t=>{const s=[],a={};return Lt(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Fo.error(s):Fo.value(a)},Fs=(t,s,a)=>{const i=Cr(qb.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ve(t.items,g=>rs(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:pn([ho.config({mode:"acyclic",useTabstopAt:he(p0)}),Xu.memento(i),Ju.memento(i,{postprocess:d=>No(d).fold(g=>(console.error(g),{}),xt)})])}},ka=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:BS(t.action),behaviours:gc(t.tabButtonBehaviours,[Oo.config({}),ho.config({mode:"execution",useSpace:!0,useEnter:!0}),_n.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),yr=Il({name:"TabButton",configFields:[Ke("uid",void 0),Mt("value"),Xa("dom","dom",Wm(()=>({attributes:{role:"tab",id:Yn("aria"),"aria-selected":"false"}})),ti()),Ns("action"),Ke("domModification",{}),Ra("tabButtonBehaviours",[Oo,ho,_n]),Mt("view")],factory:ka}),Xr=K([Mt("tabs"),Mt("dom"),Ke("clickToDismiss",!1),Ra("tabbarBehaviours",[Hs,ho]),cm(["tabClass","selectedClass"])]),da=Cb({factory:yr,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{Hs.dehighlight(i,d),yo(i,LC(),{tabbar:i,button:d})},a=(i,d)=>{Hs.highlight(i,d),yo(i,A1(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=Hs.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?te:a)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Pr=K([da]),Ba=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:gc(t.tabbarBehaviours,[Hs.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{To(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{To(g.element,"aria-selected","false")}}),ho.config({mode:"flow",getInitial:d=>Hs.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),hu=jc({name:"Tabbar",configFields:Xr(),partFields:Pr(),factory:Ba}),di=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:gc(t.tabviewBehaviours,[zo.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Am=Il({name:"Tabview",configFields:[Ra("tabviewBehaviours",[zo])],factory:di}),pu=K([Ke("selectFirst",!0),ds("onChangeTab"),ds("onDismissTab"),Ke("tabs",[]),Ra("tabSectionBehaviours",[])]),c1=Zc({factory:hu,schema:[Mt("dom"),il("markers",[Mt("tabClass"),Mt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),i1=Zc({factory:Am,name:"tabview"}),Om=K([c1,i1]),Id=(t,s,a,i)=>{const d=p=>{const w=_n.getValue(p);rr(p,t,"tabview").each(T=>{se(t.tabs,D=>D.value===w).each(D=>{const N=D.view();B(p.element,"id").each(U=>{To(T.element,"aria-labelledby",U)}),zo.set(T,N),t.onChangeTab(T,p,N)})})},g=(p,w)=>{rr(p,t,"tabbar").each(T=>{w(T).each(Jd)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ag(t.tabSectionBehaviours),events:lr(z([t.selectFirst?[zr((p,w)=>{g(p,Hs.getFirst)})]:[],[Zt(A1(),(p,w)=>{const T=w.event.button;d(T)}),Zt(LC(),(p,w)=>{const T=w.event.button;t.onDismissTab(p,T)})]])),apis:{getViewItems:p=>rr(p,t,"tabview").map(w=>zo.contents(w)).getOr([]),showTab:(p,w)=>{g(p,A=>{const D=Hs.getCandidates(A);return se(D,U=>_n.getValue(U)===w).filter(U=>!Hs.isHighlighted(A,U))})}}}},Jr=jc({name:"TabSection",configFields:pu(),partFields:Om(),factory:Id,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),td=(t,s,a)=>Ve(t,(i,d)=>{zo.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return zo.set(a,[]),g.height}),Dm=t=>uo(rn(t,(s,a)=>s>a?-1:s<a?1:0)),nd=(t,s,a)=>{const i=fi(t).dom,d=sm(t,".tox-dialog-wrap").getOr(t),g=Pt(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const w=ft(s),A=s.dom.offsetLeft>=a.dom.offsetLeft+hr(a)?Math.max(ft(a),w):w,D=parseInt(Pt(t,"margin-top"),10)||0,N=parseInt(Pt(t,"margin-bottom"),10)||0,W=ft(t)+D+N-A;return p-W},od=(t,s)=>{uo(t).each(a=>Jr.showTab(s,a.value))},Rm=(t,s)=>{zn(t,"height",s+"px"),zn(t,"flex-basis",s+"px")},$c=(t,s,a)=>{sm(t,'[role="dialog"]').each(i=>{la(i,'[role="tablist"]').each(d=>{a.get().map(g=>(zn(s,"height","0"),zn(s,"flex-basis","0"),Math.min(g,nd(i,s,d)))).each(g=>{Rm(s,g)})})})},Mm=t=>la(t,'[role="tabpanel"]'),Lf=t=>{const s=Vr();return{extraEvents:[zr(d=>{const g=d.element;Mm(g).each(p=>{zn(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(w=>{const T=td(t,p,w);Dm(T).fold(s.clear,s.set)}),$c(g,p,s),Po(p,"visibility"),od(t,d),requestAnimationFrame(()=>{$c(g,p,s)})})}),Zt($p(),d=>{const g=d.element;Mm(g).each(p=>{$c(g,p,s)})}),Zt(Ex,(d,g)=>{const p=d.element;Mm(p).each(w=>{const T=Yi(Ko(w));zn(w,"visibility","hidden");const A=Qs(w,"height").map(U=>parseInt(U,10));Po(w,"height"),Po(w,"flex-basis");const D=w.dom.getBoundingClientRect().height;A.forall(U=>D>U)?(s.set(D),$c(p,w,s)):A.each(U=>{Rm(w,U)}),Po(w,"visibility"),T.each(lm)})})],selectFirst:!1}},sd="send-data-to-section",qg="send-data-to-view",Jk=(t,s,a)=>{const i=V({}),d=A=>{const D=_n.getValue(A),N=No(D).getOr({}),U=i.get(),W=pr(U,N);i.set(W)},g=A=>{const D=i.get();_n.setValue(A,D)},p=V(null),w=Ve(t.tabs,A=>({value:A.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Va(a.shared.providers.translate(A.title))],view:()=>[qb.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Ve(A.items,N=>rs(D,N,s,a)),formBehaviours:pn([ho.config({mode:"acyclic",useTabstopAt:he(p0)}),fs("TabView.form.events",[zr(g),Rl(d)]),Nl.config({channels:er([{key:sd,value:{onReceive:d}},{key:qg,value:{onReceive:g}}])})])}))]})),T=Lf(w);return Jr.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(A,D,N)=>{const U=_n.getValue(D);yo(A,NM,{name:U,oldName:p.get()}),p.set(U)},tabs:w,components:[Jr.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[hu.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:pn([xa.config({})])}),Jr.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:pn([fs("tabpanel",T.extraEvents),ho.config({mode:"acyclic"}),ss.config({find:A=>uo(Jr.getViewItems(A))}),Ju.withComp(_.none(),A=>(A.getSystem().broadcastOn([sd],{}),i.get()),(A,D)=>{i.set(D),A.getSystem().broadcastOn([qg],{})})])})},EC=Yn("update-dialog"),_C=Yn("update-title"),Qk=Yn("update-body"),eT=Yn("update-footer"),Kg=Yn("body-send-message"),kp=(t,s,a,i,d)=>{const g=T=>{const A=T.body;switch(A.type){case"tabpanel":return[Jk(A,T.initialData,i)];default:return[Fs(A,T.initialData,i)]}},p=(T,A)=>_.some({isTabPanel:()=>A.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?w:{}}},components:[],behaviours:pn([Xu.childAt(0),Wl.config({channel:`${Qk}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},ot=(t,s,a,i,d)=>kp(t,s,_.some(a),i,d),ut=(t,s,a)=>{const i=kp(t,s,_.none(),a,!1);return ja.parts.body(i)},Qt=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Xw({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:pn([xa.config({}),Oo.config({})])})]}],behaviours:pn([ho.config({mode:"acyclic",useTabstopAt:he(p0)})])};return ja.parts.body(s)};function Vt(t){return Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Vt(t)}function so(t,s){return so=Object.setPrototypeOf||function(i,d){return i.__proto__=d,i},so(t,s)}function _s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Br(t,s,a){return _s()?Br=Reflect.construct:Br=function(d,g,p){var w=[null];w.push.apply(w,g);var T=Function.bind.apply(d,w),A=new T;return p&&so(A,p.prototype),A},Br.apply(null,arguments)}function nr(t){return bu(t)||AC(t)||uF(t)||dF()}function bu(t){if(Array.isArray(t))return tT(t)}function AC(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uF(t,s){if(t){if(typeof t=="string")return tT(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return tT(t,s)}}function tT(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=t[a];return i}function dF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var LV=Object.hasOwnProperty,Xo=Object.setPrototypeOf,pt=Object.isFrozen,jn=Object.getPrototypeOf,$o=Object.getOwnPropertyDescriptor,Ys=Object.freeze,bc=Object.seal,Tl=Object.create,Ii=typeof Reflect<"u"&&Reflect,l1=Ii.apply,ki=Ii.construct;l1||(l1=function(s,a,i){return s.apply(a,i)}),Ys||(Ys=function(s){return s}),bc||(bc=function(s){return s}),ki||(ki=function(s,a){return Br(s,nr(a))});var mF=Yg(Array.prototype.forEach),HV=Yg(Array.prototype.pop),OC=Yg(Array.prototype.push),nO=Yg(String.prototype.toLowerCase),RZ=Yg(String.prototype.match),R0=Yg(String.prototype.replace),MZ=Yg(String.prototype.indexOf),NZ=Yg(String.prototype.trim),rd=Yg(RegExp.prototype.test),zV=$Z(TypeError);function Yg(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return l1(t,s,i)}}function $Z(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return ki(t,a)}}function kr(t,s){Xo&&Xo(t,null);for(var a=s.length;a--;){var i=s[a];if(typeof i=="string"){var d=nO(i);d!==i&&(pt(s)||(s[a]=d),i=d)}t[i]=!0}return t}function DC(t){var s=Tl(null),a;for(a in t)l1(LV,t,[a])&&(s[a]=t[a]);return s}function fF(t,s){for(;t!==null;){var a=$o(t,s);if(a){if(a.get)return Yg(a.get);if(typeof a.value=="function")return Yg(a.value)}t=jn(t)}function i(d){return console.warn("fallback value for",d),null}return i}var CW=Ys(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),VV=Ys(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),UV=Ys(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),BZ=Ys(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),WV=Ys(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),PZ=Ys(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),SW=Ys(["#text"]),xW=Ys(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ZV=Ys(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),kW=Ys(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gF=Ys(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),FZ=bc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),IZ=bc(/<%[\w\W]*|[\w\W]*%>/gm),LZ=bc(/^data-[\-\w.\u00B7-\uFFFF]/),HZ=bc(/^aria-[\-\w]+$/),zZ=bc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),VZ=bc(/^(?:\w+script|data):/i),UZ=bc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),WZ=bc(/^html$/i),ZZ=function(){return typeof window>"u"?null:window},jZ=function(s,a){if(Vt(s)!=="object"||typeof s.createPolicy!="function")return null;var i=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(i=a.currentScript.getAttribute(d));var g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML:function(w){return w}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function TW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ZZ(),s=function(bt){return TW(bt)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,i=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,w=t.Element,T=t.NodeFilter,A=t.NamedNodeMap,D=A===void 0?t.NamedNodeMap||t.MozNamedAttrMap:A,N=t.HTMLFormElement,U=t.DOMParser,W=t.trustedTypes,le=w.prototype,pe=fF(le,"cloneNode"),st=fF(le,"nextSibling"),$e=fF(le,"childNodes"),at=fF(le,"parentNode");if(typeof g=="function"){var Sn=i.createElement("template");Sn.content&&Sn.content.ownerDocument&&(i=Sn.content.ownerDocument)}var dt=jZ(W,a),An=dt?dt.createHTML(""):"",Gn=i,Ln=Gn.implementation,vo=Gn.createNodeIterator,wo=Gn.createDocumentFragment,Zo=Gn.getElementsByTagName,ws=a.importNode,io={};try{io=DC(i).documentMode?i.documentMode:{}}catch{}var Jo={};s.isSupported=typeof at=="function"&&Ln&&typeof Ln.createHTMLDocument<"u"&&io!==9;var $s=FZ,hs=IZ,gn=LZ,Fn=HZ,Bo=VZ,es=UZ,js=zZ,As=null,qc=kr({},[].concat(nr(CW),nr(VV),nr(UV),nr(WV),nr(SW))),Rr=null,Xg=kr({},[].concat(nr(xW),nr(ZV),nr(kW),nr(gF))),Ga=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),u1=null,RC=null,hF=!0,oO=!0,pF=!1,nT=!1,MC=!1,KV=!1,YV=!1,oT=!1,bF=!1,vF=!1,GW=!0,XV=!0,sO=!1,sT={},rT=null,qW=kr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),KW=null,YW=kr({},["audio","video","img","source","image","track"]),JV=null,XW=kr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),QV="http://www.w3.org/1998/Math/MathML",eU="http://www.w3.org/2000/svg",M0="http://www.w3.org/1999/xhtml",yF=M0,tU=!1,aT,yj=["application/xhtml+xml","text/html"],wj="text/html",NC,cT=null,Cj=i.createElement("form"),JW=function(bt){return bt instanceof RegExp||bt instanceof Function},nU=function(bt){cT&&cT===bt||((!bt||Vt(bt)!=="object")&&(bt={}),bt=DC(bt),As="ALLOWED_TAGS"in bt?kr({},bt.ALLOWED_TAGS):qc,Rr="ALLOWED_ATTR"in bt?kr({},bt.ALLOWED_ATTR):Xg,JV="ADD_URI_SAFE_ATTR"in bt?kr(DC(XW),bt.ADD_URI_SAFE_ATTR):XW,KW="ADD_DATA_URI_TAGS"in bt?kr(DC(YW),bt.ADD_DATA_URI_TAGS):YW,rT="FORBID_CONTENTS"in bt?kr({},bt.FORBID_CONTENTS):qW,u1="FORBID_TAGS"in bt?kr({},bt.FORBID_TAGS):{},RC="FORBID_ATTR"in bt?kr({},bt.FORBID_ATTR):{},sT="USE_PROFILES"in bt?bt.USE_PROFILES:!1,hF=bt.ALLOW_ARIA_ATTR!==!1,oO=bt.ALLOW_DATA_ATTR!==!1,pF=bt.ALLOW_UNKNOWN_PROTOCOLS||!1,nT=bt.SAFE_FOR_TEMPLATES||!1,MC=bt.WHOLE_DOCUMENT||!1,oT=bt.RETURN_DOM||!1,bF=bt.RETURN_DOM_FRAGMENT||!1,vF=bt.RETURN_TRUSTED_TYPE||!1,YV=bt.FORCE_BODY||!1,GW=bt.SANITIZE_DOM!==!1,XV=bt.KEEP_CONTENT!==!1,sO=bt.IN_PLACE||!1,js=bt.ALLOWED_URI_REGEXP||js,yF=bt.NAMESPACE||M0,bt.CUSTOM_ELEMENT_HANDLING&&JW(bt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ga.tagNameCheck=bt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),bt.CUSTOM_ELEMENT_HANDLING&&JW(bt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ga.attributeNameCheck=bt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),bt.CUSTOM_ELEMENT_HANDLING&&typeof bt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ga.allowCustomizedBuiltInElements=bt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),aT=yj.indexOf(bt.PARSER_MEDIA_TYPE)===-1?aT=wj:aT=bt.PARSER_MEDIA_TYPE,NC=aT==="application/xhtml+xml"?function(Jn){return Jn}:nO,nT&&(oO=!1),bF&&(oT=!0),sT&&(As=kr({},nr(SW)),Rr=[],sT.html===!0&&(kr(As,CW),kr(Rr,xW)),sT.svg===!0&&(kr(As,VV),kr(Rr,ZV),kr(Rr,gF)),sT.svgFilters===!0&&(kr(As,UV),kr(Rr,ZV),kr(Rr,gF)),sT.mathMl===!0&&(kr(As,WV),kr(Rr,kW),kr(Rr,gF))),bt.ADD_TAGS&&(As===qc&&(As=DC(As)),kr(As,bt.ADD_TAGS)),bt.ADD_ATTR&&(Rr===Xg&&(Rr=DC(Rr)),kr(Rr,bt.ADD_ATTR)),bt.ADD_URI_SAFE_ATTR&&kr(JV,bt.ADD_URI_SAFE_ATTR),bt.FORBID_CONTENTS&&(rT===qW&&(rT=DC(rT)),kr(rT,bt.FORBID_CONTENTS)),XV&&(As["#text"]=!0),MC&&kr(As,["html","head","body"]),As.table&&(kr(As,["tbody"]),delete u1.tbody),Ys&&Ys(bt),cT=bt)},QW=kr({},["mi","mo","mn","ms","mtext"]),eZ=kr({},["foreignobject","desc","title","annotation-xml"]),Sj=kr({},["title","style","font","a","script"]),wF=kr({},VV);kr(wF,UV),kr(wF,BZ);var oU=kr({},WV);kr(oU,PZ);var xj=function(bt){var Jn=at(bt);(!Jn||!Jn.tagName)&&(Jn={namespaceURI:M0,tagName:"template"});var Io=nO(bt.tagName),Pa=nO(Jn.tagName);return bt.namespaceURI===eU?Jn.namespaceURI===M0?Io==="svg":Jn.namespaceURI===QV?Io==="svg"&&(Pa==="annotation-xml"||QW[Pa]):Boolean(wF[Io]):bt.namespaceURI===QV?Jn.namespaceURI===M0?Io==="math":Jn.namespaceURI===eU?Io==="math"&&eZ[Pa]:Boolean(oU[Io]):bt.namespaceURI===M0?Jn.namespaceURI===eU&&!eZ[Pa]||Jn.namespaceURI===QV&&!QW[Pa]?!1:!oU[Io]&&(Sj[Io]||!wF[Io]):!1},d1=function(bt){OC(s.removed,{element:bt});try{bt.parentNode.removeChild(bt)}catch{try{bt.outerHTML=An}catch{bt.remove()}}},CF=function(bt,Jn){try{OC(s.removed,{attribute:Jn.getAttributeNode(bt),from:Jn})}catch{OC(s.removed,{attribute:null,from:Jn})}if(Jn.removeAttribute(bt),bt==="is"&&!Rr[bt])if(oT||bF)try{d1(Jn)}catch{}else try{Jn.setAttribute(bt,"")}catch{}},tZ=function(bt){var Jn,Io;if(YV)bt="<remove></remove>"+bt;else{var Pa=RZ(bt,/^[\r\n\t ]+/);Io=Pa&&Pa[0]}aT==="application/xhtml+xml"&&(bt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+bt+"</body></html>");var Ld=dt?dt.createHTML(bt):bt;if(yF===M0)try{Jn=new U().parseFromString(Ld,aT)}catch{}if(!Jn||!Jn.documentElement){Jn=Ln.createDocument(yF,"template",null);try{Jn.documentElement.innerHTML=tU?"":Ld}catch{}}var vu=Jn.body||Jn.documentElement;return bt&&Io&&vu.insertBefore(i.createTextNode(Io),vu.childNodes[0]||null),yF===M0?Zo.call(Jn,MC?"html":"body")[0]:MC?Jn.documentElement:vu},nZ=function(bt){return vo.call(bt.ownerDocument||bt,bt,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT,null,!1)},kj=function(bt){return bt instanceof N&&(typeof bt.nodeName!="string"||typeof bt.textContent!="string"||typeof bt.removeChild!="function"||!(bt.attributes instanceof D)||typeof bt.removeAttribute!="function"||typeof bt.setAttribute!="function"||typeof bt.namespaceURI!="string"||typeof bt.insertBefore!="function")},rO=function(bt){return Vt(p)==="object"?bt instanceof p:bt&&Vt(bt)==="object"&&typeof bt.nodeType=="number"&&typeof bt.nodeName=="string"},m1=function(bt,Jn,Io){Jo[bt]&&mF(Jo[bt],function(Pa){Pa.call(s,Jn,Io,cT)})},oZ=function(bt){var Jn;if(m1("beforeSanitizeElements",bt,null),kj(bt)||rd(/[\u0080-\uFFFF]/,bt.nodeName))return d1(bt),!0;var Io=NC(bt.nodeName);if(m1("uponSanitizeElement",bt,{tagName:Io,allowedTags:As}),bt.hasChildNodes()&&!rO(bt.firstElementChild)&&(!rO(bt.content)||!rO(bt.content.firstElementChild))&&rd(/<[/\w]/g,bt.innerHTML)&&rd(/<[/\w]/g,bt.textContent)||Io==="select"&&rd(/<template/i,bt.innerHTML))return d1(bt),!0;if(!As[Io]||u1[Io]){if(!u1[Io]&&rZ(Io)&&(Ga.tagNameCheck instanceof RegExp&&rd(Ga.tagNameCheck,Io)||Ga.tagNameCheck instanceof Function&&Ga.tagNameCheck(Io)))return!1;if(XV&&!rT[Io]){var Pa=at(bt)||bt.parentNode,Ld=$e(bt)||bt.childNodes;if(Ld&&Pa)for(var vu=Ld.length,Zl=vu-1;Zl>=0;--Zl)Pa.insertBefore(pe(Ld[Zl],!0),st(bt))}return d1(bt),!0}return bt instanceof w&&!xj(bt)||(Io==="noscript"||Io==="noembed")&&rd(/<\/no(script|embed)/i,bt.innerHTML)?(d1(bt),!0):(nT&&bt.nodeType===3&&(Jn=bt.textContent,Jn=R0(Jn,$s," "),Jn=R0(Jn,hs," "),bt.textContent!==Jn&&(OC(s.removed,{element:bt.cloneNode()}),bt.textContent=Jn)),m1("afterSanitizeElements",bt,null),!1)},sZ=function(bt,Jn,Io){if(GW&&(Jn==="id"||Jn==="name")&&(Io in i||Io in Cj))return!1;if(!(oO&&!RC[Jn]&&rd(gn,Jn))){if(!(hF&&rd(Fn,Jn))){if(!Rr[Jn]||RC[Jn]){if(!(rZ(bt)&&(Ga.tagNameCheck instanceof RegExp&&rd(Ga.tagNameCheck,bt)||Ga.tagNameCheck instanceof Function&&Ga.tagNameCheck(bt))&&(Ga.attributeNameCheck instanceof RegExp&&rd(Ga.attributeNameCheck,Jn)||Ga.attributeNameCheck instanceof Function&&Ga.attributeNameCheck(Jn))||Jn==="is"&&Ga.allowCustomizedBuiltInElements&&(Ga.tagNameCheck instanceof RegExp&&rd(Ga.tagNameCheck,Io)||Ga.tagNameCheck instanceof Function&&Ga.tagNameCheck(Io))))return!1}else if(!JV[Jn]){if(!rd(js,R0(Io,es,""))){if(!((Jn==="src"||Jn==="xlink:href"||Jn==="href")&&bt!=="script"&&MZ(Io,"data:")===0&&KW[bt])){if(!(pF&&!rd(Bo,R0(Io,es,"")))){if(Io)return!1}}}}}}return!0},rZ=function(bt){return bt.indexOf("-")>0},aZ=function(bt){var Jn,Io,Pa,Ld;m1("beforeSanitizeAttributes",bt,null);var vu=bt.attributes;if(vu){var Zl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Rr};for(Ld=vu.length;Ld--;){Jn=vu[Ld];var SF=Jn,jl=SF.name,cZ=SF.namespaceURI;Io=jl==="value"?Jn.value:NZ(Jn.value),Pa=NC(jl);var Ej=Io;if(Zl.attrName=Pa,Zl.attrValue=Io,Zl.keepAttr=!0,Zl.forceKeepAttr=void 0,m1("uponSanitizeAttribute",bt,Zl),Io=Zl.attrValue,!Zl.forceKeepAttr){if(!Zl.keepAttr){CF(jl,bt);continue}if(rd(/\/>/i,Io)){CF(jl,bt);continue}nT&&(Io=R0(Io,$s," "),Io=R0(Io,hs," "));var _j=NC(bt.nodeName);if(!sZ(_j,Pa,Io)){CF(jl,bt);continue}if(Io!==Ej)try{cZ?bt.setAttributeNS(cZ,jl,Io):bt.setAttribute(jl,Io)}catch{CF(jl,bt)}}}m1("afterSanitizeAttributes",bt,null)}},Tj=function ps(bt){var Jn,Io=nZ(bt);for(m1("beforeSanitizeShadowDOM",bt,null);Jn=Io.nextNode();)m1("uponSanitizeShadowNode",Jn,null),!oZ(Jn)&&(Jn.content instanceof d&&ps(Jn.content),aZ(Jn));m1("afterSanitizeShadowDOM",bt,null)};return s.sanitize=function(ps,bt){var Jn,Io,Pa,Ld,vu;if(tU=!ps,tU&&(ps="<!-->"),typeof ps!="string"&&!rO(ps)){if(typeof ps.toString!="function")throw zV("toString is not a function");if(ps=ps.toString(),typeof ps!="string")throw zV("dirty is not a string, aborting")}if(!s.isSupported){if(Vt(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof ps=="string")return t.toStaticHTML(ps);if(rO(ps))return t.toStaticHTML(ps.outerHTML)}return ps}if(KV||nU(bt),s.removed=[],typeof ps=="string"&&(sO=!1),sO){if(ps.nodeName){var Zl=NC(ps.nodeName);if(!As[Zl]||u1[Zl])throw zV("root node is forbidden and cannot be sanitized in-place")}}else if(ps instanceof p)Jn=tZ("<!---->"),Io=Jn.ownerDocument.importNode(ps,!0),Io.nodeType===1&&Io.nodeName==="BODY"||Io.nodeName==="HTML"?Jn=Io:Jn.appendChild(Io);else{if(!oT&&!nT&&!MC&&ps.indexOf("<")===-1)return dt&&vF?dt.createHTML(ps):ps;if(Jn=tZ(ps),!Jn)return oT?null:vF?An:""}Jn&&YV&&d1(Jn.firstChild);for(var SF=nZ(sO?ps:Jn);Pa=SF.nextNode();)Pa.nodeType===3&&Pa===Ld||oZ(Pa)||(Pa.content instanceof d&&Tj(Pa.content),aZ(Pa),Ld=Pa);if(Ld=null,sO)return ps;if(oT){if(bF)for(vu=wo.call(Jn.ownerDocument);Jn.firstChild;)vu.appendChild(Jn.firstChild);else vu=Jn;return Rr.shadowroot&&(vu=ws.call(a,vu,!0)),vu}var jl=MC?Jn.outerHTML:Jn.innerHTML;return MC&&As["!doctype"]&&Jn.ownerDocument&&Jn.ownerDocument.doctype&&Jn.ownerDocument.doctype.name&&rd(WZ,Jn.ownerDocument.doctype.name)&&(jl="<!DOCTYPE "+Jn.ownerDocument.doctype.name+`>
`+jl),nT&&(jl=R0(jl,$s," "),jl=R0(jl,hs," ")),dt&&vF?dt.createHTML(jl):jl},s.setConfig=function(ps){nU(ps),KV=!0},s.clearConfig=function(){cT=null,KV=!1},s.isValidAttribute=function(ps,bt,Jn){cT||nU({});var Io=NC(ps),Pa=NC(bt);return sZ(Io,Pa,Jn)},s.addHook=function(ps,bt){typeof bt=="function"&&(Jo[ps]=Jo[ps]||[],OC(Jo[ps],bt))},s.removeHook=function(ps){if(Jo[ps])return HV(Jo[ps])},s.removeHooks=function(ps){Jo[ps]&&(Jo[ps]=[])},s.removeAllHooks=function(){Jo={}},s}var GZ=TW();const qZ=t=>GZ().sanitize(t),KZ=jv.deviceType.isTouch(),EW=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),_W=(t,s)=>ja.parts.close(el.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:pn([xa.config({})])})),AW=()=>ja.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),OW=(t,s)=>ja.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Wg(`<p>${qZ(s.translate(t))}</p>`)}]}]}),DW=t=>ja.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),RW=(t,s)=>[xm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),xm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],jV=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return ja.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),_.some(!0)),useTabstopAt:g=>!p0(g),dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Wg(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:KZ?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:pn([Oo.config({}),fs("dialog-events",t.dialogEvents.concat([Qa(Qm(),(g,p)=>{ho.focusIn(g)})])),fs("scroll-lock",[zr(()=>{wa(Qr(),d)}),Rl(()=>{ia(Qr(),d)})]),...t.extraBehaviours]),eventOrder:{[dl()]:["dialog-events"],[bd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[yh()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},MW=t=>el.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[ym("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{Vs(s,gp)}}),NW=(t,s,a,i)=>{const d=g=>[Va(i.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:pn([Wl.config({channel:`${_C}-${s}`,initialData:t,renderComponents:d})])}},$W=()=>({dom:Wg('<div class="tox-dialog__draghandle"></div>')}),YZ=(t,s,a,i)=>xm.sketch({dom:Wg('<div class="tox-dialog__header"></div>'),components:[NW(t,s,_.some(a),i),$W(),MW(i)],containerBehaviours:pn([jg.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Ml(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),XZ=(t,s,a)=>{const i=ja.parts.title(NW(t,s,_.none(),a)),d=ja.parts.draghandle($W()),g=ja.parts.close(MW(a)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return xm.sketch({dom:Wg('<div class="tox-dialog__header"></div>'),components:p})},BW=(t,s,a)=>XZ({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),PW=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:Wg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),FW=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{ja.setBusy(t(),(d,g)=>PW(i.message,g,s))},onUnblock:()=>{ja.setIdle(t())}}),IW=(t,s,a,i)=>{const d=(g,p)=>_.some(p);return yi(jV({...t,lazySink:i.shared.getSink,extraBehaviours:[Wl.config({channel:`${EC}-${t.id}`,updateState:d,initialData:s}),Ju.memory({}),...t.extraBehaviours],onEscape:g=>{Vs(g,gp)},dialogEvents:a,eventOrder:{[ou()]:[Wl.name(),Nl.name()],[bd()]:["scroll-lock",Wl.name(),"messages","dialog-events","alloy.base.behaviour"],[yh()]:["alloy.base.behaviour","dialog-events","messages",Wl.name(),"scroll-lock"]}}))},LW=t=>{const s=a=>{const i=Ve(a.items,d=>{const g=V(!1);return{...d,storage:g}});return{...a,items:i}};return Ve(t,a=>a.type==="menu"?s(a):a)},HW=t=>ke(t,(s,a)=>a.type==="menu"?ke(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),zW=(t,s)=>[Ch(Qm(),Jw),t(Vw,(a,i)=>{s.onClose(),i.onClose()}),t(gp,(a,i,d,g)=>{i.onCancel(a),Vs(g,Vw)}),Zt($A,(a,i)=>s.onUnblock()),Zt(NA,(a,i)=>s.onBlock(i.event))],GV={initUrlDialog:(t,s)=>{const a=(d,g)=>Zt(d,(p,w)=>{i(p,(T,A)=>{g(t(),T,w.event,p)})}),i=(d,g)=>{Wl.getState(d).get().each(p=>{g(p,d)})};return[...zW(a,s),a(Ig,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const i=(g,p)=>Zt(g,(w,T)=>{d(w,(A,D)=>{p(t(),A,T.event,w)})}),d=(g,p)=>{Wl.getState(g).get().each(w=>{p(w.internalDialog,g)})};return[...zW(i,s),i(Uw,(g,p)=>p.onSubmit(g)),i(Vl,(g,p,w)=>{p.onChange(g,{name:w.name})}),i(Ig,(g,p,w,T)=>{const A=()=>ho.focusIn(T),D=W=>J(W,"disabled")||B(W,"aria-disabled").exists(le=>le==="true"),N=Ko(T.element),U=Yi(N);p.onAction(g,{name:w.name,value:w.value}),Yi(N).fold(A,W=>{D(W)||U.exists(le=>mi(W,le)&&D(le))?A():a().toOptional().filter(le=>!mi(le.element,W)).each(A)})}),i(NM,(g,p,w)=>{p.onTabChange(g,{newTabName:w.name,oldTabName:w.oldName})}),Rl(g=>{const p=t();_n.setValue(g,p.getData())})]}},JZ=(t,s)=>ek(t,t.type,s),QZ=(t,s,a)=>se(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),ej=(t,s)=>{const a=s.map(w=>w.footerButtons).getOr([]),i=_e(a,w=>w.align==="start"),d=(w,T)=>xm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${w}`]},components:Ve(T,A=>A.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},VW=(t,s,a)=>{const i=(d,g)=>{const p=Ve(g.buttons,T=>{const A=Cr(JZ(T,a));return{name:T.name,align:T.align,memento:A}}),w=T=>QZ(d,p,T);return _.some({lookupByName:w,footerButtons:p})};return{dom:Wg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:pn([Wl.config({channel:`${eT}-${s}`,initialData:t,updateState:i,renderComponents:ej})])}},tj=(t,s,a)=>VW(t,s,a),UW=(t,s,a)=>ja.parts.footer(VW(t,s,a)),WW=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=ss.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return qb.getField(i,s).orThunk(()=>{const d=t.getFooter();return Wl.getState(d).get().bind(p=>p.lookupByName(s))})}else return _.none()},nj=(t,s)=>{const a=t.getRoot();return Wl.getState(a).get().map(i=>eu(Ms("data",i.dataValidator,s))).getOr(s)},ZW=(t,s,a)=>{const i=le=>{const pe=t.getRoot();pe.getSystem().isConnected()&&le(pe)},W={getData:()=>{const le=t.getRoot(),pe=le.getSystem().isConnected()?t.getFormWrapper():le,st=_n.getValue(pe),$e=fn(a,at=>at.get());return{...st,...$e}},setData:le=>{i(pe=>{const st=W.getData(),$e=pr(st,le),at=nj(t,$e),Sn=t.getFormWrapper();_n.setValue(Sn,at),Lt(a,(dt,An)=>{Kn($e,An)&&dt.set($e[An])})})},setEnabled:(le,pe)=>{WW(t,le).each(pe?Eo.enable:Eo.disable)},focus:le=>{WW(t,le).each(Oo.focus)},block:le=>{if(!Tt(le))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(pe=>{yo(pe,NA,{message:le})})},unblock:()=>{i(le=>{Vs(le,$A)})},showTab:le=>{i(pe=>{const st=t.getBody();Wl.getState(st).get().exists(at=>at.isTabPanel())&&ss.getCurrent(st).each(at=>{Jr.showTab(at,le)})})},redial:le=>{i(pe=>{const st=t.getId(),$e=s(le);pe.getSystem().broadcastOn([`${EC}-${st}`],$e),pe.getSystem().broadcastOn([`${_C}-${st}`],$e.internalDialog),pe.getSystem().broadcastOn([`${Qk}-${st}`],$e.internalDialog),pe.getSystem().broadcastOn([`${eT}-${st}`],$e.internalDialog),W.setData($e.initialData)})},close:()=>{i(le=>{Vs(le,Vw)})}};return W},oj=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},sj=(t,s,a)=>{const i=Yn("dialog"),d=t.internalDialog,g=BW(d.title,i,a),p=ut({body:d.body,initialData:d.initialData},i,a),w=LW(d.buttons),T=HW(w),A=UW({buttons:w},i,a),D=GV.initDialog(()=>pe,FW(()=>W,a.shared.providers,s),a.shared.getSink),N=oj(d.size),U={id:i,header:g,body:p,footer:_.some(A),extraClasses:N,extraBehaviours:[],extraStyles:{}},W=IW(U,t,D,a),le=(()=>{const st=()=>{const $e=ja.getBody(W);return ss.getCurrent($e).getOr($e)};return{getId:K(i),getRoot:K(W),getBody:()=>ja.getBody(W),getFooter:()=>ja.getFooter(W),getFormWrapper:st}})(),pe=ZW(le,s.redial,T);return{dialog:W,instanceApi:pe}},rj=(t,s,a,i)=>{const d=Yn("dialog"),g=Yn("dialog-label"),p=Yn("dialog-content"),w=t.internalDialog,T=($e,at)=>_.some(at),A=Cr(YZ({title:w.title,draggable:!0},d,g,a.shared.providers)),D=Cr(ot({body:w.body,initialData:w.initialData},d,p,a,i)),N=LW(w.buttons),U=HW(N),W=Cr(tj({buttons:N},d,a)),le=GV.initDialog(()=>st,{onBlock:$e=>{Ug.block(pe,(at,Sn)=>PW($e.message,Sn,a.shared.providers))},onUnblock:()=>{Ug.unblock(pe)},onClose:()=>s.closeWindow()},a.shared.getSink),pe=yi({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:{role:"dialog",["aria-labelledby"]:g,["aria-describedby"]:p}},eventOrder:{[ou()]:[Wl.name(),Nl.name()],[dl()]:["execute-on-form"],[bd()]:["reflecting","execute-on-form"]},behaviours:pn([ho.config({mode:"cyclic",onEscape:$e=>(Vs($e,Vw),_.some(!0)),useTabstopAt:$e=>!p0($e)&&(qo($e)!=="button"||sr($e,"disabled")!=="disabled")}),Wl.config({channel:`${EC}-${d}`,updateState:T,initialData:t}),Oo.config({}),fs("execute-on-form",le.concat([Qa(Qm(),($e,at)=>{ho.focusIn($e)})])),Ug.config({getRoot:()=>_.some(pe)}),zo.config({}),Ju.memory({})]),components:[A.asSpec(),D.asSpec(),W.asSpec()]}),st=ZW({getId:K(d),getRoot:K(pe),getFooter:()=>W.get(pe),getBody:()=>D.get(pe),getFormWrapper:()=>{const $e=D.get(pe);return ss.getCurrent($e).getOr($e)}},s.redial,U);return{dialog:pe,instanceApi:st}};var qV=tinymce.util.Tools.resolve("tinymce.util.URI");const aj=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!Tt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(w=>{yo(w,NA,{message:p})})},unblock:()=>{s(p=>{Vs(p,$A)})},close:()=>{s(p=>{Vs(p,Vw)})},sendMessage:p=>{s(w=>{w.getSystem().broadcastOn([Kg],p)})}}},cj=["insertContent","setContent","execCommand","close","block","unblock"],jW=t=>Et(t)&&cj.indexOf(t.mceAction)!==-1,ij=t=>!jW(t)&&Et(t)&&Kn(t,"mceAction"),lj=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=Ot(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},uj=(t,s,a,i)=>{const d=Yn("dialog"),g=BW(t.title,d,i),p=Qt(t),w=t.buttons.bind(at=>at.length===0?_.none():_.some(UW({buttons:at},d,i))),T=GV.initUrlDialog(()=>$e,FW(()=>st,i.shared.providers,s)),A={...t.height.fold(()=>({}),at=>({height:at+"px","max-height":at+"px"})),...t.width.fold(()=>({}),at=>({width:at+"px","max-width":at+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],N=new qV(t.url,{base_uri:new qV(window.location.href)}),U=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,W=pg(),le=[fs("messages",[zr(()=>{const at=ai(Wt.fromDom(window),"message",Sn=>{if(N.isSameOrigin(new qV(Sn.raw.origin))){const dt=Sn.raw.data;jW(dt)?lj(a,$e,dt):ij(dt)&&t.onMessage($e,dt)}});W.set(at)}),Rl(W.clear)]),Nl.config({channels:{[Kg]:{onReceive:(at,Sn)=>{la(at.element,"iframe").each(dt=>{const An=dt.dom.contentWindow;cn(An)&&An.postMessage(Sn,U)})}}}})],st=IW({id:d,header:g,body:p,footer:w,extraClasses:D,extraBehaviours:le,extraStyles:A},t,T,i),$e=aj(st);return{dialog:st,instanceApi:$e}},dj=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{ja.hide(A),d()},p=Cr(ek({name:"close-alert",text:"OK",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"cancel",t)),w=AW(),T=_W(g,s.providers),A=yi(jV({lazySink:()=>s.getSink(),header:EW(w,T),body:OW(i,s.providers),footer:_.some(DW(RW([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Zt(gp,g)],eventOrder:{}}));ja.show(A);const D=p.get(A);Oo.focus(D)}}},mj=t=>{const s=t.shared;return{open:(i,d)=>{const g=U=>{ja.hide(D),d(U)},p=Cr(ek({name:"yes",text:"Yes",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"submit",t)),w=ek({name:"no",text:"No",primary:!1,buttonType:_.some("secondary"),align:"end",enabled:!0,icon:_.none()},"cancel",t),T=AW(),A=_W(()=>g(!1),s.providers),D=yi(jV({lazySink:()=>s.getSink(),header:EW(T,A),body:OW(i,s.providers),footer:_.some(DW(RW([],[w,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Zt(gp,()=>g(!1)),Zt(Uw,()=>g(!0))],eventOrder:{}}));ja.show(D);const N=p.get(D);Oo.focus(N)}}},fj=(t,s)=>eu(Ms("data",s,t)),gj=t=>Lw(t,".tox-alert-dialog")||Lw(t,".tox-confirm-dialog"),hj=(t,s,a)=>s&&a?[]:[Si.config({contextual:{lazyContext:()=>_.some(os(Wt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],pj=t=>{const s=t.editor,a=Tw(s),i=dj(t.backstages.dialog),d=mj(t.backstages.dialog),g=(W,le,pe)=>le!==void 0&&le.inline==="toolbar"?A(W,t.backstages.popup.shared.anchors.inlineDialog(),pe,le.ariaAttrs):le!==void 0&&le.inline==="cursor"?A(W,t.backstages.popup.shared.anchors.cursor(),pe,le.ariaAttrs):T(W,pe),p=(W,le)=>w(W,le),w=(W,le)=>{const pe=st=>{const $e=uj(st,{closeWindow:()=>{ja.hide($e.dialog),le($e.instanceApi)}},s,t.backstages.dialog);return ja.show($e.dialog),$e.instanceApi};return xr.openUrl(pe,W)},T=(W,le)=>{const pe=(st,$e,at)=>{const Sn=$e,An=sj({dataValidator:at,initialData:Sn,internalDialog:st},{redial:xr.redial,closeWindow:()=>{ja.hide(An.dialog),le(An.instanceApi)}},t.backstages.dialog);return ja.show(An.dialog),An.instanceApi.setData(Sn),An.instanceApi};return xr.open(pe,W)},A=(W,le,pe,st=!1)=>{const $e=(at,Sn,dt)=>{const An=fj(Sn,dt),Gn=Vr(),Ln=t.backstages.popup.shared.header.isPositionedAtTop(),vo={dataValidator:dt,initialData:An,internalDialog:at},wo=()=>Gn.on(io=>{Yr.reposition(io),Si.refresh(io)}),Zo=rj(vo,{redial:xr.redial,closeWindow:()=>{Gn.on(Yr.hide),s.off("ResizeEditor",wo),Gn.clear(),pe(Zo.instanceApi)}},t.backstages.popup,st),ws=yi(Yr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...Ln?{}:{fireRepositionEventInstead:{}},inlineBehaviours:pn([fs("window-manager-inline-events",[Zt(Xd(),(io,Jo)=>{Vs(Zo.dialog,gp)})]),...hj(s,a,Ln)]),isExtraPart:(io,Jo)=>gj(Jo)}));return Gn.set(ws),Yr.showWithin(ws,pl(Zo.dialog),{anchor:le},_.some(Qr())),(!a||!Ln)&&(Si.refresh(ws),s.on("ResizeEditor",wo)),Zo.instanceApi.setData(An),ho.focusIn(Zo.dialog),Zo.instanceApi};return xr.open($e,W)};return{open:g,openUrl:p,alert:(W,le)=>{i.open(W,le)},close:W=>{W.close()},confirm:(W,le)=>{d.open(W,le)}}},bj=t=>{RD(t),aM(t),_P(t)};var vj=()=>{Ft.add("silver",t=>{bj(t);const{dialogs:s,popups:a,renderUI:i}=tF(t);T8.register(t,a.backstage.shared);const d=pj({editor:t,backstages:{popup:a.backstage,dialog:s.backstage}}),g=()=>w_(t,{backstage:a.backstage},a.getMothership());return{renderUI:i,getWindowManagerImpl:K(d),getNotificationManagerImpl:g}})};vj()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var _t=tinymce.util.Tools.resolve("tinymce.ModelManager");const It=(l,m,h)=>{var v;return h(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},gt=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&It(l,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Ut=l=>m=>gt(m)===l,$t=l=>m=>typeof m===l,en=l=>m=>l===m,Gt=Ut("string"),Tt=Ut("object"),Et=Ut("array"),rt=en(null),mn=$t("boolean"),Nn=en(void 0),Ot=l=>l==null,ct=l=>!Ot(l),Bt=$t("function"),cn=$t("number"),Ze=()=>{},et=(l,m)=>(...h)=>l(m.apply(null,h)),Ee=(l,m)=>h=>l(m(h)),te=l=>()=>l,Je=l=>l,Ht=(l,m)=>l===m;function yt(l,...m){return(...h)=>{const v=m.concat(h);return l.apply(null,v)}}const K=l=>m=>!l(m),xt=l=>()=>{throw new Error(l)},En=l=>l(),St=te(!1),he=te(!0);class Q{constructor(m,h){this.tag=m,this.value=h}static some(m){return new Q(!0,m)}static none(){return Q.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?Q.some(m(this.value)):Q.none()}bind(m){return this.tag?m(this.value):Q.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:Q.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return ct(m)?Q.some(m):Q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Q.singletonNone=new Q(!1);const it=Array.prototype.slice,Me=Array.prototype.indexOf,De=Array.prototype.push,Ft=(l,m)=>Me.call(l,m),_=(l,m)=>Ft(l,m)>-1,ge=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return!0}return!1},Ue=(l,m)=>{const h=[];for(let v=0;v<l;v++)h.push(m(v));return h},Ie=(l,m)=>{const h=l.length,v=new Array(h);for(let S=0;S<h;S++){const O=l[S];v[S]=m(O,S)}return v},Ae=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];m(S,h)}},tn=(l,m)=>{for(let h=l.length-1;h>=0;h--){const v=l[h];m(v,h)}},dn=(l,m)=>{const h=[],v=[];for(let S=0,O=l.length;S<O;S++){const F=l[S];(m(F,S)?h:v).push(F)}return{pass:h,fail:v}},ze=(l,m)=>{const h=[];for(let v=0,S=l.length;v<S;v++){const O=l[v];m(O,v)&&h.push(O)}return h},jt=(l,m,h)=>(tn(l,(v,S)=>{h=m(h,v,S)}),h),Nt=(l,m,h)=>(Ae(l,(v,S)=>{h=m(h,v,S)}),h),Ve=(l,m,h)=>{for(let v=0,S=l.length;v<S;v++){const O=l[v];if(m(O,v))return Q.some(O);if(h(O,v))break}return Q.none()},R=(l,m)=>Ve(l,m,St),qn=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return Q.some(h)}return Q.none()},_e=l=>{const m=[];for(let h=0,v=l.length;h<v;++h){if(!Et(l[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+l);De.apply(m,l[h])}return m},xe=(l,m)=>_e(Ie(l,m)),We=(l,m)=>{for(let h=0,v=l.length;h<v;++h){const S=l[h];if(m(S,h)!==!0)return!1}return!0},ke=l=>{const m=it.call(l,0);return m.reverse(),m},ae=(l,m)=>{const h={};for(let v=0,S=l.length;v<S;v++){const O=l[v];h[String(O)]=m(O,v)}return h},se=(l,m)=>{const h=it.call(l,0);return h.sort(m),h},re=(l,m)=>m>=0&&m<l.length?Q.some(l[m]):Q.none(),z=l=>re(l,0),Y=l=>re(l,l.length-1),H=(l,m)=>{for(let h=0;h<l.length;h++){const v=m(l[h],h);if(v.isSome())return v}return Q.none()},Z=Object.keys,Be=Object.hasOwnProperty,Pe=(l,m)=>{const h=Z(l);for(let v=0,S=h.length;v<S;v++){const O=h[v],F=l[O];m(F,O)}},Yt=(l,m)=>rn(l,(h,v)=>({k:v,v:m(h,v)})),rn=(l,m)=>{const h={};return Pe(l,(v,S)=>{const O=m(v,S);h[O.k]=O.v}),h},ro=l=>(m,h)=>{l[h]=m},uo=(l,m,h,v)=>{Pe(l,(S,O)=>{(m(S,O)?h:v)(S,O)})},Qn=(l,m)=>{const h={};return uo(l,m,ro(h),Ze),h},kn=(l,m)=>{const h=[];return Pe(l,(v,S)=>{h.push(m(v,S))}),h},ao=l=>kn(l,Je),Re=(l,m)=>Ye(l,m)?Q.from(l[m]):Q.none(),Ye=(l,m)=>Be.call(l,m),Lt=(l,m)=>Ye(l,m)&&l[m]!==void 0&&l[m]!==null,fn=l=>{for(const m in l)if(Be.call(l,m))return!1;return!0};typeof window<"u"||Function("return this;")();const On=8,Tn=9,Ro=11,ks=1,qe=3,Le=l=>l.dom.nodeName.toLowerCase(),un=l=>l.dom.nodeType,ln=l=>m=>un(m)===l,Jt=l=>un(l)===On||Le(l)==="#comment",Kn=ln(ks),Ts=ln(qe),Tr=ln(Tn),ma=ln(Ro),bs=l=>m=>Kn(m)&&Le(m)===l,vc=(l,m,h)=>{if(Gt(h)||mn(h)||cn(h))l.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",l),new Error("Attribute value was not simple")},ys=(l,m,h)=>{vc(l.dom,m,h)},cs=(l,m)=>{const h=l.dom;Pe(m,(v,S)=>{vc(h,S,v)})},go=(l,m)=>{Pe(m,(h,v)=>{h.fold(()=>{Is(l,v)},S=>{vc(l.dom,v,S)})})},mr=(l,m)=>{const h=l.dom.getAttribute(m);return h===null?void 0:h},Zr=(l,m)=>Q.from(mr(l,m)),Is=(l,m)=>{l.dom.removeAttribute(m)},fa=l=>Nt(l.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),jr=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,l),new Error(S)}return Ta(v.childNodes[0])},rc=(l,m)=>{const v=(m||document).createElement(l);return Ta(v)},Xs=(l,m)=>{const v=(m||document).createTextNode(l);return Ta(v)},Ta=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},q={fromHtml:jr,fromTag:rc,fromText:Xs,fromDom:Ta,fromPoint:(l,m,h)=>Q.from(l.dom.elementFromPoint(m,h)).map(Ta)},lt=(l,m)=>{const h=l.dom;if(h.nodeType!==ks)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},wt=l=>l.nodeType!==ks&&l.nodeType!==Tn&&l.nodeType!==Ro||l.childElementCount===0,Zn=(l,m)=>{const h=m===void 0?document:m.dom;return wt(h)?[]:Ie(h.querySelectorAll(l),q.fromDom)},eo=(l,m)=>{const h=m===void 0?document:m.dom;return wt(h)?Q.none():Q.from(h.querySelector(l)).map(q.fromDom)},In=(l,m)=>l.dom===m.dom,is=(l,m)=>{const h=l.dom,v=m.dom;return h===v?!1:h.contains(v)},ts=lt,ko=l=>q.fromDom(l.dom.ownerDocument),ar=l=>Tr(l)?l:ko(l),Wt=l=>q.fromDom(ar(l).dom.documentElement),fe=l=>q.fromDom(ar(l).dom.defaultView),be=l=>Q.from(l.dom.parentNode).map(q.fromDom),Rt=l=>Q.from(l.dom.parentElement).map(q.fromDom),an=(l,m)=>{const h=Bt(m)?m:St;let v=l.dom;const S=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const O=v.parentNode,F=q.fromDom(O);if(S.push(F),h(F)===!0)break;v=O}return S},hn=l=>Q.from(l.dom.previousSibling).map(q.fromDom),Pn=l=>Q.from(l.dom.nextSibling).map(q.fromDom),yn=l=>Ie(l.dom.childNodes,q.fromDom),Hn=(l,m)=>{const h=l.dom.childNodes;return Q.from(h[m]).map(q.fromDom)},no=l=>Hn(l,0),Co=(l,m)=>{be(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},Os=(l,m)=>{Pn(l).fold(()=>{be(l).each(S=>{qo(S,m)})},v=>{Co(v,m)})},fr=(l,m)=>{no(l).fold(()=>{qo(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},qo=(l,m)=>{l.dom.appendChild(m.dom)},Kc=(l,m,h)=>{Hn(l,h).fold(()=>{qo(l,m)},v=>{Co(v,m)})},ls=(l,m)=>{Co(l,m),qo(m,l)},Cs=(l,m)=>{Ae(m,(h,v)=>{const S=v===0?l:m[v-1];Os(S,h)})},xs=(l,m)=>{Ae(m,h=>{qo(l,h)})},Fr=l=>{l.dom.textContent="",Ae(yn(l),m=>{Mr(m)})},Mr=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Bc=l=>{const m=yn(l);m.length>0&&Cs(l,m),Mr(l)},Fa=(l,m)=>q.fromDom(l.dom.cloneNode(m)),Yc=l=>Fa(l,!1),Ti=l=>Fa(l,!0),Xc=(l,m)=>{const h=q.fromTag(m),v=fa(l);return cs(h,v),h},Li=(l,m)=>{const h=Xc(l,m),v=yn(Ti(l));return xs(h,v),h},zs=(l,m)=>{const h=Xc(l,m);Os(l,h);const v=yn(l);return xs(h,v),Mr(l),h},mi=["tfoot","thead","tbody","colgroup"],ga=l=>_(mi,l),ac=(l,m)=>({rows:l,columns:m}),fi=(l,m)=>({row:l,column:m}),Pc=(l,m,h)=>({element:l,rowspan:m,colspan:h}),sa=(l,m,h,v)=>({element:l,rowspan:m,colspan:h,isNew:v}),Ei=(l,m,h,v,S,O)=>({element:l,rowspan:m,colspan:h,row:v,column:S,isLocked:O}),yc=(l,m,h)=>({element:l,cells:m,section:h}),Hi=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),Js=(l,m,h)=>({element:l,isNew:m,isLocked:h}),ha=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),X=(l,m,h,v)=>({startRow:l,startCol:m,finishRow:h,finishCol:v}),Ce=(l,m,h)=>({element:l,colspan:m,column:h}),Fe=(l,m)=>({element:l,columns:m}),Ct=l=>ma(l)&&ct(l.dom.host),Xt=Bt(Element.prototype.attachShadow)&&Bt(Node.prototype.getRootNode),mo=te(Xt),Ko=Xt?l=>q.fromDom(l.dom.getRootNode()):ar,Er=l=>{const m=Ko(l);return Ct(m)?Q.some(m):Q.none()},Ls=l=>q.fromDom(l.dom.host),Nr=l=>{if(mo()&&ct(l.target)){const m=q.fromDom(l.target);if(Kn(m)&&_r(m)&&l.composed&&l.composedPath){const h=l.composedPath();if(h)return z(h)}}return Q.from(l.target)},_r=l=>ct(l.dom.shadowRoot),$r=l=>{const m=Ts(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return Er(q.fromDom(m)).fold(()=>h.body.contains(m),Ee($r,Ls))},Ia=()=>Gr(q.fromDom(document)),Gr=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return q.fromDom(m)},Qr=(l,m,h)=>ze(an(l,h),m),Jc=(l,m)=>ze(yn(l),m),Qc=(l,m)=>{let h=[];return Ae(yn(l),v=>{m(v)&&(h=h.concat([v])),h=h.concat(Qc(v,m))}),h},To=(l,m,h)=>Qr(l,v=>lt(v,m),h),us=(l,m)=>Jc(l,h=>lt(h,m)),sr=(l,m)=>Zn(m,l);var B=(l,m,h,v,S)=>l(h,v)?Q.some(h):Bt(S)&&S(h)?Q.none():m(h,v,S);const J=(l,m,h)=>{let v=l.dom;const S=Bt(h)?h:St;for(;v.parentNode;){v=v.parentNode;const O=q.fromDom(v);if(m(O))return Q.some(O);if(S(O))break}return Q.none()},de=(l,m,h)=>B((S,O)=>O(S),J,l,m,h),Xe=(l,m)=>{const h=S=>m(q.fromDom(S));return R(l.dom.childNodes,h).map(q.fromDom)},$n=(l,m)=>{const h=v=>{for(let S=0;S<v.childNodes.length;S++){const O=q.fromDom(v.childNodes[S]);if(m(O))return Q.some(O);const F=h(v.childNodes[S]);if(F.isSome())return F}return Q.none()};return h(l.dom)},Mo=(l,m,h)=>J(l,v=>lt(v,m),h),zn=(l,m)=>Xe(l,h=>lt(h,m)),Ir=(l,m)=>eo(m,l),gr=(l,m,h)=>B((S,O)=>lt(S,O),Mo,l,m,h),Pt=(l,m,h=Ht)=>l.exists(v=>h(v,m)),ra=l=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(h);return m},Qs=(l,m)=>l!=null?m(l):Q.none(),Ur=(l,m)=>l?Q.some(m):Q.none(),nl=(l,m,h)=>m===""||l.length>=m.length&&l.substr(h,h+m.length)===m,Po=(l,m,h=0,v)=>{const S=l.indexOf(m,h);return S!==-1?Nn(v)?!0:S+m.length<=v:!1},ne=(l,m)=>nl(l,m,0),me=(l,m)=>nl(l,m,l.length-m.length),ft=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Vn=l=>l.length>0,oo=l=>{const m=parseFloat(l);return isNaN(m)?Q.none():Q.some(m)},qs=l=>l.style!==void 0&&Bt(l.style.getPropertyValue),Yo=(l,m,h)=>{if(!Gt(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",l),new Error("CSS value must be a string: "+h);qs(l)&&l.style.setProperty(m,h)},zi=(l,m)=>{qs(l)&&l.style.removeProperty(m)},Qo=(l,m,h)=>{const v=l.dom;Yo(v,m,h)},Ds=(l,m)=>{const h=l.dom;Pe(m,(v,S)=>{Yo(h,S,v)})},Ea=(l,m)=>{const h=l.dom,S=window.getComputedStyle(h).getPropertyValue(m);return S===""&&!$r(l)?cc(h,m):S},cc=(l,m)=>qs(l)?l.style.getPropertyValue(m):"",Vi=(l,m)=>{const h=l.dom,v=cc(h,m);return Q.from(v).filter(S=>S.length>0)},hr=(l,m)=>{const h=l.dom;zi(h,m),Pt(Zr(l,"style").map(ft),"")&&Is(l,"style")},or=(l,m)=>{const h=l.dom,v=m.dom;qs(h)&&qs(v)&&(v.style.cssText=h.style.cssText)},Rs=(l,m,h=0)=>Zr(l,m).map(v=>parseInt(v,10)).getOr(h),Lr=(l,m)=>Rs(l,m,1),wc=l=>bs("col")(l)?Rs(l,"span",1)>1:Lr(l,"colspan")>1,El=l=>Lr(l,"rowspan")>1,qr=(l,m)=>parseInt(Ea(l,m),10),Gl=te(10),Cu=te(10),ic=(l,m)=>Su(l,m,he),Su=(l,m,h)=>xe(yn(l),v=>lt(v,m)?h(v)?[v]:[]:Su(v,m,h)),Qg=(l,m,h=St)=>{if(h(m))return Q.none();if(_(l,Le(m)))return Q.some(m);const v=S=>lt(S,"table")||h(S);return Mo(m,l.join(","),v)},Fc=(l,m)=>Qg(["td","th"],l,m),_l=l=>ic(l,"th,td"),cd=l=>lt(l,"colgroup")?us(l,"col"):xe(xu(l),m=>us(m,"col")),La=(l,m)=>gr(l,"table",m),ol=l=>ic(l,"tr"),xu=l=>La(l).fold(te([]),m=>us(m,"colgroup")),Vd=(l,m)=>Ie(l,h=>{if(Le(h)==="colgroup"){const v=Ie(cd(h),S=>{const O=Rs(S,"span",1);return Pc(S,1,O)});return yc(h,v,"colgroup")}else{const v=Ie(_l(h),S=>{const O=Rs(S,"rowspan",1),F=Rs(S,"colspan",1);return Pc(S,O,F)});return yc(h,v,m(h))}}),ql=l=>be(l).map(m=>{const h=Le(m);return ga(h)?h:"tbody"}).getOr("tbody"),Bm=l=>{const m=ol(l),v=[...xu(l),...m];return Vd(v,ql)},Ud=(l,m)=>Vd(l,()=>m),_i=l=>{let m=!1,h;return(...v)=>(m||(m=!0,h=l.apply(null,v)),h)},eh=(l,m,h,v)=>{const S=l.isiOS()&&/ipad/i.test(h)===!0,O=l.isiOS()&&!S,F=l.isiOS()||l.isAndroid(),G=F||v("(pointer:coarse)"),oe=S||!O&&F&&v("(min-device-width:768px)"),we=O||F&&!oe,je=m.isSafari()&&l.isiOS()&&/safari/i.test(h)===!1,zt=!we&&!oe&&!je;return{isiPad:te(S),isiPhone:te(O),isTablet:te(oe),isPhone:te(we),isTouch:te(G),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:te(je),isDesktop:te(zt)}},Pm=(l,m)=>{for(let h=0;h<l.length;h++){const v=l[h];if(v.test(m))return v}},ku=(l,m)=>{const h=Pm(l,m);if(!h)return{major:0,minor:0};const v=S=>Number(m.replace(h,"$"+S));return ve(v(1),v(2))},Wd=(l,m)=>{const h=String(m).toLowerCase();return l.length===0?Ai():ku(l,h)},Ai=()=>ve(0,0),ve=(l,m)=>({major:l,minor:m}),Kl={nu:ve,detect:Wd,unknown:Ai},Oi=(l,m)=>H(m.brands,h=>{const v=h.brand.toLowerCase();return R(l,S=>{var O;return v===((O=S.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(S=>({current:S.name,version:Kl.nu(parseInt(h.version,10),0)}))}),Fm=(l,m)=>{const h=String(m).toLowerCase();return R(l,v=>v.search(h))},Im=(l,m)=>Fm(l,m).map(h=>{const v=Kl.detect(h.versionRegexes,m);return{current:h.name,version:v}}),th=(l,m)=>Fm(l,m).map(h=>{const v=Kl.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Bs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,qa=l=>m=>Po(m,l),Vf=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Po(l,"edge/")&&Po(l,"chrome")&&Po(l,"safari")&&Po(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bs],search:l=>Po(l,"chrome")&&!Po(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Po(l,"msie")||Po(l,"trident")},{name:"Opera",versionRegexes:[Bs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qa("firefox")},{name:"Safari",versionRegexes:[Bs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Po(l,"safari")||Po(l,"mobile/"))&&Po(l,"applewebkit")}],Ui=[{name:"Windows",search:qa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Po(l,"iphone")||Po(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:qa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qa("linux"),versionRegexes:[]},{name:"Solaris",search:qa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Lm={browsers:te(Vf),oses:te(Ui)},Tu="Edge",Cc="Chromium",Uf="IE",id="Opera",nh="Firefox",Ic="Safari",Zd=()=>Hm({current:void 0,version:Kl.unknown()}),Hm=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isEdge:v(Tu),isChromium:v(Cc),isIE:v(Uf),isOpera:v(id),isFirefox:v(nh),isSafari:v(Ic)}},ld={unknown:Zd,nu:Hm,edge:te(Tu),chromium:te(Cc),ie:te(Uf),opera:te(id),firefox:te(nh),safari:te(Ic)},pa="Windows",jd="iOS",Wf="Android",zm="Linux",Eu="macOS",oh="Solaris",Vm="FreeBSD",Sc="ChromeOS",sh=()=>sl({current:void 0,version:Kl.unknown()}),sl=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isWindows:v(pa),isiOS:v(jd),isAndroid:v(Wf),isMacOS:v(Eu),isLinux:v(zm),isSolaris:v(oh),isFreeBSD:v(Vm),isChromeOS:v(Sc)}},ud={unknown:sh,nu:sl,windows:te(pa),ios:te(jd),android:te(Wf),linux:te(zm),macos:te(Eu),solaris:te(oh),freebsd:te(Vm),chromeos:te(Sc)},Wi={detect:(l,m,h)=>{const v=Lm.browsers(),S=Lm.oses(),O=m.bind(oe=>Oi(v,oe)).orThunk(()=>Im(v,l)).fold(ld.unknown,ld.nu),F=th(S,l).fold(ud.unknown,ud.nu),G=eh(F,O,l,h);return{browser:O,os:F,deviceType:G}}},rh=l=>window.matchMedia(l).matches;let ah=_i(()=>Wi.detect(navigator.userAgent,Q.from(navigator.userAgentData),rh));const Zf=()=>ah(),rl=(l,m)=>{const h=(G,oe)=>{if(!cn(oe)&&!oe.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+oe);const we=G.dom;qs(we)&&(we.style[l]=oe+"px")},v=G=>{const oe=m(G);if(oe<=0||oe===null){const we=Ea(G,l);return parseFloat(we)||0}return oe},S=v,O=(G,oe)=>Nt(oe,(we,je)=>{const zt=Ea(G,je),bn=zt===void 0?0:parseInt(zt,10);return isNaN(bn)?we:we+bn},0);return{set:h,get:v,getOuter:S,aggregate:O,max:(G,oe,we)=>{const je=O(G,we);return oe>je?oe-je:0}}},E=(l,m)=>oo(l).getOr(m),$=(l,m,h)=>E(Ea(l,m),h),j=(l,m,h,v)=>{const S=$(l,`padding-${h}`,0),O=$(l,`padding-${v}`,0),F=$(l,`border-${h}-width`,0),G=$(l,`border-${v}-width`,0);return m-S-O-F-G},Se=(l,m)=>{const h=l.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:j(l,v,"left","right")},He=l=>$(l,"height",l.dom.offsetHeight),wn=l=>$(l,"width",l.dom.offsetWidth),So=l=>Se(l,"content-box"),ns=rl("width",l=>l.dom.offsetWidth),jo=l=>ns.get(l),to=l=>ns.getOuter(l),os=So,Ar=wn,Ka=(l,m,h)=>{const v=l.cells,S=v.slice(0,m),O=v.slice(m),F=S.concat(h).concat(O);return P0(l,F)},ea=(l,m,h)=>Ka(l,m,[h]),Um=(l,m,h)=>{const v=l.cells;v[m]=h},P0=(l,m)=>ha(l.element,m,l.section,l.isNew),Fo=(l,m)=>{const h=l.cells,v=Ie(h,m);return ha(l.element,v,l.section,l.isNew)},Hr=(l,m)=>l.cells[m],Ps=(l,m)=>Hr(l,m).element,lc=l=>l.cells.length,Ha=l=>{const m=dn(l,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},jf=(l,m,h)=>{const v=Ie(l.cells,h);return ha(m(l.element),v,l.section,!0)},Gf="data-snooker-locked-cols",ch=l=>Zr(l,Gf).bind(m=>Q.from(m.match(/\d+/g))).map(m=>ae(m,he)),Xl=l=>{const m=Nt(Ha(l).rows,(v,S)=>(Ae(S.cells,(O,F)=>{O.isLocked&&(v[F]=!0)}),v),{}),h=kn(m,(v,S)=>parseInt(S,10));return se(h)},qf=(l,m)=>l+","+m,F0=(l,m,h)=>Q.from(l.access[qf(m,h)]),BC=(l,m,h)=>{const v=Kr(l,S=>h(m,S.element));return v.length>0?Q.some(v[0]):Q.none()},Kr=(l,m)=>{const h=xe(l.all,v=>v.cells);return ze(h,m)},ih=l=>{const m={};let h=0;return Ae(l.cells,v=>{const S=v.colspan;Ue(S,O=>{const F=h+O;m[F]=Ce(v.element,S,F)}),h+=S}),m},g1=l=>{const m={},h=[],S=z(l).map(on=>on.element).bind(La).bind(ch).getOr({});let O=0,F=0,G=0;const{pass:oe,fail:we}=dn(l,on=>on.section==="colgroup");Ae(we,on=>{const kt=[];Ae(on.cells,Cn=>{let At=0;for(;m[qf(G,At)]!==void 0;)At++;const Xn=Lt(S,At.toString()),_o=Ei(Cn.element,Cn.rowspan,Cn.colspan,G,At,Xn);for(let Vo=0;Vo<Cn.colspan;Vo++)for(let Or=0;Or<Cn.rowspan;Or++){const hc=G+Or,ua=At+Vo,Bi=qf(hc,ua);m[Bi]=_o,F=Math.max(F,ua+1)}kt.push(_o)}),O++,h.push(yc(on.element,kt,on.section)),G++});const{columns:je,colgroups:zt}=Y(oe).map(on=>{const kt=ih(on);return{colgroups:[Fe(on.element,ao(kt))],columns:kt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ac(O,F),access:m,all:h,columns:je,colgroups:zt}},Ho={fromTable:l=>{const m=Bm(l);return g1(m)},generate:g1,getAt:F0,findItem:BC,filterItems:Kr,justCells:l=>xe(l.all,m=>m.cells),justColumns:l=>ao(l.columns),hasColumns:l=>Z(l.columns).length>0,getColumnAt:(l,m)=>Q.from(l.columns[m])},uc=(l,m=he)=>{const h=l.grid,v=Ue(h.columns,Je),S=Ue(h.rows,Je);return Ie(v,O=>Jl(()=>xe(S,we=>Ho.getAt(l,we,O).filter(je=>je.column===O).toArray()),we=>we.colspan===1&&m(we.element),()=>Ho.getAt(l,0,O)))},Jl=(l,m,h)=>{const v=l();return R(v,m).orThunk(()=>Q.from(v[0]).orThunk(h)).map(F=>F.element)},_u=l=>{const m=l.grid,h=Ue(m.rows,Je),v=Ue(m.columns,Je);return Ie(h,S=>Jl(()=>xe(v,oe=>Ho.getAt(l,S,oe).filter(we=>we.row===S).fold(te([]),we=>[we])),oe=>oe.rowspan===1,()=>Ho.getAt(l,S,0)))},lh=(l,m)=>{if(m<0||m>=l.length-1)return Q.none();const h=l[m].fold(()=>{const S=ke(l.slice(0,m));return H(S,(O,F)=>O.map(G=>({value:G,delta:F+1})))},S=>Q.some({value:S,delta:0})),v=l[m+1].fold(()=>{const S=l.slice(m+1);return H(S,(O,F)=>O.map(G=>({value:G,delta:F+1})))},S=>Q.some({value:S,delta:1}));return h.bind(S=>v.map(O=>{const F=O.delta+S.delta;return Math.abs(O.value-S.value)/F}))},Wm=(l,m)=>h=>p1(h)==="rtl"?m:l,p1=l=>Ea(l,"direction")==="rtl"?"rtl":"ltr",b1=rl("height",l=>{const m=l.dom;return $r(l)?m.getBoundingClientRect().height:m.offsetHeight}),Zm=l=>b1.get(l),uh=l=>b1.getOuter(l),jm=He,Al=(l,m)=>({left:l,top:m,translate:(v,S)=>Al(l+v,m+S)}),Ol=Al,I0=l=>{const m=l.getBoundingClientRect();return Ol(m.left,m.top)},md=(l,m)=>l!==void 0?l:m!==void 0?m:0,Au=l=>{const m=l.dom.ownerDocument,h=m.body,v=m.defaultView,S=m.documentElement;if(h===l.dom)return Ol(h.offsetLeft,h.offsetTop);const O=md(v==null?void 0:v.pageYOffset,S.scrollTop),F=md(v==null?void 0:v.pageXOffset,S.scrollLeft),G=md(S.clientTop,h.clientTop),oe=md(S.clientLeft,h.clientLeft);return Yf(l).translate(F-oe,O-G)},Yf=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?Ol(v.offsetLeft,v.offsetTop):$r(l)?I0(m):Ol(0,0)},fd=(l,m)=>({row:l,y:m}),dh=(l,m)=>({col:l,x:m}),ba=l=>Au(l).left+to(l),Zi=l=>Au(l).left,Gm=(l,m)=>dh(l,Zi(m)),Bn=(l,m)=>dh(l,ba(m)),qm=l=>Au(l).top,al=(l,m)=>fd(l,qm(m)),mh=(l,m)=>fd(l,qm(m)+uh(m)),fh=(l,m,h)=>{if(h.length===0)return[];const v=Ie(h.slice(1),(O,F)=>O.map(G=>l(F,G))),S=h[h.length-1].map(O=>m(h.length-1,O));return v.concat([S])},PC=l=>-l,Ou={delta:Je,positions:l=>fh(al,mh,l),edge:qm},lo=Wm({delta:Je,edge:Zi,positions:l=>fh(Gm,Bn,l)},{delta:PC,edge:ba,positions:l=>fh(Bn,Gm,l)}),ei={delta:(l,m)=>lo(m).delta(l,m),positions:(l,m)=>lo(m).positions(l,m),edge:l=>lo(l).edge(l)},qt={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},v1=(()=>{const l="[0-9]+",h="[eE]"+("[+-]?"+l),v="\\.",S=G=>`(?:${G})?`,F=`[+-]?(?:${["Infinity",l+v+S(l)+S(h),v+l+S(h),l+S(h)].join("|")})`;return new RegExp(`^(${F})(.*)$`)})(),y1=(l,m)=>ge(m,h=>ge(qt[h],v=>l===v)),cl=(l,m)=>Q.from(v1.exec(l)).bind(v=>{const S=Number(v[1]),O=v[2];return y1(O,m)?Q.some({value:S,unit:O}):Q.none()}),ti=/(\d+(\.\d+)?)%/,Km=/(\d+(\.\d+)?)px|em/,Wr=bs("col"),_a=(l,m,h)=>{const v=Rt(l).getOrThunk(()=>Gr(ko(l)));return m(l)/h(v)*100},ni=(l,m)=>{Qo(l,"width",m+"px")},cr=(l,m)=>{Qo(l,"width",m+"%")},Du=(l,m)=>{Qo(l,"height",m+"px")},w1=l=>jm(l)+"px",Ql=(l,m,h,v)=>{const S=La(l).map(O=>{const F=h(O);return Math.floor(m/100*F)}).getOr(m);return v(l,S),S},gh=(l,m,h,v)=>{const S=parseFloat(l);return me(l,"%")&&Le(m)!=="table"?Ql(m,S,h,v):S},Ym=l=>{const m=w1(l);return m?gh(m,l,Zm,Du):Zm(l)},aa=(l,m,h)=>{const v=h(l),S=Lr(l,m);return v/S},hh=(l,m)=>Vi(l,m).orThunk(()=>Zr(l,m).map(h=>h+"px")),Xm=l=>hh(l,"width"),Ms=l=>hh(l,"height"),eu=l=>_a(l,jo,os),xc=l=>Wr(l)?jo(l):Ar(l),tu=l=>aa(l,"rowspan",Ym),gi=l=>Xm(l).bind(h=>cl(h,["fixed","relative","empty"])),C1=(l,m,h)=>{Qo(l,"width",m+h)},Xa=l=>jo(l)+"px",kc=l=>_a(l,jo,os)+"%",Ep=l=>Xm(l).exists(m=>ti.test(m)),Mt=l=>Xm(l).exists(m=>Km.test(m)),Di=l=>Xm(l).isNone(),L0=te(ti),ca=bs("col"),Xf=l=>Xm(l).getOrThunk(()=>xc(l)+"px"),gd=l=>Ms(l).getOrThunk(()=>tu(l)+"px"),va=l=>Ie(Ho.justColumns(l),m=>Q.from(m.element)),H0=l=>{const m=Zf().browser,h=m.isChromium()||m.isFirefox();return ca(l)?h:!0},il=(l,m,h,v,S,O)=>l.filter(v).fold(()=>O(lh(h,m)),F=>S(F)),nu=(l,m,h,v)=>{const S=uc(l),O=Ho.hasColumns(l)?va(l):S,F=[Q.some(ei.edge(m))].concat(Ie(ei.positions(S,m),oe=>oe.map(we=>we.x))),G=K(wc);return Ie(O,(oe,we)=>il(oe,we,F,G,je=>{if(H0(je))return h(je);{const zt=Qs(S[we],Je);return il(zt,we,F,G,bn=>v(Q.some(jo(bn))),v)}},v))},hi=l=>l.map(m=>m+"px").getOr(""),Ns=(l,m)=>nu(l,m,Xf,hi),ji=(l,m,h)=>nu(l,m,eu,v=>v.fold(()=>h.minCellWidth(),S=>S/h.pixelWidth()*100)),Gd=(l,m,h)=>nu(l,m,xc,v=>v.getOrThunk(h.minCellWidth)),Ja=(l,m,h,v,S)=>{const O=_u(l),F=[Q.some(h.edge(m))].concat(Ie(h.positions(O,m),G=>G.map(oe=>oe.y)));return Ie(O,(G,oe)=>il(G,oe,F,K(El),v,S))},Jf=(l,m,h)=>Ja(l,m,h,tu,v=>v.getOrThunk(Cu)),Qf=(l,m,h)=>Ja(l,m,h,gd,hi),eg=(l,m)=>()=>$r(l)?m(l):parseFloat(Vi(l,"width").getOr("0")),pi=l=>{const m=eg(l,jo),h=te(0);return{width:m,pixelWidth:m,getWidths:(S,O)=>Gd(S,l,O),getCellDelta:h,singleColumnWidth:te([0]),minCellWidth:h,setElementWidth:Ze,adjustTableWidth:Ze,isRelative:!0,label:"none"}},_p=l=>{const m=eg(l,oe=>parseFloat(kc(oe))),h=eg(l,jo);return{width:m,pixelWidth:h,getWidths:(oe,we)=>ji(oe,l,we),getCellDelta:oe=>oe/h()*100,singleColumnWidth:(oe,we)=>[100-oe],minCellWidth:()=>Gl()/h()*100,setElementWidth:cr,adjustTableWidth:oe=>{const we=m(),je=oe/100*we,zt=we+je;cr(l,zt)},isRelative:!0,label:"percent"}},Ke=l=>{const m=eg(l,jo);return{width:m,pixelWidth:m,getWidths:(F,G)=>Gd(F,l,G),getCellDelta:Je,singleColumnWidth:(F,G)=>[Math.max(Gl(),F+G)-F],minCellWidth:Gl,setElementWidth:ni,adjustTableWidth:F=>{const G=m()+F;ni(l,G)},isRelative:!1,label:"pixel"}},Aa=(l,m)=>L0().exec(m)!==null?_p(l):Ke(l),wr={getTableSize:l=>Xm(l).fold(()=>pi(l),h=>Aa(l,h)),pixelSize:Ke,percentageSize:_p,noneSize:pi},ll=(l,m,h,v,S,O)=>({minRow:l,minCol:m,maxRow:h,maxCol:v,allCells:S,selectedCells:O}),Oa=(l,m)=>{const h=l.grid.columns;let S=l.grid.rows,O=h,F=0,G=0;const oe=[],we=[];return Pe(l.access,je=>{if(oe.push(je),m(je)){we.push(je);const zt=je.row,bn=zt+je.rowspan-1,on=je.column,kt=on+je.colspan-1;zt<S?S=zt:bn>F&&(F=bn),on<O?O=on:kt>G&&(G=kt)}}),ll(S,O,F,G,oe,we)},Da=(l,m,h)=>{const v=l[h].element,S=q.fromTag("td");qo(S,q.fromTag("br")),(m?qo:fr)(v,S)},C=(l,m,h,v)=>{const S=ze(l,G=>G.section!=="colgroup"),O=m.grid.columns,F=m.grid.rows;for(let G=0;G<F;G++){let oe=!1;for(let we=0;we<O;we++)G<h.minRow||G>h.maxRow||we<h.minCol||we>h.maxCol||(Ho.getAt(m,G,we).filter(v).isNone()?Da(S,oe,G):oe=!0)}},k=(l,m,h,v)=>{Pe(h.columns,F=>{(F.column<m.minCol||F.column>m.maxCol)&&Mr(F.element)});const S=ze(ic(l,"tr"),F=>F.dom.childElementCount===0);Ae(S,Mr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ae(ic(l,"th,td"),F=>{Is(F,"rowspan"),Is(F,"colspan")}),Is(l,Gf),Is(l,"data-snooker-col-series"),wr.getTableSize(l).adjustTableWidth(v)},I=(l,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const S=Gd(m,l,h),O=Nt(S,(we,je)=>we+je,0),oe=Nt(S.slice(v.minCol,v.maxCol+1),(we,je)=>we+je,0)/O*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(oe)},V=(l,m)=>{const h=bn=>lt(bn.element,m),v=Ti(l),S=Bm(v),O=wr.getTableSize(l),F=Ho.generate(S),G=Oa(F,h),oe="th:not("+m+"),td:not("+m+")",we=Su(v,"th,td",bn=>lt(bn,oe));Ae(we,Mr),C(S,F,G,h);const je=Ho.fromTable(l),zt=I(l,je,O,G);return k(v,G,F,zt),v},Te="Â ",Kt=((l,m)=>{const h=O=>{if(!l(O))throw new Error("Can only get "+m+" value of a "+m+" node");return v(O).getOr("")},v=O=>l(O)?Q.from(O.dom.nodeValue):Q.none();return{get:h,getOption:v,set:(O,F)=>{if(!l(O))throw new Error("Can only set raw "+m+" value of a "+m+" node");O.dom.nodeValue=F}}})(Ts,"text"),Mn=l=>Kt.get(l),Lo=l=>Kt.getOption(l),Go=(l,m)=>Kt.set(l,m),ir=l=>Le(l)==="img"?1:Lo(l).fold(()=>yn(l).length,m=>m.length),Ws=l=>Lo(l).filter(m=>m.trim().length!==0||m.indexOf(Te)>-1).isSome(),er=["img","br"],oi=l=>Ws(l)||_(er,Le(l)),ul=l=>$n(l,oi),Ru=l=>hd(l,oi),hd=(l,m)=>{const h=v=>{const S=yn(v);for(let O=S.length-1;O>=0;O--){const F=S[O];if(m(F))return Q.some(F);const G=h(F);if(G.isSome())return G}return Q.none()};return h(l)},ph={scope:["row","col"]},pd=l=>()=>{const m=q.fromTag("td",l.dom);return qo(m,q.fromTag("br",l.dom)),m},Mu=l=>()=>q.fromTag("col",l.dom),Jm=l=>()=>q.fromTag("colgroup",l.dom),Nu=l=>()=>q.fromTag("tr",l.dom),bi=(l,m,h)=>{const v=Li(l,m);return Pe(h,(S,O)=>{S===null?Is(v,O):ys(v,O,S)}),v},bh=l=>l,Ap=(l,m,h)=>ul(l).map(S=>{const O=h.join(","),F=To(S,O,G=>In(G,l));return jt(F,(G,oe)=>{const we=Yc(oe);return Is(we,"contenteditable"),qo(G,we),we},m)}).getOr(m),z0=(l,m)=>{Pe(ph,(h,v)=>Zr(l,v).filter(S=>_(h,S)).each(S=>ys(m,v,S)))},Ao=(l,m,h)=>{const v=(F,G)=>{or(F.element,G),hr(G,"height"),F.colspan!==1&&hr(G,"width")},S=F=>{const G=q.fromTag(Le(F.element),m.dom),oe=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),we=oe.length>0?Ap(F.element,G,oe):G;return qo(we,q.fromTag("br")),v(F,G),z0(F.element,G),l(F.element,G),G};return{col:F=>{const G=q.fromTag(Le(F.element),m.dom);return v(F,G),l(F.element,G),G},colgroup:Jm(m),row:Nu(m),cell:S,replace:bi,colGap:Mu(m),gap:pd(m)}},tr=l=>({col:Mu(l),colgroup:Jm(l),row:Nu(l),cell:pd(l),replace:bh,colGap:Mu(l),gap:pd(l)}),za=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,yn(q.fromDom(v))},Lc=l=>Ie(l,q.fromDom),Dl=l=>q.fromDom(l.getBody()),Hc=l=>m=>In(m,Dl(l)),Ri=l=>{Is(l,"data-mce-style");const m=h=>Is(h,"data-mce-style");Ae(_l(l),m),Ae(cd(l),m),Ae(ol(l),m)},$u=l=>q.fromDom(l.selection.getStart()),Op=l=>l.getBoundingClientRect().width,qd=l=>l.getBoundingClientRect().height,Qm=(l,m)=>{const h=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return Q.from(h).filter(Vn)},mT=l=>/^(\d+(\.\d+)?)%$/.test(l),ef=l=>/^(\d+(\.\d+)?)px$/.test(l),fT=(l,m)=>{const h=m.column,v=m.column+m.colspan-1,S=m.row,O=m.row+m.rowspan-1;return h<=l.finishCol&&v>=l.startCol&&S<=l.finishRow&&O>=l.startRow},tg=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,Dp=(l,m)=>{let h=!0;const v=yt(tg,m);for(let S=m.startRow;S<=m.finishRow;S++)for(let O=m.startCol;O<=m.finishCol;O++)h=h&&Ho.getAt(l,S,O).exists(v);return h?Q.some(m):Q.none()},Rp=(l,m)=>X(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),ya=(l,m,h)=>{const v=Ho.findItem(l,m,In),S=Ho.findItem(l,h,In);return v.bind(O=>S.map(F=>Rp(O,F)))},Kd=(l,m,h)=>ya(l,m,h).bind(v=>Dp(l,v)),gT=(l,m,h,v)=>Ho.findItem(l,m,In).bind(S=>{const O=h>0?S.row+S.rowspan-1:S.row,F=v>0?S.column+S.colspan-1:S.column;return Ho.getAt(l,O+h,F+v).map(oe=>oe.element)}),x1=(l,m,h)=>ya(l,m,h).map(v=>{const S=Ho.filterItems(l,yt(fT,v));return Ie(S,O=>O.element)}),ta=(l,m)=>{const h=(v,S)=>is(S,v);return Ho.findItem(l,m,h).map(v=>v.element)},FC=(l,m,h)=>La(l).bind(v=>{const S=ou(v);return gT(S,l,m,h)}),Yd=(l,m,h)=>{const v=ou(l);return x1(v,m,h)},Mp=(l,m,h,v,S)=>{const O=ou(l),F=In(l,h)?Q.some(m):ta(O,m),G=In(l,S)?Q.some(v):ta(O,v);return F.bind(oe=>G.bind(we=>x1(O,oe,we)))},V0=(l,m,h)=>{const v=ou(l);return Kd(v,m,h)},ou=Ho.fromTable;var dl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],tf=()=>{const l=we=>q.fromDom(we.dom.cloneNode(!1)),m=we=>ar(we).dom,h=we=>Kn(we)?Le(we)==="body"?!0:_(dl,Le(we)):!1,v=we=>Kn(we)?_(["br","img","hr","input"],Le(we)):!1,S=we=>Kn(we)&&mr(we,"contenteditable")==="false",O=(we,je)=>we.dom.compareDocumentPosition(je.dom),F=(we,je)=>{const zt=fa(we);cs(je,zt)},G=we=>{const je=Le(we);return _(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],je)},oe=we=>Kn(we)?Zr(we,"lang"):Q.none();return{up:te({selector:Mo,closest:gr,predicate:J,all:an}),down:te({selector:sr,predicate:Qc}),styles:te({get:Ea,getRaw:Vi,set:Qo,remove:hr}),attrs:te({get:mr,set:ys,remove:Is,copyTo:F}),insert:te({before:Co,after:Os,afterAll:Cs,append:qo,appendAll:xs,prepend:fr,wrap:ls}),remove:te({unwrap:Bc,remove:Mr}),create:te({nu:q.fromTag,clone:l,text:q.fromText}),query:te({comparePosition:O,prevSibling:hn,nextSibling:Pn}),property:te({children:yn,name:Le,parent:be,document:m,isText:Ts,isComment:Jt,isElement:Kn,isSpecial:G,getLanguage:oe,getText:Mn,setText:Go,isBoundary:h,isEmptyTag:v,isNonEditable:S}),eq:In,is:ts}};const vh=(l,m,h,v)=>{const S=h[0],O=h.slice(1);return v(l,m,S,O)},k1=(l,m,h)=>h.length>0?vh(l,m,h,Np):Q.none(),Np=(l,m,h,v)=>{const S=m(l,h);return jt(v,(O,F)=>{const G=m(l,F);return ng(l,O,G)},S)},ng=(l,m,h)=>m.bind(v=>h.filter(yt(l.eq,v))),T1=(l,m)=>yt(l.eq,m),IC=(l,m,h,v=St)=>{const S=[m].concat(l.up().all(m)),O=[h].concat(l.up().all(h)),F=je=>qn(je,v).fold(()=>je,bn=>je.slice(0,bn+1)),G=F(S),oe=F(O),we=R(G,je=>ge(oe,T1(l,je)));return{firstpath:G,secondpath:oe,shared:we}},hT=k1,E1=IC,$p=tf(),bd=(l,m)=>hT($p,(h,v)=>l(v),m),yh=(l,m,h)=>E1($p,l,m,h),Xd=l=>Mo(l,"table"),_1=(l,m,h)=>{const v=S=>O=>h!==void 0&&h(O)||In(O,S);return In(l,m)?Q.some({boxes:Q.some([l]),start:l,finish:m}):Xd(l).bind(S=>Xd(m).bind(O=>{if(In(S,O))return Q.some({boxes:Yd(S,l,m),start:l,finish:m});if(is(S,O)){const F=To(m,"td,th",v(S)),G=F.length>0?F[F.length-1]:m;return Q.some({boxes:Mp(S,l,S,m,O),start:l,finish:G})}else if(is(O,S)){const F=To(l,"td,th",v(O)),G=F.length>0?F[F.length-1]:l;return Q.some({boxes:Mp(O,l,S,m,O),start:l,finish:G})}else return yh(l,m).shared.bind(F=>gr(F,"table",h).bind(G=>{const oe=To(m,"td,th",v(G)),we=oe.length>0?oe[oe.length-1]:m,je=To(l,"td,th",v(G)),zt=je.length>0?je[je.length-1]:l;return Q.some({boxes:Mp(G,l,S,m,O),start:zt,finish:we})}))}))},Bp=(l,m)=>{const h=sr(l,m);return h.length>0?Q.some(h):Q.none()},U0=(l,m)=>R(l,h=>lt(h,m)),A1=(l,m,h)=>Ir(l,m).bind(v=>Ir(l,h).bind(S=>bd(Xd,[v,S]).map(O=>({first:v,last:S,table:O})))),LC=(l,m)=>Mo(l,"table").bind(h=>Ir(h,m).bind(v=>_1(v,l).bind(S=>S.boxes.map(O=>({boxes:O,start:S.start,finish:S.finish}))))),W0=(l,m,h,v,S)=>U0(l,S).bind(O=>FC(O,m,h).bind(F=>LC(F,v))),O1=(l,m)=>Bp(l,m),Vs=(l,m,h)=>A1(l,m,h).bind(v=>{const S=oe=>In(l,oe),O="thead,tfoot,tbody,table",F=Mo(v.first,O,S),G=Mo(v.last,O,S);return F.bind(oe=>G.bind(we=>In(oe,we)?V0(v.table,v.first,v.last):Q.none()))}),yo=Je,Jd=l=>{const m=(v,S)=>Zr(v,S).exists(O=>parseInt(O,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&We(l,h)?Q.some(l):Q.none()},Z0=(l,m,h)=>m.length<=1?Q.none():Vs(l,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Qd="data-mce-selected",D1="td["+Qd+"],th["+Qd+"]",HC="["+Qd+"]",lr="data-mce-first-selected",zC="td["+lr+"],th["+lr+"]",em="data-mce-last-selected",VC="td["+em+"],th["+em+"]",Zt=HC,vd={selected:Qd,selectedSelector:D1,firstSelected:lr,firstSelectedSelector:zC,lastSelected:em,lastSelectedSelector:VC},wh=(l,m,h)=>({element:h,mergable:Z0(m,l,vd),unmergable:Jd(l),selection:yo(l)}),Pp=(l,m,h)=>({element:l,clipboard:m,generators:h}),pT=(l,m,h,v)=>({selection:yo(l),clipboard:h,generators:v}),og=l=>La(l).bind(m=>O1(m,vd.firstSelectedSelector)).fold(te(l),m=>m[0]),Ch=l=>(m,h)=>{const v=Le(m),S=v==="col"||v==="colgroup"?og(m):m;return gr(S,l,h)},Sh=Ch("th,td,caption"),UC=Ch("th,td"),Qa=l=>Lc(l.model.table.getSelectedCells()),zr=l=>ze(Qa(l),m=>lt(m,vd.selectedSelector)),Rl=l=>La(l[0]).map(m=>{const h=V(m,Zt);return Ri(h),[h]}),bT=(l,m)=>Ie(m,h=>l.selection.serializer.serialize(h.dom,{})).join(""),ml=l=>Ie(l,m=>m.dom.innerText).join(""),si=(l,m)=>{l.on("BeforeGetContent",h=>{const v=S=>{h.preventDefault(),Rl(S).each(O=>{h.content=h.format==="text"?ml(O):bT(l,O)})};if(h.selection===!0){const S=zr(l);S.length>=1&&v(S)}}),l.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=Qa(l);z(v).each(S=>{La(S).each(O=>{const F=ze(za(h.content),oe=>Le(oe)!=="meta"),G=bs("table");if(F.length===1&&G(F[0])){h.preventDefault();const oe=q.fromDom(l.getDoc()),we=tr(oe),je=Pp(S,F[0],we);m.pasteCells(O,je).each(()=>{l.focus()})}})})}})},tm=(l,m)=>({element:l,offset:m}),nf=(l,m,h)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?h(m).bind(v=>nf(l,v,h).orThunk(()=>Q.some(v))):Q.none(),WC=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Tc=(l,m)=>{const h=nf(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(h))return tm(h,WC(l,h));const v=l.property().children(h);return v.length>0?Tc(l,v[v.length-1]):tm(h,WC(l,h))},ZC=Tc,jC=tf(),of=l=>ZC(jC,l),j0=(l,m)=>{wc(l)||gi(l).each(v=>{const S=v.value/2;C1(l,S,v.unit),C1(m,S,v.unit)})},Bu=l=>Ie(l,te(0)),R1=(l,m,h,v,S)=>S(l.slice(0,m)).concat(v).concat(S(l.slice(h))),G0=l=>(m,h,v,S)=>{if(l(v)){const O=Math.max(S,m[h]-Math.abs(v)),F=Math.abs(O-m[h]);return v>=0?F:-F}else return v},Yn=G0(l=>l<0),vT=G0(he),GC=()=>{const l=(G,oe,we,je,zt)=>{const bn=Yn(G,oe,je,zt);return R1(G,oe,we+1,[bn,0],Bu)},m=(G,oe,we,je)=>{const zt=(100+we)/100,bn=Math.max(je,(G[oe]+we)/zt);return Ie(G,(on,kt)=>(kt===oe?bn:on/zt)-on)},h=(G,oe,we,je,zt,bn)=>bn?m(G,oe,je,zt):l(G,oe,we,je,zt);return{resizeTable:(G,oe)=>G(oe),clampTableDelta:Yn,calcLeftEdgeDeltas:h,calcMiddleDeltas:(G,oe,we,je,zt,bn,on)=>h(G,we,je,zt,bn,on),calcRightEdgeDeltas:(G,oe,we,je,zt,bn)=>{if(bn)return m(G,we,je,zt);{const on=Yn(G,we,je,zt);return Bu(G.slice(0,we)).concat([on])}},calcRedestributedWidths:(G,oe,we,je)=>{if(je){const bn=(oe+we)/oe,on=Ie(G,kt=>kt/bn);return{delta:bn*100-100,newSizes:on}}else return{delta:we,newSizes:G}}}},M1=()=>{const l=(F,G,oe,we,je)=>{const zt=we>=0?oe:G,bn=vT(F,zt,we,je);return R1(F,G,oe+1,[bn,-bn],Bu)};return{resizeTable:(F,G,oe)=>{oe&&F(G)},clampTableDelta:(F,G,oe,we,je)=>{if(je){if(oe>=0)return oe;{const zt=Nt(F,(bn,on)=>bn+on-we,0);return Math.max(-zt,oe)}}else return Yn(F,G,oe,we)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(F,G,oe,we,je,zt)=>l(F,oe,we,je,zt),calcRightEdgeDeltas:(F,G,oe,we,je,zt)=>{if(zt)return Bu(F);{const bn=we/F.length;return Ie(F,te(bn))}},calcRedestributedWidths:(F,G,oe,we)=>({delta:0,newSizes:F})}},xh=l=>Ho.fromTable(l).grid,N1=bs("th"),kh=l=>We(l,m=>N1(m.element)),sg=(l,m)=>l&&m?"sectionCells":l?"section":"cells",yd=l=>{const m=l.section==="thead",h=Pt(q0(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:sg(m,h)}:{type:"body"}},q0=l=>{const m=ze(l,h=>N1(h.element));return m.length===0?Q.some("td"):m.length===l.length?Q.some("th"):Q.none()},sf=l=>{const m=Ie(l,S=>yd(S).type),h=_(m,"header"),v=_(m,"footer");if(!h&&!v)return Q.some("body");{const S=_(m,"body");return h&&!S&&!v?Q.some("header"):!h&&!S&&v?Q.some("footer"):Q.none()}},yT=l=>H(l.all,m=>{const h=yd(m);return h.type==="header"?Q.from(h.subType):Q.none()}),nm=(l,m,h)=>Js(h(l.element,m),!0,l.isLocked),rg=(l,m)=>l.section!==m?ha(l.element,l.cells,m,l.isNew):l,$1=()=>({transformRow:rg,transformCell:(l,m,h)=>{const v=h(l.element,m),S=Le(v)!=="td"?zs(v,"td"):v;return Js(S,l.isNew,l.isLocked)}}),B1=()=>({transformRow:rg,transformCell:nm}),Fp=()=>({transformRow:(l,m)=>rg(l,m==="thead"?"tbody":m),transformCell:nm}),Pu={getTableSectionType:(l,m)=>{const h=Ho.fromTable(l);switch(yT(h).getOr(m)){case"section":return $1();case"sectionCells":return B1();case"cells":return Fp()}},section:$1,sectionCells:B1,cells:Fp,fallback:()=>({transformRow:Je,transformCell:nm})},Th=l=>gr(l,"[contenteditable]"),su=(l,m=!1)=>$r(l)?l.dom.isContentEditable:Th(l).fold(te(m),h=>Mi(h)==="true"),Mi=l=>l.dom.contentEditable,Lp=(l,m,h,v)=>{h===v?Is(l,m):ys(l,m,h)},br=(l,m,h)=>{Y(us(l,m)).fold(()=>fr(l,h),v=>Os(v,h))},CT=(l,m)=>{const h=zn(l,m).getOrThunk(()=>{const v=q.fromTag(m,ko(l).dom);return m==="thead"?br(l,"caption,colgroup",v):m==="colgroup"?br(l,"caption",v):qo(l,v),v});return Fr(h),h},qC=(l,m)=>{const h=[],v=[],S=on=>Ie(on,kt=>{kt.isNew&&h.push(kt.element);const Cn=kt.element;return Fr(Cn),Ae(kt.cells,At=>{At.isNew&&v.push(At.element),Lp(At.element,"colspan",At.colspan,1),Lp(At.element,"rowspan",At.rowspan,1),qo(Cn,At.element)}),Cn}),O=on=>xe(on,kt=>Ie(kt.cells,Cn=>(Lp(Cn.element,"span",Cn.colspan,1),Cn.element))),F=(on,kt)=>{const Cn=CT(l,kt),Xn=(kt==="colgroup"?O:S)(on);xs(Cn,Xn)},G=on=>{zn(l,on).each(Mr)},oe=(on,kt)=>{on.length>0?F(on,kt):G(kt)},we=[],je=[],zt=[],bn=[];return Ae(m,on=>{switch(on.section){case"thead":we.push(on);break;case"tbody":je.push(on);break;case"tfoot":zt.push(on);break;case"colgroup":bn.push(on);break}}),oe(bn,"colgroup"),oe(we,"thead"),oe(je,"tbody"),oe(zt,"tfoot"),{newRows:h,newCells:v}},ru=l=>Ie(l,m=>{const h=Yc(m.element);return Ae(m.cells,v=>{const S=Ti(v.element);Lp(S,"colspan",v.colspan,1),Lp(S,"rowspan",v.rowspan,1),qo(h,S)}),h}),P1=(l,m)=>Ie(l,h=>Hr(h,m)),KC=(l,m)=>l[m],wd=(l,m)=>{if(l.length===0)return 0;const h=l[0];return qn(l,S=>!m(h.element,S.element)).getOr(l.length)},dc=(l,m,h,v)=>{const S=KC(l,m),O=S.section==="colgroup",F=wd(S.cells.slice(h),v),G=O?1:wd(P1(l.slice(m),h),v);return{colspan:F,rowspan:G}},ST=(l,m)=>{const h=Ie(l,S=>Ie(S.cells,St)),v=(S,O,F,G)=>{for(let oe=S;oe<S+F;oe++)for(let we=O;we<O+G;we++)h[oe][we]=!0};return Ie(l,(S,O)=>{const F=xe(S.cells,(G,oe)=>{if(h[O][oe]===!1){const we=dc(l,O,oe,m);return v(O,oe,we.rowspan,we.colspan),[sa(G.element,we.rowspan,we.colspan,G.isNew)]}else return[]});return Hi(S.element,F,S.section,S.isNew)})},Hp=(l,m,h)=>{const v=[];Ae(l.colgroups,S=>{const O=[];for(let F=0;F<l.grid.columns;F++){const G=Ho.getColumnAt(l,F).map(oe=>Js(oe.element,h,!1)).getOrThunk(()=>Js(m.colGap(),!0,!1));O.push(G)}v.push(ha(S.element,O,"colgroup",h))});for(let S=0;S<l.grid.rows;S++){const O=[];for(let oe=0;oe<l.grid.columns;oe++){const we=Ho.getAt(l,S,oe).map(je=>Js(je.element,h,je.isLocked)).getOrThunk(()=>Js(m.gap(),!0,!1));O.push(we)}const F=l.all[S],G=ha(F.element,O,F.section,h);v.push(G)}return v},ag=(l,m)=>Hp(l,m,!1),Eh=l=>ST(l,In),F1=(l,m)=>H(l.all,h=>R(h.cells,v=>In(m,v.element))),YC=(l,m,h)=>{const v=Ie(m.selection,O=>Fc(O).bind(F=>F1(l,F)).filter(h)),S=ra(v);return Ur(S.length>0,S)},zc=(l,m,h,v,S)=>(O,F,G,oe)=>{const we=Ho.fromTable(O),je=Q.from(oe==null?void 0:oe.section).getOrThunk(Pu.fallback);return m(we,F).map(bn=>{const on=ag(we,G),kt=l(on,bn,In,S(G),je),Cn=Xl(kt.grid),At=Eh(kt.grid);return{info:bn,grid:At,cursor:kt.cursor,lockedColumns:Cn}}).bind(bn=>{const on=qC(O,bn.grid),kt=Q.from(oe==null?void 0:oe.sizing).getOrThunk(()=>wr.getTableSize(O)),Cn=Q.from(oe==null?void 0:oe.resize).getOrThunk(M1);return h(O,bn.grid,bn.info,{sizing:kt,resize:Cn,section:je}),v(O),Is(O,Gf),bn.lockedColumns.length>0&&ys(O,Gf,bn.lockedColumns.join(",")),Q.some({cursor:bn.cursor,newRows:on.newRows,newCells:on.newCells})})},lO=(l,m)=>Fc(m.element).bind(h=>F1(l,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),XC=(l,m)=>YC(l,m,he).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),uO=(l,m)=>m.mergable,dO=(l,m)=>m.unmergable,fl=(l,m)=>YC(l,m,he),Vc=(l,m)=>YC(l,m,h=>!h.isLocked),vi=(l,m)=>F1(l,m).exists(h=>!h.isLocked),JC=(l,m)=>We(m,h=>vi(l,h)),xT=(l,m)=>uO(l,m).filter(h=>JC(l,h.cells)),rf=(l,m)=>dO(l,m).filter(h=>JC(l,h)),_h=(l,m,h,v)=>{const S=Ha(l).rows;if(S.length===0)return l;for(let O=m.startRow;O<=m.finishRow;O++)for(let F=m.startCol;F<=m.finishCol;F++){const G=S[O],oe=Hr(G,F).isLocked;Um(G,F,Js(v(),!1,oe))}return l},I1=(l,m,h,v)=>{const S=Ha(l).rows;let O=!0;for(let F=0;F<S.length;F++)for(let G=0;G<lc(S[0]);G++){const oe=S[F],we=Hr(oe,G),je=we.element,zt=h(je,m);zt&&!O?Um(oe,G,Js(v(),!0,we.isLocked)):zt&&(O=!1)}return l},zp=(l,m)=>Nt(l,(h,v)=>ge(h,S=>m(S.element,v.element))?h:h.concat([v]),[]),Fu=(l,m,h,v)=>(m>0&&m<l[0].cells.length&&Ae(l,S=>{const O=S.cells[m-1];let F=0;const G=v();for(;S.cells.length>m+F&&h(O.element,S.cells[m+F].element);)Um(S,m+F,Js(G,!0,S.cells[m+F].isLocked)),F++}),l),cg=(l,m,h,v)=>{const S=Ha(l).rows;if(m>0&&m<S.length){const O=S[m-1].cells,F=zp(O,h);Ae(F,G=>{let oe=Q.none();for(let we=m;we<S.length;we++)for(let je=0;je<lc(S[0]);je++){const zt=S[we],bn=Hr(zt,je);h(bn.element,G.element)&&(oe.isNone()&&(oe=Q.some(v())),oe.each(kt=>{Um(zt,je,Js(kt,!0,bn.isLocked))}))}})}return l},Ah=l=>{const m=O=>O(l),h=te(l),v=()=>S,S={tag:!0,inner:l,fold:(O,F)=>F(l),isValue:he,isError:St,map:O=>Vp.value(O(l)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:O=>{O(l)},toOptional:()=>Q.some(l)};return S},Oh=l=>{const m=()=>h,h={tag:!1,inner:l,fold:(v,S)=>v(l),isValue:St,isError:he,map:m,mapError:v=>Vp.error(v(l)),bind:m,exists:St,forall:he,getOr:Je,or:Je,getOrThunk:En,orThunk:En,getOrDie:xt(String(l)),each:Ze,toOptional:Q.none};return h},Vp={value:Ah,error:Oh,fromOption:(l,m)=>l.fold(()=>Oh(m),Ah)},ia=(l,m,h)=>{if(l.row>=m.length||l.column>lc(m[0]))return Vp.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),S=v[0].cells.slice(l.column),O=lc(h[0]),F=h.length;return Vp.value({rowDelta:v.length-F,colDelta:S.length-O})},Gi=(l,m)=>{const h=lc(l[0]),v=lc(m[0]);return{rowDelta:0,colDelta:h-v}},om=(l,m)=>{const h=l.length,v=m.length;return{rowDelta:h-v,colDelta:0}},gl=(l,m,h,v)=>{const S=m.section==="colgroup"?h.col:h.cell;return Ue(l,O=>Js(S(),!0,v(O)))},QC=(l,m,h,v)=>{const S=l[l.length-1];return l.concat(Ue(m,()=>{const O=S.section==="colgroup"?h.colgroup:h.row,F=jf(S,O,Je),G=gl(F.cells.length,F,h,oe=>Ye(v,oe.toString()));return P0(F,G)}))},kT=(l,m,h,v)=>Ie(l,S=>{const O=gl(m,S,h,St);return Ka(S,v,O)}),TT=(l,m,h)=>Ie(l,v=>Nt(h,(S,O)=>{const F=gl(1,v,m,he)[0];return ea(S,O,F)},v)),hl=(l,m,h)=>{const v=m.colDelta<0?kT:Je,S=m.rowDelta<0?QC:Je,O=Xl(l),F=lc(l[0]),G=ge(O,je=>je===F-1),oe=v(l,Math.abs(m.colDelta),h,G?F-1:F),we=Xl(oe);return S(oe,Math.abs(m.rowDelta),h,ae(we,he))},af=(l,m,h,v)=>{const S=Hr(l[m],h),O=yt(v,S.element),F=l[m];return l.length>1&&lc(F)>1&&(h>0&&O(Ps(F,h-1))||h<F.cells.length-1&&O(Ps(F,h+1))||m>0&&O(Ps(l[m-1],h))||m<l.length-1&&O(Ps(l[m+1],h)))},e2=(l,m,h,v,S,O)=>{const F=l.row,G=l.column,oe=h.length,we=lc(h[0]),je=F+oe,zt=G+we+O.length,bn=ae(O,he);for(let on=F;on<je;on++){let kt=0;for(let Cn=G;Cn<zt;Cn++){if(bn[Cn]){kt++;continue}af(m,on,Cn,S)&&I1(m,Ps(m[on],Cn),S,v.cell);const At=Cn-G-kt,Xn=Hr(h[on-F],At),_o=Xn.element,Vo=v.replace(_o);Um(m[on],Cn,Js(Vo,!0,Xn.isLocked))}}return m},t2=(l,m,h)=>{const v=lc(m[0]),S=Ha(m).cols.length+l.row,O=Ue(v-l.column,G=>G+l.column),F=R(O,G=>We(h,oe=>oe!==G)).getOr(v-1);return{row:S,column:F}},K0=(l,m,h)=>ze(h,v=>v>=l.column&&v<=lc(m[0])+l.column),Y0=(l,m,h,v,S)=>{const O=Xl(m),F=t2(l,m,O),G=Ha(h).rows,oe=K0(F,G,O);return ia(F,m,G).map(je=>{const zt={...je,colDelta:je.colDelta-oe.length},bn=hl(m,zt,v),on=Xl(bn),kt=K0(F,G,on);return e2(F,bn,G,v,S,kt)})},ig=(l,m,h,v,S)=>{Fu(m,l,S,v.cell);const O=om(h,m),F=hl(h,O,v),G=om(m,F),oe=hl(m,G,v);return Ie(oe,(we,je)=>Ka(we,l,F[je].cells))},X0=(l,m,h,v,S)=>{cg(m,l,S,v.cell);const O=Xl(m),F=Gi(m,h),G={...F,colDelta:F.colDelta-O.length},oe=hl(m,G,v),{cols:we,rows:je}=Ha(oe),zt=Xl(oe),bn=Gi(h,m),on={...bn,colDelta:bn.colDelta+zt.length},kt=TT(h,v,zt),Cn=hl(kt,on,v);return[...we,...je.slice(0,l),...Cn,...je.slice(l,je.length)]},n2=(l,m,h,v)=>jf(l,S=>v(S,h),m),o2=(l,m,h,v,S)=>{const{rows:O,cols:F}=Ha(l),G=O.slice(0,m),oe=O.slice(m),we=n2(O[h],(je,zt)=>m>0&&m<O.length&&v(Ps(O[m-1],zt),Ps(O[m],zt))?Hr(O[m],zt):Js(S(je.element,v),!0,je.isLocked),v,S);return[...F,...G,we,...oe]},s2=(l,m,h,v,S,O,F)=>{if(h==="colgroup"||!v){const G=Hr(l,S);return Js(F(G.element,O),!0,!1)}else return Hr(l,m)},cf=(l,m,h,v,S)=>Ie(l,O=>{const F=m>0&&m<lc(O)&&v(Ps(O,m-1),Ps(O,m)),G=s2(O,m,O.section,F,h,v,S);return ea(O,m,G)}),Dh=(l,m)=>xe(l,h=>{const v=h.cells,S=jt(m,(O,F)=>F>=0&&F<O.length?O.slice(0,F).concat(O.slice(F+1)):O,v);return S.length>0?[ha(h.element,S,h.section,h.isNew)]:[]}),lg=(l,m,h)=>{const{rows:v,cols:S}=Ha(l);return[...S,...v.slice(0,m),...v.slice(h+1)]},r2=(l,m,h,v)=>Ps(l[m],h)!==void 0&&m>0&&v(Ps(l[m-1],h),Ps(l[m],h)),ET=(l,m,h)=>m>0&&h(Ps(l,m-1),Ps(l,m)),J0=(l,m,h,v)=>r2(l,m,h,v)||ET(l[m],h,v),Up=(l,m)=>We(m,Je)&&kh(l.cells)?he:(v,S,O)=>!(Le(v.element)==="th"&&m[O]),Wp=(l,m)=>We(m,Je)&&kh(l)?he:(v,S,O)=>!(Le(v.element)==="th"&&m[S]),a2=(l,m,h,v)=>{const S=F=>F==="row"?El(m):wc(m),O=F=>S(F)?`${F}group`:F;return l?N1(m)?O(h):null:v&&N1(m)?O(h==="row"?"col":"row"):null},_T=(l,m)=>(h,v,S)=>Q.some(a2(l,h.element,"col",m[S])),c2=(l,m)=>(h,v)=>Q.some(a2(l,h.element,"row",m[v])),Va=(l,m,h)=>Js(h(l.element,m),!0,l.isLocked),L1=(l,m,h,v,S,O,F)=>{const G=oe=>ge(m,we=>h(oe.element,we.element));return Ie(l,(oe,we)=>Fo(oe,(je,zt)=>{if(G(je)){const bn=F(je,we,zt)?S(je,h,v):je;return O(bn,we,zt).each(on=>{go(bn.element,{scope:Q.from(on)})}),bn}else return je}))},Zp=(l,m,h)=>xe(l,(v,S)=>J0(l,S,m,h)?[]:[Hr(v,m)]),lf=(l,m,h)=>{const v=l[m];return xe(v.cells,(S,O)=>J0(l,m,O,h)?[]:[S])},H1=(l,m,h,v,S)=>{const O=Ha(l).rows,F=xe(m,je=>Zp(O,je,v)),G=Ie(O,je=>kh(je.cells)),oe=Wp(F,G),we=c2(h,G);return L1(l,F,v,S,Va,we,oe)},yi=(l,m,h,v,S,O,F)=>{const{cols:G,rows:oe}=Ha(l),we=oe[m[0]],je=xe(m,At=>lf(oe,At,S)),zt=Ie(we.cells,(At,Xn)=>kh(Zp(oe,Xn,S))),bn=[...oe];Ae(m,At=>{bn[At]=F.transformRow(oe[At],h)});const on=[...G,...bn],kt=Up(we,zt),Cn=_T(v,zt);return L1(on,je,S,O,F.transformCell,Cn,kt)},pl=(l,m,h,v)=>{const S=Ha(l).rows,O=Ie(m,F=>Hr(S[F.row],F.column));return L1(l,O,h,v,Va,Q.none,he)},uf={generate:l=>{if(!Et(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],h={};return Ae(l,(v,S)=>{const O=Z(v);if(O.length!==1)throw new Error("one and only one name per case");const F=O[0],G=v[F];if(h[F]!==void 0)throw new Error("duplicate key detected:"+F);if(F==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Et(G))throw new Error("case arguments must be an array");m.push(F),h[F]=(...oe)=>{const we=oe.length;if(we!==G.length)throw new Error("Wrong number of arguments to case "+F+". Expected "+G.length+" ("+G+"), got "+we);return{fold:(...zt)=>{if(zt.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+zt.length);return zt[S].apply(null,oe)},match:zt=>{const bn=Z(zt);if(m.length!==bn.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+bn.join(","));if(!We(m,kt=>_(bn,kt)))throw new Error("Not all branches were specified when using match. Specified: "+bn.join(", ")+`
Required: `+m.join(", "));return zt[F].apply(null,oe)},log:zt=>{console.log(zt,{constructors:m,constructor:F,params:oe})}}}}),h}},Rh={...uf.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},l2=(l,m)=>l.length===0?Rh.none():l.length===1?Rh.only(0):m===0?Rh.left(0,1):m===l.length-1?Rh.right(m-1,m):m>0&&m<l.length-1?Rh.middle(m-1,m,m+1):Rh.none(),u2=(l,m,h,v,S)=>{const O=l.slice(0),F=l2(l,m),G=te(Ie(O,te(0))),oe=bn=>v.singleColumnWidth(O[bn],h),we=(bn,on)=>S.calcLeftEdgeDeltas(O,bn,on,h,v.minCellWidth(),v.isRelative),je=(bn,on,kt)=>S.calcMiddleDeltas(O,bn,on,kt,h,v.minCellWidth(),v.isRelative),zt=(bn,on)=>S.calcRightEdgeDeltas(O,bn,on,h,v.minCellWidth(),v.isRelative);return F.fold(G,oe,we,je,zt)},sm=(l,m,h)=>{let v=0;for(let S=l;S<m;S++)v+=h[S]!==void 0?h[S]:0;return v},OT=(l,m)=>{const h=Ho.justCells(l);return Ie(h,v=>{const S=sm(v.column,v.column+v.colspan,m);return{element:v.element,width:S,colspan:v.colspan}})},la=(l,m)=>{const h=Ho.justColumns(l);return Ie(h,(v,S)=>({element:v.element,width:m[S],colspan:v.colspan}))},Ml=(l,m)=>{const h=Ho.justCells(l);return Ie(h,v=>{const S=sm(v.row,v.row+v.rowspan,m);return{element:v.element,height:S,rowspan:v.rowspan}})},Mh=(l,m)=>Ie(l.all,(h,v)=>({element:h.element,height:m[v]})),z1=l=>jt(l,(m,h)=>m+h,0),V1=(l,m)=>Ho.hasColumns(l)?la(l,m):OT(l,m),jp=(l,m,h)=>{const v=V1(l,m);Ae(v,S=>{h.setElementWidth(S.element,S.width)})},rm=(l,m,h,v,S)=>{const O=Ho.fromTable(l),F=S.getCellDelta(m),G=S.getWidths(O,S),oe=h===O.grid.columns-1,we=v.clampTableDelta(G,h,F,S.minCellWidth(),oe),je=u2(G,h,we,S,v),zt=Ie(je,(bn,on)=>bn+G[on]);jp(O,zt,S),v.resizeTable(S.adjustTableWidth,we,oe)},U1=(l,m,h,v)=>{const S=Ho.fromTable(l),O=Jf(S,l,v),F=Ie(O,(je,zt)=>h===zt?Math.max(m+je,Cu()):je),G=Ml(S,F),oe=Mh(S,F);Ae(oe,je=>{Du(je.element,je.height)}),Ae(G,je=>{Du(je.element,je.height)});const we=z1(F);Du(l,we)},Nh=(l,m,h,v,S)=>{const O=Ho.generate(m),F=v.getWidths(O,v),G=v.pixelWidth(),{newSizes:oe,delta:we}=S.calcRedestributedWidths(F,G,h.pixelDelta,v.isRelative);jp(O,oe,v),v.adjustTableWidth(we)},Q0=(l,m,h,v)=>{const S=Ho.generate(m),O=v.getWidths(S,v);jp(S,O,v)},ug=l=>Nt(l,(h,v)=>ge(h,O=>O.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),am=bs("col"),df=bs("colgroup"),d2=l=>Le(l)==="tr"||df(l),vt=l=>{const m=Rs(l,"colspan",1),h=Rs(l,"rowspan",1);return{element:l,colspan:m,rowspan:h}},$h=(l,m=vt)=>{const h=G=>am(G.element)?l.col(G):l.cell(G),v=G=>df(G.element)?l.colgroup(G):l.row(G),S=G=>{if(d2(G))return v({element:G});{const oe=G,we=h(m(oe));return O=Q.some({item:oe,replacement:we}),we}};let O=Q.none();return{getOrInit:(G,oe)=>O.fold(()=>S(G),we=>oe(G,we.item)?we.replacement:S(G))}},DT=l=>m=>{const h=[],v=(F,G)=>R(h,oe=>G(oe.item,F)),S=F=>{const G=l==="td"?{scope:null}:{},oe=m.replace(F,l,G);return h.push({item:F,sub:oe}),oe};return{replaceOrInit:(F,G)=>{if(d2(F)||am(F))return F;{const oe=F;return v(oe,G).fold(()=>S(oe),we=>G(F,we.item)?we.sub:S(oe))}}}},ey=l=>Zr(l,"scope").map(m=>m.substr(0,3)),Ca={modification:$h,transform:DT,merging:l=>({unmerge:v=>{const S=ey(v);return S.each(O=>ys(v,"scope",O)),()=>{const O=l.cell({element:v,colspan:1,rowspan:1});return hr(O,"width"),hr(v,"width"),S.each(F=>ys(O,"scope",F)),O}},merge:v=>{const S=()=>{const O=ra(Ie(v,ey));if(O.length===0)return Q.none();{const F=O[0],G=["row","col"];return ge(O,we=>we!==F&&_(G,we))?Q.none():Q.from(F)}};return hr(v[0],"width"),S().fold(()=>Is(v[0],"scope"),O=>ys(v[0],"scope",O+"group")),te(v[0])}})},m2=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],f2=(l,m)=>{const h=l.property().name(m);return _(["ol","ul"],h)},Gp=(l,m)=>{const h=l.property().name(m);return _(m2,h)},cm=(l,m)=>_(["br","img","hr","input"],l.property().name(m)),Bh=tf(),ds=l=>Gp(Bh,l),qi=l=>f2(Bh,l),mf=l=>cm(Bh,l),ty=l=>{const m=bs("br"),h=oe=>We(oe,we=>m(we)||Ts(we)&&Mn(we).trim().length===0),v=oe=>Le(oe)==="li"||J(oe,qi).isSome(),S=oe=>Pn(oe).map(we=>ds(we)?!0:mf(we)?Le(we)!=="img":!1).getOr(!1),O=oe=>Ru(oe).bind(we=>{const je=S(we);return be(we).map(zt=>je===!0||v(zt)||m(we)||ds(zt)&&!In(oe,zt)?[]:[q.fromTag("br")])}).getOr([]),G=(()=>{const oe=xe(l,we=>{const je=yn(we);return h(je)?[]:je.concat(O(we))});return oe.length===0?[q.fromTag("br")]:oe})();Fr(l[0]),xs(l[0],G)},vr=l=>su(l,!0),ny=l=>{_l(l).length===0&&Mr(l)},qp=(l,m)=>({grid:l,cursor:m}),mc=l=>H(l,m=>H(m.cells,h=>{const v=h.element;return Ur(vr(v),v)})),Iu=(l,m,h)=>{var v,S;const O=Ha(l).rows;return Q.from((S=(v=O[m])===null||v===void 0?void 0:v.cells[h])===null||S===void 0?void 0:S.element).filter(vr).orThunk(()=>mc(O))},Ni=(l,m,h)=>{const v=Iu(l,m,h);return qp(l,v)},Kp=l=>Nt(l,(h,v)=>ge(h,O=>O.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),RT=(l,m,h,v)=>{const S=m[0].row,O=Kp(m),F=jt(O,(G,oe)=>({grid:o2(G.grid,S,oe.row+G.delta,h,v.getOrInit),delta:G.delta+1}),{grid:l,delta:0}).grid;return Ni(F,S,m[0].column)},Ph=(l,m,h,v)=>{const S=Kp(m),O=S[S.length-1],F=O.row+O.rowspan,G=jt(S,(oe,we)=>o2(oe,F,we.row,h,v.getOrInit),l);return Ni(G,F,m[0].column)},Z1=(l,m,h,v)=>{const S=m.details,O=ug(S),F=O[0].column,G=jt(O,(oe,we)=>({grid:cf(oe.grid,F,we.column+oe.delta,h,v.getOrInit),delta:oe.delta+1}),{grid:l,delta:0}).grid;return Ni(G,S[0].row,F)},j1=(l,m,h,v)=>{const S=m.details,O=S[S.length-1],F=O.column+O.colspan,G=ug(S),oe=jt(G,(we,je)=>cf(we,F,je.column,h,v.getOrInit),l);return Ni(oe,S[0].row,F)},G1=(l,m,h,v)=>{const S=ug(m),O=Ie(S,G=>G.column),F=H1(l,O,!0,h,v.replaceOrInit);return Ni(F,m[0].row,m[0].column)},g2=(l,m,h,v)=>{const S=pl(l,m,h,v.replaceOrInit);return Ni(S,m[0].row,m[0].column)},oy=(l,m,h,v)=>{const S=ug(m),O=Ie(S,G=>G.column),F=H1(l,O,!1,h,v.replaceOrInit);return Ni(F,m[0].row,m[0].column)},h2=(l,m,h,v)=>{const S=pl(l,m,h,v.replaceOrInit);return Ni(S,m[0].row,m[0].column)},q1=(l,m)=>(h,v,S,O,F)=>{const G=Kp(v),oe=Ie(G,je=>je.row),we=yi(h,oe,l,m,S,O.replaceOrInit,F);return Ni(we,v[0].row,v[0].column)},dg=q1("thead",!0),bl=q1("tbody",!1),MT=q1("tfoot",!1),ec=(l,m,h,v)=>{const S=ug(m.details),O=Dh(l,Ie(S,G=>G.column)),F=O.length>0?O[0].cells.length-1:0;return Ni(O,S[0].row,Math.min(S[0].column,F))},p2=(l,m,h,v)=>{const S=Kp(m),O=lg(l,S[0].row,S[S.length-1].row),F=O.length>0?O.length-1:0;return Ni(O,Math.min(m[0].row,F),m[0].column)},im=(l,m,h,v)=>{const S=m.cells;ty(S);const O=_h(l,m.bounds,h,v.merge(S));return qp(O,Q.from(S[0]))},NT=(l,m,h,v)=>{const O=jt(m,(F,G)=>I1(F,G,h,v.unmerge(G)),l);return qp(O,Q.from(m[0]))},wi=(l,m,h,v)=>{const O=((oe,we)=>{const je=Ho.fromTable(oe);return Hp(je,we,!0)})(m.clipboard,m.generators),F=fi(m.row,m.column);return Y0(F,l,O,m.generators,h).fold(()=>qp(l,Q.some(m.element)),oe=>Ni(oe,m.row,m.column))},K1=(l,m,h)=>{const v=Ud(l,h.section),S=Ho.generate(v);return Hp(S,m,!0)},au=(l,m,h,v)=>{const S=Ha(l).rows,O=m.cells[0].column,F=S[m.cells[0].row],G=K1(m.clipboard,m.generators,F),oe=ig(O,l,G,m.generators,h);return Ni(oe,m.cells[0].row,m.cells[0].column)},sy=(l,m,h,v)=>{const S=Ha(l).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,F=S[m.cells[0].row],G=K1(m.clipboard,m.generators,F),oe=ig(O,l,G,m.generators,h);return Ni(oe,m.cells[0].row,m.cells[0].column)},b2=(l,m,h,v)=>{const S=Ha(l).rows,O=m.cells[0].row,F=S[O],G=K1(m.clipboard,m.generators,F),oe=X0(O,l,G,m.generators,h);return Ni(oe,m.cells[0].row,m.cells[0].column)},$T=(l,m,h,v)=>{const S=Ha(l).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,F=S[m.cells[0].row],G=K1(m.clipboard,m.generators,F),oe=X0(O,l,G,m.generators,h);return Ni(oe,m.cells[0].row,m.cells[0].column)},BT=(l,m)=>{const h=Ho.fromTable(l);return fl(h,m).bind(S=>{const O=S[S.length-1],F=S[0].column,G=O.column+O.colspan,oe=_e(Ie(h.all,we=>ze(we.cells,je=>je.column>=F&&je.column<G)));return q0(oe)}).getOr("")},Ec=(l,m)=>{const h=Ho.fromTable(l);return fl(h,m).bind(q0).getOr("")},_c=(l,m)=>{const h=Ho.fromTable(l);return fl(h,m).bind(S=>{const O=S[S.length-1],F=S[0].row,G=O.row+O.rowspan,oe=h.all.slice(F,G);return sf(oe)}).getOr("")},ri=(l,m,h,v)=>Q0(l,m,h,v.sizing),Uc=(l,m,h,v)=>Nh(l,m,h,v.sizing,v.resize),Ki=(l,m)=>ge(m,h=>h.column===0&&h.isLocked),Ua=(l,m)=>ge(m,h=>h.column+h.colspan>=l.grid.columns&&h.isLocked),Y1=(l,m)=>{const h=uc(l),v=ug(m);return Nt(v,(S,O)=>{const G=h[O.column].map(to).getOr(0);return S+G},0)},X1=l=>(m,h)=>fl(m,h).filter(v=>!(l?Ki:Ua)(m,v)).map(v=>({details:v,pixelDelta:Y1(m,v)})),v2=(l,m)=>Vc(l,m).map(h=>({details:h,pixelDelta:-Y1(l,h)})),J1=l=>(m,h)=>XC(m,h).filter(v=>!(l?Ki:Ua)(m,v.cells)),Un=Ca.transform("th"),mg=Ca.transform("td"),Q1=zc(RT,fl,Ze,Ze,Ca.modification),ry=zc(Ph,fl,Ze,Ze,Ca.modification),PT=zc(Z1,X1(!0),Uc,Ze,Ca.modification),mO=zc(j1,X1(!1),Uc,Ze,Ca.modification),y2=zc(ec,v2,Uc,ny,Ca.modification),FT=zc(p2,fl,Ze,ny,Ca.modification),IT=zc(G1,Vc,Ze,Ze,Un),ev=zc(oy,Vc,Ze,Ze,mg),LT=zc(dg,Vc,Ze,Ze,Un),vl=zc(bl,Vc,Ze,Ze,mg),Yp=zc(MT,Vc,Ze,Ze,mg),HT=zc(g2,Vc,Ze,Ze,Un),w2=zc(h2,Vc,Ze,Ze,mg),pn=zc(im,xT,ri,Ze,Ca.merging),zT=zc(NT,rf,ri,Ze,Ca.merging),fc=zc(wi,lO,ri,Ze,Ca.modification),C2=zc(au,J1(!0),Ze,Ze,Ca.modification),ay=zc(sy,J1(!1),Ze,Ze,Ca.modification),VT=zc(b2,XC,Ze,Ze,Ca.modification),Nl=zc($T,XC,Ze,Ze,Ca.modification),fO=BT,UT=Ec,lm=_c,S2=(l,m)=>l.dispatch("NewRow",{node:m}),cy=(l,m)=>l.dispatch("NewCell",{node:m}),Yi=(l,m,h)=>{l.dispatch("TableModified",{...h,table:m})},$l=(l,m,h,v,S)=>{l.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:S})},tv=l=>{l.dispatch("TableSelectionClear")},Lu=(l,m,h,v,S)=>{l.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:S})},x2=(l,m,h,v,S)=>{l.dispatch("ObjectResized",{target:m,width:h,height:v,origin:S})},Xp={structure:!1,style:!0},Wa={structure:!0,style:!1},k2={structure:!0,style:!0},ff=l=>m=>m.options.get(l),nv="100%",T2=l=>{var m;const h=l.dom,v=(m=h.getParent(l.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:l.getBody();return os(q.fromDom(v))+"px"},iy=(l,m)=>Qp(l)||!E2(l)?m:Fh(l)?{...m,width:T2(l)}:{...m,width:nv},WT=(l,m)=>Qp(l)||E2(l)?m:Fh(l)?{...m,width:T2(l)}:{...m,width:nv},ZT=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=_(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=_(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},ly=l=>Q.from(l.options.get("table_clone_elements")),jT=l=>{const m=l.options.get("object_resizing");return _(m.split(","),"table")},fg=ff("table_header_type"),Jp=ff("table_column_resizing"),ov=l=>Jp(l)==="preservetable",uy=l=>Jp(l)==="resizetable",gg=ff("table_sizing_mode"),hg=l=>gg(l)==="relative",Fh=l=>gg(l)==="fixed",Qp=l=>gg(l)==="responsive",GT=ff("table_resize_bars"),E2=ff("table_style_by_css"),dy=l=>{const m=l.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:WT(l,h)},my=l=>{const m=l.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:iy(l,h)},qT=ff("table_use_colgroups"),pg=(l,m)=>hg(l)?wr.percentageSize(m):Fh(l)?wr.pixelSize(m):wr.getTableSize(m),Vr=(l,m,h)=>{const v=ii=>Le(Dl(ii))==="table",S=ii=>!v(l)||xh(ii).rows>1,O=ii=>!v(l)||xh(ii).columns>1,F=ly(l),G=uy(l)?Ze:j0,oe=ii=>{switch(fg(l)){case"section":return Pu.section();case"sectionCells":return Pu.sectionCells();case"cells":return Pu.cells();default:return Pu.getTableSectionType(ii,"section")}},we=(ii,Pi)=>Pi.cursor.fold(()=>{const np=_l(ii);return z(np).filter($r).map(ju=>{h.clearSelectedCells(ii.dom);const Nc=l.dom.createRng();return Nc.selectNode(ju.dom),l.selection.setRng(Nc),ys(ju,"data-mce-selected","1"),Nc})},np=>{const ju=of(np),Nc=l.dom.createRng();return Nc.setStart(ju.element.dom,ju.offset),Nc.setEnd(ju.element.dom,ju.offset),l.selection.setRng(Nc),h.clearSelectedCells(ii.dom),Q.some(Nc)}),je=(ii,Pi,np,ju)=>(Nc,GE,qE=!1)=>{Ri(Nc);const op=q.fromDom(l.getDoc()),iw=Ao(np,op,F),KE={sizing:pg(l,Nc),resize:uy(l)?GC():M1(),section:oe(Nc)};return Pi(Nc)?ii(Nc,GE,iw,KE).bind(lw=>{m.refresh(Nc.dom),Ae(lw.newRows,Ab=>{S2(l,Ab.dom)}),Ae(lw.newCells,Ab=>{cy(l,Ab.dom)});const Hv=we(Nc,lw);return $r(Nc)&&(Ri(Nc),qE||Yi(l,Nc.dom,ju)),Hv.map(Ab=>({rng:Ab,effect:ju}))}):Q.none()},zt=je(FT,S,Ze,Wa),bn=je(y2,O,Ze,Wa),on=je(Q1,he,Ze,Wa),kt=je(ry,he,Ze,Wa),Cn=je(PT,he,G,Wa),At=je(mO,he,G,Wa),Xn=je(pn,he,Ze,Wa),_o=je(zT,he,Ze,Wa),Vo=je(C2,he,Ze,Wa),Or=je(ay,he,Ze,Wa),hc=je(VT,he,Ze,Wa),ua=je(Nl,he,Ze,Wa),Bi=je(fc,he,Ze,k2),Of=je(HT,he,Ze,Wa),_b=je(w2,he,Ze,Wa),Iv=je(IT,he,Ze,Wa),Lv=je(ev,he,Ze,Wa),Ks=je(LT,he,Ze,Wa),Rc=je(vl,he,Ze,Wa),Mc=je(Yp,he,Ze,Wa);return{deleteRow:zt,deleteColumn:bn,insertRowsBefore:on,insertRowsAfter:kt,insertColumnsBefore:Cn,insertColumnsAfter:At,mergeCells:Xn,unmergeCells:_o,pasteColsBefore:Vo,pasteColsAfter:Or,pasteRowsBefore:hc,pasteRowsAfter:ua,pasteCells:Bi,makeCellsHeader:Of,unmakeCellsHeader:_b,makeColumnsHeader:Iv,unmakeColumnsHeader:Lv,makeRowsHeader:Ks,makeRowsBody:Rc,makeRowsFooter:Mc,getTableRowType:lm,getTableCellType:UT,getTableColType:fO}},fy=(l,m,h)=>{const v=Rs(l,m,1);h===1||v<=1?Is(l,m):ys(l,m,Math.min(h,v))},ai=(l,m)=>h=>{const v=h.column+h.colspan-1,S=h.column;return v>=l&&S<m},gy=(l,m,h)=>{if(Ho.hasColumns(l)){const v=ze(Ho.justColumns(l),ai(m,h)),S=Ie(v,F=>{const G=Ti(F.element);return fy(G,"span",h-m),G}),O=q.fromTag("colgroup");return xs(O,S),[O]}else return[]},hy=(l,m,h)=>Ie(l.all,v=>{const S=ze(v.cells,ai(m,h)),O=Ie(S,G=>{const oe=Ti(G.element);return fy(oe,"colspan",h-m),oe}),F=q.fromTag("tr");return xs(F,O),F}),eb=(l,m)=>{const h=Ho.fromTable(l);return Vc(h,m).map(S=>{const O=S[S.length-1],F=S[0].column,G=O.column+O.colspan,oe=gy(h,F,G),we=hy(h,F,G);return[...oe,...we]})},sv=(l,m,h)=>{const v=Ho.fromTable(l);return fl(v,m).bind(O=>{const F=Hp(v,h,!1),oe=Ha(F).rows.slice(O[0].row,O[O.length-1].row+O[O.length-1].rowspan),we=xe(oe,zt=>{const bn=ze(zt.cells,on=>!on.isLocked);return bn.length>0?[{...zt,cells:bn}]:[]}),je=Eh(we);return Ur(je.length>0,je)}).map(O=>ru(O))},tb=uf.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),_2=(l,m,h)=>{const v=h.substring(0,h.length-l.length),S=parseFloat(v);return v===S.toString()?m(S):tb.invalid(h)},gf={...tb,from:l=>me(l,"%")?_2("%",tb.percent,l):me(l,"px")?_2("px",tb.pixels,l):tb.invalid(l)},KT=(l,m)=>Ie(l,h=>gf.from(h).fold(()=>h,S=>S/m*100+"%",S=>S+"%")),YT=(l,m,h)=>{const v=h/m;return Ie(l,S=>gf.from(S).fold(()=>S,F=>F*v+"px",F=>F/100*h+"px"))},XT=(l,m)=>{const h=l.fold(()=>te(""),v=>{const S=v/m;return te(S+"px")},()=>{const v=100/m;return te(v+"%")});return Ue(m,h)},JT=(l,m,h)=>l.fold(()=>m,v=>YT(m,h,v),v=>KT(m,h)),A2=(l,m,h)=>{const v=gf.from(h),S=We(l,O=>O==="0px")?XT(v,l.length):JT(v,l,m);return rv(S)},py=(l,m)=>l.length===0?m:jt(l,(h,v)=>gf.from(v).fold(te(0),Je,Je)+h,0),QT=(l,m)=>{const h=Math.floor(l);return{value:h+m,remainder:l-h}},eE=(l,m)=>gf.from(l).fold(te(l),h=>h+m+"px",h=>h+m+"%"),rv=l=>{if(l.length===0)return l;const m=jt(l,(v,S)=>{const O=gf.from(S).fold(()=>({value:S,remainder:0}),F=>QT(F,"px"),F=>({value:F+"%",remainder:0}));return{output:[O.value].concat(v.output),remainder:v.remainder+O.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([eE(h[h.length-1],Math.round(m.remainder))])},tE=gf.from,O2=(l,m,h)=>{Ae(m,v=>{const S=l.slice(v.column,v.colspan+v.column),O=py(S,Gl());Qo(v.element,"width",O+h)})},nE=(l,m,h)=>{Ae(m,(v,S)=>{const O=py([l[S]],Gl());Qo(v.element,"width",O+h)})},nb=(l,m,h,v)=>{Ae(h,S=>{const O=l.slice(S.row,S.rowspan+S.row),F=py(O,Cu());Qo(S.element,"height",F+v)}),Ae(m,(S,O)=>{Qo(S.element,"height",l[O])})},by=l=>tE(l).fold(te("px"),te("px"),te("%")),D2=(l,m,h)=>{const v=Ho.fromTable(l),S=v.all,O=Ho.justCells(v),F=Ho.justColumns(v);m.each(G=>{const oe=by(G),we=jo(l),je=Ns(v,l),zt=A2(je,we,G);Ho.hasColumns(v)?nE(zt,F,oe):O2(zt,O,oe),Qo(l,"width",G)}),h.each(G=>{const oe=by(G),we=Zm(l),je=Qf(v,l,Ou),zt=A2(je,we,G);nb(zt,S,O,oe),Qo(l,"height",G)})},R2=Ep,M2=Mt,bg=Di,vg=l=>{Is(l,"width")},hf=l=>{const m=kc(l);D2(l,Q.some(m),Q.none()),vg(l)},Ih=l=>{const m=Xa(l);D2(l,Q.some(m),Q.none()),vg(l)},N2=l=>{hr(l,"width");const m=cd(l),h=m.length>0?m:_l(l);Ae(h,v=>{hr(v,"width"),vg(v)}),vg(l)},um={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},vy=()=>q.fromTag("th"),oE=()=>q.fromTag("td"),pf=()=>q.fromTag("col"),av=(l,m,h,v)=>{const S=q.fromTag("tr");for(let O=0;O<l;O++){const F=v<m||O<h?vy():oE();O<h&&ys(F,"scope","row"),v<m&&ys(F,"scope","col"),qo(F,q.fromTag("br")),qo(S,F)}return S},sE=l=>{const m=q.fromTag("colgroup");return Ue(l,()=>qo(m,pf())),m},yy=(l,m,h,v)=>Ue(l,S=>av(m,h,v,S)),rE=(l,m,h,v,S,O=um)=>{const F=q.fromTag("table"),G=S!=="cells";Ds(F,O.styles),cs(F,O.attributes),O.colGroups&&qo(F,sE(m));const oe=Math.min(l,h);if(G&&h>0){const on=q.fromTag("thead");qo(F,on);const Cn=yy(h,m,S==="sectionCells"?oe:0,v);xs(on,Cn)}const we=q.fromTag("tbody");qo(F,we);const je=G?l-oe:l,bn=yy(je,m,G?0:h,v);return xs(we,bn),F},aE=l=>l.dom.innerHTML,wy=l=>{const m=q.fromTag("div"),h=q.fromDom(l.dom.cloneNode(!0));return qo(m,h),aE(m)},$2=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},B2=(l,m)=>{Ir(m,"td,th").each(yt($2,l))},Cy=(l,m)=>{Ae(sr(m,"tr"),h=>{S2(l,h.dom),Ae(sr(h,"th,td"),v=>{cy(l,v.dom)})})},P2=l=>Gt(l)&&l.indexOf("%")!==-1,F2=(l,m,h,v,S)=>{const O=my(l),F={styles:O,attributes:dy(l),colGroups:qT(l)};return l.undoManager.ignore(()=>{const G=rE(h,m,S,v,fg(l),F);ys(G,"data-mce-id","__mce");const oe=wy(G);l.insertContent(oe),l.addVisual()}),Ir(Dl(l),'table[data-mce-id="__mce"]').map(G=>(Fh(l)?Ih(G):Qp(l)?N2(G):(hg(l)||P2(O.width))&&hf(G),Ri(G),Is(G,"data-mce-id"),Cy(l,G),B2(l,G),G.dom)).getOrNull()},cE=(l,m,h,v={})=>{const S=O=>cn(O)&&O>0;if(S(m)&&S(h)){const O=v.headerRows||0,F=v.headerColumns||0;return F2(l,h,m,F,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var cv=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const I2="x-tinymce/dom-table-",iv=I2+"rows",Cd=I2+"columns",Sy=l=>{const m=cv.FakeClipboardItem(l);cv.write([m])},xy=l=>{var m;const h=(m=cv.read())!==null&&m!==void 0?m:[];return H(h,v=>Q.from(v.getType(l)))},L2=l=>{xy(l).isSome()&&cv.clear()},H2=l=>{l.fold(hO,m=>Sy({[iv]:m}))},ky=()=>xy(iv),hO=()=>L2(iv),lv=l=>{l.fold(sb,m=>Sy({[Cd]:m}))},ob=()=>xy(Cd),sb=()=>L2(Cd),yg=l=>Sh($u(l),Hc(l)),iE=l=>UC($u(l),Hc(l)),Ty=(l,m)=>{const h=Hc(l),v=()=>yg(l).each(At=>{La(At,h).filter(K(h)).each(Xn=>{const _o=q.fromText("");if(Os(Xn,_o),Mr(Xn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Vo=l.dom.createRng();Vo.setStart(_o.dom,0),Vo.setEnd(_o.dom,0),l.selection.setRng(Vo),l.nodeChanged()}})}),S=At=>yg(l).each(Xn=>{Qp(l)||Fh(l)||hg(l)||La(Xn,h).each(Vo=>{At==="relative"&&!R2(Vo)?hf(Vo):At==="fixed"&&!M2(Vo)?Ih(Vo):At==="responsive"&&!bg(Vo)&&N2(Vo),Ri(Vo),Yi(l,Vo.dom,Wa)})}),O=At=>La(At,h),F=At=>iE(l).bind(Xn=>O(Xn).map(_o=>At(_o,Xn))),G=(At,Xn)=>{F(_o=>{l.formatter.toggle("tableclass",{value:Xn},_o.dom),Yi(l,_o.dom,Xp)})},oe=(At,Xn)=>{F(_o=>{const Vo=Qa(l),hc=We(Vo,ua=>l.formatter.match("tablecellclass",{value:Xn},ua.dom))?l.formatter.remove:l.formatter.apply;Ae(Vo,ua=>hc("tablecellclass",{value:Xn},ua.dom)),Yi(l,_o.dom,Xp)})},we=()=>{yg(l).each(At=>{La(At,h).each(Xn=>{zn(Xn,"caption").fold(()=>{const _o=q.fromTag("caption");qo(_o,q.fromText("Caption")),Kc(Xn,_o,0),l.selection.setCursorLocation(_o.dom,0)},_o=>{bs("caption")(At)&&eo("td",Xn).each(Vo=>l.selection.setCursorLocation(Vo.dom,0)),Mr(_o)}),Yi(l,Xn.dom,Wa)})})},je=At=>{l.focus()},zt=(At,Xn=!1)=>F((_o,Vo)=>{const Or=wh(Qa(l),_o,Vo);At(_o,Or,Xn).each(je)}),bn=()=>F((At,Xn)=>{const _o=wh(Qa(l),At,Xn),Vo=Ao(Ze,q.fromDom(l.getDoc()),Q.none());return sv(At,_o,Vo)}),on=()=>F((At,Xn)=>{const _o=wh(Qa(l),At,Xn);return eb(At,_o)}),kt=(At,Xn)=>Xn().each(_o=>{const Vo=Ie(_o,Or=>Ti(Or));F((Or,hc)=>{const ua=tr(q.fromDom(l.getDoc())),Bi=pT(Qa(l),hc,Vo,ua);At(Or,Bi).each(je)})}),Cn=At=>(Xn,_o)=>Re(_o,"type").each(Vo=>{zt(At(Vo),_o.no_events)});Pe({mceTableSplitCells:()=>zt(m.unmergeCells),mceTableMergeCells:()=>zt(m.mergeCells),mceTableInsertRowBefore:()=>zt(m.insertRowsBefore),mceTableInsertRowAfter:()=>zt(m.insertRowsAfter),mceTableInsertColBefore:()=>zt(m.insertColumnsBefore),mceTableInsertColAfter:()=>zt(m.insertColumnsAfter),mceTableDeleteCol:()=>zt(m.deleteColumn),mceTableDeleteRow:()=>zt(m.deleteRow),mceTableCutCol:()=>on().each(At=>{lv(At),zt(m.deleteColumn)}),mceTableCutRow:()=>bn().each(At=>{H2(At),zt(m.deleteRow)}),mceTableCopyCol:()=>on().each(At=>lv(At)),mceTableCopyRow:()=>bn().each(At=>H2(At)),mceTablePasteColBefore:()=>kt(m.pasteColsBefore,ob),mceTablePasteColAfter:()=>kt(m.pasteColsAfter,ob),mceTablePasteRowBefore:()=>kt(m.pasteRowsBefore,ky),mceTablePasteRowAfter:()=>kt(m.pasteRowsAfter,ky),mceTableDelete:v,mceTableCellToggleClass:oe,mceTableToggleClass:G,mceTableToggleCaption:we,mceTableSizingMode:(At,Xn)=>S(Xn),mceTableCellType:Cn(At=>At==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Cn(At=>At==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Cn(At=>{switch(At){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(At,Xn)=>l.addCommand(Xn,At)),l.addCommand("mceInsertTable",(At,Xn)=>{cE(l,Xn.rows,Xn.columns,Xn.options)}),l.addCommand("mceTableApplyCellStyle",(At,Xn)=>{const _o=hc=>"tablecell"+hc.toLowerCase().replace("-","");if(!Tt(Xn))return;const Vo=Qa(l);if(Vo.length===0)return;const Or=Qn(Xn,(hc,ua)=>l.formatter.has(_o(ua))&&Gt(hc));fn(Or)||(Pe(Or,(hc,ua)=>{const Bi=_o(ua);Ae(Vo,Of=>{hc===""?l.formatter.remove(Bi,{value:null},Of.dom,!0):l.formatter.apply(Bi,{value:hc},Of.dom)})}),O(Vo[0]).each(hc=>Yi(l,hc.dom,Xp)))})},lE=(l,m)=>{const h=Hc(l),v=S=>UC($u(l)).bind(O=>La(O,h).map(F=>{const G=wh(Qa(l),F,O);return S(F,G)})).getOr("");Pe({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(S,O)=>l.addQueryValueHandler(O,S))},uv=uf.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),rb=(l,m,h,v)=>l.fold(m,h,v),z2=l=>l.fold(Je,Je,Je),uE=uv.before,dE=uv.on,mE=uv.after,tc={before:uE,on:dE,after:mE,cata:rb,getStart:z2},dm={create:(l,m)=>({selection:l,kill:m})},mm=(l,m)=>{const h=l.document.createRange();return h.selectNode(m.dom),h},fE=(l,m)=>{const h=l.document.createRange();return bf(h,m),h},bf=(l,m)=>l.selectNodeContents(m.dom),Hu=(l,m)=>{m.fold(h=>{l.setStartBefore(h.dom)},(h,v)=>{l.setStart(h.dom,v)},h=>{l.setStartAfter(h.dom)})},dv=(l,m)=>{m.fold(h=>{l.setEndBefore(h.dom)},(h,v)=>{l.setEnd(h.dom,v)},h=>{l.setEndAfter(h.dom)})},mv=(l,m,h)=>{const v=l.document.createRange();return Hu(v,m),dv(v,h),v},Ey=(l,m,h,v,S)=>{const O=l.document.createRange();return O.setStart(m.dom,h),O.setEnd(v.dom,S),O},V2=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),fm=l=>{const m=l.getClientRects(),h=m.length>0?m[0]:l.getBoundingClientRect();return h.width>0||h.height>0?Q.some(h).map(V2):Q.none()},Sd=uf.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fv=(l,m,h)=>m(q.fromDom(h.startContainer),h.startOffset,q.fromDom(h.endContainer),h.endOffset),U2=(l,m)=>m.match({domRange:h=>({ltr:te(h),rtl:Q.none}),relative:(h,v)=>({ltr:_i(()=>mv(l,h,v)),rtl:_i(()=>Q.some(mv(l,v,h)))}),exact:(h,v,S,O)=>({ltr:_i(()=>Ey(l,h,v,S,O)),rtl:_i(()=>Q.some(Ey(l,S,O,h,v)))})}),ab=(l,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(S=>S.collapsed===!1).map(S=>Sd.rtl(q.fromDom(S.endContainer),S.endOffset,q.fromDom(S.startContainer),S.startOffset)).getOrThunk(()=>fv(l,Sd.ltr,h)):fv(l,Sd.ltr,h)},Hh=(l,m)=>{const h=U2(l,m);return ab(l,h)},Wc=(l,m)=>Hh(l,m).match({ltr:(v,S,O,F)=>{const G=l.document.createRange();return G.setStart(v.dom,S),G.setEnd(O.dom,F),G},rtl:(v,S,O,F)=>{const G=l.document.createRange();return G.setStart(O.dom,F),G.setEnd(v.dom,S),G}});Sd.ltr,Sd.rtl;const vf={create:(l,m,h,v)=>({start:l,soffset:m,finish:h,foffset:v})},_y={create:(l,m,h,v)=>({start:tc.on(l,m),finish:tc.on(h,v)})},zu=(l,m)=>{const h=Wc(l,m);return vf.create(q.fromDom(h.startContainer),h.startOffset,q.fromDom(h.endContainer),h.endOffset)},cb=_y.create,gv=(l,m,h,v,S,O,F)=>In(h,S)&&v===O?Q.none():gr(h,"td,th",m).bind(G=>gr(S,"td,th",m).bind(oe=>wg(l,m,G,oe,F))),wg=(l,m,h,v,S)=>In(h,v)?Q.none():_1(h,v,m).bind(O=>{const F=O.boxes.getOr([]);return F.length>1?(S(l,F,O.start,O.finish),Q.some(dm.create(Q.some(cb(h,0,h,ir(h))),!0))):Q.none()}),gE=(l,m,h,v,S)=>{const O=F=>(S.clearBeforeUpdate(h),S.selectRange(h,F.boxes,F.start,F.finish),F.boxes);return W0(v,l,m,S.firstSelectedSelector,S.lastSelectedSelector).map(O)},zh=(l,m)=>({item:l,mode:m}),Z2=(l,m,h,v=xd)=>l.property().parent(m).map(S=>zh(S,v)),xd=(l,m,h,v=Vh)=>h.sibling(l,m).map(S=>zh(S,v)),Vh=(l,m,h,v=Vh)=>{const S=l.property().children(m);return h.first(S).map(F=>zh(F,v))},j2=[{current:Z2,next:xd,fallback:Q.none()},{current:xd,next:Vh,fallback:Q.some(Z2)},{current:Vh,next:Vh,fallback:Q.some(xd)}],ib=(l,m,h,v,S=j2)=>R(S,F=>F.current===h).bind(F=>F.current(l,m,v,F.next).orThunk(()=>F.fallback.bind(G=>ib(l,m,G,v)))),lb={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?Q.some(h[h.length-1]):Q.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?Q.some(h[0]):Q.none()})},ub=(l,m,h,v,S,O)=>ib(l,m,v,S).bind(G=>O(G.item)?Q.none():h(G.item)?Q.some(G.item):ub(l,G.item,h,G.mode,S,O)),Ay=(l,m,h,v)=>ub(l,m,h,xd,lb.left(),v),Oy=(l,m,h,v)=>ub(l,m,h,xd,lb.right(),v),Dy=l=>m=>l.property().children(m).length===0,G2=(l,m,h)=>Uh(l,m,Dy(l),h),yl=(l,m,h)=>hv(l,m,Dy(l),h),Uh=Ay,hv=Oy,kd=tf(),Ci=(l,m)=>G2(kd,l,m),wl=(l,m)=>yl(kd,l,m),$i=(l,m,h)=>Uh(kd,l,m,h),Td=(l,m,h)=>hv(kd,l,m,h),Ry=(l,m,h)=>J(l,m,h).isSome(),Cl=uf.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Cg=(l,m,h)=>{const v=l.getRect(m),S=l.getRect(h);return S.right>v.left&&S.left<v.right},hE=l=>gr(l,"tr"),Sg={...Cl,verify:(l,m,h,v,S,O,F)=>gr(v,"td,th",F).bind(G=>gr(m,"td,th",F).map(oe=>In(G,oe)?In(v,G)&&ir(G)===S?O(oe):Cl.none("in same cell"):bd(hE,[G,oe]).fold(()=>Cg(l,oe,G)?Cl.success():O(oe),we=>O(oe)))).getOr(Cl.none("default")),cata:(l,m,h,v,S)=>l.fold(m,h,v,S)},My=(l,m,h,v)=>({parent:l,children:m,element:h,index:v}),db=l=>be(l).bind(m=>{const h=yn(m);return pE(h,l).map(v=>My(m,h,l,v))}),pE=(l,m)=>qn(l,yt(In,m)),q2=bs("br"),Ny=(l,m,h)=>m(l,h).bind(v=>Ts(v)&&Mn(v).trim().length===0?Ny(v,m,h):Q.some(v)),yO=(l,m,h)=>h.traverse(m).orThunk(()=>Ny(m,h.gather,l)).map(h.relative),bE=(l,m)=>Hn(l,m).filter(q2).orThunk(()=>Hn(l,m-1).filter(q2)),ci=(l,m,h,v)=>bE(m,h).bind(S=>v.traverse(S).fold(()=>Ny(S,v.gather,l).map(v.relative),O=>db(O).map(F=>tc.on(F.parent,F.index)))),pv=(l,m,h,v)=>(q2(m)?yO(l,m,v):ci(l,m,h,v)).map(O=>({start:O,finish:O})),xg=l=>Sg.cata(l,m=>Q.none(),()=>Q.none(),m=>Q.some(tm(m,0)),m=>Q.some(tm(m,ir(m)))),hm=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),mb=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),bv=(l,m,h)=>({left:l.left+m,top:l.top+h,right:l.right+m,bottom:l.bottom+h}),K2=l=>l.top,vE=l=>l.bottom,yE=(l,m,h)=>h>=0&&h<ir(m)?l.getRangedRect(m,h,m,h+1):h>0?l.getRangedRect(m,h-1,m,h):Q.none(),vv=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Oc=(l,m)=>Q.some(l.getRect(m)),Y2=(l,m,h)=>Kn(m)?Oc(l,m).map(vv):Ts(m)?yE(l,m,h).map(vv):Q.none(),Wh=(l,m)=>Kn(m)?Oc(l,m).map(vv):Ts(m)?l.getRangedRect(m,0,m,ir(m)).map(vv):Q.none(),Dc=5,yv=100,cu=uf.generate([{none:[]},{retry:["caret"]}]),$y=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,By=(l,m,h)=>de(m,ds).fold(St,v=>Wh(l,v).exists(S=>$y(h,S))),wE=(l,m,h,v,S)=>{const O=hm(S,Dc);return Math.abs(h.bottom-v.bottom)<1||h.top>S.bottom?cu.retry(O):h.top===S.bottom?cu.retry(hm(S,1)):By(l,m,S)?cu.retry(bv(O,Dc,0)):cu.none()},Py={point:K2,adjuster:(l,m,h,v,S)=>{const O=mb(S,Dc);return Math.abs(h.top-v.top)<1||h.bottom<S.top?cu.retry(O):h.bottom===S.top?cu.retry(mb(S,1)):By(l,m,S)?cu.retry(bv(O,Dc,0)):cu.none()},move:mb,gather:Ci},X2={point:vE,adjuster:wE,move:hm,gather:wl},SE=(l,m,h)=>l.elementFromPoint(m,h).filter(v=>Le(v)==="table").isSome(),fb=(l,m,h,v,S)=>Zh(l,m,h,m.move(v,Dc),S),Zh=(l,m,h,v,S)=>S===0?Q.some(v):SE(l,v.left,m.point(v))?fb(l,m,h,v,S-1):l.situsFromPoint(v.left,m.point(v)).bind(O=>O.start.fold(Q.none,F=>Wh(l,F).bind(G=>m.adjuster(l,F,G,h,v).fold(Q.none,oe=>Zh(l,m,h,oe,S-1))).orThunk(()=>Q.some(v)),Q.none)),xE=(l,m,h)=>l.point(m)>h.getInnerHeight()?Q.some(l.point(m)-h.getInnerHeight()):l.point(m)<0?Q.some(-l.point(m)):Q.none(),J2=(l,m,h)=>{const v=l.move(h,Dc),S=Zh(m,l,h,v,yv).getOr(v);return xE(l,S,m).fold(()=>m.situsFromPoint(S.left,l.point(S)),O=>(m.scrollBy(0,O),m.situsFromPoint(S.left,l.point(S)-O)))},Fy={tryUp:yt(J2,Py),tryDown:yt(J2,X2),getJumpSize:te(Dc)},kE=20,Iy=(l,m,h)=>l.getSelection().bind(v=>pv(m,v.finish,v.foffset,h).fold(()=>Q.some(tm(v.finish,v.foffset)),S=>{const O=l.fromSitus(S),F=Sg.verify(l,v.finish,v.foffset,O.finish,O.foffset,h.failure,m);return xg(F)})),yf=(l,m,h,v,S,O)=>O===0?Q.none():wO(l,m,h,v,S).bind(F=>{const G=l.fromSitus(F),oe=Sg.verify(l,h,v,G.finish,G.foffset,S.failure,m);return Sg.cata(oe,()=>Q.none(),()=>Q.some(F),we=>In(h,we)&&v===0?kg(l,h,v,mb,S):yf(l,m,we,0,S,O-1),we=>In(h,we)&&v===ir(we)?kg(l,h,v,hm,S):yf(l,m,we,ir(we),S,O-1))}),kg=(l,m,h,v,S)=>Y2(l,m,h).bind(O=>Q2(l,S,v(O,Fy.getJumpSize()))),Q2=(l,m,h)=>{const v=Zf().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,h):Q.none()},wO=(l,m,h,v,S)=>Y2(l,h,v).bind(O=>Q2(l,S,O)),eS=(l,m,h)=>Iy(l,m,h).bind(v=>yf(l,m,v.element,v.offset,h,kE).map(l.fromSitus)),Ly=(l,m)=>Ry(l,h=>be(h).exists(v=>In(v,m))),Hy=(l,m,h,v,S)=>gr(v,"td,th",m).bind(O=>gr(O,"table",m).bind(F=>Ly(S,F)?eS(l,m,h).bind(G=>gr(G.finish,"td,th",m).map(oe=>({start:O,finish:oe,range:G}))):Q.none())),wv=(l,m,h,v,S,O)=>O(v,m).orThunk(()=>Hy(l,m,h,v,S).map(F=>{const G=F.range;return dm.create(Q.some(cb(G.start,G.soffset,G.finish,G.foffset)),!0)})),ms=(l,m)=>gr(l,"tr",m).bind(h=>gr(h,"table",m).bind(v=>{const S=sr(v,"tr");return In(h,S[0])?$i(v,O=>Ru(O).isSome(),m).map(O=>{const F=ir(O);return dm.create(Q.some(cb(O,F,O,F)),!0)}):Q.none()})),Ed=(l,m)=>gr(l,"tr",m).bind(h=>gr(h,"table",m).bind(v=>{const S=sr(v,"tr");return In(h,S[S.length-1])?Td(v,O=>ul(O).isSome(),m).map(O=>dm.create(Q.some(cb(O,0,O,0)),!0)):Q.none()})),wf=(l,m,h,v,S,O,F)=>Hy(l,h,v,S,O).bind(G=>wg(m,h,G.start,G.finish,F)),Cf=l=>{let m=l;return{get:()=>m,set:S=>{m=S}}},zy=l=>{const m=Cf(Q.none()),h=()=>m.get().each(l);return{clear:()=>{h(),m.set(Q.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:G=>{h(),m.set(Q.some(G))}}},jh=()=>{const l=zy(Ze);return{...l,on:h=>l.get().each(h)}},Sf=(l,m)=>gr(l,"td,th",m),Cv=(l,m,h,v)=>{const S=jh(),O=S.clear,F=je=>{S.on(zt=>{v.clearBeforeUpdate(m),Sf(je.target,h).each(bn=>{_1(zt,bn,h).each(on=>{const kt=on.boxes.getOr([]);if(kt.length===1){const Cn=kt[0],At=Mi(Cn)==="false",Xn=Pt(Th(je.target),Cn,In);At&&Xn&&(v.selectRange(m,kt,Cn,Cn),l.selectContents(Cn))}else kt.length>1&&(v.selectRange(m,kt,on.start,on.finish),l.selectContents(bn))})})})};return{clearstate:O,mousedown:je=>{v.clear(m),Sf(je.target,h).each(S.set)},mouseover:je=>{F(je)},mouseup:je=>{F(je),O()}}},Sv={traverse:Pn,gather:wl,relative:tc.before,retry:Fy.tryDown,failure:Sg.failedDown},xv={traverse:hn,gather:Ci,relative:tc.before,retry:Fy.tryUp,failure:Sg.failedUp},Tg=l=>m=>m===l,Eg=Tg(38),gb=Tg(40),kv=l=>l>=37&&l<=40,CO={isBackward:Tg(37),isForward:Tg(39)},tS={isBackward:Tg(39),isForward:Tg(37)},pm=l=>{const m=l!==void 0?l.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Ol(h,v)},Vy=(l,m,h)=>{const S=(h!==void 0?h.dom:document).defaultView;S&&S.scrollBy(l,m)},_g=uf.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Uy=l=>_g.exact(l.start,l.soffset,l.finish,l.foffset),nS=l=>l.match({domRange:m=>q.fromDom(m.startContainer),relative:(m,h)=>tc.getStart(m),exact:(m,h,v,S)=>m}),hb=_g.domRange,Wy=_g.relative,TE=_g.exact,EE=l=>{const m=nS(l);return fe(m)},_d=vf.create,Gh={domRange:hb,relative:Wy,exact:TE,exactFromRange:Uy,getWin:EE,range:_d},_E=(l,m,h)=>{var v,S;return Q.from((S=(v=l.dom).caretPositionFromPoint)===null||S===void 0?void 0:S.call(v,m,h)).bind(O=>{if(O.offsetNode===null)return Q.none();const F=l.dom.createRange();return F.setStart(O.offsetNode,O.offset),F.collapse(),Q.some(F)})},Bl=(l,m,h)=>{var v,S;return Q.from((S=(v=l.dom).caretRangeFromPoint)===null||S===void 0?void 0:S.call(v,m,h))},nc=(()=>document.caretPositionFromPoint?_E:document.caretRangeFromPoint?Bl:Q.none)(),AE=(l,m,h)=>{const v=q.fromDom(l.document);return nc(v,m,h).map(S=>vf.create(q.fromDom(S.startContainer),S.startOffset,q.fromDom(S.endContainer),S.endOffset))},qh=(l,m)=>{const h=Le(l);return h==="input"?tc.after(l):_(["br","img"],h)?m===0?tc.before(l):tc.after(l):tc.on(l,m)},Kh=(l,m)=>{const h=l.fold(tc.before,qh,tc.after),v=m.fold(tc.before,qh,tc.after);return Gh.relative(h,v)},oS=(l,m,h,v)=>{const S=qh(l,m),O=qh(h,v);return Gh.relative(S,O)},sS=(l,m,h,v)=>{const O=ko(l).dom.createRange();return O.setStart(l.dom,m),O.setEnd(h.dom,v),O},OE=(l,m,h,v)=>{const S=sS(l,m,h,v),O=In(l,h)&&m===v;return S.collapsed&&!O},_n=l=>Q.from(l.getSelection()),Ra=(l,m)=>{_n(l).each(h=>{h.removeAllRanges(),h.addRange(m)})},Ag=(l,m,h,v,S)=>{const O=Ey(l,m,h,v,S);Ra(l,O)},gc=(l,m,h,v,S,O)=>{m.collapse(h.dom,v),m.extend(S.dom,O)},Pl=(l,m)=>Hh(l,m).match({ltr:(h,v,S,O)=>{Ag(l,h,v,S,O)},rtl:(h,v,S,O)=>{_n(l).each(F=>{if(F.setBaseAndExtent)F.setBaseAndExtent(h.dom,v,S.dom,O);else if(F.extend)try{gc(l,F,h,v,S,O)}catch{Ag(l,S,O,h,v)}else Ag(l,S,O,h,v)})}}),Tv=(l,m,h,v,S)=>{const O=oS(m,h,v,S);Pl(l,O)},Yh=(l,m,h)=>{const v=Kh(m,h);Pl(l,v)},pb=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),h=l.getRangeAt(l.rangeCount-1);return Q.some(vf.create(q.fromDom(m.startContainer),m.startOffset,q.fromDom(h.endContainer),h.endOffset))}else return Q.none()},rS=l=>{if(l.anchorNode===null||l.focusNode===null)return pb(l);{const m=q.fromDom(l.anchorNode),h=q.fromDom(l.focusNode);return OE(m,l.anchorOffset,h,l.focusOffset)?Q.some(vf.create(m,l.anchorOffset,h,l.focusOffset)):pb(l)}},bb=(l,m,h=!0)=>{const S=(h?fE:mm)(l,m);Ra(l,S)},Zy=l=>_n(l).filter(m=>m.rangeCount>0).bind(rS),xf=l=>Zy(l).map(m=>Gh.exact(m.start,m.soffset,m.finish,m.foffset)),vb=(l,m)=>{const h=Wc(l,m);return fm(h)},DE=(l,m,h)=>AE(l,m,h),aS=l=>{_n(l).each(m=>m.removeAllRanges())},jy=l=>({elementFromPoint:(At,Xn)=>q.fromPoint(q.fromDom(l.document),At,Xn),getRect:At=>At.dom.getBoundingClientRect(),getRangedRect:(At,Xn,_o,Vo)=>{const Or=Gh.exact(At,Xn,_o,Vo);return vb(l,Or)},getSelection:()=>xf(l).map(At=>zu(l,At)),fromSitus:At=>{const Xn=Gh.relative(At.start,At.finish);return zu(l,Xn)},situsFromPoint:(At,Xn)=>DE(l,At,Xn).map(_o=>_y.create(_o.start,_o.soffset,_o.finish,_o.foffset)),clearSelection:()=>{aS(l)},collapseSelection:(At=!1)=>{xf(l).each(Xn=>Xn.fold(_o=>_o.collapse(At),(_o,Vo)=>{const Or=At?_o:Vo;Yh(l,Or,Or)},(_o,Vo,Or,hc)=>{const ua=At?_o:Or,Bi=At?Vo:hc;Tv(l,ua,Bi,ua,Bi)}))},setSelection:At=>{Tv(l,At.start,At.soffset,At.finish,At.foffset)},setRelativeSelection:(At,Xn)=>{Yh(l,At,Xn)},selectNode:At=>{bb(l,At,!1)},selectContents:At=>{bb(l,At)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>pm(q.fromDom(l.document)).top,scrollBy:(At,Xn)=>{Vy(At,Xn,q.fromDom(l.document))}}),Og=(l,m)=>({rows:l,cols:m}),yb=(l,m,h,v)=>{const S=jy(l),O=Cv(S,m,h,v);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},Ev=(l,m,h,v)=>{const S=jy(l),O=()=>(v.clear(m),Q.none());return{keydown:(oe,we,je,zt,bn,on)=>{const kt=oe.raw,Cn=kt.which,At=kt.shiftKey===!0;return Bp(m,v.selectedSelector).fold(()=>(kv(Cn)&&!At&&v.clearBeforeUpdate(m),gb(Cn)&&At?yt(wf,S,m,h,Sv,zt,we,v.selectRange):Eg(Cn)&&At?yt(wf,S,m,h,xv,zt,we,v.selectRange):gb(Cn)?yt(wv,S,h,Sv,zt,we,Ed):Eg(Cn)?yt(wv,S,h,xv,zt,we,ms):Q.none),_o=>{const Vo=Or=>()=>H(Or,ua=>gE(ua.rows,ua.cols,m,_o,v)).fold(()=>A1(m,v.firstSelectedSelector,v.lastSelectedSelector).map(ua=>{const Bi=gb(Cn)||on.isForward(Cn)?tc.after:tc.before;return S.setRelativeSelection(tc.on(ua.first,0),Bi(ua.table)),v.clear(m),dm.create(Q.none(),!0)}),ua=>Q.some(dm.create(Q.none(),!0)));return gb(Cn)&&At?Vo([Og(1,0)]):Eg(Cn)&&At?Vo([Og(-1,0)]):on.isBackward(Cn)&&At?Vo([Og(0,-1),Og(-1,0)]):on.isForward(Cn)&&At?Vo([Og(0,1),Og(1,0)]):kv(Cn)&&!At?O:Q.none})()},keyup:(oe,we,je,zt,bn)=>Bp(m,v.selectedSelector).fold(()=>{const on=oe.raw,kt=on.which;return on.shiftKey===!0&&kv(kt)?gv(m,h,we,je,zt,bn,v.selectRange):Q.none()},Q.none)}},_v=(l,m,h,v)=>{const S=jy(l);return(O,F)=>{v.clearBeforeUpdate(m),_1(O,F,h).each(G=>{const oe=G.boxes.getOr([]);v.selectRange(m,oe,G.start,G.finish),S.selectContents(F),S.collapseSelection()})}},Xh=(l,m)=>{const h=mr(l,m);return h===void 0||h===""?[]:h.split(" ")},Gy=(l,m,h)=>{const S=Xh(l,m).concat([h]);return ys(l,m,S.join(" ")),!0},cS=(l,m,h)=>{const v=ze(Xh(l,m),S=>S!==h);return v.length>0?ys(l,m,v.join(" ")):Is(l,m),!1},Vu=l=>l.dom.classList!==void 0,wb=l=>Xh(l,"class"),RE=(l,m)=>Gy(l,"class",m),ME=(l,m)=>cS(l,"class",m),bm=(l,m)=>{Vu(l)?l.dom.classList.add(m):RE(l,m)},NE=l=>{(Vu(l)?l.dom.classList:wb(l)).length===0&&Is(l,"class")},iS=(l,m)=>{Vu(l)?l.dom.classList.remove(m):ME(l,m),NE(l)},Av=(l,m)=>Vu(l)&&l.dom.classList.contains(m),$E=(l,m)=>{Ae(m,h=>{iS(l,h)})},Ov=l=>m=>{bm(m,l)},Zc=l=>m=>{$E(m,l)},Cb={byClass:l=>{const m=Ov(l.selected),h=Zc([l.selected,l.lastSelected,l.firstSelected]),v=O=>{const F=sr(O,l.selectedSelector);Ae(F,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(O,F,G,oe)=>{v(O),Ae(F,m),bm(G,l.firstSelected),bm(oe,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,h)=>{const v=oe=>{Is(oe,l.selected),Is(oe,l.firstSelected),Is(oe,l.lastSelected)},S=oe=>{ys(oe,l.selected,"1")},O=oe=>{F(oe),h()},F=oe=>{const we=sr(oe,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ae(we,v)};return{clearBeforeUpdate:F,clear:O,selectRange:(oe,we,je,zt)=>{O(oe),Ae(we,S),ys(je,l.firstSelected,"1"),ys(zt,l.lastSelected,"1"),m(we,je,zt)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},Dv=(l,m,h,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return h(l.elements)}},lS=()=>({tag:"none"}),qy=l=>({tag:"multiple",elements:l}),uS=l=>({tag:"single",element:l}),Ky=(l,m,h)=>({get:()=>O1(l(),h).fold(()=>m().fold(lS,uS),qy)}),dS=(l,m)=>{const h=l.slice(0,m[m.length-1].row+1),v=Eh(h);return xe(v,S=>{const O=S.cells.slice(0,m[m.length-1].column+1);return Ie(O,F=>F.element)})},Yy=(l,m)=>{const h=l.slice(m[0].row+m[0].rowspan-1,l.length),v=Eh(h);return xe(v,S=>{const O=S.cells.slice(m[0].column+m[0].colspan-1,S.cells.length);return Ie(O,F=>F.element)})},mS=(l,m,h)=>{const v=Ho.fromTable(l);return fl(v,m).map(O=>{const F=Hp(v,h,!1),{rows:G}=Ha(F),oe=dS(G,O),we=Yy(G,O);return{upOrLeftCells:oe,downOrRightCells:we}})},fS=(l,m,h,v,S,O,F)=>({target:l,x:m,y:h,stop:v,prevent:S,kill:O,raw:F}),Rv=l=>{const m=q.fromDom(Nr(l).getOr(l.target)),h=()=>l.stopPropagation(),v=()=>l.preventDefault(),S=et(v,h);return fS(m,l.clientX,l.clientY,h,v,S,l)},Xy=(l,m)=>h=>{l(h)&&m(Rv(h))},rr=(l,m,h,v,S)=>{const O=Xy(h,v);return l.dom.addEventListener(m,O,S),{unbind:yt(kf,l,m,O,S)}},Wn=(l,m,h,v)=>rr(l,m,h,v,!1),kf=(l,m,h,v)=>{l.dom.removeEventListener(m,h,v)},gS=he,Tf=(l,m,h)=>Wn(l,m,gS,h),Ad=Rv,Jh=l=>!Av(q.fromDom(l.target),"ephox-snooker-resizer-bar"),Jy=(l,m)=>{const h=Ky(()=>q.fromDom(l.getBody()),()=>UC($u(l),Hc(l)),vd.selectedSelector),v=(oe,we,je)=>{La(we).each(bn=>{const on=ly(l),kt=Ao(Ze,q.fromDom(l.getDoc()),on),Cn=Qa(l),At=mS(bn,{selection:Cn},kt);$l(l,oe,we,je,At)})},S=()=>tv(l),O=Cb.byAttr(vd,v,S);return l.on("init",oe=>{const we=l.getWin(),je=Dl(l),zt=Hc(l),bn=()=>{const Ks=l.selection,Rc=q.fromDom(Ks.getStart()),Mc=q.fromDom(Ks.getEnd());bd(La,[Rc,Mc]).fold(()=>O.clear(je),Ze)},on=yb(we,je,zt,O),kt=Ev(we,je,zt,O),Cn=_v(we,je,zt,O),At=Ks=>Ks.raw.shiftKey===!0;l.on("TableSelectorChange",Ks=>Cn(Ks.start,Ks.finish));const Xn=(Ks,Rc)=>{At(Ks)&&(Rc.kill&&Ks.kill(),Rc.selection.each(Mc=>{const Zu=Gh.relative(Mc.start,Mc.finish),Ji=Wc(we,Zu);l.selection.setRng(Ji)}))},_o=Ks=>{const Rc=Ad(Ks);if(Rc.raw.shiftKey&&kv(Rc.raw.which)){const Mc=l.selection.getRng(),Zu=q.fromDom(Mc.startContainer),Ji=q.fromDom(Mc.endContainer);kt.keyup(Rc,Zu,Mc.startOffset,Ji,Mc.endOffset).each(tp=>{Xn(Rc,tp)})}},Vo=Ks=>{const Rc=Ad(Ks);m.hide();const Mc=l.selection.getRng(),Zu=q.fromDom(Mc.startContainer),Ji=q.fromDom(Mc.endContainer),tp=Wm(CO,tS)(q.fromDom(l.selection.getStart()));kt.keydown(Rc,Zu,Mc.startOffset,Ji,Mc.endOffset,tp).each(ii=>{Xn(Rc,ii)}),m.show()},Or=Ks=>Ks.button===0,hc=Ks=>Ks.buttons===void 0?!0:(Ks.buttons&1)!==0,ua=Ks=>{on.clearstate()},Bi=Ks=>{Or(Ks)&&Jh(Ks)&&on.mousedown(Ad(Ks))},Of=Ks=>{hc(Ks)&&Jh(Ks)&&on.mouseover(Ad(Ks))},_b=Ks=>{Or(Ks)&&Jh(Ks)&&on.mouseup(Ad(Ks))},Lv=(()=>{const Ks=Cf(q.fromDom(je)),Rc=Cf(0);return{touchEnd:Zu=>{const Ji=q.fromDom(Zu.target);if(bs("td")(Ji)||bs("th")(Ji)){const tp=Ks.get(),ii=Rc.get();In(tp,Ji)&&Zu.timeStamp-ii<300&&(Zu.preventDefault(),Cn(Ji,Ji))}Ks.set(Ji),Rc.set(Zu.timeStamp)}}})();l.on("dragstart",ua),l.on("mousedown",Bi),l.on("mouseover",Of),l.on("mouseup",_b),l.on("touchend",Lv.touchEnd),l.on("keyup",_o),l.on("keydown",Vo),l.on("NodeChange",bn)}),l.on("PreInit",()=>{l.serializer.addTempAttr(vd.firstSelected),l.serializer.addTempAttr(vd.lastSelected)}),{getSelectedCells:()=>Dv(h.get(),te([]),oe=>Ie(oe,we=>we.dom),oe=>[oe.dom]),clearSelectedCells:oe=>O.clear(q.fromDom(oe))}},Fl=l=>{let m=[];return{bind:O=>{if(O===void 0)throw new Error("Event bind error: undefined handler");m.push(O)},unbind:O=>{m=ze(m,F=>F!==O)},trigger:(...O)=>{const F={};Ae(l,(G,oe)=>{F[G]=O[oe]}),Ae(m,G=>{G(F)})}}},Dg=l=>{const m=Yt(l,v=>({bind:v.bind,unbind:v.unbind})),h=Yt(l,v=>v.trigger);return{registry:m,trigger:h}},hS=(l,m)=>{let h=null;const v=()=>{rt(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...O)=>{v(),h=setTimeout(()=>{h=null,l.apply(null,O)},m)}}},Qh=l=>l.slice(0).sort(),Sb=(l,m)=>{throw new Error("All required keys ("+Qh(l).join(", ")+") were not specified. Specified keys were: "+Qh(m).join(", ")+".")},xb=l=>{throw new Error("Unsupported keys for object: "+Qh(l).join(", "))},Qy=(l,m)=>{if(!Et(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ae(m,h=>{if(!Gt(h))throw new Error("The value "+h+" in the "+l+" fields was not a string.")})},BE=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Qh(l).join(", ")+") were not.")},PE=l=>{const m=Qh(l);R(m,(v,S)=>S<m.length-1&&v===m[S+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},FE=(l,m)=>Il(l,m,{validate:Bt,label:"function"}),Il=(l,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Qy("required",m),PE(m),v=>{const S=Z(v);We(m,G=>_(S,G))||Sb(m,S),l(m,S);const F=ze(m,G=>!h.validate(v[G],G));return F.length>0&&BE(F,h.label),v}},jc=(l,m)=>{const h=ze(m,v=>!_(l,v));h.length>0&&xb(h)},Ef=l=>FE(jc,l),SO=Ef(["compare","extract","mutate","sink"]),IE=Ef(["element","start","stop","destroy"]),LE=Ef(["forceDrop","drop","move","delayDrop"]),ss=()=>{let l=Q.none();const m=()=>{l=Q.none()},h=(O,F)=>{const G=l.map(oe=>O.compare(oe,F));return l=Q.some(F),G},v=(O,F)=>{F.extract(O).each(oe=>{h(F,oe).each(je=>{S.trigger.move(je)})})},S=Dg({move:Fl(["info"])});return{onEvent:v,reset:m,events:S.registry}},HE=()=>{const l=Dg({move:Fl(["info"])});return{onEvent:Ze,reset:Ze,events:l.registry}},pS=()=>{const l=HE(),m=ss();let h=l;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=l},isOn:()=>h===m,onEvent:(G,oe)=>{h.onEvent(G,oe)},events:m.events}},ew=(l,m,h)=>{let v=!1;const S=Dg({start:Fl([]),stop:Fl([])}),O=pS(),F=()=>{on.stop(),O.isOn()&&(O.off(),S.trigger.stop())},G=hS(F,200),oe=Cn=>{on.start(Cn),O.on(),S.trigger.start()},we=Cn=>{G.cancel(),O.onEvent(Cn,m)};O.events.move.bind(Cn=>{m.mutate(l,Cn.info)});const je=()=>{v=!0},zt=()=>{v=!1},bn=Cn=>(...At)=>{v&&Cn.apply(null,At)},on=m.sink(LE({forceDrop:F,drop:bn(F),move:bn(we),delayDrop:bn(G.throttle)}),h),kt=()=>{on.destroy()};return{element:on.element,go:oe,on:je,off:zt,destroy:kt,events:S.registry}},bS=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},Od=bS("ephox-dragster").resolve,Mv=l=>{const m={layerClass:Od("blocker"),...l},h=q.fromTag("div");return ys(h,"role","presentation"),Ds(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),bm(h,Od("blocker")),bm(h,m.layerClass),{element:te(h),destroy:()=>{Mr(h)}}};var wS=SO({compare:(l,m)=>Ol(m.left-l.left,m.top-l.top),extract:l=>Q.some(Ol(l.x,l.y)),sink:(l,m)=>{const h=Mv(m),v=Tf(h.element(),"mousedown",l.forceDrop),S=Tf(h.element(),"mouseup",l.drop),O=Tf(h.element(),"mousemove",l.move),F=Tf(h.element(),"mouseout",l.delayDrop),G=()=>{h.destroy(),S.unbind(),O.unbind(),F.unbind(),v.unbind()},oe=je=>{qo(je,h.element())},we=()=>{Mr(h.element())};return IE({element:h.element,start:oe,stop:we,destroy:G})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const EO=(l,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:wS;return ew(l,v,m)},_f=bS("ephox-snooker").resolve,tw=()=>{const l=Dg({drag:Fl(["xDelta","yDelta"])});return{mutate:(h,v)=>{l.trigger.drag(h,v)},events:l.registry}},zE=()=>{const l=Dg({drag:Fl(["xDelta","yDelta","target"])});let m=Q.none();const h=tw();return h.events.drag.bind(O=>{m.each(F=>{l.trigger.drag(O.xDelta,O.yDelta,F)})}),{assign:O=>{m=Q.some(O)},get:()=>m,mutate:h.mutate,events:l.registry}},CS=(l,m,h,v,S)=>{const O=q.fromTag("div");return Ds(O,{position:"absolute",left:m-v/2+"px",top:h+"px",height:S+"px",width:v+"px"}),cs(O,{"data-column":l,role:"presentation"}),O},Eo=(l,m,h,v,S)=>{const O=q.fromTag("div");return Ds(O,{position:"absolute",left:m+"px",top:h-S/2+"px",height:S+"px",width:v+"px"}),cs(O,{"data-row":l,role:"presentation"}),O},ep=_f("resizer-bar"),SS=_f("resizer-rows"),xS=_f("resizer-cols"),Rg=7,nw=(l,m)=>xe(l.all,(h,v)=>m(h.element)?[v]:[]),VE=(l,m)=>{const h=[];return Ue(l.grid.columns,v=>{Ho.getColumnAt(l,v).map(O=>O.element).forall(m)&&h.push(v)}),ze(h,v=>{const S=Ho.filterItems(l,O=>O.column===v);return We(S,O=>m(O.element))})},Nv=l=>{const m=sr(l.parent(),"."+ep);Ae(m,Mr)},kS=(l,m,h)=>{const v=l.origin();Ae(m,S=>{S.each(O=>{const F=h(v,O);bm(F,ep),qo(l.parent(),F)})})},ow=(l,m,h,v)=>{kS(l,m,(S,O)=>{const F=CS(O.col,O.x-S.left,h.top-S.top,Rg,v);return bm(F,xS),F})},TS=(l,m,h,v)=>{kS(l,m,(S,O)=>{const F=Eo(O.row,h.left-S.left,O.y-S.top,v,Rg);return bm(F,SS),F})},UE=(l,m,h,v,S)=>{const O=Au(h),F=m.isResizable,G=v.length>0?Ou.positions(v,h):[],oe=G.length>0?nw(l,F):[],we=ze(G,(on,kt)=>ge(oe,Cn=>kt===Cn));TS(m,we,O,to(h));const je=S.length>0?ei.positions(S,h):[],zt=je.length>0?VE(l,F):[],bn=ze(je,(on,kt)=>ge(zt,Cn=>kt===Cn));ow(m,bn,O,uh(h))},$v=(l,m)=>{if(Nv(l),l.isResizable(m)){const h=Ho.fromTable(m),v=_u(h),S=uc(h);UE(h,l,m,v,S)}},kb=(l,m)=>{const h=sr(l.parent(),"."+ep);Ae(h,m)},sw=l=>{kb(l,m=>{Qo(m,"display","none")})},Bv=l=>{kb(l,m=>{Qo(m,"display","block")})},Pv=l=>Av(l,SS),Tb=l=>Av(l,xS),Mg=_f("resizer-bar-dragging"),AO=l=>{const m=zE(),h=EO(m,{});let v=Q.none();const S=(kt,Cn)=>Q.from(mr(kt,Cn));m.events.drag.bind(kt=>{S(kt.target,"data-row").each(Cn=>{const At=qr(kt.target,"top");Qo(kt.target,"top",At+kt.yDelta+"px")}),S(kt.target,"data-column").each(Cn=>{const At=qr(kt.target,"left");Qo(kt.target,"left",At+kt.xDelta+"px")})});const O=(kt,Cn)=>{const At=qr(kt,Cn),Xn=Rs(kt,"data-initial-"+Cn,0);return At-Xn};h.events.stop.bind(()=>{m.get().each(kt=>{v.each(Cn=>{S(kt,"data-row").each(At=>{const Xn=O(kt,"top");Is(kt,"data-initial-top"),on.trigger.adjustHeight(Cn,Xn,parseInt(At,10))}),S(kt,"data-column").each(At=>{const Xn=O(kt,"left");Is(kt,"data-initial-left"),on.trigger.adjustWidth(Cn,Xn,parseInt(At,10))}),$v(l,Cn)})})});const F=(kt,Cn)=>{on.trigger.startAdjust(),m.assign(kt),ys(kt,"data-initial-"+Cn,qr(kt,Cn)),bm(kt,Mg),Qo(kt,"opacity","0.2"),h.go(l.parent())},G=Tf(l.parent(),"mousedown",kt=>{Pv(kt.target)&&F(kt.target,"top"),Tb(kt.target)&&F(kt.target,"left")}),oe=kt=>In(kt,l.view()),we=kt=>gr(kt,"table",oe).filter(su),je=Tf(l.view(),"mouseover",kt=>{we(kt.target).fold(()=>{$r(kt.target)&&Nv(l)},Cn=>{v=Q.some(Cn),$v(l,Cn)})}),zt=()=>{G.unbind(),je.unbind(),h.destroy(),Nv(l)},bn=kt=>{$v(l,kt)},on=Dg({adjustHeight:Fl(["table","delta","row"]),adjustWidth:Fl(["table","delta","column"]),startAdjust:Fl([])});return{destroy:zt,refresh:bn,on:h.on,off:h.off,hideBars:yt(sw,l),showBars:yt(Bv,l),events:on.registry}},WE={create:(l,m,h)=>{const v=Ou,S=ei,O=AO(l),F=Dg({beforeResize:Fl(["table","type"]),afterResize:Fl(["table","type"]),startDrag:Fl([])});return O.events.adjustHeight.bind(G=>{const oe=G.table;F.trigger.beforeResize(oe,"row");const we=v.delta(G.delta,oe);U1(oe,we,G.row,v),F.trigger.afterResize(oe,"row")}),O.events.startAdjust.bind(G=>{F.trigger.startDrag()}),O.events.adjustWidth.bind(G=>{const oe=G.table;F.trigger.beforeResize(oe,"col");const we=S.delta(G.delta,oe),je=h(oe);rm(oe,we,G.column,m,je),F.trigger.afterResize(oe,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:F.registry}}},Xi={only:(l,m)=>{const h=Tr(l)?Wt(l):l;return{parent:te(h),view:te(l),origin:te(Ol(0,0)),isResizable:m}},detached:(l,m,h)=>{const v=()=>Au(m);return{parent:te(m),view:te(l),origin:v,isResizable:h}},body:(l,m,h)=>({parent:te(m),view:te(l),origin:te(Ol(0,0)),isResizable:h})},aw=()=>{const l=q.fromTag("div");return Ds(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),qo(Ia(),l),l},Eb=(l,m)=>l.inline?Xi.body(q.fromDom(l.getBody()),aw(),m):Xi.only(q.fromDom(l.getDoc()),m),Fv=(l,m)=>{l.inline&&Mr(m.parent())},vm=l=>ct(l)&&l.nodeName==="TABLE",cw="bar-",ZE=l=>mr(l,"data-mce-resize")!=="false",jE=l=>{const m=Ho.fromTable(l);Ho.hasColumns(m)||Ae(_l(l),h=>{const v=Ea(h,"width");Qo(h,"width",v),Is(h,"width")})},ES=l=>{const m=jh(),h=jh(),v=jh();let S,O;const F=kt=>pg(l,kt),G=()=>ov(l)?M1():GC(),oe=kt=>xh(kt).columns,we=(kt,Cn,At)=>{const Xn=me(Cn,"e");if(O===""&&hf(kt),At!==S&&O!==""){Qo(kt,"width",O);const _o=G(),Vo=F(kt),Or=ov(l)||Xn?oe(kt)-1:0;rm(kt,At-S,Or,_o,Vo)}else if(mT(O)){const _o=parseFloat(O.replace("%","")),Vo=At*_o/S;Qo(kt,"width",Vo+"%")}ef(O)&&jE(kt)},je=()=>{h.on(kt=>{kt.destroy()}),v.on(kt=>{Fv(l,kt)})};return l.on("init",()=>{const kt=Eb(l,ZE);if(v.set(kt),jT(l)&&GT(l)){const Cn=G(),At=WE.create(kt,Cn,F);At.on(),At.events.startDrag.bind(Xn=>{m.set(l.selection.getRng())}),At.events.beforeResize.bind(Xn=>{const _o=Xn.table.dom;Lu(l,_o,Op(_o),qd(_o),cw+Xn.type)}),At.events.afterResize.bind(Xn=>{const _o=Xn.table,Vo=_o.dom;Ri(_o),m.on(Or=>{l.selection.setRng(Or),l.focus()}),x2(l,Vo,Op(Vo),qd(Vo),cw+Xn.type),l.undoManager.add()}),h.set(At)}}),l.on("ObjectResizeStart",kt=>{const Cn=kt.target;if(vm(Cn)){const At=q.fromDom(Cn);Ae(l.dom.select(".mce-clonedresizable"),Xn=>{l.dom.addClass(Xn,"mce-"+Jp(l)+"-columns")}),!M2(At)&&Fh(l)?Ih(At):!R2(At)&&hg(l)&&hf(At),bg(At)&&ne(kt.origin,cw)&&hf(At),S=kt.width,O=Qp(l)?"":Qm(l,Cn).getOr("")}}),l.on("ObjectResized",kt=>{const Cn=kt.target;if(vm(Cn)){const At=q.fromDom(Cn),Xn=kt.origin;ne(Xn,"corner-")&&we(At,Xn,kt.width),Ri(At),Yi(l,At.dom,Xp)}}),l.on("SwitchMode",()=>{h.on(kt=>{l.mode.isReadOnly()?kt.hideBars():kt.showBars()})}),l.on("remove",()=>{je()}),{refresh:kt=>{h.on(Cn=>Cn.refreshBars(q.fromDom(kt)))},hide:()=>{h.on(kt=>kt.hideBars())},show:()=>{h.on(kt=>kt.showBars())}}},Ss=l=>{ZT(l);const m=ES(l),h=Jy(l,m),v=Vr(l,m,h);return Ty(l,v),lE(l,v),si(l,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},Wu=l=>({table:Ss(l)});var Ng=()=>{_t.add("dom",Wu)};Ng()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(he,Q,it)=>{const Me=Q==="UL"?"InsertUnorderedList":"InsertOrderedList";he.execCommand(Me,!1,it===!1?null:{"list-style-type":it})},gt=he=>{he.addCommand("ApplyUnorderedListStyle",(Q,it)=>{It(he,"UL",it["list-style-type"])}),he.addCommand("ApplyOrderedListStyle",(Q,it)=>{It(he,"OL",it["list-style-type"])})},Ut=he=>Q=>Q.options.get(he),$t=he=>{const Q=he.options.register;Q("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),Q("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},en=Ut("advlist_number_styles"),Gt=Ut("advlist_bullet_styles"),Tt=he=>he==null,Et=he=>!Tt(he);var rt=tinymce.util.Tools.resolve("tinymce.util.Tools");class mn{constructor(Q,it){this.tag=Q,this.value=it}static some(Q){return new mn(!0,Q)}static none(){return mn.singletonNone}fold(Q,it){return this.tag?it(this.value):Q()}isSome(){return this.tag}isNone(){return!this.tag}map(Q){return this.tag?mn.some(Q(this.value)):mn.none()}bind(Q){return this.tag?Q(this.value):mn.none()}exists(Q){return this.tag&&Q(this.value)}forall(Q){return!this.tag||Q(this.value)}filter(Q){return!this.tag||Q(this.value)?this:mn.none()}getOr(Q){return this.tag?this.value:Q}or(Q){return this.tag?this:Q}getOrThunk(Q){return this.tag?this.value:Q()}orThunk(Q){return this.tag?this:Q()}getOrDie(Q){if(this.tag)return this.value;throw new Error(Q??"Called getOrDie on None")}static from(Q){return Et(Q)?mn.some(Q):mn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Q){this.tag&&Q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}mn.singletonNone=new mn(!1);const Nn=(he,Q)=>he.dom.isChildOf(Q,he.getBody()),Ot=he=>Et(he)&&/^(TH|TD)$/.test(he.nodeName),ct=he=>Q=>Et(Q)&&/^(OL|UL|DL)$/.test(Q.nodeName)&&Nn(he,Q),Bt=he=>{const Q=he.dom.getParent(he.selection.getNode(),"ol,ul"),it=he.dom.getStyle(Q,"listStyleType");return mn.from(it)},cn=(he,Q)=>Q!==null&&he.dom.getContentEditableParent(Q)==="false",Ze=(he,Q)=>{const it=he.dom.getParent(Q,"ol,ul,dl");return cn(he,it)},et=(he,Q)=>{for(let it=0;it<he.length;it++){const Me=he[it];if(Q(Me))return it}return-1},Ee=he=>he.replace(/\-/g," ").replace(/\b\w/g,Q=>Q.toUpperCase()),te=he=>Tt(he)||he==="default"?"":he,Je=(he,Q,it)=>{const Me=et(Q.parents,Ot),De=Me!==-1?Q.parents.slice(0,Me):Q.parents,Ft=rt.grep(De,ct(he));return Ft.length>0&&Ft[0].nodeName===it},Ht=(he,Q)=>it=>{const Me=De=>{it.setActive(Je(he,De,Q)),it.setEnabled(!Ze(he,De.element))};return he.on("NodeChange",Me),()=>he.off("NodeChange",Me)},yt=(he,Q,it,Me,De,Ft)=>{he.ui.registry.addSplitButton(Q,{tooltip:it,icon:De==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:_=>{const ge=rt.map(Ft,Ue=>{const Ie=De==="OL"?"num":"bull",Ae=Ue==="disc"||Ue==="decimal"?"default":Ue,tn=te(Ue),dn=Ee(Ue);return{type:"choiceitem",value:tn,icon:"list-"+Ie+"-"+Ae,text:dn}});_(ge)},onAction:()=>he.execCommand(Me),onItemAction:(_,ge)=>{It(he,De,ge)},select:_=>Bt(he).map(Ue=>_===Ue).getOr(!1),onSetup:Ht(he,De)})},K=(he,Q,it,Me,De,Ft)=>{he.ui.registry.addToggleButton(Q,{active:!1,tooltip:it,icon:De==="OL"?"ordered-list":"unordered-list",onSetup:Ht(he,De),onAction:()=>he.queryCommandState(Me)||Ft===""?he.execCommand(Me):It(he,De,Ft)})},xt=(he,Q,it,Me,De,Ft)=>{Ft.length>1?yt(he,Q,it,Me,De,Ft):K(he,Q,it,Me,De,te(Ft[0]))},En=he=>{xt(he,"numlist","Numbered list","InsertOrderedList","OL",en(he)),xt(he,"bullist","Bullet list","InsertUnorderedList","UL",Gt(he))};var St=()=>{_t.add("advlist",he=>{he.hasPlugin("lists")?($t(he),En(he),gt(he)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})};St()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager"),It=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),gt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ut=it=>Me=>Me.options.get(it),$t=it=>{const Me=it.options.register;Me("allow_html_in_named_anchor",{processor:"boolean",default:!1})},en=Ut("allow_html_in_named_anchor"),Gt="a:not([href])",Tt=it=>!it,Et=it=>it.getAttribute("id")||it.getAttribute("name")||"",rt=it=>it.nodeName.toLowerCase()==="a",mn=it=>rt(it)&&!it.getAttribute("href")&&Et(it)!=="",Nn=it=>mn(it)&&!it.firstChild,Ot=it=>{const Me=it.dom;It(Me).walk(it.selection.getRng(),De=>{gt.each(De,Ft=>{Nn(Ft)&&Me.remove(Ft,!1)})})},ct=it=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(it),Bt=it=>it.dom.getParent(it.selection.getStart(),Gt),cn=it=>{const Me=Bt(it);return Me?Et(Me):""},Ze=(it,Me)=>{it.undoManager.transact(()=>{en(it)||it.selection.collapse(!0),it.selection.isCollapsed()?it.insertContent(it.dom.createHTML("a",{id:Me})):(Ot(it),it.formatter.remove("namedAnchor",void 0,void 0,!0),it.formatter.apply("namedAnchor",{value:Me}),it.addVisual())})},et=(it,Me,De)=>{De.removeAttribute("name"),De.id=Me,it.addVisual(),it.undoManager.add()},Ee=(it,Me)=>{const De=Bt(it);De?et(it,Me,De):Ze(it,Me),it.focus()},te=(it,Me)=>ct(Me)?(Ee(it,Me),!0):(it.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),Je=it=>{const Me=cn(it);it.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:Me},onSubmit:De=>{te(it,De.getData().id)&&De.close()}})},Ht=it=>{it.addCommand("mceAnchor",()=>{Je(it)})},yt=it=>Tt(it.attr("href"))&&!Tt(it.attr("id")||it.attr("name")),K=it=>yt(it)&&!it.firstChild,xt=it=>Me=>{for(let De=0;De<Me.length;De++){const Ft=Me[De];K(Ft)&&Ft.attr("contenteditable",it)}},En=it=>{it.on("PreInit",()=>{it.parser.addNodeFilter("a",xt("false")),it.serializer.addNodeFilter("a",xt(null))})},St=it=>{it.formatter.register("namedAnchor",{inline:"a",selector:Gt,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(Me,De,Ft)=>mn(Me)})},he=it=>{const Me=()=>it.execCommand("mceAnchor");it.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:Me,onSetup:De=>it.selection.selectorChangedWithUnbind("a:not([href])",De.setActive).unbind}),it.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:Me})};var Q=()=>{_t.add("anchor",it=>{$t(it),En(it),Ht(it),he(it),it.on("PreInit",()=>{St(it)})})};Q()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,gt=ze=>jt=>jt.options.get(ze),Ut=ze=>{const jt=ze.options.register;jt("autolink_pattern",{processor:"regexp",default:new RegExp("^"+It().source+"$","i")}),jt("link_default_target",{processor:"string"}),jt("link_default_protocol",{processor:"string",default:"https"})},$t=gt("autolink_pattern"),en=gt("link_default_target"),Gt=gt("link_default_protocol"),Tt=gt("allow_unsafe_link_target"),Et=(ze,jt,Nt)=>{var Ve;return Nt(ze,jt.prototype)?!0:((Ve=ze.constructor)===null||Ve===void 0?void 0:Ve.name)===jt.name},rt=ze=>{const jt=typeof ze;return ze===null?"null":jt==="object"&&Array.isArray(ze)?"array":jt==="object"&&Et(ze,String,(Nt,Ve)=>Ve.isPrototypeOf(Nt))?"string":jt},mn=ze=>jt=>rt(jt)===ze,Nn=ze=>jt=>ze===jt,Ot=mn("string"),ct=Nn(void 0),Bt=ze=>ze==null,cn=ze=>!Bt(ze),Ze=ze=>jt=>!ze(jt),et=Object.hasOwnProperty,Ee=(ze,jt)=>et.call(ze,jt),te=(ze,jt,Nt)=>jt===""||ze.length>=jt.length&&ze.substr(Nt,Nt+jt.length)===jt,Je=(ze,jt,Nt=0,Ve)=>{const R=ze.indexOf(jt,Nt);return R!==-1?ct(Ve)?!0:R+jt.length<=Ve:!1},Ht=(ze,jt)=>te(ze,jt,0),yt="\uFEFF",K=ze=>ze===yt,xt=ze=>ze.replace(/\uFEFF/g,"");var En=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const St=ze=>ze.nodeType===3,he=ze=>ze.nodeType===1,Q=ze=>/^[(\[{ \u00a0]$/.test(ze),it=ze=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(ze),Me=ze=>/[?!,.;:]/.test(ze),De=(ze,jt,Nt)=>{for(let Ve=jt-1;Ve>=0;Ve--){const R=ze.charAt(Ve);if(!K(R)&&Nt(R))return Ve}return-1},Ft=(ze,jt)=>{let Nt=ze,Ve=jt;for(;he(Nt)&&Nt.childNodes[Ve];)Nt=Nt.childNodes[Ve],Ve=St(Nt)?Nt.data.length:Nt.childNodes.length;return{container:Nt,offset:Ve}},_=(ze,jt)=>{var Nt;const Ve=ze.schema.getVoidElements(),R=$t(ze),{dom:qn,selection:_e}=ze;if(qn.getParent(_e.getNode(),"a[href]")!==null)return null;const xe=_e.getRng(),We=En(qn,Pe=>qn.isBlock(Pe)||Ee(Ve,Pe.nodeName.toLowerCase())||qn.getContentEditable(Pe)==="false"),{container:ke,offset:ae}=Ft(xe.endContainer,xe.endOffset),se=(Nt=qn.getParent(ke,qn.isBlock))!==null&&Nt!==void 0?Nt:qn.getRoot(),re=We.backwards(ke,ae+jt,(Pe,Yt)=>{const rn=Pe.data,ro=De(rn,Yt,Ze(Q));return ro===-1||Me(rn[ro])?ro:ro+1},se);if(!re)return null;let z=re.container;const Y=We.backwards(re.container,re.offset,(Pe,Yt)=>{z=Pe;const rn=De(Pe.data,Yt,Q);return rn===-1?rn:rn+1},se),H=qn.createRng();Y?H.setStart(Y.container,Y.offset):H.setStart(z,0),H.setEnd(re.container,re.offset);const Be=xt(H.toString()).match(R);if(Be){let Pe=Be[0];return Ht(Pe,"www.")?Pe=Gt(ze)+"://"+Pe:Je(Pe,"@")&&!it(Pe)&&(Pe="mailto:"+Pe),{rng:H,url:Pe}}else return null},ge=(ze,jt)=>{const{dom:Nt,selection:Ve}=ze,{rng:R,url:qn}=jt,_e=Ve.getBookmark();Ve.setRng(R);const xe="createlink",We={command:xe,ui:!1,value:qn};if(!ze.dispatch("BeforeExecCommand",We).isDefaultPrevented()){ze.getDoc().execCommand(xe,!1,qn),ze.dispatch("ExecCommand",We);const ae=en(ze);if(Ot(ae)){const se=Ve.getNode();Nt.setAttrib(se,"target",ae),ae==="_blank"&&!Tt(ze)&&Nt.setAttrib(se,"rel","noopener")}}Ve.moveToBookmark(_e),ze.nodeChanged()},Ue=ze=>{const jt=_(ze,-1);cn(jt)&&ge(ze,jt)},Ie=Ue,Ae=ze=>{const jt=_(ze,0);cn(jt)&&ge(ze,jt)},tn=ze=>{ze.on("keydown",jt=>{jt.keyCode===13&&!jt.isDefaultPrevented()&&Ae(ze)}),ze.on("keyup",jt=>{jt.keyCode===32?Ue(ze):(jt.keyCode===48&&jt.shiftKey||jt.keyCode===221)&&Ie(ze)})};var dn=()=>{_t.add("autolink",ze=>{Ut(ze),tn(ze)})};dn()})();(function(){const _t=Ee=>{let te=Ee;return{get:()=>te,set:yt=>{te=yt}}};var It=tinymce.util.Tools.resolve("tinymce.PluginManager"),gt=tinymce.util.Tools.resolve("tinymce.Env");const Ut=Ee=>Ee.dispatch("ResizeEditor"),$t=Ee=>te=>te.options.get(Ee),en=Ee=>{const te=Ee.options.register;te("autoresize_overflow_padding",{processor:"number",default:1}),te("autoresize_bottom_margin",{processor:"number",default:50})},Gt=$t("min_height"),Tt=$t("max_height"),Et=$t("autoresize_overflow_padding"),rt=$t("autoresize_bottom_margin"),mn=Ee=>Ee.plugins.fullscreen&&Ee.plugins.fullscreen.isFullscreen(),Nn=(Ee,te)=>{const Je=Ee.getBody();Je&&(Je.style.overflowY=te?"":"hidden",te||(Je.scrollTop=0))},Ot=(Ee,te,Je,Ht)=>{var yt;const K=parseInt((yt=Ee.getStyle(te,Je,Ht))!==null&&yt!==void 0?yt:"",10);return isNaN(K)?0:K},ct=Ee=>{if((Ee==null?void 0:Ee.type.toLowerCase())==="setcontent"){const te=Ee;return te.selection===!0||te.paste===!0}else return!1},Bt=(Ee,te,Je)=>{var Ht;const yt=Ee.dom,K=Ee.getDoc();if(!K)return;if(mn(Ee)){Nn(Ee,!0);return}const xt=K.documentElement,En=rt(Ee),St=(Ht=Gt(Ee))!==null&&Ht!==void 0?Ht:Ee.getElement().offsetHeight;let he=St;const Q=Ot(yt,xt,"margin-top",!0),it=Ot(yt,xt,"margin-bottom",!0);let Me=xt.offsetHeight+Q+it+En;Me<0&&(Me=0);const De=Ee.getContainer().offsetHeight,Ft=Ee.getContentAreaContainer().offsetHeight,_=De-Ft;Me+_>St&&(he=Me+_);const ge=Tt(Ee);if(ge&&he>ge?(he=ge,Nn(Ee,!0)):Nn(Ee,!1),he!==te.get()){const Ue=he-te.get();if(yt.setStyle(Ee.getContainer(),"height",he+"px"),te.set(he),Ut(Ee),gt.browser.isSafari()&&(gt.os.isMacOS()||gt.os.isiOS())){const Ie=Ee.getWin();Ie.scrollTo(Ie.pageXOffset,Ie.pageYOffset)}Ee.hasFocus()&&ct(Je)&&Ee.selection.scrollIntoView(),(gt.browser.isSafari()||gt.browser.isChromium())&&Ue<0&&Bt(Ee,te,Je)}},cn=(Ee,te)=>{Ee.on("init",()=>{const Je=Et(Ee),Ht=Ee.dom;Ht.setStyles(Ee.getDoc().documentElement,{height:"auto"}),Ht.setStyles(Ee.getBody(),{paddingLeft:Je,paddingRight:Je,"min-height":0})}),Ee.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Je=>{Bt(Ee,te,Je)})},Ze=(Ee,te)=>{Ee.addCommand("mceAutoResize",()=>{Bt(Ee,te)})};var et=()=>{It.add("autoresize",Ee=>{if(en(Ee),Ee.options.isSet("resize")||Ee.options.set("resize",!1),!Ee.inline){const te=_t(0);Ze(Ee,te),cn(Ee,te)}})};et()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(ke,ae)=>ke.dispatch("insertCustomChar",{chr:ae}),gt=(ke,ae)=>{const se=It(ke,ae).chr;ke.execCommand("mceInsertContent",!1,se)},Ut=(ke,ae,se)=>{var re;return se(ke,ae.prototype)?!0:((re=ke.constructor)===null||re===void 0?void 0:re.name)===ae.name},$t=ke=>{const ae=typeof ke;return ke===null?"null":ae==="object"&&Array.isArray(ke)?"array":ae==="object"&&Ut(ke,String,(se,re)=>re.isPrototypeOf(se))?"string":ae},en=ke=>ae=>$t(ae)===ke,Gt=ke=>ae=>typeof ae===ke,Tt=ke=>ae=>ke===ae,Et=en("array"),rt=Tt(null),mn=Tt(void 0),Nn=ke=>ke==null,Ot=ke=>!Nn(ke),ct=Gt("function"),cn=(ke=>()=>ke)(!1);class Ze{constructor(ae,se){this.tag=ae,this.value=se}static some(ae){return new Ze(!0,ae)}static none(){return Ze.singletonNone}fold(ae,se){return this.tag?se(this.value):ae()}isSome(){return this.tag}isNone(){return!this.tag}map(ae){return this.tag?Ze.some(ae(this.value)):Ze.none()}bind(ae){return this.tag?ae(this.value):Ze.none()}exists(ae){return this.tag&&ae(this.value)}forall(ae){return!this.tag||ae(this.value)}filter(ae){return!this.tag||ae(this.value)?this:Ze.none()}getOr(ae){return this.tag?this.value:ae}or(ae){return this.tag?this:ae}getOrThunk(ae){return this.tag?this.value:ae()}orThunk(ae){return this.tag?this:ae()}getOrDie(ae){if(this.tag)return this.value;throw new Error(ae??"Called getOrDie on None")}static from(ae){return Ot(ae)?Ze.some(ae):Ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ae){this.tag&&ae(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ze.singletonNone=new Ze(!1);const et=Array.prototype.push,Ee=(ke,ae)=>{const se=ke.length,re=new Array(se);for(let z=0;z<se;z++){const Y=ke[z];re[z]=ae(Y,z)}return re},te=(ke,ae)=>{for(let se=0,re=ke.length;se<re;se++){const z=ke[se];ae(z,se)}},Je=(ke,ae,se)=>{for(let re=0,z=ke.length;re<z;re++){const Y=ke[re];if(ae(Y,re))return Ze.some(Y);if(se(Y,re))break}return Ze.none()},Ht=(ke,ae)=>Je(ke,ae,cn),yt=ke=>{const ae=[];for(let se=0,re=ke.length;se<re;++se){if(!Et(ke[se]))throw new Error("Arr.flatten item "+se+" was not an array, input: "+ke);et.apply(ae,ke[se])}return ae},K=(ke,ae)=>yt(Ee(ke,ae));var xt=tinymce.util.Tools.resolve("tinymce.util.Tools");const En=ke=>ae=>ae.options.get(ke),St=ke=>{const ae=ke.options.register,se=re=>ct(re)||Et(re);ae("charmap",{processor:se}),ae("charmap_append",{processor:se})},he=En("charmap"),Q=En("charmap_append"),it=xt.isArray,Me="User Defined",De=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],Ft=ke=>xt.grep(ke,ae=>it(ae)&&ae.length===2),_=ke=>it(ke)?Ft(ke):typeof ke=="function"?ke():[],ge=(ke,ae)=>{const se=he(ke);se&&(ae=[{name:Me,characters:_(se)}]);const re=Q(ke);if(re){const z=xt.grep(ae,Y=>Y.name===Me);return z.length?(z[0].characters=[...z[0].characters,..._(re)],ae):ae.concat({name:Me,characters:_(re)})}return ae},Ue=ke=>{const ae=ge(ke,De());return ae.length>1?[{name:"All",characters:K(ae,se=>se.characters)}].concat(ae):ae},Ie=ke=>({getCharMap:()=>Ue(ke),insertChar:re=>{gt(ke,re)}}),Ae=ke=>{let ae=ke;return{get:()=>ae,set:z=>{ae=z}}},tn=(ke,ae)=>{let se=null;const re=()=>{rt(se)||(clearTimeout(se),se=null)};return{cancel:re,throttle:(...Y)=>{re(),se=setTimeout(()=>{se=null,ke.apply(null,Y)},ae)}}},dn=(ke,ae,se=0,re)=>{const z=ke.indexOf(ae,se);return z!==-1?mn(re)?!0:z+ae.length<=re:!1},ze=String.fromCodePoint,jt=(ke,ae,se)=>dn(ze(ke).toLowerCase(),se)?!0:dn(ae.toLowerCase(),se)||dn(ae.toLowerCase().replace(/\s+/g,""),se),Nt=(ke,ae)=>{const se=[],re=ae.toLowerCase();return te(ke.characters,z=>{jt(z[0],z[1],re)&&se.push(z)}),Ee(se,z=>({text:z[1],value:ze(z[0]),icon:ze(z[0])}))},Ve="pattern",R=(ke,ae)=>{const se=()=>[{label:"Search",type:"input",name:Ve},{type:"collection",name:"results"}],re=()=>Ee(ae,Qn=>({title:Qn.name,name:Qn.name,items:se()})),z=()=>({type:"panel",items:se()}),Y=()=>({type:"tabpanel",tabs:re()}),H=ae.length===1?Ae(Me):Ae("All"),Z=(Qn,kn)=>{Ht(ae,ao=>ao.name===H.get()).each(ao=>{const Re=Nt(ao,kn);Qn.setData({results:Re})})},Pe=tn(Qn=>{const kn=Qn.getData().pattern;Z(Qn,kn)},40),Yt=ae.length===1?z():Y(),rn={pattern:"",results:Nt(ae[0],"")},ro={title:"Special Character",size:"normal",body:Yt,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:rn,onAction:(Qn,kn)=>{kn.name==="results"&&(gt(ke,kn.value),Qn.close())},onTabChange:(Qn,kn)=>{H.set(kn.newTabName),Pe.throttle(Qn)},onChange:(Qn,kn)=>{kn.name===Ve&&Pe.throttle(Qn)}};ke.windowManager.open(ro).focus(Ve)},qn=(ke,ae)=>{ke.addCommand("mceShowCharmap",()=>{R(ke,ae)})},_e=(ke,ae)=>{ke.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(se,re)=>new Promise((z,Y)=>{z(Nt(ae,se))}),onAction:(se,re,z)=>{ke.selection.setRng(re),ke.insertContent(z),se.hide()}})},xe=ke=>{const ae=()=>ke.execCommand("mceShowCharmap");ke.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:ae}),ke.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:ae})};var We=()=>{_t.add("charmap",ke=>{St(ke);const ae=Ue(ke);return qn(ke,ae),xe(ke),_e(ke,ae[0]),Ie(ke)})};We()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(Tt,Et)=>{Tt.focus(),Tt.undoManager.transact(()=>{Tt.setContent(Et)}),Tt.selection.setCursorLocation(),Tt.nodeChanged()},gt=Tt=>Tt.getContent({source_view:!0}),Ut=Tt=>{const Et=gt(Tt);Tt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Et},onSubmit:rt=>{It(Tt,rt.getData().code),rt.close()}})},$t=Tt=>{Tt.addCommand("mceCodeEditor",()=>{Ut(Tt)})},en=Tt=>{const Et=()=>Tt.execCommand("mceCodeEditor");Tt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Et}),Tt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Et})};var Gt=()=>{_t.add("code",Tt=>($t(Tt),en(Tt),{}))};Gt()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=Me=>Me==null,gt=Me=>!It(Me),Ut=Me=>()=>Me;class $t{constructor(De,Ft){this.tag=De,this.value=Ft}static some(De){return new $t(!0,De)}static none(){return $t.singletonNone}fold(De,Ft){return this.tag?Ft(this.value):De()}isSome(){return this.tag}isNone(){return!this.tag}map(De){return this.tag?$t.some(De(this.value)):$t.none()}bind(De){return this.tag?De(this.value):$t.none()}exists(De){return this.tag&&De(this.value)}forall(De){return!this.tag||De(this.value)}filter(De){return!this.tag||De(this.value)?this:$t.none()}getOr(De){return this.tag?this.value:De}or(De){return this.tag?this:De}getOrThunk(De){return this.tag?this.value:De()}orThunk(De){return this.tag?this:De()}getOrDie(De){if(this.tag)return this.value;throw new Error(De??"Called getOrDie on None")}static from(De){return gt(De)?$t.some(De):$t.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(De){this.tag&&De(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$t.singletonNone=new $t(!1);const en=(Me,De)=>De>=0&&De<Me.length?$t.some(Me[De]):$t.none(),Gt=Me=>en(Me,0);var Tt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const Et=typeof window<"u"?window:Function("return this;")(),rt=function(Me,De,Ft){const _=window.Prism;window.Prism={manual:!0};var ge=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Ue=function(Ie){var Ae=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,tn=0,dn={},ze={manual:Ie.Prism&&Ie.Prism.manual,disableWorkerMessageHandler:Ie.Prism&&Ie.Prism.disableWorkerMessageHandler,util:{encode:function se(re){return re instanceof jt?new jt(re.type,se(re.content),re.alias):Array.isArray(re)?re.map(se):re.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(se){return Object.prototype.toString.call(se).slice(8,-1)},objId:function(se){return se.__id||Object.defineProperty(se,"__id",{value:++tn}),se.__id},clone:function se(re,z){z=z||{};var Y,H;switch(ze.util.type(re)){case"Object":if(H=ze.util.objId(re),z[H])return z[H];Y={},z[H]=Y;for(var Z in re)re.hasOwnProperty(Z)&&(Y[Z]=se(re[Z],z));return Y;case"Array":return H=ze.util.objId(re),z[H]?z[H]:(Y=[],z[H]=Y,re.forEach(function(Be,Pe){Y[Pe]=se(Be,z)}),Y);default:return re}},getLanguage:function(se){for(;se;){var re=Ae.exec(se.className);if(re)return re[1].toLowerCase();se=se.parentElement}return"none"},setLanguage:function(se,re){se.className=se.className.replace(RegExp(Ae,"gi"),""),se.classList.add("language-"+re)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(Y){var se=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Y.stack)||[])[1];if(se){var re=document.getElementsByTagName("script");for(var z in re)if(re[z].src==se)return re[z]}return null}},isActive:function(se,re,z){for(var Y="no-"+re;se;){var H=se.classList;if(H.contains(re))return!0;if(H.contains(Y))return!1;se=se.parentElement}return!!z}},languages:{plain:dn,plaintext:dn,text:dn,txt:dn,extend:function(se,re){var z=ze.util.clone(ze.languages[se]);for(var Y in re)z[Y]=re[Y];return z},insertBefore:function(se,re,z,Y){Y=Y||ze.languages;var H=Y[se],Z={};for(var Be in H)if(H.hasOwnProperty(Be)){if(Be==re)for(var Pe in z)z.hasOwnProperty(Pe)&&(Z[Pe]=z[Pe]);z.hasOwnProperty(Be)||(Z[Be]=H[Be])}var Yt=Y[se];return Y[se]=Z,ze.languages.DFS(ze.languages,function(rn,ro){ro===Yt&&rn!=se&&(this[rn]=Z)}),Z},DFS:function se(re,z,Y,H){H=H||{};var Z=ze.util.objId;for(var Be in re)if(re.hasOwnProperty(Be)){z.call(re,Be,re[Be],Y||Be);var Pe=re[Be],Yt=ze.util.type(Pe);Yt==="Object"&&!H[Z(Pe)]?(H[Z(Pe)]=!0,se(Pe,z,null,H)):Yt==="Array"&&!H[Z(Pe)]&&(H[Z(Pe)]=!0,se(Pe,z,Be,H))}}},plugins:{},highlightAll:function(se,re){ze.highlightAllUnder(document,se,re)},highlightAllUnder:function(se,re,z){var Y={callback:z,container:se,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};ze.hooks.run("before-highlightall",Y),Y.elements=Array.prototype.slice.apply(Y.container.querySelectorAll(Y.selector)),ze.hooks.run("before-all-elements-highlight",Y);for(var H=0,Z;Z=Y.elements[H++];)ze.highlightElement(Z,re===!0,Y.callback)},highlightElement:function(se,re,z){var Y=ze.util.getLanguage(se),H=ze.languages[Y];ze.util.setLanguage(se,Y);var Z=se.parentElement;Z&&Z.nodeName.toLowerCase()==="pre"&&ze.util.setLanguage(Z,Y);var Be=se.textContent,Pe={element:se,language:Y,grammar:H,code:Be};function Yt(ro){Pe.highlightedCode=ro,ze.hooks.run("before-insert",Pe),Pe.element.innerHTML=Pe.highlightedCode,ze.hooks.run("after-highlight",Pe),ze.hooks.run("complete",Pe),z&&z.call(Pe.element)}if(ze.hooks.run("before-sanity-check",Pe),Z=Pe.element.parentElement,Z&&Z.nodeName.toLowerCase()==="pre"&&!Z.hasAttribute("tabindex")&&Z.setAttribute("tabindex","0"),!Pe.code){ze.hooks.run("complete",Pe),z&&z.call(Pe.element);return}if(ze.hooks.run("before-highlight",Pe),!Pe.grammar){Yt(ze.util.encode(Pe.code));return}if(re&&Ie.Worker){var rn=new Worker(ze.filename);rn.onmessage=function(ro){Yt(ro.data)},rn.postMessage(JSON.stringify({language:Pe.language,code:Pe.code,immediateClose:!0}))}else Yt(ze.highlight(Pe.code,Pe.grammar,Pe.language))},highlight:function(se,re,z){var Y={code:se,grammar:re,language:z};if(ze.hooks.run("before-tokenize",Y),!Y.grammar)throw new Error('The language "'+Y.language+'" has no grammar.');return Y.tokens=ze.tokenize(Y.code,Y.grammar),ze.hooks.run("after-tokenize",Y),jt.stringify(ze.util.encode(Y.tokens),Y.language)},tokenize:function(se,re){var z=re.rest;if(z){for(var Y in z)re[Y]=z[Y];delete re.rest}var H=new R;return qn(H,H.head,se),Ve(se,H,re,H.head,0),xe(H)},hooks:{all:{},add:function(se,re){var z=ze.hooks.all;z[se]=z[se]||[],z[se].push(re)},run:function(se,re){var z=ze.hooks.all[se];if(!(!z||!z.length))for(var Y=0,H;H=z[Y++];)H(re)}},Token:jt};Ie.Prism=ze;function jt(se,re,z,Y){this.type=se,this.content=re,this.alias=z,this.length=(Y||"").length|0}jt.stringify=function se(re,z){if(typeof re=="string")return re;if(Array.isArray(re)){var Y="";return re.forEach(function(Yt){Y+=se(Yt,z)}),Y}var H={type:re.type,content:se(re.content,z),tag:"span",classes:["token",re.type],attributes:{},language:z},Z=re.alias;Z&&(Array.isArray(Z)?Array.prototype.push.apply(H.classes,Z):H.classes.push(Z)),ze.hooks.run("wrap",H);var Be="";for(var Pe in H.attributes)Be+=" "+Pe+'="'+(H.attributes[Pe]||"").replace(/"/g,"&quot;")+'"';return"<"+H.tag+' class="'+H.classes.join(" ")+'"'+Be+">"+H.content+"</"+H.tag+">"};function Nt(se,re,z,Y){se.lastIndex=re;var H=se.exec(z);if(H&&Y&&H[1]){var Z=H[1].length;H.index+=Z,H[0]=H[0].slice(Z)}return H}function Ve(se,re,z,Y,H,Z){for(var Be in z)if(!(!z.hasOwnProperty(Be)||!z[Be])){var Pe=z[Be];Pe=Array.isArray(Pe)?Pe:[Pe];for(var Yt=0;Yt<Pe.length;++Yt){if(Z&&Z.cause==Be+","+Yt)return;var rn=Pe[Yt],ro=rn.inside,uo=!!rn.lookbehind,Qn=!!rn.greedy,kn=rn.alias;if(Qn&&!rn.pattern.global){var ao=rn.pattern.toString().match(/[imsuy]*$/)[0];rn.pattern=RegExp(rn.pattern.source,ao+"g")}for(var Re=rn.pattern||rn,Ye=Y.next,Lt=H;Ye!==re.tail&&!(Z&&Lt>=Z.reach);Lt+=Ye.value.length,Ye=Ye.next){var fn=Ye.value;if(re.length>se.length)return;if(!(fn instanceof jt)){var On=1,Tn;if(Qn){if(Tn=Nt(Re,Lt,se,uo),!Tn||Tn.index>=se.length)break;var Le=Tn.index,Ro=Tn.index+Tn[0].length,ks=Lt;for(ks+=Ye.value.length;Le>=ks;)Ye=Ye.next,ks+=Ye.value.length;if(ks-=Ye.value.length,Lt=ks,Ye.value instanceof jt)continue;for(var qe=Ye;qe!==re.tail&&(ks<Ro||typeof qe.value=="string");qe=qe.next)On++,ks+=qe.value.length;On--,fn=se.slice(Lt,ks),Tn.index-=Lt}else if(Tn=Nt(Re,0,fn,uo),!Tn)continue;var Le=Tn.index,un=Tn[0],ln=fn.slice(0,Le),Jt=fn.slice(Le+un.length),Kn=Lt+fn.length;Z&&Kn>Z.reach&&(Z.reach=Kn);var Ts=Ye.prev;ln&&(Ts=qn(re,Ts,ln),Lt+=ln.length),_e(re,Ts,On);var Tr=new jt(Be,ro?ze.tokenize(un,ro):un,kn,un);if(Ye=qn(re,Ts,Tr),Jt&&qn(re,Ye,Jt),On>1){var ma={cause:Be+","+Yt,reach:Kn};Ve(se,re,z,Ye.prev,Lt,ma),Z&&ma.reach>Z.reach&&(Z.reach=ma.reach)}}}}}}function R(){var se={value:null,prev:null,next:null},re={value:null,prev:se,next:null};se.next=re,this.head=se,this.tail=re,this.length=0}function qn(se,re,z){var Y=re.next,H={value:z,prev:re,next:Y};return re.next=H,Y.prev=H,se.length++,H}function _e(se,re,z){for(var Y=re.next,H=0;H<z&&Y!==se.tail;H++)Y=Y.next;re.next=Y,Y.prev=re,se.length-=H}function xe(se){for(var re=[],z=se.head.next;z!==se.tail;)re.push(z.value),z=z.next;return re}if(!Ie.document)return Ie.addEventListener&&(ze.disableWorkerMessageHandler||Ie.addEventListener("message",function(se){var re=JSON.parse(se.data),z=re.language,Y=re.code,H=re.immediateClose;Ie.postMessage(ze.highlight(Y,ze.languages[z],z)),H&&Ie.close()},!1)),ze;var We=ze.util.currentScript();We&&(ze.filename=We.src,We.hasAttribute("data-manual")&&(ze.manual=!0));function ke(){ze.manual||ze.highlightAll()}if(!ze.manual){var ae=document.readyState;ae==="loading"||ae==="interactive"&&We&&We.defer?document.addEventListener("DOMContentLoaded",ke):window.requestAnimationFrame?window.requestAnimationFrame(ke):window.setTimeout(ke,16)}return ze}(ge);return typeof De<"u"&&De.exports&&(De.exports=Ue),typeof Me<"u"&&(Me.Prism=Ue),Ue.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(Ie){function Ae(tn,dn){return"___"+tn.toUpperCase()+dn+"___"}Object.defineProperties(Ie.languages["markup-templating"]={},{buildPlaceholders:{value:function(tn,dn,ze,jt){if(tn.language===dn){var Nt=tn.tokenStack=[];tn.code=tn.code.replace(ze,function(Ve){if(typeof jt=="function"&&!jt(Ve))return Ve;for(var R=Nt.length,qn;tn.code.indexOf(qn=Ae(dn,R))!==-1;)++R;return Nt[R]=Ve,qn}),tn.grammar=Ie.languages.markup}}},tokenizePlaceholders:{value:function(tn,dn){if(tn.language!==dn||!tn.tokenStack)return;tn.grammar=Ie.languages[dn];var ze=0,jt=Object.keys(tn.tokenStack);function Nt(Ve){for(var R=0;R<Ve.length&&!(ze>=jt.length);R++){var qn=Ve[R];if(typeof qn=="string"||qn.content&&typeof qn.content=="string"){var _e=jt[ze],xe=tn.tokenStack[_e],We=typeof qn=="string"?qn:qn.content,ke=Ae(dn,_e),ae=We.indexOf(ke);if(ae>-1){++ze;var se=We.substring(0,ae),re=new Ie.Token(dn,Ie.tokenize(xe,tn.grammar),"language-"+dn,xe),z=We.substring(ae+ke.length),Y=[];se&&Y.push.apply(Y,Nt([se])),Y.push(re),z&&Y.push.apply(Y,Nt([z])),typeof qn=="string"?Ve.splice.apply(Ve,[R,1].concat(Y)):qn.content=Y}}else qn.content&&Nt(qn.content)}return Ve}Nt(tn.tokens)}}})}(Ue),Ue.languages.c=Ue.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Ue.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Ue.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Ue.languages.c.string],char:Ue.languages.c.char,comment:Ue.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Ue.languages.c}}}}),Ue.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Ue.languages.c.boolean,function(Ie){var Ae=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,tn=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return Ae.source});Ie.languages.cpp=Ie.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return Ae.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:Ae,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),Ie.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return tn})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),Ie.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:Ie.languages.cpp}}}}),Ie.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),Ie.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:Ie.languages.extend("cpp",{})}}),Ie.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},Ie.languages.cpp["base-clause"])}(Ue),function(Ie){function Ae(Tn,Ro){return Tn.replace(/<<(\d+)>>/g,function(ks,qe){return"(?:"+Ro[+qe]+")"})}function tn(Tn,Ro,ks){return RegExp(Ae(Tn,Ro),ks||"")}function dn(Tn,Ro){for(var ks=0;ks<Ro;ks++)Tn=Tn.replace(/<<self>>/g,function(){return"(?:"+Tn+")"});return Tn.replace(/<<self>>/g,"[^\\s\\S]")}var ze={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function jt(Tn){return"\\b(?:"+Tn.trim().replace(/ /g,"|")+")\\b"}var Nt=jt(ze.typeDeclaration),Ve=RegExp(jt(ze.type+" "+ze.typeDeclaration+" "+ze.contextual+" "+ze.other)),R=jt(ze.typeDeclaration+" "+ze.contextual+" "+ze.other),qn=jt(ze.type+" "+ze.typeDeclaration+" "+ze.other),_e=dn(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),xe=dn(/\((?:[^()]|<<self>>)*\)/.source,2),We=/@?\b[A-Za-z_]\w*\b/.source,ke=Ae(/<<0>>(?:\s*<<1>>)?/.source,[We,_e]),ae=Ae(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[R,ke]),se=/\[\s*(?:,\s*)*\]/.source,re=Ae(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[ae,se]),z=Ae(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[_e,xe,se]),Y=Ae(/\(<<0>>+(?:,<<0>>+)+\)/.source,[z]),H=Ae(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[Y,ae,se]),Z={keyword:Ve,punctuation:/[<>()?,.:[\]]/},Be=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,Pe=/"(?:\\.|[^\\"\r\n])*"/.source,Yt=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;Ie.languages.csharp=Ie.languages.extend("clike",{string:[{pattern:tn(/(^|[^$\\])<<0>>/.source,[Yt]),lookbehind:!0,greedy:!0},{pattern:tn(/(^|[^@$\\])<<0>>/.source,[Pe]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:tn(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[ae]),lookbehind:!0,inside:Z},{pattern:tn(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[We,H]),lookbehind:!0,inside:Z},{pattern:tn(/(\busing\s+)<<0>>(?=\s*=)/.source,[We]),lookbehind:!0},{pattern:tn(/(\b<<0>>\s+)<<1>>/.source,[Nt,ke]),lookbehind:!0,inside:Z},{pattern:tn(/(\bcatch\s*\(\s*)<<0>>/.source,[ae]),lookbehind:!0,inside:Z},{pattern:tn(/(\bwhere\s+)<<0>>/.source,[We]),lookbehind:!0},{pattern:tn(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[re]),lookbehind:!0,inside:Z},{pattern:tn(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[H,qn,We]),inside:Z}],keyword:Ve,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),Ie.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),Ie.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:tn(/([(,]\s*)<<0>>(?=\s*:)/.source,[We]),lookbehind:!0,alias:"punctuation"}}),Ie.languages.insertBefore("csharp","class-name",{namespace:{pattern:tn(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[We]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:tn(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[xe]),lookbehind:!0,alias:"class-name",inside:Z},"return-type":{pattern:tn(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[H,ae]),inside:Z,alias:"class-name"},"constructor-invocation":{pattern:tn(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[H]),lookbehind:!0,inside:Z,alias:"class-name"},"generic-method":{pattern:tn(/<<0>>\s*<<1>>(?=\s*\()/.source,[We,_e]),inside:{function:tn(/^<<0>>/.source,[We]),generic:{pattern:RegExp(_e),alias:"class-name",inside:Z}}},"type-list":{pattern:tn(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[Nt,ke,We,H,Ve.source,xe,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:tn(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[ke,xe]),lookbehind:!0,greedy:!0,inside:Ie.languages.csharp},keyword:Ve,"class-name":{pattern:RegExp(H),greedy:!0,inside:Z},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var rn=Pe+"|"+Be,ro=Ae(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[rn]),uo=dn(Ae(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[ro]),2),Qn=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,kn=Ae(/<<0>>(?:\s*\(<<1>>*\))?/.source,[ae,uo]);Ie.languages.insertBefore("csharp","class-name",{attribute:{pattern:tn(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[Qn,kn]),lookbehind:!0,greedy:!0,inside:{target:{pattern:tn(/^<<0>>(?=\s*:)/.source,[Qn]),alias:"keyword"},"attribute-arguments":{pattern:tn(/\(<<0>>*\)/.source,[uo]),inside:Ie.languages.csharp},"class-name":{pattern:RegExp(ae),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var ao=/:[^}\r\n]+/.source,Re=dn(Ae(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[ro]),2),Ye=Ae(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Re,ao]),Lt=dn(Ae(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[rn]),2),fn=Ae(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Lt,ao]);function On(Tn,Ro){return{interpolation:{pattern:tn(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[Tn]),lookbehind:!0,inside:{"format-string":{pattern:tn(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Ro,ao]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:Ie.languages.csharp}}},string:/[\s\S]+/}}Ie.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:tn(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[Ye]),lookbehind:!0,greedy:!0,inside:On(Ye,Re)},{pattern:tn(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[fn]),lookbehind:!0,greedy:!0,inside:On(fn,Lt)}],char:{pattern:RegExp(Be),greedy:!0}}),Ie.languages.dotnet=Ie.languages.cs=Ie.languages.csharp}(Ue),function(Ie){var Ae=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;Ie.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+Ae.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+Ae.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+Ae.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:Ae,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},Ie.languages.css.atrule.inside.rest=Ie.languages.css;var tn=Ie.languages.markup;tn&&(tn.tag.addInlined("style","css"),tn.tag.addAttribute("style","css"))}(Ue),function(Ie){var Ae=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,tn=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,dn={pattern:RegExp(/(^|[^\w.])/.source+tn+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};Ie.languages.java=Ie.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[dn,{pattern:RegExp(/(^|[^\w.])/.source+tn+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:dn.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+tn+/[A-Z]\w*\b/.source),lookbehind:!0,inside:dn.inside}],keyword:Ae,function:[Ie.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),Ie.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),Ie.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":dn,keyword:Ae,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+tn+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:dn.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+tn+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:dn.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return Ae.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Ue),Ue.languages.javascript=Ue.languages.extend("clike",{"class-name":[Ue.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Ue.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Ue.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Ue.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Ue.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Ue.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Ue.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Ue.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Ue.languages.markup&&(Ue.languages.markup.tag.addInlined("script","javascript"),Ue.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Ue.languages.js=Ue.languages.javascript,Ue.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Ue.languages.markup.tag.inside["attr-value"].inside.entity=Ue.languages.markup.entity,Ue.languages.markup.doctype.inside["internal-subset"].inside=Ue.languages.markup,Ue.hooks.add("wrap",function(Ie){Ie.type==="entity"&&(Ie.attributes.title=Ie.content.replace(/&amp;/,"&"))}),Object.defineProperty(Ue.languages.markup.tag,"addInlined",{value:function(Ae,tn){var dn={};dn["language-"+tn]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Ue.languages[tn]},dn.cdata=/^<!\[CDATA\[|\]\]>$/i;var ze={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:dn}};ze["language-"+tn]={pattern:/[\s\S]+/,inside:Ue.languages[tn]};var jt={};jt[Ae]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return Ae}),"i"),lookbehind:!0,greedy:!0,inside:ze},Ue.languages.insertBefore("markup","cdata",jt)}}),Object.defineProperty(Ue.languages.markup.tag,"addAttribute",{value:function(Ie,Ae){Ue.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+Ie+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[Ae,"language-"+Ae],inside:Ue.languages[Ae]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Ue.languages.html=Ue.languages.markup,Ue.languages.mathml=Ue.languages.markup,Ue.languages.svg=Ue.languages.markup,Ue.languages.xml=Ue.languages.extend("markup",{}),Ue.languages.ssml=Ue.languages.xml,Ue.languages.atom=Ue.languages.xml,Ue.languages.rss=Ue.languages.xml,function(Ie){var Ae=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,tn=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],dn=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,ze=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,jt=/[{}\[\](),:;]/;Ie.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:Ae,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:tn,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:dn,operator:ze,punctuation:jt};var Nt={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:Ie.languages.php},Ve=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:Nt}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:Nt}}];Ie.languages.insertBefore("php","variable",{string:Ve,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:Ae,string:Ve,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:tn,number:dn,operator:ze,punctuation:jt}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),Ie.hooks.add("before-tokenize",function(R){if(/<\?/.test(R.code)){var qn=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;Ie.languages["markup-templating"].buildPlaceholders(R,"php",qn)}}),Ie.hooks.add("after-tokenize",function(R){Ie.languages["markup-templating"].tokenizePlaceholders(R,"php")})}(Ue),Ue.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Ue.languages.python["string-interpolation"].inside.interpolation.inside.rest=Ue.languages.python,Ue.languages.py=Ue.languages.python,function(Ie){Ie.languages.ruby=Ie.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),Ie.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var Ae={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:Ie.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete Ie.languages.ruby.function;var tn="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",dn=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;Ie.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+tn+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:Ae,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:Ae,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+dn),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+dn+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),Ie.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+tn),greedy:!0,inside:{interpolation:Ae,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:Ae,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:Ae,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+tn),greedy:!0,inside:{interpolation:Ae,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:Ae,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete Ie.languages.ruby.string,Ie.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),Ie.languages.rb=Ie.languages.ruby}(Ue),window.Prism=_,Ue}(void 0,void 0),mn=Me=>De=>De.options.get(Me),Nn=Me=>{const De=Me.options.register;De("codesample_languages",{processor:"object[]"}),De("codesample_global_prismjs",{processor:"boolean",default:!1})},Ot=mn("codesample_languages"),ct=mn("codesample_global_prismjs"),Bt=Me=>Et.Prism&&ct(Me)?Et.Prism:rt,cn=Me=>gt(Me)&&Me.nodeName==="PRE"&&Me.className.indexOf("language-")!==-1,Ze=Me=>{const De=Me.selection?Me.selection.getNode():null;return cn(De)?$t.some(De):$t.none()},et=(Me,De,Ft)=>{const _=Me.dom;Me.undoManager.transact(()=>{const ge=Ze(Me);return Ft=Tt.DOM.encode(Ft),ge.fold(()=>{Me.insertContent('<pre id="__new" class="language-'+De+'">'+Ft+"</pre>");const Ue=_.select("#__new")[0];_.setAttrib(Ue,"id",null),Me.selection.select(Ue)},Ue=>{_.setAttrib(Ue,"class","language-"+De),Ue.innerHTML=Ft,Bt(Me).highlightElement(Ue),Me.selection.select(Ue)})})},Ee=Me=>Ze(Me).bind(Ft=>$t.from(Ft.textContent)).getOr(""),te=Me=>{const De=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],Ft=Ot(Me);return Ft||De},Je=(Me,De)=>Ze(Me).fold(()=>De,_=>{const ge=_.className.match(/language-(\w+)/);return ge?ge[1]:De}),Ht=Me=>{const De=te(Me),Ft=Gt(De).fold(Ut(""),Ue=>Ue.value),_=Je(Me,Ft),ge=Ee(Me);Me.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:De},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:_,code:ge},onSubmit:Ue=>{const Ie=Ue.getData();et(Me,Ie.language,Ie.code),Ue.close()}})},yt=Me=>{Me.addCommand("codesample",()=>{const De=Me.selection.getNode();Me.selection.isCollapsed()||cn(De)?Ht(Me):Me.formatter.toggle("code")})},xt=(Me=>De=>De.replace(Me,""))(/^\s+|\s+$/g);var En=tinymce.util.Tools.resolve("tinymce.util.Tools");const St=Me=>{Me.on("PreProcess",De=>{const Ft=Me.dom,_=Ft.select("pre[contenteditable=false]",De.node);En.each(En.grep(_,cn),ge=>{const Ue=ge.textContent;Ft.setAttrib(ge,"class",xt(Ft.getAttrib(ge,"class"))),Ft.setAttrib(ge,"contentEditable",null),Ft.setAttrib(ge,"data-mce-highlighted",null);let Ie;for(;Ie=ge.firstChild;)ge.removeChild(Ie);const Ae=Ft.add(ge,"code");Ae.textContent=Ue})}),Me.on("SetContent",()=>{const De=Me.dom,Ft=En.grep(De.select("pre"),_=>cn(_)&&De.getAttrib(_,"data-mce-highlighted")!=="true");Ft.length&&Me.undoManager.transact(()=>{En.each(Ft,_=>{var ge;En.each(De.select("br",_),Ue=>{De.replace(Me.getDoc().createTextNode(`
`),Ue)}),_.innerHTML=De.encode((ge=_.textContent)!==null&&ge!==void 0?ge:""),Bt(Me).highlightElement(_),De.setAttrib(_,"data-mce-highlighted",!0),_.className=xt(_.className)})})}),Me.on("PreInit",()=>{Me.parser.addNodeFilter("pre",De=>{var Ft;for(let _=0,ge=De.length;_<ge;_++){const Ue=De[_];((Ft=Ue.attr("class"))!==null&&Ft!==void 0?Ft:"").indexOf("language-")!==-1&&(Ue.attr("contenteditable","false"),Ue.attr("data-mce-highlighted","false"))}})})},he=Me=>{const De=Me.selection.getStart();return Me.dom.is(De,'pre[class*="language-"]')},Q=Me=>{const De=()=>Me.execCommand("codesample");Me.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:De,onSetup:Ft=>{const _=()=>{Ft.setActive(he(Me))};return Me.on("NodeChange",_),()=>Me.off("NodeChange",_)}}),Me.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:De})};var it=()=>{_t.add("codesample",Me=>{Nn(Me),St(Me),Q(Me),yt(Me),Me.on("dblclick",De=>{cn(De.target)&&Ht(Me)})})};it()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(Re,Ye,Lt)=>{var fn;return Lt(Re,Ye.prototype)?!0:((fn=Re.constructor)===null||fn===void 0?void 0:fn.name)===Ye.name},gt=Re=>{const Ye=typeof Re;return Re===null?"null":Ye==="object"&&Array.isArray(Re)?"array":Ye==="object"&&It(Re,String,(Lt,fn)=>fn.isPrototypeOf(Lt))?"string":Ye},Ut=Re=>Ye=>gt(Ye)===Re,$t=Re=>Ye=>typeof Ye===Re,en=Ut("string"),Gt=$t("boolean"),Tt=Re=>Re==null,Et=Re=>!Tt(Re),rt=$t("function"),mn=$t("number"),Nn=(Re,Ye)=>Lt=>Re(Ye(Lt)),ct=(Re=>()=>Re)(!1);class Bt{constructor(Ye,Lt){this.tag=Ye,this.value=Lt}static some(Ye){return new Bt(!0,Ye)}static none(){return Bt.singletonNone}fold(Ye,Lt){return this.tag?Lt(this.value):Ye()}isSome(){return this.tag}isNone(){return!this.tag}map(Ye){return this.tag?Bt.some(Ye(this.value)):Bt.none()}bind(Ye){return this.tag?Ye(this.value):Bt.none()}exists(Ye){return this.tag&&Ye(this.value)}forall(Ye){return!this.tag||Ye(this.value)}filter(Ye){return!this.tag||Ye(this.value)?this:Bt.none()}getOr(Ye){return this.tag?this.value:Ye}or(Ye){return this.tag?this:Ye}getOrThunk(Ye){return this.tag?this.value:Ye()}orThunk(Ye){return this.tag?this:Ye()}getOrDie(Ye){if(this.tag)return this.value;throw new Error(Ye??"Called getOrDie on None")}static from(Ye){return Et(Ye)?Bt.some(Ye):Bt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ye){this.tag&&Ye(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Bt.singletonNone=new Bt(!1);const cn=(Re,Ye)=>{const Lt=Re.length,fn=new Array(Lt);for(let On=0;On<Lt;On++){const Tn=Re[On];fn[On]=Ye(Tn,On)}return fn},Ze=(Re,Ye)=>{for(let Lt=0,fn=Re.length;Lt<fn;Lt++){const On=Re[Lt];Ye(On,Lt)}},et=(Re,Ye)=>{const Lt=[];for(let fn=0,On=Re.length;fn<On;fn++){const Tn=Re[fn];Ye(Tn,fn)&&Lt.push(Tn)}return Lt},Ee=9,te=11,Je=1,Ht=3,yt=(Re,Ye)=>{const fn=(Ye||document).createElement("div");if(fn.innerHTML=Re,!fn.hasChildNodes()||fn.childNodes.length>1){const On="HTML does not have a single root node";throw console.error(On,Re),new Error(On)}return En(fn.childNodes[0])},K=(Re,Ye)=>{const fn=(Ye||document).createElement(Re);return En(fn)},xt=(Re,Ye)=>{const fn=(Ye||document).createTextNode(Re);return En(fn)},En=Re=>{if(Re==null)throw new Error("Node cannot be null or undefined");return{dom:Re}},he={fromHtml:yt,fromTag:K,fromText:xt,fromDom:En,fromPoint:(Re,Ye,Lt)=>Bt.from(Re.dom.elementFromPoint(Ye,Lt)).map(En)},Q=(Re,Ye)=>{const Lt=Re.dom;if(Lt.nodeType!==Je)return!1;{const fn=Lt;if(fn.matches!==void 0)return fn.matches(Ye);if(fn.msMatchesSelector!==void 0)return fn.msMatchesSelector(Ye);if(fn.webkitMatchesSelector!==void 0)return fn.webkitMatchesSelector(Ye);if(fn.mozMatchesSelector!==void 0)return fn.mozMatchesSelector(Ye);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const it=Re=>Re.dom.nodeName.toLowerCase(),Me=Re=>Re.dom.nodeType,De=Re=>Ye=>Me(Ye)===Re,Ft=De(Je),_=De(Ht),ge=De(Ee),Ue=De(te),Ie=Re=>Ye=>Ft(Ye)&&it(Ye)===Re,Ae=Re=>he.fromDom(Re.dom.ownerDocument),tn=Re=>ge(Re)?Re:Ae(Re),dn=Re=>Bt.from(Re.dom.parentNode).map(he.fromDom),ze=Re=>cn(Re.dom.childNodes,he.fromDom),jt=(Re,Ye,Lt)=>{if(en(Lt)||Gt(Lt)||mn(Lt))Re.setAttribute(Ye,Lt+"");else throw console.error("Invalid call to Attribute.set. Key ",Ye,":: Value ",Lt,":: Element ",Re),new Error("Attribute value was not simple")},Nt=(Re,Ye,Lt)=>{jt(Re.dom,Ye,Lt)},Ve=(Re,Ye)=>{Re.dom.removeAttribute(Ye)},R=Re=>Ue(Re)&&Et(Re.dom.host),_e=rt(Element.prototype.attachShadow)&&rt(Node.prototype.getRootNode)?Re=>he.fromDom(Re.dom.getRootNode()):tn,xe=Re=>{const Ye=_e(Re);return R(Ye)?Bt.some(Ye):Bt.none()},We=Re=>he.fromDom(Re.dom.host),ke=Re=>{const Ye=_(Re)?Re.dom.parentNode:Re.dom;if(Ye==null||Ye.ownerDocument===null)return!1;const Lt=Ye.ownerDocument;return xe(he.fromDom(Ye)).fold(()=>Lt.body.contains(Ye),Nn(ke,We))},ae=(Re,Ye,Lt)=>{let fn=Re.dom;const On=rt(Lt)?Lt:ct;for(;fn.parentNode;){fn=fn.parentNode;const Tn=he.fromDom(fn);if(Ye(Tn))return Bt.some(Tn);if(On(Tn))break}return Bt.none()},se=(Re,Ye,Lt)=>ae(Re,fn=>Q(fn,Ye),Lt),re=Re=>Re.style!==void 0&&rt(Re.style.getPropertyValue),z=(Re,Ye)=>{const Lt=Re.dom,On=window.getComputedStyle(Lt).getPropertyValue(Ye);return On===""&&!ke(Re)?Y(Lt,Ye):On},Y=(Re,Ye)=>re(Re)?Re.style.getPropertyValue(Ye):"",H=Re=>z(Re,"direction")==="rtl"?"rtl":"ltr",Z=(Re,Ye)=>et(ze(Re),Ye),Be=(Re,Ye)=>Z(Re,Lt=>Q(Lt,Ye)),Pe=Re=>dn(Re).filter(Ft),Yt=(Re,Ye)=>(Ye?se(Re,"ol,ul"):Bt.some(Re)).getOr(Re),rn=Ie("li"),ro=(Re,Ye)=>{const Lt=Re.selection.getSelectedBlocks();Lt.length>0&&(Ze(Lt,fn=>{const On=he.fromDom(fn),Tn=rn(On),Ro=Yt(On,Tn);Pe(Ro).each(qe=>{if(H(qe)!==Ye?Nt(Ro,"dir",Ye):H(Ro)!==Ye&&Ve(Ro,"dir"),Tn){const un=Be(Ro,"li[dir]");Ze(un,ln=>Ve(ln,"dir"))}})}),Re.nodeChanged())},uo=Re=>{Re.addCommand("mceDirectionLTR",()=>{ro(Re,"ltr")}),Re.addCommand("mceDirectionRTL",()=>{ro(Re,"rtl")})},Qn=(Re,Ye)=>Lt=>{const fn=On=>{const Tn=he.fromDom(On.element);Lt.setActive(H(Tn)===Ye)};return Re.on("NodeChange",fn),()=>Re.off("NodeChange",fn)},kn=Re=>{Re.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>Re.execCommand("mceDirectionLTR"),onSetup:Qn(Re,"ltr")}),Re.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>Re.execCommand("mceDirectionRTL"),onSetup:Qn(Re,"rtl")})};var ao=()=>{_t.add("directionality",Re=>{uo(Re),kn(Re)})};ao()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=z=>Y=>z===Y,gt=It(null),Ut=It(void 0),$t=z=>z==null,en=z=>!$t(z),Gt=()=>{},Et=(z=>()=>z)(!1);class rt{constructor(Y,H){this.tag=Y,this.value=H}static some(Y){return new rt(!0,Y)}static none(){return rt.singletonNone}fold(Y,H){return this.tag?H(this.value):Y()}isSome(){return this.tag}isNone(){return!this.tag}map(Y){return this.tag?rt.some(Y(this.value)):rt.none()}bind(Y){return this.tag?Y(this.value):rt.none()}exists(Y){return this.tag&&Y(this.value)}forall(Y){return!this.tag||Y(this.value)}filter(Y){return!this.tag||Y(this.value)?this:rt.none()}getOr(Y){return this.tag?this.value:Y}or(Y){return this.tag?this:Y}getOrThunk(Y){return this.tag?this.value:Y()}orThunk(Y){return this.tag?this:Y()}getOrDie(Y){if(this.tag)return this.value;throw new Error(Y??"Called getOrDie on None")}static from(Y){return en(Y)?rt.some(Y):rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Y){this.tag&&Y(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}rt.singletonNone=new rt(!1);const mn=(z,Y)=>{for(let H=0,Z=z.length;H<Z;H++){const Be=z[H];if(Y(Be,H))return!0}return!1},Nn=(z,Y)=>{const H=z.length,Z=new Array(H);for(let Be=0;Be<H;Be++){const Pe=z[Be];Z[Be]=Y(Pe,Be)}return Z},Ot=(z,Y)=>{for(let H=0,Z=z.length;H<Z;H++){const Be=z[H];Y(Be,H)}},ct=z=>{let Y=z;return{get:()=>Y,set:Be=>{Y=Be}}},Bt=(z,Y)=>{let H=null;const Z=()=>{gt(H)||(clearTimeout(H),H=null)};return{cancel:Z,throttle:(...Pe)=>{Z(),H=setTimeout(()=>{H=null,z.apply(null,Pe)},Y)}}},cn=(z,Y)=>{z.insertContent(Y)},Ze=Object.keys,et=Object.hasOwnProperty,Ee=(z,Y)=>{const H=Ze(z);for(let Z=0,Be=H.length;Z<Be;Z++){const Pe=H[Z],Yt=z[Pe];Y(Yt,Pe)}},te=(z,Y)=>Je(z,(H,Z)=>({k:Z,v:Y(H,Z)})),Je=(z,Y)=>{const H={};return Ee(z,(Z,Be)=>{const Pe=Y(Z,Be);H[Pe.k]=Pe.v}),H},Ht=(z,Y)=>et.call(z,Y),xt=(z=>(...Y)=>{if(Y.length===0)throw new Error("Can't merge zero objects");const H={};for(let Z=0;Z<Y.length;Z++){const Be=Y[Z];for(const Pe in Be)Ht(Be,Pe)&&(H[Pe]=z(H[Pe],Be[Pe]))}return H})((z,Y)=>Y),En=z=>{const Y=ct(rt.none()),H=()=>Y.get().each(z);return{clear:()=>{H(),Y.set(rt.none())},isSet:()=>Y.get().isSome(),get:()=>Y.get(),set:rn=>{H(),Y.set(rt.some(rn))}}},St=()=>{const z=En(Gt);return{...z,on:H=>z.get().each(H)}},he=(z,Y,H)=>Y===""||z.length>=Y.length&&z.substr(H,H+Y.length)===Y,Q=(z,Y,H=0,Z)=>{const Be=z.indexOf(Y,H);return Be!==-1?Ut(Z)?!0:Be+Y.length<=Z:!1},it=(z,Y)=>he(z,Y,0);var Me=tinymce.util.Tools.resolve("tinymce.Resource");const De="tinymce.plugins.emoticons",Ft=z=>Y=>Y.options.get(z),_=(z,Y)=>{const H=z.options.register;H("emoticons_database",{processor:"string",default:"emojis"}),H("emoticons_database_url",{processor:"string",default:`${Y}/js/${ge(z)}${z.suffix}.js`}),H("emoticons_database_id",{processor:"string",default:De}),H("emoticons_append",{processor:"object",default:{}}),H("emoticons_images_url",{processor:"string",default:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"})},ge=Ft("emoticons_database"),Ue=Ft("emoticons_database_url"),Ie=Ft("emoticons_database_id"),Ae=Ft("emoticons_append"),tn=Ft("emoticons_images_url"),dn="All",ze={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},jt=(z,Y)=>Ht(z,Y)?z[Y]:Y,Nt=z=>{const Y=Ae(z);return te(Y,H=>({keywords:[],category:"user",...H}))},Ve=(z,Y,H)=>{const Z=St(),Be=St(),Pe=tn(z),Yt=Re=>it(Re.char,"<img")?Re.char.replace(/src="([^"]+)"/,(Ye,Lt)=>`src="${Pe}${Lt}"`):Re.char,rn=Re=>{const Ye={},Lt=[];Ee(Re,(fn,On)=>{const Tn={title:On,keywords:fn.keywords,char:Yt(fn),category:jt(ze,fn.category)},Ro=Ye[Tn.category]!==void 0?Ye[Tn.category]:[];Ye[Tn.category]=Ro.concat([Tn]),Lt.push(Tn)}),Z.set(Ye),Be.set(Lt)};z.on("init",()=>{Me.load(H,Y).then(Re=>{const Ye=Nt(z);rn(xt(Re,Ye))},Re=>{console.log(`Failed to load emojis: ${Re}`),Z.set({}),Be.set([])})});const ro=Re=>Re===dn?uo():Z.get().bind(Ye=>rt.from(Ye[Re])).getOr([]),uo=()=>Be.get().getOr([]),Qn=()=>[dn].concat(Ze(Z.get().getOr({}))),kn=()=>ao()?Promise.resolve(!0):new Promise((Re,Ye)=>{let Lt=15;const fn=setInterval(()=>{ao()?(clearInterval(fn),Re(!0)):(Lt--,Lt<0&&(console.log("Could not load emojis from url: "+Y),clearInterval(fn),Ye(!1)))},100)}),ao=()=>Z.isSet()&&Be.isSet();return{listCategories:Qn,hasLoaded:ao,waitForLoad:kn,listAll:uo,listCategory:ro}},R=(z,Y)=>Q(z.title.toLowerCase(),Y)||mn(z.keywords,H=>Q(H.toLowerCase(),Y)),qn=(z,Y,H)=>{const Z=[],Be=Y.toLowerCase(),Pe=H.fold(()=>Et,Yt=>rn=>rn>=Yt);for(let Yt=0;Yt<z.length&&!((Y.length===0||R(z[Yt],Be))&&(Z.push({value:z[Yt].char,text:z[Yt].title,icon:z[Yt].char}),Pe(Z.length)));Yt++);return Z},_e="pattern",xe=(z,Y)=>{const H={pattern:"",results:qn(Y.listAll(),"",rt.some(300))},Z=ct(dn),Be=Qn=>{const kn=Qn.getData(),ao=Z.get(),Re=Y.listCategory(ao),Ye=qn(Re,kn[_e],ao===dn?rt.some(300):rt.none());Qn.setData({results:Ye})},Pe=Bt(Qn=>{Be(Qn)},200),Yt={label:"Search",type:"input",name:_e},rn={type:"collection",name:"results"},ro=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:Nn(Y.listCategories(),kn=>({title:kn,name:kn,items:[Yt,rn]}))},initialData:H,onTabChange:(kn,ao)=>{Z.set(ao.newTabName),Pe.throttle(kn)},onChange:Pe.throttle,onAction:(kn,ao)=>{ao.name==="results"&&(cn(z,ao.value),kn.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),uo=z.windowManager.open(ro());uo.focus(_e),Y.hasLoaded()||(uo.block("Loading emojis..."),Y.waitForLoad().then(()=>{uo.redial(ro()),Pe.throttle(uo),uo.focus(_e),uo.unblock()}).catch(Qn=>{uo.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),uo.focus(_e),uo.unblock()}))},We=(z,Y)=>{z.addCommand("mceEmoticons",()=>xe(z,Y))},ke=z=>{z.on("PreInit",()=>{z.parser.addAttributeFilter("data-emoticon",Y=>{Ot(Y,H=>{H.attr("data-mce-resize","false"),H.attr("data-mce-placeholder","1")})})})},ae=(z,Y)=>{z.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(H,Z)=>Y.waitForLoad().then(()=>{const Be=Y.listAll();return qn(Be,H,rt.some(Z))}),onAction:(H,Z,Be)=>{z.selection.setRng(Z),z.insertContent(Be),H.hide()}})},se=z=>{const Y=()=>z.execCommand("mceEmoticons");z.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:Y}),z.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:Y})};var re=()=>{_t.add("emoticons",(z,Y)=>{_(z,Y);const H=Ue(z),Z=Ie(z),Be=Ve(z,H,Z);We(z,Be),se(z),ae(z,Be),ke(z)})};re()})();(function(){const _t=ne=>{let me=ne;return{get:()=>me,set:Vn=>{me=Vn}}};var It=tinymce.util.Tools.resolve("tinymce.PluginManager");const gt=ne=>({isFullscreen:()=>ne.get()!==null}),Ut=(ne,me,tt)=>{var ft;return tt(ne,me.prototype)?!0:((ft=ne.constructor)===null||ft===void 0?void 0:ft.name)===me.name},$t=ne=>{const me=typeof ne;return ne===null?"null":me==="object"&&Array.isArray(ne)?"array":me==="object"&&Ut(ne,String,(tt,ft)=>ft.isPrototypeOf(tt))?"string":me},en=ne=>me=>$t(me)===ne,Gt=ne=>me=>typeof me===ne,Tt=ne=>me=>ne===me,Et=en("string"),rt=en("array"),mn=Tt(null),Nn=Gt("boolean"),Ot=Tt(void 0),ct=ne=>ne==null,Bt=ne=>!ct(ne),cn=Gt("function"),Ze=Gt("number"),et=()=>{},Ee=(ne,me)=>(...tt)=>ne(me.apply(null,tt)),te=(ne,me)=>tt=>ne(me(tt)),Je=ne=>()=>ne;function Ht(ne,...me){return(...tt)=>{const ft=me.concat(tt);return ne.apply(null,ft)}}const yt=Je(!1),K=Je(!0);class xt{constructor(me,tt){this.tag=me,this.value=tt}static some(me){return new xt(!0,me)}static none(){return xt.singletonNone}fold(me,tt){return this.tag?tt(this.value):me()}isSome(){return this.tag}isNone(){return!this.tag}map(me){return this.tag?xt.some(me(this.value)):xt.none()}bind(me){return this.tag?me(this.value):xt.none()}exists(me){return this.tag&&me(this.value)}forall(me){return!this.tag||me(this.value)}filter(me){return!this.tag||me(this.value)?this:xt.none()}getOr(me){return this.tag?this.value:me}or(me){return this.tag?this:me}getOrThunk(me){return this.tag?this.value:me()}orThunk(me){return this.tag?this:me()}getOrDie(me){if(this.tag)return this.value;throw new Error(me??"Called getOrDie on None")}static from(me){return Bt(me)?xt.some(me):xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(me){this.tag&&me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}xt.singletonNone=new xt(!1);const En=ne=>{const me=_t(xt.none()),tt=()=>me.get().each(ne);return{clear:()=>{tt(),me.set(xt.none())},isSet:()=>me.get().isSome(),get:()=>me.get(),set:Yo=>{tt(),me.set(xt.some(Yo))}}},St=()=>En(ne=>ne.unbind()),he=()=>{const ne=En(et);return{...ne,on:tt=>ne.get().each(tt)}},Q=(ne,me)=>{let tt=null;return{cancel:()=>{mn(tt)||(clearTimeout(tt),tt=null)},throttle:(...oo)=>{mn(tt)&&(tt=setTimeout(()=>{tt=null,ne.apply(null,oo)},me))}}},it=Array.prototype.push,Me=(ne,me)=>{const tt=ne.length,ft=new Array(tt);for(let Vn=0;Vn<tt;Vn++){const oo=ne[Vn];ft[Vn]=me(oo,Vn)}return ft},De=(ne,me)=>{for(let tt=0,ft=ne.length;tt<ft;tt++){const Vn=ne[tt];me(Vn,tt)}},Ft=(ne,me)=>{const tt=[];for(let ft=0,Vn=ne.length;ft<Vn;ft++){const oo=ne[ft];me(oo,ft)&&tt.push(oo)}return tt},_=(ne,me,tt)=>{for(let ft=0,Vn=ne.length;ft<Vn;ft++){const oo=ne[ft];if(me(oo,ft))return xt.some(oo);if(tt(oo,ft))break}return xt.none()},ge=(ne,me)=>_(ne,me,yt),Ue=ne=>{const me=[];for(let tt=0,ft=ne.length;tt<ft;++tt){if(!rt(ne[tt]))throw new Error("Arr.flatten item "+tt+" was not an array, input: "+ne);it.apply(me,ne[tt])}return me},Ie=(ne,me)=>Ue(Me(ne,me)),Ae=(ne,me)=>me>=0&&me<ne.length?xt.some(ne[me]):xt.none(),tn=ne=>Ae(ne,0),dn=(ne,me)=>{for(let tt=0;tt<ne.length;tt++){const ft=me(ne[tt],tt);if(ft.isSome())return ft}return xt.none()},ze=Object.keys,jt=(ne,me)=>{const tt=ze(ne);for(let ft=0,Vn=tt.length;ft<Vn;ft++){const oo=tt[ft],qs=ne[oo];me(qs,oo)}},Nt=(ne,me,tt=0,ft)=>{const Vn=ne.indexOf(me,tt);return Vn!==-1?Ot(ft)?!0:Vn+me.length<=ft:!1},Ve=ne=>ne.style!==void 0&&cn(ne.style.getPropertyValue),R=(ne,me)=>{const ft=(me||document).createElement("div");if(ft.innerHTML=ne,!ft.hasChildNodes()||ft.childNodes.length>1){const Vn="HTML does not have a single root node";throw console.error(Vn,ne),new Error(Vn)}return xe(ft.childNodes[0])},qn=(ne,me)=>{const ft=(me||document).createElement(ne);return xe(ft)},_e=(ne,me)=>{const ft=(me||document).createTextNode(ne);return xe(ft)},xe=ne=>{if(ne==null)throw new Error("Node cannot be null or undefined");return{dom:ne}},ke={fromHtml:R,fromTag:qn,fromText:_e,fromDom:xe,fromPoint:(ne,me,tt)=>xt.from(ne.dom.elementFromPoint(me,tt)).map(xe)};typeof window<"u"||Function("return this;")();const ae=9,se=11,re=1,z=3,Y=ne=>ne.dom.nodeType,H=ne=>me=>Y(me)===ne,Z=H(re),Be=H(z),Pe=H(ae),Yt=H(se),rn=(ne,me)=>{const tt=ne.dom;if(tt.nodeType!==re)return!1;{const ft=tt;if(ft.matches!==void 0)return ft.matches(me);if(ft.msMatchesSelector!==void 0)return ft.msMatchesSelector(me);if(ft.webkitMatchesSelector!==void 0)return ft.webkitMatchesSelector(me);if(ft.mozMatchesSelector!==void 0)return ft.mozMatchesSelector(me);throw new Error("Browser lacks native selectors")}},ro=ne=>ne.nodeType!==re&&ne.nodeType!==ae&&ne.nodeType!==se||ne.childElementCount===0,uo=(ne,me)=>{const tt=me===void 0?document:me.dom;return ro(tt)?[]:Me(tt.querySelectorAll(ne),ke.fromDom)},Qn=(ne,me)=>ne.dom===me.dom,kn=ne=>ke.fromDom(ne.dom.ownerDocument),ao=ne=>Pe(ne)?ne:kn(ne),Re=ne=>xt.from(ne.dom.parentNode).map(ke.fromDom),Ye=(ne,me)=>{const tt=cn(me)?me:yt;let ft=ne.dom;const Vn=[];for(;ft.parentNode!==null&&ft.parentNode!==void 0;){const oo=ft.parentNode,qs=ke.fromDom(oo);if(Vn.push(qs),tt(qs)===!0)break;ft=oo}return Vn},Lt=ne=>{const me=tt=>Ft(tt,ft=>!Qn(ne,ft));return Re(ne).map(fn).map(me).getOr([])},fn=ne=>Me(ne.dom.childNodes,ke.fromDom),On=ne=>Yt(ne)&&Bt(ne.dom.host),Tn=cn(Element.prototype.attachShadow)&&cn(Node.prototype.getRootNode),Ro=Je(Tn),ks=Tn?ne=>ke.fromDom(ne.dom.getRootNode()):ao,qe=ne=>{const me=ks(ne);return On(me)?xt.some(me):xt.none()},Le=ne=>ke.fromDom(ne.dom.host),un=ne=>{if(Ro()&&Bt(ne.target)){const me=ke.fromDom(ne.target);if(Z(me)&&ln(me)&&ne.composed&&ne.composedPath){const tt=ne.composedPath();if(tt)return tn(tt)}}return xt.from(ne.target)},ln=ne=>Bt(ne.dom.shadowRoot),Jt=ne=>{const me=Be(ne)?ne.dom.parentNode:ne.dom;if(me==null||me.ownerDocument===null)return!1;const tt=me.ownerDocument;return qe(ke.fromDom(me)).fold(()=>tt.body.contains(me),te(Jt,Le))},Kn=ne=>{const me=ne.dom.body;if(me==null)throw new Error("Body is not available yet");return ke.fromDom(me)},Ts=(ne,me,tt)=>{if(Et(tt)||Nn(tt)||Ze(tt))ne.setAttribute(me,tt+"");else throw console.error("Invalid call to Attribute.set. Key ",me,":: Value ",tt,":: Element ",ne),new Error("Attribute value was not simple")},Tr=(ne,me,tt)=>{Ts(ne.dom,me,tt)},ma=(ne,me)=>{const tt=ne.dom.getAttribute(me);return tt===null?void 0:tt},bs=(ne,me)=>{ne.dom.removeAttribute(me)},vc=(ne,me,tt)=>{if(!Et(tt))throw console.error("Invalid call to CSS.set. Property ",me,":: Value ",tt,":: Element ",ne),new Error("CSS value must be a string: "+tt);Ve(ne)&&ne.style.setProperty(me,tt)},ys=(ne,me)=>{const tt=ne.dom;jt(me,(ft,Vn)=>{vc(tt,Vn,ft)})},cs=(ne,me)=>{const tt=ne.dom,Vn=window.getComputedStyle(tt).getPropertyValue(me);return Vn===""&&!Jt(ne)?go(tt,me):Vn},go=(ne,me)=>Ve(ne)?ne.style.getPropertyValue(me):"",mr=(ne,me,tt,ft,Vn,oo,qs)=>({target:ne,x:me,y:tt,stop:ft,prevent:Vn,kill:oo,raw:qs}),Zr=ne=>{const me=ke.fromDom(un(ne).getOr(ne.target)),tt=()=>ne.stopPropagation(),ft=()=>ne.preventDefault(),Vn=Ee(ft,tt);return mr(me,ne.clientX,ne.clientY,tt,ft,Vn,ne)},Is=(ne,me)=>tt=>{ne(tt)&&me(Zr(tt))},fa=(ne,me,tt,ft,Vn)=>{const oo=Is(tt,ft);return ne.dom.addEventListener(me,oo,Vn),{unbind:Ht(rc,ne,me,oo,Vn)}},jr=(ne,me,tt,ft)=>fa(ne,me,tt,ft,!1),rc=(ne,me,tt,ft)=>{ne.dom.removeEventListener(me,tt,ft)},Xs=K,Ta=(ne,me,tt)=>jr(ne,me,Xs,tt),ye=ne=>{let me=!1,tt;return(...ft)=>(me||(me=!0,tt=ne.apply(null,ft)),tt)},q=(ne,me,tt,ft)=>{const Vn=ne.isiOS()&&/ipad/i.test(tt)===!0,oo=ne.isiOS()&&!Vn,qs=ne.isiOS()||ne.isAndroid(),Yo=qs||ft("(pointer:coarse)"),zi=Vn||!oo&&qs&&ft("(min-device-width:768px)"),Qo=oo||qs&&!zi,Ds=me.isSafari()&&ne.isiOS()&&/safari/i.test(tt)===!1,Ea=!Qo&&!zi&&!Ds;return{isiPad:Je(Vn),isiPhone:Je(oo),isTablet:Je(zi),isPhone:Je(Qo),isTouch:Je(Yo),isAndroid:ne.isAndroid,isiOS:ne.isiOS,isWebView:Je(Ds),isDesktop:Je(Ea)}},lt=(ne,me)=>{for(let tt=0;tt<ne.length;tt++){const ft=ne[tt];if(ft.test(me))return ft}},wt=(ne,me)=>{const tt=lt(ne,me);if(!tt)return{major:0,minor:0};const ft=Vn=>Number(me.replace(tt,"$"+Vn));return In(ft(1),ft(2))},Zn=(ne,me)=>{const tt=String(me).toLowerCase();return ne.length===0?eo():wt(ne,tt)},eo=()=>In(0,0),In=(ne,me)=>({major:ne,minor:me}),is={nu:In,detect:Zn,unknown:eo},ts=(ne,me)=>dn(me.brands,tt=>{const ft=tt.brand.toLowerCase();return ge(ne,Vn=>{var oo;return ft===((oo=Vn.brand)===null||oo===void 0?void 0:oo.toLowerCase())}).map(Vn=>({current:Vn.name,version:is.nu(parseInt(tt.version,10),0)}))}),ko=(ne,me)=>{const tt=String(me).toLowerCase();return ge(ne,ft=>ft.search(tt))},ar=(ne,me)=>ko(ne,me).map(tt=>{const ft=is.detect(tt.versionRegexes,me);return{current:tt.name,version:ft}}),Wt=(ne,me)=>ko(ne,me).map(tt=>{const ft=is.detect(tt.versionRegexes,me);return{current:tt.name,version:ft}}),fe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,be=ne=>me=>Nt(me,ne),Rt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:ne=>Nt(ne,"edge/")&&Nt(ne,"chrome")&&Nt(ne,"safari")&&Nt(ne,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fe],search:ne=>Nt(ne,"chrome")&&!Nt(ne,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:ne=>Nt(ne,"msie")||Nt(ne,"trident")},{name:"Opera",versionRegexes:[fe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:be("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:be("firefox")},{name:"Safari",versionRegexes:[fe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:ne=>(Nt(ne,"safari")||Nt(ne,"mobile/"))&&Nt(ne,"applewebkit")}],an=[{name:"Windows",search:be("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:ne=>Nt(ne,"iphone")||Nt(ne,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:be("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:be("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:be("linux"),versionRegexes:[]},{name:"Solaris",search:be("sunos"),versionRegexes:[]},{name:"FreeBSD",search:be("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:be("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],hn={browsers:Je(Rt),oses:Je(an)},Pn="Edge",yn="Chromium",Hn="IE",no="Opera",Co="Firefox",Os="Safari",fr=()=>qo({current:void 0,version:is.unknown()}),qo=ne=>{const me=ne.current,tt=ne.version,ft=Vn=>()=>me===Vn;return{current:me,version:tt,isEdge:ft(Pn),isChromium:ft(yn),isIE:ft(Hn),isOpera:ft(no),isFirefox:ft(Co),isSafari:ft(Os)}},Kc={unknown:fr,nu:qo,edge:Je(Pn),chromium:Je(yn),ie:Je(Hn),opera:Je(no),firefox:Je(Co),safari:Je(Os)},ls="Windows",Cs="iOS",xs="Android",Fr="Linux",Mr="macOS",Bc="Solaris",Fa="FreeBSD",Yc="ChromeOS",Ti=()=>Xc({current:void 0,version:is.unknown()}),Xc=ne=>{const me=ne.current,tt=ne.version,ft=Vn=>()=>me===Vn;return{current:me,version:tt,isWindows:ft(ls),isiOS:ft(Cs),isAndroid:ft(xs),isMacOS:ft(Mr),isLinux:ft(Fr),isSolaris:ft(Bc),isFreeBSD:ft(Fa),isChromeOS:ft(Yc)}},Li={unknown:Ti,nu:Xc,windows:Je(ls),ios:Je(Cs),android:Je(xs),linux:Je(Fr),macos:Je(Mr),solaris:Je(Bc),freebsd:Je(Fa),chromeos:Je(Yc)},mi={detect:(ne,me,tt)=>{const ft=hn.browsers(),Vn=hn.oses(),oo=me.bind(zi=>ts(ft,zi)).orThunk(()=>ar(ft,ne)).fold(Kc.unknown,Kc.nu),qs=Wt(Vn,ne).fold(Li.unknown,Li.nu),Yo=q(qs,oo,ne,tt);return{browser:oo,os:qs,deviceType:Yo}}},ga=ne=>window.matchMedia(ne).matches;let ac=ye(()=>mi.detect(navigator.userAgent,xt.from(navigator.userAgentData),ga));const fi=()=>ac(),Pc=(ne,me)=>({left:ne,top:me,translate:(ft,Vn)=>Pc(ne+ft,me+Vn)}),sa=Pc,Ei=ne=>{const me=ne!==void 0?ne.dom:document,tt=me.body.scrollLeft||me.documentElement.scrollLeft,ft=me.body.scrollTop||me.documentElement.scrollTop;return sa(tt,ft)},yc=ne=>{const me=ne===void 0?window:ne;return fi().browser.isFirefox()?xt.none():xt.from(me.visualViewport)},Hi=(ne,me,tt,ft)=>({x:ne,y:me,width:tt,height:ft,right:ne+tt,bottom:me+ft}),Js=ne=>{const me=ne===void 0?window:ne,tt=me.document,ft=Ei(ke.fromDom(tt));return yc(me).fold(()=>{const Vn=me.document.documentElement,oo=Vn.clientWidth,qs=Vn.clientHeight;return Hi(ft.left,ft.top,oo,qs)},Vn=>Hi(Math.max(Vn.pageLeft,ft.left),Math.max(Vn.pageTop,ft.top),Vn.width,Vn.height))},ha=(ne,me,tt)=>yc(tt).map(ft=>{const Vn=oo=>me(Zr(oo));return ft.addEventListener(ne,Vn),{unbind:()=>ft.removeEventListener(ne,Vn)}}).getOrThunk(()=>({unbind:et}));var X=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ce=tinymce.util.Tools.resolve("tinymce.Env");const Fe=(ne,me)=>{ne.dispatch("FullscreenStateChanged",{state:me}),ne.dispatch("ResizeEditor")},Ct=ne=>me=>me.options.get(ne),Xt=ne=>{const me=ne.options.register;me("fullscreen_native",{processor:"boolean",default:!1})},mo=Ct("fullscreen_native"),Ko=ne=>{const me=ke.fromDom(ne.getElement());return qe(me).map(Le).getOrThunk(()=>Kn(kn(me)))},Er=ne=>ne.fullscreenElement!==void 0?ne.fullscreenElement:ne.msFullscreenElement!==void 0?ne.msFullscreenElement:ne.webkitFullscreenElement!==void 0?ne.webkitFullscreenElement:null,Ls=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Nr=ne=>{const me=ne.dom;me.requestFullscreen?me.requestFullscreen():me.msRequestFullscreen?me.msRequestFullscreen():me.webkitRequestFullScreen&&me.webkitRequestFullScreen()},_r=ne=>{const me=ne.dom;me.exitFullscreen?me.exitFullscreen():me.msExitFullscreen?me.msExitFullscreen():me.webkitCancelFullScreen&&me.webkitCancelFullScreen()},$r=ne=>ne.dom===Er(kn(ne).dom),Ia=(ne,me,tt)=>Ft(Ye(ne,tt),me),Gr=(ne,me)=>Ft(Lt(ne),me),Qr=ne=>uo(ne),Jc=(ne,me,tt)=>Ia(ne,ft=>rn(ft,me),tt),Qc=(ne,me)=>Gr(ne,tt=>rn(tt,me)),To="data-ephox-mobile-fullscreen-style",us="display:none!important;",sr="position:absolute!important;",B="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",J="background-color:rgb(255,255,255)!important;",de=Ce.os.isAndroid(),Xe=ne=>{const me=cs(ne,"background-color");return me!==void 0&&me!==""?"background-color:"+me+"!important":J},$n=(ne,me,tt)=>{const ft=Qo=>Qc(Qo,"*:not(.tox-silver-sink)"),Vn=Qo=>Ds=>{const Ea=ma(Ds,"style"),cc=Ea===void 0?"no-styles":Ea.trim();cc!==Qo&&(Tr(Ds,To,cc),ys(Ds,ne.parseStyle(Qo)))},oo=Jc(me,"*"),qs=Ie(oo,ft),Yo=Xe(tt);De(qs,Vn(us)),De(oo,Vn(sr+B+Yo)),Vn((de===!0?"":sr)+B+Yo)(me)},Mo=ne=>{const me=Qr("["+To+"]");De(me,tt=>{const ft=ma(tt,To);ft&&ft!=="no-styles"?ys(tt,ne.parseStyle(ft)):bs(tt,"style"),bs(tt,To)})},zn=X.DOM,Ir=()=>Js(window),gr=ne=>window.scrollTo(ne.x,ne.y),Pt=yc().fold(()=>({bind:et,unbind:et}),ne=>{const me=he(),tt=St(),ft=St(),Vn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},oo=()=>{window.requestAnimationFrame(()=>{me.on(Qo=>ys(Qo,{top:ne.offsetTop+"px",left:ne.offsetLeft+"px",height:ne.height+"px",width:ne.width+"px"}))})},qs=Q(()=>{Vn(),oo()},50);return{bind:Qo=>{me.set(Qo),qs.throttle(),tt.set(ha("resize",qs.throttle)),ft.set(ha("scroll",qs.throttle))},unbind:()=>{me.on(()=>{tt.clear(),ft.clear()}),me.clear()}}}),ra=(ne,me)=>{const tt=document.body,ft=document.documentElement,Vn=ne.getContainer(),oo=ke.fromDom(Vn),qs=Ko(ne),Yo=me.get(),zi=ke.fromDom(ne.getBody()),Qo=Ce.deviceType.isTouch(),Ds=Vn.style,Ea=ne.iframeElement,cc=Ea==null?void 0:Ea.style,Vi=or=>{or(tt,"tox-fullscreen"),or(ft,"tox-fullscreen"),or(Vn,"tox-fullscreen"),qe(oo).map(Rs=>Le(Rs).dom).each(Rs=>{or(Rs,"tox-fullscreen"),or(Rs,"tox-shadowhost")})},hr=()=>{Qo&&Mo(ne.dom),Vi(zn.removeClass),Pt.unbind(),xt.from(me.get()).each(or=>or.fullscreenChangeHandler.unbind())};if(Yo)Yo.fullscreenChangeHandler.unbind(),mo(ne)&&$r(qs)&&_r(kn(qs)),cc.width=Yo.iframeWidth,cc.height=Yo.iframeHeight,Ds.width=Yo.containerWidth,Ds.height=Yo.containerHeight,Ds.top=Yo.containerTop,Ds.left=Yo.containerLeft,hr(),gr(Yo.scrollPos),me.set(null),Fe(ne,!1),ne.off("remove",hr);else{const or=Ta(kn(qs),Ls(),Lr=>{mo(ne)&&!$r(qs)&&me.get()!==null&&ra(ne,me)}),Rs={scrollPos:Ir(),containerWidth:Ds.width,containerHeight:Ds.height,containerTop:Ds.top,containerLeft:Ds.left,iframeWidth:cc.width,iframeHeight:cc.height,fullscreenChangeHandler:or};Qo&&$n(ne.dom,oo,zi),cc.width=cc.height="100%",Ds.width=Ds.height="",Vi(zn.addClass),Pt.bind(oo),ne.on("remove",hr),me.set(Rs),mo(ne)&&Nr(qs),Fe(ne,!0)}},Qs=(ne,me)=>{ne.addCommand("mceFullScreen",()=>{ra(ne,me)})},Ur=(ne,me)=>tt=>{tt.setActive(me.get()!==null);const ft=Vn=>tt.setActive(Vn.state);return ne.on("FullscreenStateChanged",ft),()=>ne.off("FullscreenStateChanged",ft)},nl=(ne,me)=>{const tt=()=>ne.execCommand("mceFullScreen");ne.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:tt,onSetup:Ur(ne,me)}),ne.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:tt,onSetup:Ur(ne,me)})};var Po=()=>{It.add("fullscreen",ne=>{const me=_t(null);return ne.inline||(Xt(ne),Qs(ne,me),nl(ne,me),ne.addShortcut("Meta+Shift+F","","mceFullScreen")),gt(me)})};Po()})();(function(){const _t=Y=>{let H=Y;return{get:()=>H,set:Pe=>{H=Pe}}};var It=tinymce.util.Tools.resolve("tinymce.PluginManager");let gt=0;const Ut=Y=>{const Z=new Date().getTime(),Be=Math.floor(Math.random()*1e9);return gt++,Y+"_"+Be+gt+String(Z)},$t=Y=>({addTab:Z=>{var Be;const Pe=(Be=Z.name)!==null&&Be!==void 0?Be:Ut("tab-name"),Yt=Y.get();Yt[Pe]=Z,Y.set(Yt)}}),en=(Y,H)=>{Y.addCommand("mceHelp",H)},Gt=Y=>H=>H.options.get(Y),Tt=Y=>{const H=Y.options.register;H("help_tabs",{processor:"array"})},Et=Gt("help_tabs"),rt=Gt("forced_plugins"),mn=(Y,H)=>{Y.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:H}),Y.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:H})},Nn=(Y,H,Z)=>{var Be;return Z(Y,H.prototype)?!0:((Be=Y.constructor)===null||Be===void 0?void 0:Be.name)===H.name},Ot=Y=>{const H=typeof Y;return Y===null?"null":H==="object"&&Array.isArray(Y)?"array":H==="object"&&Nn(Y,String,(Z,Be)=>Be.isPrototypeOf(Z))?"string":H},ct=Y=>H=>Ot(H)===Y,Bt=Y=>H=>typeof H===Y,cn=Y=>H=>Y===H,Ze=ct("string"),et=cn(void 0),Ee=Y=>Y==null,te=Y=>!Ee(Y),Je=Bt("function"),yt=(Y=>()=>Y)(!1);class K{constructor(H,Z){this.tag=H,this.value=Z}static some(H){return new K(!0,H)}static none(){return K.singletonNone}fold(H,Z){return this.tag?Z(this.value):H()}isSome(){return this.tag}isNone(){return!this.tag}map(H){return this.tag?K.some(H(this.value)):K.none()}bind(H){return this.tag?H(this.value):K.none()}exists(H){return this.tag&&H(this.value)}forall(H){return!this.tag||H(this.value)}filter(H){return!this.tag||H(this.value)?this:K.none()}getOr(H){return this.tag?this.value:H}or(H){return this.tag?this:H}getOrThunk(H){return this.tag?this.value:H()}orThunk(H){return this.tag?this:H()}getOrDie(H){if(this.tag)return this.value;throw new Error(H??"Called getOrDie on None")}static from(H){return te(H)?K.some(H):K.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(H){this.tag&&H(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}K.singletonNone=new K(!1);const xt=Array.prototype.slice,En=Array.prototype.indexOf,St=(Y,H)=>En.call(Y,H),he=(Y,H)=>St(Y,H)>-1,Q=(Y,H)=>{const Z=Y.length,Be=new Array(Z);for(let Pe=0;Pe<Z;Pe++){const Yt=Y[Pe];Be[Pe]=H(Yt,Pe)}return Be},it=(Y,H)=>{const Z=[];for(let Be=0,Pe=Y.length;Be<Pe;Be++){const Yt=Y[Be];H(Yt,Be)&&Z.push(Yt)}return Z},Me=(Y,H,Z)=>{for(let Be=0,Pe=Y.length;Be<Pe;Be++){const Yt=Y[Be];if(H(Yt,Be))return K.some(Yt);if(Z(Yt,Be))break}return K.none()},De=(Y,H)=>Me(Y,H,yt),Ft=(Y,H)=>{const Z=xt.call(Y,0);return Z.sort(H),Z},_=Object.keys,ge=Object.hasOwnProperty,Ue=(Y,H)=>Ie(Y,H)?K.from(Y[H]):K.none(),Ie=(Y,H)=>ge.call(Y,H),Ae=Y=>{const H=[],Z=Be=>{H.push(Be)};for(let Be=0;Be<Y.length;Be++)Y[Be].each(Z);return H},tn=`<h1>Editor UI keyboard navigation</h1>

<h2>Activating keyboard navigation</h2>

<p>The sections of the outer UI of the editor - the menubar, toolbar, sidebar and footer - are all keyboard navigable. As such, there are multiple ways to activate keyboard navigation:</p>
<ul>
  <li>Focus the menubar: Alt + F9 (Windows) or &#x2325;F9 (MacOS)</li>
  <li>Focus the toolbar: Alt + F10 (Windows) or &#x2325;F10 (MacOS)</li>
  <li>Focus the footer: Alt + F11 (Windows) or &#x2325;F11 (MacOS)</li>
</ul>

<p>Focusing the menubar or toolbar will start keyboard navigation at the first item in the menubar or toolbar, which will be highlighted with a gray background. Focusing the footer will start keyboard navigation at the first item in the element path, which will be highlighted with an underline. </p>

<h2>Moving between UI sections</h2>

<p>When keyboard navigation is active, pressing tab will move the focus to the next major section of the UI, where applicable. These sections are:</p>
<ul>
  <li>the menubar</li>
  <li>each group of the toolbar </li>
  <li>the sidebar</li>
  <li>the element path in the footer </li>
  <li>the wordcount toggle button in the footer </li>
  <li>the branding link in the footer </li>
  <li>the editor resize handle in the footer</li>
</ul>

<p>Pressing shift + tab will move backwards through the same sections, except when moving from the footer to the toolbar. Focusing the element path then pressing shift + tab will move focus to the first toolbar group, not the last.</p>

<h2>Moving within UI sections</h2>

<p>Keyboard navigation within UI sections can usually be achieved using the left and right arrow keys. This includes:</p>
<ul>
  <li>moving between menus in the menubar</li>
  <li>moving between buttons in a toolbar group</li>
  <li>moving between items in the element path</li>
</ul>

<p>In all these UI sections, keyboard navigation will cycle within the section. For example, focusing the last button in a toolbar group then pressing right arrow will move focus to the first item in the same toolbar group. </p>

<h1>Executing buttons</h1>

<p>To execute a button, navigate the selection to the desired button and hit space or enter.</p>

<h1>Opening, navigating and closing menus</h1>

<p>When focusing a menubar button or a toolbar button with a menu, pressing space, enter or down arrow will open the menu. When the menu opens the first item will be selected. To move up or down the menu, press the up or down arrow key respectively. This is the same for submenus, which can also be opened and closed using the left and right arrow keys.</p>

<p>To close any active menu, hit the escape key. When a menu is closed the selection will be restored to its previous selection. This also works for closing submenus.</p>

<h1>Context toolbars and menus</h1>

<p>To focus an open context toolbar such as the table context toolbar, press Ctrl + F9 (Windows) or &#x2303;F9 (MacOS).</p>

<p>Context toolbar navigation is the same as toolbar navigation, and context menu navigation is the same as standard menu navigation.</p>

<h1>Dialog navigation</h1>

<p>There are two types of dialog UIs in TinyMCE: tabbed dialogs and non-tabbed dialogs.</p>

<p>When a non-tabbed dialog is opened, the first interactive component in the dialog will be focused. Users can navigate between interactive components by pressing tab. This includes any footer buttons. Navigation will cycle back to the first dialog component if tab is pressed while focusing the last component in the dialog. Pressing shift + tab will navigate backwards.</p>

<p>When a tabbed dialog is opened, the first button in the tab menu is focused. Pressing tab will navigate to the first interactive component in that tab, and will cycle through the tabâs components, the footer buttons, then back to the tab button. To switch to another tab, focus the tab button for the current tab, then use the arrow keys to cycle through the tab buttons.</p>`,dn=()=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:tn}]});var ze=tinymce.util.Tools.resolve("tinymce.Env");const jt=Y=>{const H=ze.os.isMacOS()||ze.os.isiOS(),Pe=H?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},Yt=Y.split("+"),rn=Q(Yt,ro=>{const uo=ro.toLowerCase().trim();return Ie(Pe,uo)?Pe[uo]:ro});return H?rn.join("").replace(/\s/,""):rn.join("+")},Nt=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],Ve=()=>{const Y=Q(Nt,Z=>{const Be=Q(Z.shortcuts,jt).join(" or ");return[Z.action,Be]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:Y}]}};var R=tinymce.util.Tools.resolve("tinymce.util.I18n");const qn=Q([{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"advcode",name:"Advanced Code Editor",type:"premium"},{key:"advtable",name:"Advanced Tables",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"editimage",name:"Enhanced Image Editing",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"export",name:"Export",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"rtc",name:"Real-Time Collaboration",type:"premium",slug:"rtc-introduction"},{key:"tinymcespellchecker",name:"Spell Checker Pro",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],Y=>({...Y,type:Y.type||"opensource",slug:Y.slug||Y.key})),_e=Y=>{const H=()=>{const Qn=it(qn,({type:Re})=>Re==="premium"),kn=Ft(Q(Qn,Re=>Re.name),(Re,Ye)=>Re.localeCompare(Ye)),ao=Q(kn,Re=>`<li>${Re}</li>`).join("");return'<div data-mce-tabstop="1" tabindex="-1"><p><b>'+R.translate("Premium plugins:")+"</b></p><ul>"+ao+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">'+R.translate("Learn more...")+"</a></li></ul></div>"},Z=Qn=>`<a href="${Qn.url}" target="_blank" rel="noopener">${Qn.name}</a>`,Be=(Qn,kn)=>{const ao=Qn.plugins[kn].getMetadata;if(Je(ao)){const Re=ao();return{name:Re.name,html:Z(Re)}}else return{name:kn,html:kn}},Pe=(Qn,kn)=>De(qn,ao=>ao.key===kn).fold(()=>Be(Qn,kn),ao=>{const Re=ao.type==="premium"?`${ao.name}*`:ao.name,Ye=Z({name:Re,url:`https://www.tiny.cloud/docs/tinymce/6/${ao.slug}/`});return{name:Re,html:Ye}}),Yt=Qn=>{const kn=_(Qn.plugins),ao=rt(Qn);return et(ao)?kn:it(kn,Re=>!he(ao,Re))},rn=Qn=>{const kn=Yt(Qn),ao=Ft(Q(kn,On=>Pe(Qn,On)),(On,Tn)=>On.name.localeCompare(Tn.name)),Re=Q(ao,On=>"<li>"+On.html+"</li>"),Ye=Re.length,Lt=Re.join("");return"<p><b>"+R.translate(["Plugins installed ({0}):",Ye])+"</b></p><ul>"+Lt+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(Qn=>Qn==null?"":'<div data-mce-tabstop="1" tabindex="-1">'+rn(Qn)+"</div>")(Y),H()].join("")}]}};var xe=tinymce.util.Tools.resolve("tinymce.EditorManager");const We=()=>{const Z='<a href="https://www.tiny.cloud/docs/tinymce/6/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">TinyMCE '+((Pe,Yt)=>Pe.indexOf("@")===0?"X.X.X":Pe+"."+Yt)(xe.majorVersion,xe.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+R.translate(["You are using {0}",Z])+"</p>",presets:"document"}]}},ke=(Y,H)=>{const Z={},Be=Q(Y,Pe=>{var Yt;if(Ze(Pe))return Ie(H,Pe)&&(Z[Pe]=H[Pe]),Pe;{const rn=(Yt=Pe.name)!==null&&Yt!==void 0?Yt:Ut("tab-name");return Z[rn]=Pe,rn}});return{tabs:Z,names:Be}},ae=Y=>{const H=_(Y),Z=H.indexOf("versions");return Z!==-1&&(H.splice(Z,1),H.push("versions")),{tabs:Y,names:H}},se=(Y,H)=>{const Z=Ve(),Be=dn(),Pe=_e(Y),Yt=We(),rn={[Z.name]:Z,[Be.name]:Be,[Pe.name]:Pe,[Yt.name]:Yt,...H.get()};return K.from(Et(Y)).fold(()=>ae(rn),ro=>ke(ro,rn))},re=(Y,H)=>()=>{const{tabs:Z,names:Be}=se(Y,H),Pe=Q(Be,ro=>Ue(Z,ro)),rn={type:"tabpanel",tabs:Ae(Pe)};Y.windowManager.open({title:"Help",size:"medium",body:rn,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})};var z=()=>{It.add("help",Y=>{const H=_t({}),Z=$t(H);Tt(Y);const Be=re(Y,H);return mn(Y,Be),en(Y,Be),Y.shortcuts.add("Alt+0","Open help dialog","mceHelp"),Z})};z()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=Object.getPrototypeOf,gt=(B,J,de)=>{var Xe;return de(B,J.prototype)?!0:((Xe=B.constructor)===null||Xe===void 0?void 0:Xe.name)===J.name},Ut=B=>{const J=typeof B;return B===null?"null":J==="object"&&Array.isArray(B)?"array":J==="object"&&gt(B,String,(de,Xe)=>Xe.isPrototypeOf(de))?"string":J},$t=B=>J=>Ut(J)===B,en=B=>J=>typeof J===B,Gt=B=>J=>B===J,Tt=(B,J)=>rt(B)&&gt(B,J,(de,Xe)=>It(de)===Xe),Et=$t("string"),rt=$t("object"),mn=B=>Tt(B,Object),Nn=$t("array"),Ot=Gt(null),ct=en("boolean"),Bt=B=>B==null,cn=B=>!Bt(B),Ze=en("function"),et=en("number"),Ee=(B,J)=>{if(Nn(B)){for(let de=0,Xe=B.length;de<Xe;++de)if(!J(B[de]))return!1;return!0}return!1},te=()=>{};class Je{constructor(J,de){this.tag=J,this.value=de}static some(J){return new Je(!0,J)}static none(){return Je.singletonNone}fold(J,de){return this.tag?de(this.value):J()}isSome(){return this.tag}isNone(){return!this.tag}map(J){return this.tag?Je.some(J(this.value)):Je.none()}bind(J){return this.tag?J(this.value):Je.none()}exists(J){return this.tag&&J(this.value)}forall(J){return!this.tag||J(this.value)}filter(J){return!this.tag||J(this.value)?this:Je.none()}getOr(J){return this.tag?this.value:J}or(J){return this.tag?this:J}getOrThunk(J){return this.tag?this.value:J()}orThunk(J){return this.tag?this:J()}getOrDie(J){if(this.tag)return this.value;throw new Error(J??"Called getOrDie on None")}static from(J){return cn(J)?Je.some(J):Je.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(J){this.tag&&J(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Je.singletonNone=new Je(!1);const Ht=Object.keys,yt=Object.hasOwnProperty,K=(B,J)=>{const de=Ht(B);for(let Xe=0,$n=de.length;Xe<$n;Xe++){const Mo=de[Xe],zn=B[Mo];J(zn,Mo)}},xt=B=>(J,de)=>{B[de]=J},En=(B,J,de,Xe)=>{K(B,($n,Mo)=>{(J($n,Mo)?de:Xe)($n,Mo)})},St=(B,J)=>{const de={};return En(B,J,xt(de),te),de},he=(B,J)=>yt.call(B,J),Q=(B,J)=>he(B,J)&&B[J]!==void 0&&B[J]!==null,it=Array.prototype.push,Me=B=>{const J=[];for(let de=0,Xe=B.length;de<Xe;++de){if(!Nn(B[de]))throw new Error("Arr.flatten item "+de+" was not an array, input: "+B);it.apply(J,B[de])}return J},De=(B,J)=>J>=0&&J<B.length?Je.some(B[J]):Je.none(),Ft=B=>De(B,0),_=(B,J)=>{for(let de=0;de<B.length;de++){const Xe=J(B[de],de);if(Xe.isSome())return Xe}return Je.none()};typeof window<"u"||Function("return this;")();const ge=(B,J,de)=>{if(Et(de)||ct(de)||et(de))B.setAttribute(J,de+"");else throw console.error("Invalid call to Attribute.set. Key ",J,":: Value ",de,":: Element ",B),new Error("Attribute value was not simple")},Ue=(B,J,de)=>{ge(B.dom,J,de)},Ie=(B,J)=>{B.dom.removeAttribute(J)},Ae=(B,J)=>{const Xe=(J||document).createElement("div");if(Xe.innerHTML=B,!Xe.hasChildNodes()||Xe.childNodes.length>1){const $n="HTML does not have a single root node";throw console.error($n,B),new Error($n)}return ze(Xe.childNodes[0])},tn=(B,J)=>{const Xe=(J||document).createElement(B);return ze(Xe)},dn=(B,J)=>{const Xe=(J||document).createTextNode(B);return ze(Xe)},ze=B=>{if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},Nt={fromHtml:Ae,fromTag:tn,fromText:dn,fromDom:ze,fromPoint:(B,J,de)=>Je.from(B.dom.elementFromPoint(J,de)).map(ze)};var Ve=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),R=tinymce.util.Tools.resolve("tinymce.util.URI");const qn=B=>B.length>0,_e=B=>J=>J.options.get(B),xe=B=>{const J=B.options.register;J("image_dimensions",{processor:"boolean",default:!0}),J("image_advtab",{processor:"boolean",default:!1}),J("image_uploadtab",{processor:"boolean",default:!0}),J("image_prepend_url",{processor:"string",default:""}),J("image_class_list",{processor:"object[]"}),J("image_description",{processor:"boolean",default:!0}),J("image_title",{processor:"boolean",default:!1}),J("image_caption",{processor:"boolean",default:!1}),J("image_list",{processor:de=>{const Xe=de===!1||Et(de)||Ee(de,rt)||Ze(de);return Xe?{value:de,valid:Xe}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},We=_e("image_dimensions"),ke=_e("image_advtab"),ae=_e("image_uploadtab"),se=_e("image_prepend_url"),re=_e("image_class_list"),z=_e("image_description"),Y=_e("image_title"),H=_e("image_caption"),Z=_e("image_list"),Be=_e("a11y_advanced_options"),Pe=_e("automatic_uploads"),Yt=B=>qn(B.options.get("images_upload_url")),rn=B=>cn(B.options.get("images_upload_handler")),ro=(B,J)=>Math.max(parseInt(B,10),parseInt(J,10)),uo=B=>new Promise(J=>{const de=document.createElement("img"),Xe=Mo=>{de.onload=de.onerror=null,de.parentNode&&de.parentNode.removeChild(de),J(Mo)};de.onload=()=>{const Mo=ro(de.width,de.clientWidth),zn=ro(de.height,de.clientHeight),Ir={width:Mo,height:zn};Xe(Promise.resolve(Ir))},de.onerror=()=>{Xe(Promise.reject(`Failed to get image dimensions for: ${B}`))};const $n=de.style;$n.visibility="hidden",$n.position="fixed",$n.bottom=$n.left="0px",$n.width=$n.height="auto",document.body.appendChild(de),de.src=B}),Qn=B=>(B&&(B=B.replace(/px$/,"")),B),kn=B=>(B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B),ao=B=>{if(B.margin){const J=String(B.margin).split(" ");switch(J.length){case 1:B["margin-top"]=B["margin-top"]||J[0],B["margin-right"]=B["margin-right"]||J[0],B["margin-bottom"]=B["margin-bottom"]||J[0],B["margin-left"]=B["margin-left"]||J[0];break;case 2:B["margin-top"]=B["margin-top"]||J[0],B["margin-right"]=B["margin-right"]||J[1],B["margin-bottom"]=B["margin-bottom"]||J[0],B["margin-left"]=B["margin-left"]||J[1];break;case 3:B["margin-top"]=B["margin-top"]||J[0],B["margin-right"]=B["margin-right"]||J[1],B["margin-bottom"]=B["margin-bottom"]||J[2],B["margin-left"]=B["margin-left"]||J[1];break;case 4:B["margin-top"]=B["margin-top"]||J[0],B["margin-right"]=B["margin-right"]||J[1],B["margin-bottom"]=B["margin-bottom"]||J[2],B["margin-left"]=B["margin-left"]||J[3]}delete B.margin}return B},Re=(B,J)=>{const de=Z(B);Et(de)?fetch(de).then(Xe=>{Xe.ok&&Xe.json().then(J)}):Ze(de)?de(J):J(de)},Ye=(B,J,de)=>{const Xe=()=>{de.onload=de.onerror=null,B.selection&&(B.selection.select(de),B.nodeChanged())};de.onload=()=>{!J.width&&!J.height&&We(B)&&B.dom.setAttribs(de,{width:String(de.clientWidth),height:String(de.clientHeight)}),Xe()},de.onerror=Xe},Lt=B=>new Promise((J,de)=>{const Xe=new FileReader;Xe.onload=()=>{J(Xe.result)},Xe.onerror=()=>{var $n;de(($n=Xe.error)===null||$n===void 0?void 0:$n.message)},Xe.readAsDataURL(B)}),fn=B=>B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder")),On=(B,J)=>{const de=B.options.get;return R.isDomSafe(J,"img",{allow_html_data_urls:de("allow_html_data_urls"),allow_script_urls:de("allow_script_urls"),allow_svg_data_urls:de("allow_svg_data_urls")})},Tn=Ve.DOM,Ro=B=>B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?Qn(B.style.marginLeft):"",ks=B=>B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?Qn(B.style.marginTop):"",qe=B=>B.style.borderWidth?Qn(B.style.borderWidth):"",Le=(B,J)=>{var de;return B.hasAttribute(J)&&(de=B.getAttribute(J))!==null&&de!==void 0?de:""},un=B=>B.parentNode!==null&&B.parentNode.nodeName==="FIGURE",ln=(B,J,de)=>{de===""||de===null?B.removeAttribute(J):B.setAttribute(J,de)},Jt=B=>{const J=Tn.create("figure",{class:"image"});Tn.insertAfter(J,B),J.appendChild(B),J.appendChild(Tn.create("figcaption",{contentEditable:"true"},"Caption")),J.contentEditable="false"},Kn=B=>{const J=B.parentNode;cn(J)&&(Tn.insertAfter(B,J),Tn.remove(J))},Ts=B=>{un(B)?Kn(B):Jt(B)},Tr=(B,J)=>{const de=B.getAttribute("style"),Xe=J(de!==null?de:"");Xe.length>0?(B.setAttribute("style",Xe),B.setAttribute("data-mce-style",Xe)):B.removeAttribute("style")},ma=(B,J)=>(de,Xe,$n)=>{const Mo=de.style;Mo[Xe]?(Mo[Xe]=kn($n),Tr(de,J)):ln(de,Xe,$n)},bs=(B,J)=>B.style[J]?Qn(B.style[J]):Le(B,J),vc=(B,J)=>{const de=kn(J);B.style.marginLeft=de,B.style.marginRight=de},ys=(B,J)=>{const de=kn(J);B.style.marginTop=de,B.style.marginBottom=de},cs=(B,J)=>{const de=kn(J);B.style.borderWidth=de},go=(B,J)=>{B.style.borderStyle=J},mr=B=>{var J;return(J=B.style.borderStyle)!==null&&J!==void 0?J:""},Zr=B=>cn(B)&&B.nodeName==="FIGURE",Is=B=>B.nodeName==="IMG",fa=B=>Tn.getAttrib(B,"alt").length===0&&Tn.getAttrib(B,"role")==="presentation",jr=B=>fa(B)?"":Le(B,"alt"),rc=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Xs=(B,J)=>{var de;const Xe=document.createElement("img");return ln(Xe,"style",J.style),(Ro(Xe)||J.hspace!=="")&&vc(Xe,J.hspace),(ks(Xe)||J.vspace!=="")&&ys(Xe,J.vspace),(qe(Xe)||J.border!=="")&&cs(Xe,J.border),(mr(Xe)||J.borderStyle!=="")&&go(Xe,J.borderStyle),B((de=Xe.getAttribute("style"))!==null&&de!==void 0?de:"")},Ta=(B,J)=>{const de=document.createElement("img");if(eo(B,{...J,caption:!1},de),lt(de,J.alt,J.isDecorative),J.caption){const Xe=Tn.create("figure",{class:"image"});return Xe.appendChild(de),Xe.appendChild(Tn.create("figcaption",{contentEditable:"true"},"Caption")),Xe.contentEditable="false",Xe}else return de},ye=(B,J)=>({src:Le(J,"src"),alt:jr(J),title:Le(J,"title"),width:bs(J,"width"),height:bs(J,"height"),class:Le(J,"class"),style:B(Le(J,"style")),caption:un(J),hspace:Ro(J),vspace:ks(J),border:qe(J),borderStyle:mr(J),isDecorative:fa(J)}),q=(B,J,de,Xe,$n)=>{de[Xe]!==J[Xe]&&$n(B,Xe,String(de[Xe]))},lt=(B,J,de)=>{if(de){Tn.setAttrib(B,"role","presentation");const Xe=Nt.fromDom(B);Ue(Xe,"alt","")}else{if(Ot(J)){const Xe=Nt.fromDom(B);Ie(Xe,"alt")}else{const Xe=Nt.fromDom(B);Ue(Xe,"alt",J)}Tn.getAttrib(B,"role")==="presentation"&&Tn.setAttrib(B,"role","")}},wt=(B,J,de)=>{(de.alt!==J.alt||de.isDecorative!==J.isDecorative)&&lt(B,de.alt,de.isDecorative)},Zn=(B,J)=>(de,Xe,$n)=>{B(de,$n),Tr(de,J)},eo=(B,J,de)=>{const Xe=ye(B,de);q(de,Xe,J,"caption",($n,Mo,zn)=>Ts($n)),q(de,Xe,J,"src",ln),q(de,Xe,J,"title",ln),q(de,Xe,J,"width",ma("width",B)),q(de,Xe,J,"height",ma("height",B)),q(de,Xe,J,"class",ln),q(de,Xe,J,"style",Zn(($n,Mo)=>ln($n,"style",Mo),B)),q(de,Xe,J,"hspace",Zn(vc,B)),q(de,Xe,J,"vspace",Zn(ys,B)),q(de,Xe,J,"border",Zn(cs,B)),q(de,Xe,J,"borderStyle",Zn(go,B)),wt(de,Xe,J)},In=(B,J)=>{const de=B.dom.styles.parse(J),Xe=ao(de),$n=B.dom.styles.parse(B.dom.styles.serialize(Xe));return B.dom.styles.serialize($n)},is=B=>{const J=B.selection.getNode(),de=B.dom.getParent(J,"figure.image");return de?B.dom.select("img",de)[0]:J&&(J.nodeName!=="IMG"||fn(J))?null:J},ts=(B,J)=>{var de;const Xe=B.dom,$n=St(B.schema.getTextBlockElements(),(zn,Ir)=>!B.schema.isValidChild(Ir,"figure")),Mo=Xe.getParent(J.parentNode,zn=>Q($n,zn.nodeName),B.getBody());return Mo&&(de=Xe.split(Mo,J))!==null&&de!==void 0?de:J},ko=B=>{const J=is(B);return J?ye(de=>In(B,de),J):rc()},ar=(B,J)=>{const de=Ta($n=>In(B,$n),J);B.dom.setAttrib(de,"data-mce-id","__mcenew"),B.focus(),B.selection.setContent(de.outerHTML);const Xe=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(Xe,"data-mce-id",null),Zr(Xe)){const $n=ts(B,Xe);B.selection.select($n)}else B.selection.select(Xe)},Wt=(B,J)=>{B.dom.setAttrib(J,"src",J.getAttribute("src"))},fe=(B,J)=>{if(J){const de=B.dom.is(J.parentNode,"figure.image")?J.parentNode:J;B.dom.remove(de),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},be=(B,J)=>{const de=is(B);if(de)if(eo(Xe=>In(B,Xe),J,de),Wt(B,de),Zr(de.parentNode)){const Xe=de.parentNode;ts(B,Xe),B.selection.select(de.parentNode)}else B.selection.select(de),Ye(B,J,de)},Rt=(B,J)=>{const de=J.src;return{...J,src:On(B,de)?de:""}},an=(B,J)=>{const de=is(B);if(de){const $n={...ye(zn=>In(B,zn),de),...J},Mo=Rt(B,$n);$n.src?be(B,Mo):fe(B,de)}else J.src&&ar(B,{...rc(),...J})},yn=(B=>(...J)=>{if(J.length===0)throw new Error("Can't merge zero objects");const de={};for(let Xe=0;Xe<J.length;Xe++){const $n=J[Xe];for(const Mo in $n)he($n,Mo)&&(de[Mo]=B(de[Mo],$n[Mo]))}return de})((B,J)=>mn(B)&&mn(J)?yn(B,J):J);var Hn=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),no=tinymce.util.Tools.resolve("tinymce.util.Tools");const Co=B=>Et(B.value)?B.value:"",Os=B=>Et(B.text)?B.text:Et(B.title)?B.title:"",fr=(B,J)=>{const de=[];return no.each(B,Xe=>{const $n=Os(Xe);if(Xe.menu!==void 0){const Mo=fr(Xe.menu,J);de.push({text:$n,items:Mo})}else{const Mo=J(Xe);de.push({text:$n,value:Mo})}}),de},qo=(B=Co)=>J=>J?Je.from(J).map(de=>fr(de,B)):Je.none(),Kc=B=>qo(Co)(B),ls=B=>he(B,"items"),Cs=(B,J)=>_(B,de=>ls(de)?Cs(de.items,J):de.value===J?Je.some(de):Je.none()),Fr={sanitizer:qo,sanitize:Kc,findEntry:(B,J)=>B.bind(de=>Cs(de,J))},Bc={makeTab:B=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Fa=B=>{const J=Fr.sanitizer(me=>B.convertURL(me.value||me.url||"","src")),de=new Promise(me=>{Re(B,tt=>{me(J(tt).map(ft=>Me([[{text:"None",value:""}],ft])))})}),Xe=Fr.sanitize(re(B)),$n=ke(B),Mo=ae(B),zn=Yt(B),Ir=rn(B),gr=ko(B),Pt=z(B),ra=Y(B),Qs=We(B),Ur=H(B),nl=Be(B),Po=Pe(B),ne=Je.some(se(B)).filter(me=>Et(me)&&me.length>0);return de.then(me=>({image:gr,imageList:me,classList:Xe,hasAdvTab:$n,hasUploadTab:Mo,hasUploadUrl:zn,hasUploadHandler:Ir,hasDescription:Pt,hasImageTitle:ra,hasDimensions:Qs,hasImageCaption:Ur,prependURL:ne,hasAccessibilityOptions:nl,automaticUploads:Po}))},Yc=B=>{const J={name:"src",type:"urlinput",filetype:"image",label:"Source"},de=B.imageList.map(ra=>({name:"images",type:"listbox",label:"Image list",items:ra})),Xe={name:"alt",type:"input",label:"Alternative description",enabled:!(B.hasAccessibilityOptions&&B.image.isDecorative)},$n={name:"title",type:"input",label:"Image title"},Mo={name:"dimensions",type:"sizeinput"},zn={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Ir=B.classList.map(ra=>({name:"classes",type:"listbox",label:"Class",items:ra})),gr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Pt=ra=>ra?{type:"grid",columns:2}:{type:"panel"};return Me([[J],de.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[zn]:[],B.hasDescription?[Xe]:[],B.hasImageTitle?[$n]:[],B.hasDimensions?[Mo]:[],[{...Pt(B.classList.isSome()&&B.hasImageCaption),items:Me([Ir.toArray(),B.hasImageCaption?[gr]:[]])}]])},Xc={makeTab:B=>({title:"General",name:"general",items:Yc(B)}),makeItems:Yc},zs={makeTab:B=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},mi=B=>({prevImage:Fr.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}),ga=B=>({src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}),ac=(B,J)=>({src:B.src.value,alt:(B.alt===null||B.alt.length===0)&&J?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}),fi=(B,J)=>/^(?:[a-zA-Z]+:)?\/\//.test(J)?Je.none():B.prependURL.bind(de=>J.substring(0,de.length)!==de?Je.some(de+J):Je.none()),Pc=(B,J)=>{const de=J.getData();fi(B,de.src.value).each(Xe=>{J.setData({src:{value:Xe,meta:de.src.meta}})})},sa=(B,J,de)=>{B.hasDescription&&Et(de.alt)&&(J.alt=de.alt),B.hasAccessibilityOptions&&(J.isDecorative=de.isDecorative||J.isDecorative||!1),B.hasImageTitle&&Et(de.title)&&(J.title=de.title),B.hasDimensions&&(Et(de.width)&&(J.dimensions.width=de.width),Et(de.height)&&(J.dimensions.height=de.height)),Et(de.class)&&Fr.findEntry(B.classList,de.class).each(Xe=>{J.classes=Xe.value}),B.hasImageCaption&&ct(de.caption)&&(J.caption=de.caption),B.hasAdvTab&&(Et(de.style)&&(J.style=de.style),Et(de.vspace)&&(J.vspace=de.vspace),Et(de.border)&&(J.border=de.border),Et(de.hspace)&&(J.hspace=de.hspace),Et(de.borderstyle)&&(J.borderstyle=de.borderstyle))},Ei=(B,J)=>{const de=J.getData(),Xe=de.src.meta;if(Xe!==void 0){const $n=yn({},de);sa(B,$n,Xe),J.setData($n)}},yc=(B,J,de,Xe)=>{const $n=Xe.getData(),Mo=$n.src.value,zn=$n.src.meta||{};!zn.width&&!zn.height&&J.hasDimensions&&(qn(Mo)?B.imageSize(Mo).then(Ir=>{de.open&&Xe.setData({dimensions:Ir})}).catch(Ir=>console.error(Ir)):Xe.setData({dimensions:{width:"",height:""}}))},Hi=(B,J,de)=>{const Xe=de.getData(),$n=Fr.findEntry(B.imageList,Xe.src.value);J.prevImage=$n,de.setData({images:$n.map(Mo=>Mo.value).getOr("")})},Js=(B,J,de,Xe)=>{Pc(J,Xe),Ei(J,Xe),yc(B,J,de,Xe),Hi(J,de,Xe)},ha=(B,J,de,Xe)=>{const $n=Xe.getData(),Mo=Fr.findEntry(J.imageList,$n.images);Mo.each(zn=>{$n.alt===""||de.prevImage.map(gr=>gr.text===$n.alt).getOr(!1)?zn.value===""?Xe.setData({src:zn,alt:de.prevAlt}):Xe.setData({src:zn,alt:zn.text}):Xe.setData({src:zn})}),de.prevImage=Mo,Js(B,J,de,Xe)},X=(B,J,de,Xe)=>{const $n=Xe.getData();Xe.block("Uploading image"),Ft($n.fileinput).fold(()=>{Xe.unblock()},Mo=>{const zn=URL.createObjectURL(Mo),Ir=()=>{Xe.unblock(),URL.revokeObjectURL(zn)},gr=Pt=>{Xe.setData({src:{value:Pt,meta:{}}}),Xe.showTab("general"),Js(B,J,de,Xe)};Lt(Mo).then(Pt=>{const ra=B.createBlobCache(Mo,zn,Pt);J.automaticUploads?B.uploadImage(ra).then(Qs=>{gr(Qs.url),Ir()}).catch(Qs=>{Ir(),B.alertErr(Qs)}):(B.addToBlobCache(ra),gr(ra.blobUri()),Xe.unblock())})})},Ce=(B,J,de)=>(Xe,$n)=>{$n.name==="src"?Js(B,J,de,Xe):$n.name==="images"?ha(B,J,de,Xe):$n.name==="alt"?de.prevAlt=Xe.getData().alt:$n.name==="fileinput"?X(B,J,de,Xe):$n.name==="isDecorative"&&Xe.setEnabled("alt",!Xe.getData().isDecorative)},Fe=B=>()=>{B.open=!1},Ct=B=>B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler?{type:"tabpanel",tabs:Me([[Xc.makeTab(B)],B.hasAdvTab?[Bc.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[zs.makeTab(B)]:[]])}:{type:"panel",items:Xc.makeItems(B)},Xt=(B,J,de)=>Xe=>{const $n=yn(ga(J.image),Xe.getData()),Mo={...$n,style:Xs(de.normalizeCss,ac($n,!1))};B.execCommand("mceUpdateImage",!1,ac(Mo,J.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),Xe.close()},mo=B=>J=>On(B,J)?uo(B.documentBaseURI.toAbsolute(J)).then(de=>({width:String(de.width),height:String(de.height)})):Promise.resolve({width:"",height:""}),Ko=B=>(J,de,Xe)=>{var $n;return B.editorUpload.blobCache.create({blob:J,blobUri:de,name:($n=J.name)===null||$n===void 0?void 0:$n.replace(/\.[^\.]+$/,""),filename:J.name,base64:Xe.split(",")[1]})},Er=B=>J=>{B.editorUpload.blobCache.add(J)},Ls=B=>J=>{B.windowManager.alert(J)},Nr=B=>J=>In(B,J),_r=B=>J=>B.dom.parseStyle(J),$r=B=>(J,de)=>B.dom.serializeStyle(J,de),Ia=B=>J=>Hn(B).upload([J],!1).then(de=>{var Xe;return de.length===0?Promise.reject("Failed to upload image"):de[0].status===!1?Promise.reject((Xe=de[0].error)===null||Xe===void 0?void 0:Xe.message):de[0]}),Gr=B=>{const J={imageSize:mo(B),addToBlobCache:Er(B),createBlobCache:Ko(B),alertErr:Ls(B),normalizeCss:Nr(B),parseStyle:_r(B),serializeStyle:$r(B),uploadImage:Ia(B)};return{open:()=>{Fa(B).then(Xe=>{const $n=mi(Xe);return{title:"Insert/Edit Image",size:"normal",body:Ct(Xe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ga(Xe.image),onSubmit:Xt(B,Xe,J),onChange:Ce(J,Xe,$n),onClose:Fe($n)}}).then(B.windowManager.open)}}},Qr=B=>{B.addCommand("mceImage",Gr(B).open),B.addCommand("mceUpdateImage",(J,de)=>{B.undoManager.transact(()=>an(B,de))})},Jc=B=>{const J=B.attr("class");return cn(J)&&/\bimage\b/.test(J)},Qc=B=>J=>{let de=J.length;const Xe=$n=>{$n.attr("contenteditable",B?"true":null)};for(;de--;){const $n=J[de];Jc($n)&&($n.attr("contenteditable",B?"false":null),no.each($n.getAll("figcaption"),Xe))}},To=B=>{B.on("PreInit",()=>{B.parser.addNodeFilter("figure",Qc(!0)),B.serializer.addNodeFilter("figure",Qc(!1))})},us=B=>{B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Gr(B).open,onSetup:J=>(J.setActive(cn(is(B))),B.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",J.setActive).unbind)}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Gr(B).open}),B.ui.registry.addContextMenu("image",{update:J=>Zr(J)||Is(J)&&!fn(J)?["image"]:[]})};var sr=()=>{_t.add("image",B=>{xe(B),To(B),us(B),Qr(B)})};sr()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(_e,xe,We)=>{var ke;return We(_e,xe.prototype)?!0:((ke=_e.constructor)===null||ke===void 0?void 0:ke.name)===xe.name},gt=_e=>{const xe=typeof _e;return _e===null?"null":xe==="object"&&Array.isArray(_e)?"array":xe==="object"&&It(_e,String,(We,ke)=>ke.isPrototypeOf(We))?"string":xe},Ut=_e=>xe=>gt(xe)===_e,$t=_e=>xe=>typeof xe===_e,en=Ut("string"),Gt=Ut("object"),Tt=Ut("array"),Et=$t("function");var rt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),mn=tinymce.util.Tools.resolve("tinymce.EditorManager"),Nn=tinymce.util.Tools.resolve("tinymce.Env"),Ot=tinymce.util.Tools.resolve("tinymce.util.Tools");const ct=_e=>xe=>xe.options.get(_e),Bt=_e=>{const xe=_e.options.register,We=ke=>en(ke)||Et(ke)||Gt(ke);xe("importcss_merge_classes",{processor:"boolean",default:!0}),xe("importcss_exclusive",{processor:"boolean",default:!0}),xe("importcss_selector_converter",{processor:"function"}),xe("importcss_selector_filter",{processor:We}),xe("importcss_file_filter",{processor:We}),xe("importcss_groups",{processor:"object[]"}),xe("importcss_append",{processor:"boolean",default:!1})},cn=ct("importcss_merge_classes"),Ze=ct("importcss_exclusive"),et=ct("importcss_selector_converter"),Ee=ct("importcss_selector_filter"),te=ct("importcss_groups"),Je=ct("importcss_append"),Ht=ct("importcss_file_filter"),yt=ct("skin"),K=ct("skin_url"),xt=Array.prototype.push,En=(_e,xe)=>{const We=_e.length,ke=new Array(We);for(let ae=0;ae<We;ae++){const se=_e[ae];ke[ae]=xe(se,ae)}return ke},St=_e=>{const xe=[];for(let We=0,ke=_e.length;We<ke;++We){if(!Tt(_e[We]))throw new Error("Arr.flatten item "+We+" was not an array, input: "+_e);xt.apply(xe,_e[We])}return xe},he=(_e,xe)=>St(En(_e,xe)),Q=()=>{const _e=[],xe=[],We={};return{addItemToGroup:(re,z)=>{We[re]?We[re].push(z):(xe.push(re),We[re]=[z])},addItem:re=>{_e.push(re)},toFormats:()=>he(xe,z=>{const Y=We[z];return Y.length===0?[]:[{title:z,items:Y}]}).concat(_e)}},it=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,Me=_e=>{const xe=Nn.cacheSuffix;return en(_e)&&(_e=_e.replace("?"+xe,"").replace("&"+xe,"")),_e},De=(_e,xe)=>{const We=yt(_e);if(We){const ke=K(_e),ae=ke?_e.documentBaseURI.toAbsolute(ke):mn.baseURL+"/skins/ui/"+We,se=mn.baseURL+"/skins/content/";return xe===ae+"/content"+(_e.inline?".inline":"")+".min.css"||xe.indexOf(se)!==-1}return!1},Ft=_e=>en(_e)?xe=>xe.indexOf(_e)!==-1:_e instanceof RegExp?xe=>_e.test(xe):_e,_=_e=>_e.styleSheet,ge=_e=>_e.selectorText,Ue=(_e,xe,We)=>{const ke=[],ae={},se=(re,z)=>{let Y=re.href,H;if(Y=Me(Y),!(!Y||We&&!We(Y,z)||De(_e,Y))){Ot.each(re.imports,Z=>{se(Z,!0)});try{H=re.cssRules||re.rules}catch{}Ot.each(H,Z=>{_(Z)?se(Z.styleSheet,!0):ge(Z)&&Ot.each(Z.selectorText.split(","),Be=>{ke.push(Ot.trim(Be))})})}};Ot.each(_e.contentCSS,re=>{ae[re]=!0}),We||(We=(re,z)=>z||ae[re]);try{Ot.each(xe.styleSheets,re=>{se(re)})}catch{}return ke},Ie=(_e,xe)=>{let We={};const ke=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(xe);if(!ke)return;const ae=ke[1],se=ke[2].substr(1).split(".").join(" "),re=Ot.makeMap("a,img");return ke[1]?(We={title:xe},_e.schema.getTextBlockElements()[ae]?We.block=ae:_e.schema.getBlockElements()[ae]||re[ae.toLowerCase()]?We.selector=ae:We.inline=ae):ke[2]&&(We={inline:"span",title:xe.substr(1),classes:se}),cn(_e)?We.classes=se:We.attributes={class:se},We},Ae=(_e,xe)=>Ot.grep(_e,We=>!We.filter||We.filter(xe)),tn=_e=>Ot.map(_e,xe=>Ot.extend({},xe,{original:xe,selectors:{},filter:Ft(xe.filter)})),dn=(_e,xe)=>xe===null||Ze(_e),ze=(_e,xe,We,ke)=>!(dn(_e,We)?xe in ke:xe in We.selectors),jt=(_e,xe,We,ke)=>{dn(_e,We)?ke[xe]=!0:We.selectors[xe]=!0},Nt=(_e,xe,We,ke)=>{let ae;const se=et(_e);return ke&&ke.selector_converter?ae=ke.selector_converter:se?ae=se:ae=()=>Ie(_e,We),ae.call(xe,We,ke)},Ve=_e=>{_e.on("init",()=>{const xe=Q(),We={},ke=Ft(Ee(_e)),ae=tn(te(_e)),se=(z,Y)=>{if(ze(_e,z,Y,We)){jt(_e,z,Y,We);const H=Nt(_e,_e.plugins.importcss,z,Y);if(H){const Z=H.name||rt.DOM.uniqueId();return _e.formatter.register(Z,H),{title:H.title,format:Z}}}return null};Ot.each(Ue(_e,_e.getDoc(),Ft(Ht(_e))),z=>{if(!it.test(z)&&(!ke||ke(z))){const Y=Ae(ae,z);if(Y.length>0)Ot.each(Y,H=>{const Z=se(z,H);Z&&xe.addItemToGroup(H.title,Z)});else{const H=se(z,null);H&&xe.addItem(H)}}});const re=xe.toFormats();_e.dispatch("addStyleModifications",{items:re,replace:!Je(_e)})})},R=_e=>({convertSelectorToFormat:We=>Ie(_e,We)});var qn=()=>{_t.add("importcss",_e=>(Bt(_e),Ve(_e),R(_e)))};qn()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(ge,Ue,Ie)=>{var Ae;return Ie(ge,Ue.prototype)?!0:((Ae=ge.constructor)===null||Ae===void 0?void 0:Ae.name)===Ue.name},gt=ge=>{const Ue=typeof ge;return ge===null?"null":Ue==="object"&&Array.isArray(ge)?"array":Ue==="object"&&It(ge,String,(Ie,Ae)=>Ae.isPrototypeOf(Ie))?"string":Ue},Ut=ge=>Ue=>gt(Ue)===ge,$t=ge=>Ue=>ge===Ue,en=Ut("string"),Gt=$t(void 0);var Tt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Et=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),rt=tinymce.util.Tools.resolve("tinymce.util.Tools");const mn=ge=>ge.dispatch("RestoreDraft"),Nn=ge=>ge.dispatch("StoreDraft"),Ot=ge=>ge.dispatch("RemoveDraft"),ct=ge=>{const Ue={s:1e3,m:6e4},Ie=/^(\d+)([ms]?)$/.exec(ge);return(Ie&&Ie[2]?Ue[Ie[2]]:1)*parseInt(ge,10)},Bt=ge=>Ue=>Ue.options.get(ge),cn=ge=>{const Ue=ge.options.register,Ie=Ae=>{const tn=en(Ae);return tn?{value:ct(Ae),valid:tn}:{valid:!1,message:"Must be a string."}};Ue("autosave_ask_before_unload",{processor:"boolean",default:!0}),Ue("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),Ue("autosave_restore_when_empty",{processor:"boolean",default:!1}),Ue("autosave_interval",{processor:Ie,default:"30s"}),Ue("autosave_retention",{processor:Ie,default:"20m"})},Ze=Bt("autosave_ask_before_unload"),et=Bt("autosave_restore_when_empty"),Ee=Bt("autosave_interval"),te=Bt("autosave_retention"),Je=ge=>{const Ue=document.location;return ge.options.get("autosave_prefix").replace(/{path}/g,Ue.pathname).replace(/{query}/g,Ue.search).replace(/{hash}/g,Ue.hash).replace(/{id}/g,ge.id)},Ht=(ge,Ue)=>{if(Gt(Ue))return ge.dom.isEmpty(ge.getBody());{const Ie=rt.trim(Ue);if(Ie==="")return!0;{const Ae=new DOMParser().parseFromString(Ie,"text/html");return ge.dom.isEmpty(Ae)}}},yt=ge=>{var Ue;const Ie=parseInt((Ue=Et.getItem(Je(ge)+"time"))!==null&&Ue!==void 0?Ue:"0",10)||0;return new Date().getTime()-Ie>te(ge)?(K(ge,!1),!1):!0},K=(ge,Ue)=>{const Ie=Je(ge);Et.removeItem(Ie+"draft"),Et.removeItem(Ie+"time"),Ue!==!1&&Ot(ge)},xt=ge=>{const Ue=Je(ge);!Ht(ge)&&ge.isDirty()&&(Et.setItem(Ue+"draft",ge.getContent({format:"raw",no_events:!0})),Et.setItem(Ue+"time",new Date().getTime().toString()),Nn(ge))},En=ge=>{var Ue;const Ie=Je(ge);yt(ge)&&(ge.setContent((Ue=Et.getItem(Ie+"draft"))!==null&&Ue!==void 0?Ue:"",{format:"raw"}),mn(ge))},St=ge=>{const Ue=Ee(ge);Tt.setEditorInterval(ge,()=>{xt(ge)},Ue)},he=ge=>{ge.undoManager.transact(()=>{En(ge),K(ge)}),ge.focus()},Q=ge=>({hasDraft:()=>yt(ge),storeDraft:()=>xt(ge),restoreDraft:()=>En(ge),removeDraft:Ue=>K(ge,Ue),isEmpty:Ue=>Ht(ge,Ue)});var it=tinymce.util.Tools.resolve("tinymce.EditorManager");const Me=ge=>{ge.editorManager.on("BeforeUnload",Ue=>{let Ie;rt.each(it.get(),Ae=>{Ae.plugins.autosave&&Ae.plugins.autosave.storeDraft(),!Ie&&Ae.isDirty()&&Ze(Ae)&&(Ie=Ae.translate("You have unsaved changes are you sure you want to navigate away?"))}),Ie&&(Ue.preventDefault(),Ue.returnValue=Ie)})},De=ge=>Ue=>{Ue.setEnabled(yt(ge));const Ie=()=>Ue.setEnabled(yt(ge));return ge.on("StoreDraft RestoreDraft RemoveDraft",Ie),()=>ge.off("StoreDraft RestoreDraft RemoveDraft",Ie)},Ft=ge=>{St(ge);const Ue=()=>{he(ge)};ge.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:Ue,onSetup:De(ge)}),ge.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:Ue,onSetup:De(ge)})};var _=()=>{_t.add("autosave",ge=>(cn(ge),Me(ge),Ft(ge),ge.on("init",()=>{et(ge)&&ge.dom.isEmpty(ge.getBody())&&En(ge)}),Q(ge)))};_()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=Ht=>yt=>yt.options.get(Ht),gt=Ht=>{const yt=Ht.options.register;yt("insertdatetime_dateformat",{processor:"string",default:Ht.translate("%Y-%m-%d")}),yt("insertdatetime_timeformat",{processor:"string",default:Ht.translate("%H:%M:%S")}),yt("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),yt("insertdatetime_element",{processor:"boolean",default:!1})},Ut=It("insertdatetime_dateformat"),$t=It("insertdatetime_timeformat"),en=It("insertdatetime_formats"),Gt=It("insertdatetime_element"),Tt=Ht=>{const yt=en(Ht);return yt.length>0?yt[0]:$t(Ht)},Et="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),rt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),mn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Nn="January February March April May June July August September October November December".split(" "),Ot=(Ht,yt)=>{if(Ht=""+Ht,Ht.length<yt)for(let K=0;K<yt-Ht.length;K++)Ht="0"+Ht;return Ht},ct=(Ht,yt,K=new Date)=>(yt=yt.replace("%D","%m/%d/%Y"),yt=yt.replace("%r","%I:%M:%S %p"),yt=yt.replace("%Y",""+K.getFullYear()),yt=yt.replace("%y",""+K.getYear()),yt=yt.replace("%m",Ot(K.getMonth()+1,2)),yt=yt.replace("%d",Ot(K.getDate(),2)),yt=yt.replace("%H",""+Ot(K.getHours(),2)),yt=yt.replace("%M",""+Ot(K.getMinutes(),2)),yt=yt.replace("%S",""+Ot(K.getSeconds(),2)),yt=yt.replace("%I",""+((K.getHours()+11)%12+1)),yt=yt.replace("%p",K.getHours()<12?"AM":"PM"),yt=yt.replace("%B",""+Ht.translate(Nn[K.getMonth()])),yt=yt.replace("%b",""+Ht.translate(mn[K.getMonth()])),yt=yt.replace("%A",""+Ht.translate(rt[K.getDay()])),yt=yt.replace("%a",""+Ht.translate(Et[K.getDay()])),yt=yt.replace("%%","%"),yt),Bt=(Ht,yt,K,xt)=>{const En=Ht.dom.create("time",{datetime:K},xt);Ht.dom.replace(En,yt),Ht.selection.select(En,!0),Ht.selection.collapse(!1)},cn=(Ht,yt)=>{if(Gt(Ht)){const K=ct(Ht,yt);let xt;/%[HMSIp]/.test(yt)?xt=ct(Ht,"%Y-%m-%dT%H:%M"):xt=ct(Ht,"%Y-%m-%d");const En=Ht.dom.getParent(Ht.selection.getStart(),"time");En?Bt(Ht,En,xt,K):Ht.insertContent('<time datetime="'+xt+'">'+K+"</time>")}else Ht.insertContent(ct(Ht,yt))},Ze=Ht=>{Ht.addCommand("mceInsertDate",(yt,K)=>{cn(Ht,K??Ut(Ht))}),Ht.addCommand("mceInsertTime",(yt,K)=>{cn(Ht,K??$t(Ht))})},et=Ht=>{let yt=Ht;return{get:()=>yt,set:En=>{yt=En}}};var Ee=tinymce.util.Tools.resolve("tinymce.util.Tools");const te=Ht=>{const yt=en(Ht),K=et(Tt(Ht)),xt=St=>Ht.execCommand("mceInsertDate",!1,St);Ht.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:St=>St===K.get(),fetch:St=>{St(Ee.map(yt,he=>({type:"choiceitem",text:ct(Ht,he),value:he})))},onAction:St=>{xt(K.get())},onItemAction:(St,he)=>{K.set(he),xt(he)}});const En=St=>()=>{K.set(St),xt(St)};Ht.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Ee.map(yt,St=>({type:"menuitem",text:ct(Ht,St),onAction:En(St)}))})};var Je=()=>{_t.add("insertdatetime",Ht=>{gt(Ht),Ze(Ht),te(Ht)})};Je()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(X,Ce,Fe)=>{var Ct;return Fe(X,Ce.prototype)?!0:((Ct=X.constructor)===null||Ct===void 0?void 0:Ct.name)===Ce.name},gt=X=>{const Ce=typeof X;return X===null?"null":Ce==="object"&&Array.isArray(X)?"array":Ce==="object"&&It(X,String,(Fe,Ct)=>Ct.isPrototypeOf(Fe))?"string":Ce},Ut=X=>Ce=>gt(Ce)===X,$t=X=>Ce=>typeof Ce===X,en=X=>Ce=>X===Ce,Gt=Ut("string"),Tt=Ut("object"),Et=Ut("array"),rt=en(null),mn=$t("boolean"),Nn=X=>X==null,Ot=X=>!Nn(X),ct=$t("function"),Bt=(X,Ce)=>{if(Et(X)){for(let Fe=0,Ct=X.length;Fe<Ct;++Fe)if(!Ce(X[Fe]))return!1;return!0}return!1},cn=()=>{},Ze=X=>()=>X,et=(X,Ce)=>X===Ce;class Ee{constructor(Ce,Fe){this.tag=Ce,this.value=Fe}static some(Ce){return new Ee(!0,Ce)}static none(){return Ee.singletonNone}fold(Ce,Fe){return this.tag?Fe(this.value):Ce()}isSome(){return this.tag}isNone(){return!this.tag}map(Ce){return this.tag?Ee.some(Ce(this.value)):Ee.none()}bind(Ce){return this.tag?Ce(this.value):Ee.none()}exists(Ce){return this.tag&&Ce(this.value)}forall(Ce){return!this.tag||Ce(this.value)}filter(Ce){return!this.tag||Ce(this.value)?this:Ee.none()}getOr(Ce){return this.tag?this.value:Ce}or(Ce){return this.tag?this:Ce}getOrThunk(Ce){return this.tag?this.value:Ce()}orThunk(Ce){return this.tag?this:Ce()}getOrDie(Ce){if(this.tag)return this.value;throw new Error(Ce??"Called getOrDie on None")}static from(Ce){return Ot(Ce)?Ee.some(Ce):Ee.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ce){this.tag&&Ce(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ee.singletonNone=new Ee(!1);const te=Array.prototype.indexOf,Je=Array.prototype.push,Ht=(X,Ce)=>te.call(X,Ce),yt=(X,Ce)=>Ht(X,Ce)>-1,K=(X,Ce)=>{const Fe=X.length,Ct=new Array(Fe);for(let Xt=0;Xt<Fe;Xt++){const mo=X[Xt];Ct[Xt]=Ce(mo,Xt)}return Ct},xt=(X,Ce)=>{for(let Fe=0,Ct=X.length;Fe<Ct;Fe++){const Xt=X[Fe];Ce(Xt,Fe)}},En=(X,Ce,Fe)=>(xt(X,(Ct,Xt)=>{Fe=Ce(Fe,Ct,Xt)}),Fe),St=X=>{const Ce=[];for(let Fe=0,Ct=X.length;Fe<Ct;++Fe){if(!Et(X[Fe]))throw new Error("Arr.flatten item "+Fe+" was not an array, input: "+X);Je.apply(Ce,X[Fe])}return Ce},he=(X,Ce)=>St(K(X,Ce)),Q=(X,Ce)=>{for(let Fe=0;Fe<X.length;Fe++){const Ct=Ce(X[Fe],Fe);if(Ct.isSome())return Ct}return Ee.none()},it=(X,Ce,Fe=et)=>X.exists(Ct=>Fe(Ct,Ce)),Me=X=>{const Ce=[],Fe=Ct=>{Ce.push(Ct)};for(let Ct=0;Ct<X.length;Ct++)X[Ct].each(Fe);return Ce},De=(X,Ce)=>X?Ee.some(Ce):Ee.none(),Ft=X=>Ce=>Ce.options.get(X),_=X=>{const Ce=X.options.register;Ce("link_assume_external_targets",{processor:Fe=>{const Ct=Gt(Fe)||mn(Fe);return Ct?Fe===!0?{value:1,valid:Ct}:Fe==="http"||Fe==="https"?{value:Fe,valid:Ct}:{value:0,valid:Ct}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Ce("link_context_toolbar",{processor:"boolean",default:!1}),Ce("link_list",{processor:Fe=>Gt(Fe)||ct(Fe)||Bt(Fe,Tt)}),Ce("link_default_target",{processor:"string"}),Ce("link_default_protocol",{processor:"string",default:"https"}),Ce("link_target_list",{processor:Fe=>mn(Fe)||Bt(Fe,Tt),default:!0}),Ce("link_rel_list",{processor:"object[]",default:[]}),Ce("link_class_list",{processor:"object[]",default:[]}),Ce("link_title",{processor:"boolean",default:!0}),Ce("allow_unsafe_link_target",{processor:"boolean",default:!1}),Ce("link_quicklink",{processor:"boolean",default:!1})},ge=Ft("link_assume_external_targets"),Ue=Ft("link_context_toolbar"),Ie=Ft("link_list"),Ae=Ft("link_default_target"),tn=Ft("link_default_protocol"),dn=Ft("link_target_list"),ze=Ft("link_rel_list"),jt=Ft("link_class_list"),Nt=Ft("link_title"),Ve=Ft("allow_unsafe_link_target"),R=Ft("link_quicklink");var qn=tinymce.util.Tools.resolve("tinymce.util.Tools");const _e=X=>Gt(X.value)?X.value:"",xe=X=>Gt(X.text)?X.text:Gt(X.title)?X.title:"",We=(X,Ce)=>{const Fe=[];return qn.each(X,Ct=>{const Xt=xe(Ct);if(Ct.menu!==void 0){const mo=We(Ct.menu,Ce);Fe.push({text:Xt,items:mo})}else{const mo=Ce(Ct);Fe.push({text:Xt,value:mo})}}),Fe},ke=(X=_e)=>Ce=>Ee.from(Ce).map(Fe=>We(Fe,X)),re={sanitize:X=>ke(_e)(X),sanitizeWith:ke,createUi:(X,Ce)=>Fe=>({name:X,type:"listbox",label:Ce,items:Fe}),getValue:_e},z=Object.keys,Y=Object.hasOwnProperty,H=(X,Ce)=>{const Fe=z(X);for(let Ct=0,Xt=Fe.length;Ct<Xt;Ct++){const mo=Fe[Ct],Ko=X[mo];Ce(Ko,mo)}},Z=X=>(Ce,Fe)=>{X[Fe]=Ce},Be=(X,Ce,Fe,Ct)=>{H(X,(Xt,mo)=>{(Ce(Xt,mo)?Fe:Ct)(Xt,mo)})},Pe=(X,Ce)=>{const Fe={};return Be(X,Ce,Z(Fe),cn),Fe},Yt=(X,Ce)=>Y.call(X,Ce),rn=(X,Ce)=>Yt(X,Ce)&&X[Ce]!==void 0&&X[Ce]!==null;var ro=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),uo=tinymce.util.Tools.resolve("tinymce.util.URI");const Qn=X=>Ot(X)&&X.nodeName.toLowerCase()==="a",kn=X=>Qn(X)&&!!Ye(X),ao=(X,Ce)=>{if(X.collapsed)return[];{const Fe=X.cloneContents(),Ct=Fe.firstChild,Xt=new ro(Ct,Fe),mo=[];let Ko=Ct;do Ce(Ko)&&mo.push(Ko);while(Ko=Xt.next());return mo}},Re=X=>/^\w+:/i.test(X),Ye=X=>{var Ce,Fe;return(Fe=(Ce=X.getAttribute("data-mce-href"))!==null&&Ce!==void 0?Ce:X.getAttribute("href"))!==null&&Fe!==void 0?Fe:""},Lt=(X,Ce)=>{const Fe=["noopener"],Ct=X?X.split(/\s+/):[],Xt=Ls=>qn.trim(Ls.sort().join(" ")),mo=Ls=>(Ls=Ko(Ls),Ls.length>0?Ls.concat(Fe):Fe),Ko=Ls=>Ls.filter(Nr=>qn.inArray(Fe,Nr)===-1),Er=Ce?mo(Ct):Ko(Ct);return Er.length>0?Xt(Er):""},fn=X=>X.replace(/\uFEFF/g,""),On=(X,Ce)=>(Ce=Ce||X.selection.getNode(),un(Ce)?Ee.from(X.dom.select("a[href]",Ce)[0]):Ee.from(X.dom.getParent(Ce,"a[href]"))),Tn=(X,Ce)=>On(X,Ce).isSome(),Ro=(X,Ce)=>{const Fe=Ce.fold(()=>X.getContent({format:"text"}),Ct=>Ct.innerText||Ct.textContent||"");return fn(Fe)},ks=X=>qn.grep(X,kn).length>0,qe=X=>ao(X,kn).length>0,Le=X=>{const Ce=X.schema.getTextInlineElements(),Fe=mo=>mo.nodeType===1&&!Qn(mo)&&!Yt(Ce,mo.nodeName.toLowerCase());if(On(X).exists(mo=>mo.hasAttribute("data-mce-block")))return!1;const Xt=X.selection.getRng();return Xt.collapsed?!0:ao(Xt,Fe).length===0},un=X=>Ot(X)&&X.nodeName==="FIGURE"&&/\bimage\b/i.test(X.className),ln=X=>En(["title","rel","class","target"],(Fe,Ct)=>(X[Ct].each(Xt=>{Fe[Ct]=Xt.length>0?Xt:null}),Fe),{href:X.href}),Jt=(X,Ce)=>(Ce==="http"||Ce==="https")&&!Re(X)?Ce+"://"+X:X,Kn=(X,Ce)=>{const Fe={...Ce};if(ze(X).length===0&&!Ve(X)){const Ct=Lt(Fe.rel,Fe.target==="_blank");Fe.rel=Ct||null}return Ee.from(Fe.target).isNone()&&dn(X)===!1&&(Fe.target=Ae(X)),Fe.href=Jt(Fe.href,ge(X)),Fe},Ts=(X,Ce,Fe,Ct)=>{Fe.each(Xt=>{Yt(Ce,"innerText")?Ce.innerText=Xt:Ce.textContent=Xt}),X.dom.setAttribs(Ce,Ct),X.selection.select(Ce)},Tr=(X,Ce,Fe,Ct)=>{const Xt=X.dom;un(Ce)?Is(Xt,Ce,Ct):Fe.fold(()=>{X.execCommand("mceInsertLink",!1,Ct)},mo=>{X.insertContent(Xt.createHTML("a",Ct,Xt.encode(mo)))})},ma=(X,Ce,Fe)=>{const Ct=X.selection.getNode(),Xt=On(X,Ct),mo=Kn(X,ln(Fe));X.undoManager.transact(()=>{Fe.href===Ce.href&&Ce.attach(),Xt.fold(()=>{Tr(X,Ct,Fe.text,mo)},Ko=>{X.focus(),Ts(X,Ko,Fe.text,mo)})})},bs=X=>{const Ce=X.dom,Fe=X.selection,Ct=Fe.getBookmark(),Xt=Fe.getRng().cloneRange(),mo=Ce.getParent(Xt.startContainer,"a[href]",X.getBody()),Ko=Ce.getParent(Xt.endContainer,"a[href]",X.getBody());mo&&Xt.setStartBefore(mo),Ko&&Xt.setEndAfter(Ko),Fe.setRng(Xt),X.execCommand("unlink"),Fe.moveToBookmark(Ct)},vc=X=>{X.undoManager.transact(()=>{const Ce=X.selection.getNode();un(Ce)?Zr(X,Ce):bs(X),X.focus()})},ys=X=>{const{class:Ce,href:Fe,rel:Ct,target:Xt,text:mo,title:Ko}=X;return Pe({class:Ce.getOrNull(),href:Fe,rel:Ct.getOrNull(),target:Xt.getOrNull(),text:mo.getOrNull(),title:Ko.getOrNull()},(Er,Ls)=>rt(Er)===!1)},cs=(X,Ce)=>{const Fe=X.options.get,Ct={allow_html_data_urls:Fe("allow_html_data_urls"),allow_script_urls:Fe("allow_script_urls"),allow_svg_data_urls:Fe("allow_svg_data_urls")},Xt=Ce.href;return{...Ce,href:uo.isDomSafe(Xt,"a",Ct)?Xt:""}},go=(X,Ce,Fe)=>{const Ct=cs(X,Fe);X.hasPlugin("rtc",!0)?X.execCommand("createlink",!1,ys(Ct)):ma(X,Ce,Ct)},mr=X=>{X.hasPlugin("rtc",!0)?X.execCommand("unlink"):vc(X)},Zr=(X,Ce)=>{var Fe;const Ct=X.dom.select("img",Ce)[0];if(Ct){const Xt=X.dom.getParents(Ct,"a[href]",Ce)[0];Xt&&((Fe=Xt.parentNode)===null||Fe===void 0||Fe.insertBefore(Ct,Xt),X.dom.remove(Xt))}},Is=(X,Ce,Fe)=>{var Ct;const Xt=X.select("img",Ce)[0];if(Xt){const mo=X.create("a",Fe);(Ct=Xt.parentNode)===null||Ct===void 0||Ct.insertBefore(mo,Xt),mo.appendChild(Xt)}},fa=X=>rn(X,"items"),jr=(X,Ce)=>Q(Ce,Fe=>fa(Fe)?jr(X,Fe.items):De(Fe.value===X,Fe)),rc=(X,Ce,Fe,Ct)=>{const Xt=Ct[Ce],mo=X.length>0;return Xt!==void 0?jr(Xt,Fe).map(Ko=>({url:{value:Ko.value,meta:{text:mo?X:Ko.text,attach:cn}},text:mo?X:Ko.text})):Ee.none()},Xs=(X,Ce)=>Ce==="link"?X.link:Ce==="anchor"?X.anchor:Ee.none(),ye={init:(X,Ce)=>{const Fe={text:X.text,title:X.title},Ct=Ls=>{var Nr;return De(Fe.title.length<=0,Ee.from((Nr=Ls.meta)===null||Nr===void 0?void 0:Nr.title).getOr(""))},Xt=Ls=>{var Nr;return De(Fe.text.length<=0,Ee.from((Nr=Ls.meta)===null||Nr===void 0?void 0:Nr.text).getOr(Ls.value))},mo=Ls=>{const Nr=Xt(Ls.url),_r=Ct(Ls.url);return Nr.isSome()||_r.isSome()?Ee.some({...Nr.map($r=>({text:$r})).getOr({}),..._r.map($r=>({title:$r})).getOr({})}):Ee.none()},Ko=(Ls,Nr)=>{const _r=Xs(Ce,Nr).getOr([]);return rc(Fe.text,Nr,_r,Ls)};return{onChange:(Ls,Nr)=>{const _r=Nr.name;return _r==="url"?mo(Ls()):yt(["anchor","link"],_r)?Ko(Ls(),_r):((_r==="text"||_r==="title")&&(Fe[_r]=Ls()[_r]),Ee.none())}}},getDelta:rc};var q=tinymce.util.Tools.resolve("tinymce.util.Delay");const lt=(X,Ce,Fe)=>{const Ct=X.selection.getRng();q.setEditorTimeout(X,()=>{X.windowManager.confirm(Ce,Xt=>{X.selection.setRng(Ct),Fe(Xt)})})},wt=X=>{const Ce=X.href;return Ce.indexOf("@")>0&&Ce.indexOf("/")===-1&&Ce.indexOf("mailto:")===-1?Ee.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Ct=>({...Ct,href:"mailto:"+Ce})}):Ee.none()},Zn=(X,Ce)=>Fe=>{const Ct=Fe.href;return X===1&&!Re(Ct)||X===0&&/^\s*www(\.|\d\.)/i.test(Ct)?Ee.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Ce}:// prefix?`,preprocess:mo=>({...mo,href:Ce+"://"+Ct})}):Ee.none()},In={preprocess:(X,Ce)=>Q([wt,Zn(ge(X),tn(X))],Fe=>Fe(Ce)).fold(()=>Promise.resolve(Ce),Fe=>new Promise(Ct=>{lt(X,Fe.message,Xt=>{Ct(Xt?Fe.preprocess(Ce):Ce)})}))},ts={getAnchors:X=>{const Ce=X.dom.select("a:not([href])"),Fe=he(Ce,Ct=>{const Xt=Ct.name||Ct.id;return Xt?[{text:Xt,value:"#"+Xt}]:[]});return Fe.length>0?Ee.some([{text:"None",value:""}].concat(Fe)):Ee.none()}},ar={getClasses:X=>{const Ce=jt(X);return Ce.length>0?re.sanitize(Ce):Ee.none()}},Wt=X=>{try{return Ee.some(JSON.parse(X))}catch{return Ee.none()}},be={getLinks:X=>{const Ce=Ct=>X.convertURL(Ct.value||Ct.url||"","href"),Fe=Ie(X);return new Promise(Ct=>{Gt(Fe)?fetch(Fe).then(Xt=>Xt.ok?Xt.text().then(Wt):Promise.reject()).then(Ct,()=>Ct(Ee.none())):ct(Fe)?Fe(Xt=>Ct(Ee.some(Xt))):Ct(Ee.from(Fe))}).then(Ct=>Ct.bind(re.sanitizeWith(Ce)).map(Xt=>Xt.length>0?[{text:"None",value:""}].concat(Xt):Xt))}},an={getRels:(X,Ce)=>{const Fe=ze(X);if(Fe.length>0){const Ct=it(Ce,"_blank"),Xt=Ve(X)===!1,mo=Er=>Lt(re.getValue(Er),Ct);return(Xt?re.sanitizeWith(mo):re.sanitize)(Fe)}return Ee.none()}},hn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],yn={getTargets:X=>{const Ce=dn(X);return Et(Ce)?re.sanitize(Ce).orThunk(()=>Ee.some(hn)):Ce===!1?Ee.none():Ee.some(hn)}},Hn=(X,Ce,Fe)=>{const Ct=X.getAttrib(Ce,Fe);return Ct!==null&&Ct.length>0?Ee.some(Ct):Ee.none()},no=(X,Ce)=>{const Fe=X.dom,Xt=Le(X)?Ee.some(Ro(X.selection,Ce)):Ee.none(),mo=Ce.bind(_r=>Ee.from(Fe.getAttrib(_r,"href"))),Ko=Ce.bind(_r=>Ee.from(Fe.getAttrib(_r,"target"))),Er=Ce.bind(_r=>Hn(Fe,_r,"rel")),Ls=Ce.bind(_r=>Hn(Fe,_r,"class")),Nr=Ce.bind(_r=>Hn(Fe,_r,"title"));return{url:mo,text:Xt,title:Nr,target:Ko,rel:Er,linkClass:Ls}},Os={collect:(X,Ce)=>be.getLinks(X).then(Fe=>{const Ct=no(X,Ce);return{anchor:Ct,catalogs:{targets:yn.getTargets(X),rels:an.getRels(X,Ct.target),classes:ar.getClasses(X),anchor:ts.getAnchors(X),link:Fe},optNode:Ce,flags:{titleEnabled:Nt(X)}}})},fr=(X,Ce)=>Fe=>{const Ct=Fe.getData();if(!Ct.url.value){mr(X),Fe.close();return}const Xt=Er=>Ee.from(Ct[Er]).filter(Ls=>!it(Ce.anchor[Er],Ls)),mo={href:Ct.url.value,text:Xt("text"),target:Xt("target"),rel:Xt("rel"),class:Xt("linkClass"),title:Xt("title")},Ko={href:Ct.url.value,attach:Ct.url.meta!==void 0&&Ct.url.meta.attach?Ct.url.meta.attach:cn};In.preprocess(X,mo).then(Er=>{go(X,Ko,Er)}),Fe.close()},qo=X=>{const Ce=On(X);return Os.collect(X,Ce)},Kc=(X,Ce)=>{const Fe=X.anchor,Ct=Fe.url.getOr("");return{url:{value:Ct,meta:{original:{value:Ct}}},text:Fe.text.getOr(""),title:Fe.title.getOr(""),anchor:Ct,link:Ct,rel:Fe.rel.getOr(""),target:Fe.target.or(Ce).getOr(""),linkClass:Fe.linkClass.getOr("")}},ls=(X,Ce,Fe)=>{const Ct=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Xt=X.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),mo=X.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ko=Ee.from(Ae(Fe)),Er=Kc(X,Ko),Ls=X.catalogs,Nr=ye.init(Er,Ls);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:St([Ct,Xt,mo,Me([Ls.anchor.map(re.createUi("anchor","Anchors")),Ls.rels.map(re.createUi("rel","Rel")),Ls.targets.map(re.createUi("target","Open link in...")),Ls.link.map(re.createUi("link","Link list")),Ls.classes.map(re.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Er,onChange:($r,{name:Ia})=>{Nr.onChange($r.getData,{name:Ia}).each(Gr=>{$r.setData(Gr)})},onSubmit:Ce}},Cs=X=>{qo(X).then(Fe=>{const Ct=fr(X,Fe);return ls(Fe,Ct,X)}).then(Fe=>{X.windowManager.open(Fe)})},xs=X=>{X.addCommand("mceLink",(Ce,Fe)=>{(Fe==null?void 0:Fe.dialog)===!0||!R(X)?Cs(X):X.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Fr=tinymce.util.Tools.resolve("tinymce.util.VK");const Mr=(X,Ce)=>{document.body.appendChild(X),X.dispatchEvent(Ce),document.body.removeChild(X)},Bc=X=>{const Ce=document.createElement("a");Ce.target="_blank",Ce.href=X,Ce.rel="noreferrer noopener";const Fe=document.createEvent("MouseEvents");Fe.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Mr(Ce,Fe)},Fa=(X,Ce)=>X.dom.getParent(Ce,"a[href]"),Yc=X=>Fa(X,X.selection.getStart()),Ti=X=>X.altKey===!0&&X.shiftKey===!1&&X.ctrlKey===!1&&X.metaKey===!1,Xc=(X,Ce)=>{if(Ce){const Fe=Ye(Ce);if(/^#/.test(Fe)){const Ct=X.dom.select(Fe);Ct.length&&X.selection.scrollIntoView(Ct[0],!0)}else Bc(Ce.href)}},Li=X=>()=>{X.execCommand("mceLink",!1,{dialog:!0})},zs=X=>()=>{Xc(X,Yc(X))},mi=X=>{X.on("click",Ce=>{const Fe=Fa(X,Ce.target);Fe&&Fr.metaKeyPressed(Ce)&&(Ce.preventDefault(),Xc(X,Fe))}),X.on("keydown",Ce=>{if(!Ce.isDefaultPrevented()&&Ce.keyCode===13&&Ti(Ce)){const Fe=Yc(X);Fe&&(Ce.preventDefault(),Xc(X,Fe))}})},ga=(X,Ce)=>(X.on("NodeChange",Ce),()=>X.off("NodeChange",Ce)),ac=X=>Ce=>{const Fe=()=>Ce.setActive(!X.mode.isReadOnly()&&Tn(X,X.selection.getNode()));return Fe(),ga(X,Fe)},fi=X=>Ce=>{const Fe=()=>Ce.setEnabled(Tn(X,X.selection.getNode()));return Fe(),ga(X,Fe)},Pc=X=>Ce=>{const Fe=Xt=>ks(Xt)||qe(X.selection.getRng()),Ct=X.dom.getParents(X.selection.getStart());return Ce.setEnabled(Fe(Ct)),ga(X,Xt=>Ce.setEnabled(Fe(Xt.parents)))},sa=X=>{X.addShortcut("Meta+K","",()=>{X.execCommand("mceLink")})},Ei=X=>{X.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Li(X),onSetup:ac(X)}),X.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:zs(X),onSetup:fi(X)}),X.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>mr(X),onSetup:Pc(X)})},yc=X=>{X.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:zs(X),onSetup:fi(X)}),X.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Li(X)}),X.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>mr(X),onSetup:Pc(X)})},Hi=X=>{const Ce="link unlink openlink",Fe="link";X.ui.registry.addContextMenu("link",{update:Ct=>ks(X.dom.getParents(Ct,"a"))?Ce:Fe})},Js=X=>{const Ce=Xt=>{Xt.selection.collapse(!1)},Fe=Xt=>{const mo=X.selection.getNode();return Xt.setEnabled(Tn(X,mo)),cn},Ct=Xt=>{const mo=On(X),Ko=Le(X);if(mo.isNone()&&Ko){const Er=Ro(X.selection,mo);return Ee.some(Er.length>0?Er:Xt)}else return Ee.none()};X.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ac(X)},label:"Link",predicate:Xt=>Ue(X)&&Tn(X,Xt),initValue:()=>On(X).fold(Ze(""),Ye),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Xt=>{const mo=X.selection.getNode();return Xt.setActive(Tn(X,mo)),ac(X)(Xt)},onAction:Xt=>{const mo=Xt.getValue(),Ko=Ct(mo);go(X,{href:mo,attach:cn},{href:mo,text:Ko,title:Ee.none(),rel:Ee.none(),target:Ee.none(),class:Ee.none()}),Ce(X),Xt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Fe,onAction:Xt=>{mr(X),Xt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Fe,onAction:Xt=>{zs(X)(),Xt.hide()}}]})};var ha=()=>{_t.add("link",X=>{_(X),Ei(X),yc(X),Hi(X),Js(X),mi(X),xs(X),sa(X)})};ha()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(E,$,j)=>{var Se;return j(E,$.prototype)?!0:((Se=E.constructor)===null||Se===void 0?void 0:Se.name)===$.name},gt=E=>{const $=typeof E;return E===null?"null":$==="object"&&Array.isArray(E)?"array":$==="object"&&It(E,String,(j,Se)=>Se.isPrototypeOf(j))?"string":$},Ut=E=>$=>gt($)===E,$t=E=>$=>typeof $===E,en=Ut("string"),Gt=Ut("object"),Tt=Ut("array"),Et=$t("boolean"),rt=E=>E==null,mn=E=>!rt(E),Nn=$t("function"),Ot=$t("number"),ct=()=>{},Bt=E=>()=>E,cn=(E,$)=>E===$,Ze=E=>$=>!E($),et=Bt(!1);class Ee{constructor($,j){this.tag=$,this.value=j}static some($){return new Ee(!0,$)}static none(){return Ee.singletonNone}fold($,j){return this.tag?j(this.value):$()}isSome(){return this.tag}isNone(){return!this.tag}map($){return this.tag?Ee.some($(this.value)):Ee.none()}bind($){return this.tag?$(this.value):Ee.none()}exists($){return this.tag&&$(this.value)}forall($){return!this.tag||$(this.value)}filter($){return!this.tag||$(this.value)?this:Ee.none()}getOr($){return this.tag?this.value:$}or($){return this.tag?this:$}getOrThunk($){return this.tag?this.value:$()}orThunk($){return this.tag?this:$()}getOrDie($){if(this.tag)return this.value;throw new Error($??"Called getOrDie on None")}static from($){return mn($)?Ee.some($):Ee.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each($){this.tag&&$(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ee.singletonNone=new Ee(!1);const te=Array.prototype.slice,Je=Array.prototype.indexOf,Ht=Array.prototype.push,yt=(E,$)=>Je.call(E,$),K=(E,$)=>yt(E,$)>-1,xt=(E,$)=>{for(let j=0,Se=E.length;j<Se;j++){const He=E[j];if($(He,j))return!0}return!1},En=(E,$)=>{const j=E.length,Se=new Array(j);for(let He=0;He<j;He++){const wn=E[He];Se[He]=$(wn,He)}return Se},St=(E,$)=>{for(let j=0,Se=E.length;j<Se;j++){const He=E[j];$(He,j)}},he=(E,$)=>{const j=[];for(let Se=0,He=E.length;Se<He;Se++){const wn=E[Se];$(wn,Se)&&j.push(wn)}return j},Q=(E,$)=>{if(E.length===0)return[];{let j=$(E[0]);const Se=[];let He=[];for(let wn=0,So=E.length;wn<So;wn++){const ns=E[wn],jo=$(ns);jo!==j&&(Se.push(He),He=[]),j=jo,He.push(ns)}return He.length!==0&&Se.push(He),Se}},it=(E,$,j)=>(St(E,(Se,He)=>{j=$(j,Se,He)}),j),Me=(E,$,j)=>{for(let Se=0,He=E.length;Se<He;Se++){const wn=E[Se];if($(wn,Se))return Ee.some(wn);if(j(wn,Se))break}return Ee.none()},De=(E,$)=>Me(E,$,et),Ft=E=>{const $=[];for(let j=0,Se=E.length;j<Se;++j){if(!Tt(E[j]))throw new Error("Arr.flatten item "+j+" was not an array, input: "+E);Ht.apply($,E[j])}return $},_=(E,$)=>Ft(En(E,$)),ge=E=>{const $=te.call(E,0);return $.reverse(),$},Ue=(E,$)=>$>=0&&$<E.length?Ee.some(E[$]):Ee.none(),Ie=E=>Ue(E,0),Ae=E=>Ue(E,E.length-1),tn=(E,$)=>{const j=[],Se=Nn($)?He=>xt(j,wn=>$(wn,He)):He=>K(j,He);for(let He=0,wn=E.length;He<wn;He++){const So=E[He];Se(So)||j.push(So)}return j},dn=(E,$,j=cn)=>E.exists(Se=>j(Se,$)),ze=(E,$,j=cn)=>jt(E,$,j).getOr(E.isNone()&&$.isNone()),jt=(E,$,j)=>E.isSome()&&$.isSome()?Ee.some(j(E.getOrDie(),$.getOrDie())):Ee.none(),Nt=1,Ve=(E,$)=>{const Se=($||document).createElement("div");if(Se.innerHTML=E,!Se.hasChildNodes()||Se.childNodes.length>1){const He="HTML does not have a single root node";throw console.error(He,E),new Error(He)}return _e(Se.childNodes[0])},R=(E,$)=>{const Se=($||document).createElement(E);return _e(Se)},qn=(E,$)=>{const Se=($||document).createTextNode(E);return _e(Se)},_e=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},We={fromHtml:Ve,fromTag:R,fromText:qn,fromDom:_e,fromPoint:(E,$,j)=>Ee.from(E.dom.elementFromPoint($,j)).map(_e)},ke=(E,$)=>{const j=E.dom;if(j.nodeType!==Nt)return!1;{const Se=j;if(Se.matches!==void 0)return Se.matches($);if(Se.msMatchesSelector!==void 0)return Se.msMatchesSelector($);if(Se.webkitMatchesSelector!==void 0)return Se.webkitMatchesSelector($);if(Se.mozMatchesSelector!==void 0)return Se.mozMatchesSelector($);throw new Error("Browser lacks native selectors")}},ae=(E,$)=>E.dom===$.dom,se=(E,$)=>{const j=E.dom,Se=$.dom;return j===Se?!1:j.contains(Se)},re=ke;var z=(E,$,j,Se,He)=>E(j,Se)?Ee.some(j):Nn(He)&&He(j)?Ee.none():$(j,Se,He);typeof window<"u"||Function("return this;")();const Y=E=>E.dom.nodeName.toLowerCase(),H=E=>E.dom.nodeType,Be=(E=>$=>H($)===E)(Nt),Pe=E=>$=>Be($)&&Y($)===E,Yt=E=>Ee.from(E.dom.parentNode).map(We.fromDom),rn=E=>Ee.from(E.dom.parentElement).map(We.fromDom),ro=E=>Ee.from(E.dom.nextSibling).map(We.fromDom),uo=E=>En(E.dom.childNodes,We.fromDom),Qn=(E,$)=>{const j=E.dom.childNodes;return Ee.from(j[$]).map(We.fromDom)},kn=E=>Qn(E,0),ao=E=>Qn(E,E.dom.childNodes.length-1),Re=(E,$,j)=>{let Se=E.dom;const He=Nn(j)?j:et;for(;Se.parentNode;){Se=Se.parentNode;const wn=We.fromDom(Se);if($(wn))return Ee.some(wn);if(He(wn))break}return Ee.none()},Ye=(E,$,j)=>z((He,wn)=>wn(He),Re,E,$,j),Lt=(E,$)=>{Yt(E).each(Se=>{Se.dom.insertBefore($.dom,E.dom)})},fn=(E,$)=>{ro(E).fold(()=>{Yt(E).each(He=>{On(He,$)})},Se=>{Lt(Se,$)})},On=(E,$)=>{E.dom.appendChild($.dom)},Tn=(E,$)=>{St($,j=>{Lt(E,j)})},Ro=(E,$)=>{St($,j=>{On(E,j)})},ks=E=>{E.dom.textContent="",St(uo(E),$=>{qe($)})},qe=E=>{const $=E.dom;$.parentNode!==null&&$.parentNode.removeChild($)};var Le=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),un=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ln=tinymce.util.Tools.resolve("tinymce.util.VK");const Jt=E=>En(E,We.fromDom),Kn=Object.keys,Ts=(E,$)=>{const j=Kn(E);for(let Se=0,He=j.length;Se<He;Se++){const wn=j[Se],So=E[wn];$(So,wn)}},Tr=E=>($,j)=>{E[j]=$},ma=(E,$,j,Se)=>{Ts(E,(He,wn)=>{($(He,wn)?j:Se)(He,wn)})},bs=(E,$)=>{const j={};return ma(E,$,Tr(j),ct),j},vc=(E,$,j)=>{if(en(j)||Et(j)||Ot(j))E.setAttribute($,j+"");else throw console.error("Invalid call to Attribute.set. Key ",$,":: Value ",j,":: Element ",E),new Error("Attribute value was not simple")},ys=(E,$)=>{const j=E.dom;Ts($,(Se,He)=>{vc(j,He,Se)})},cs=E=>it(E.dom.attributes,($,j)=>($[j.name]=j.value,$),{}),go=(E,$)=>We.fromDom(E.dom.cloneNode($)),mr=E=>go(E,!0),Zr=(E,$)=>{const j=We.fromTag($),Se=cs(E);return ys(j,Se),j},Is=(E,$)=>{const j=Zr(E,$);fn(E,j);const Se=uo(E);return Ro(j,Se),qe(E),j};var fa=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),jr=tinymce.util.Tools.resolve("tinymce.util.Tools");const rc=E=>$=>mn($)&&$.nodeName.toLowerCase()===E,Xs=E=>$=>mn($)&&E.test($.nodeName),Ta=E=>mn(E)&&E.nodeType===3,ye=E=>mn(E)&&E.nodeType===1,q=Xs(/^(OL|UL|DL)$/),lt=Xs(/^(OL|UL)$/),wt=rc("ol"),Zn=Xs(/^(LI|DT|DD)$/),eo=Xs(/^(DT|DD)$/),In=Xs(/^(TH|TD)$/),is=rc("br"),ts=E=>{var $;return(($=E.parentNode)===null||$===void 0?void 0:$.firstChild)===E},ko=(E,$)=>mn($)&&$.nodeName in E.schema.getTextBlockElements(),ar=(E,$)=>mn(E)&&E.nodeName in $,Wt=(E,$)=>is($)?E.isBlock($.nextSibling)&&!is($.previousSibling):!1,fe=(E,$,j)=>{const Se=E.isEmpty($);return j&&E.select("span[data-mce-type=bookmark]",$).length>0?!1:Se},be=(E,$)=>E.isChildOf($,E.getRoot()),Rt=E=>$=>$.options.get(E),an=E=>{const $=E.options.register;$("lists_indent_on_tab",{processor:"boolean",default:!0})},hn=Rt("lists_indent_on_tab"),Pn=Rt("forced_root_block"),yn=Rt("forced_root_block_attrs"),Hn=(E,$)=>{const j=E.dom,Se=E.schema.getBlockElements(),He=j.createFragment(),wn=Pn(E),So=yn(E);let ns,jo,to=!1;for(jo=j.create(wn,So),ar($.firstChild,Se)||He.appendChild(jo);ns=$.firstChild;){const os=ns.nodeName;!to&&(os!=="SPAN"||ns.getAttribute("data-mce-type")!=="bookmark")&&(to=!0),ar(ns,Se)?(He.appendChild(ns),jo=null):(jo||(jo=j.create(wn,So),He.appendChild(jo)),jo.appendChild(ns))}return!to&&jo&&jo.appendChild(j.create("br",{"data-mce-bogus":"1"})),He},no=fa.DOM,Co=(E,$,j)=>{const Se=to=>{const os=to.parentNode;os&&jr.each(He,Ar=>{os.insertBefore(Ar,j.parentNode)}),no.remove(to)},He=no.select('span[data-mce-type="bookmark"]',$),wn=Hn(E,j),So=no.createRng();So.setStartAfter(j),So.setEndAfter($);const ns=So.extractContents();for(let to=ns.firstChild;to;to=to.firstChild)if(to.nodeName==="LI"&&E.dom.isEmpty(to)){no.remove(to);break}E.dom.isEmpty(ns)||no.insertAfter(ns,$),no.insertAfter(wn,$);const jo=j.parentElement;jo&&fe(E.dom,jo)&&Se(jo),no.remove(j),fe(E.dom,$)&&no.remove($)},Os=Pe("dd"),fr=Pe("dt"),qo=(E,$)=>{Os($)?Is($,"dt"):fr($)&&rn($).each(j=>Co(E,j.dom,$.dom))},Kc=E=>{fr(E)&&Is(E,"dd")},ls=(E,$,j)=>{$==="Indent"?St(j,Kc):St(j,Se=>qo(E,Se))},Cs=(E,$)=>{if(Ta(E))return{container:E,offset:$};const j=Le.getNode(E,$);return Ta(j)?{container:j,offset:$>=E.childNodes.length?j.data.length:0}:j.previousSibling&&Ta(j.previousSibling)?{container:j.previousSibling,offset:j.previousSibling.data.length}:j.nextSibling&&Ta(j.nextSibling)?{container:j.nextSibling,offset:0}:{container:E,offset:$}},xs=E=>{const $=E.cloneRange(),j=Cs(E.startContainer,E.startOffset);$.setStart(j.container,j.offset);const Se=Cs(E.endContainer,E.endOffset);return $.setEnd(Se.container,Se.offset),$},Fr=["OL","UL","DL"],Mr=Fr.join(","),Bc=(E,$)=>{const j=$||E.selection.getStart(!0);return E.dom.getParent(j,Mr,ac(E,j))},Fa=(E,$)=>mn(E)&&$.length===1&&$[0]===E,Yc=E=>he(E.querySelectorAll(Mr),q),Ti=E=>{const $=Bc(E),j=E.selection.getSelectedBlocks();return Fa($,j)?Yc($):he(j,Se=>q(Se)&&$!==Se)},Xc=(E,$)=>{const j=jr.map($,Se=>{const He=E.dom.getParent(Se,"li,dd,dt",ac(E,Se));return He||Se});return tn(j)},Li=E=>{const $=E.selection.getSelectedBlocks();return he(Xc(E,$),Zn)},zs=E=>he(Li(E),eo),mi=(E,$)=>{const j=E.dom.getParents($,"TD,TH");return j.length>0?j[0]:E.getBody()},ga=(E,$)=>!q($)&&!Zn($)&&xt(Fr,j=>E.isValidChild($.nodeName,j)),ac=(E,$)=>{const j=E.dom.getParents($,E.dom.isBlock);return De(j,He=>ga(E.schema,He)).getOr(E.getBody())},fi=(E,$)=>{const j=E.dom.getParents($,"ol,ul",ac(E,$));return Ae(j)},Pc=E=>{const $=fi(E,E.selection.getStart()),j=he(E.selection.getSelectedBlocks(),lt);return $.toArray().concat(j)},sa=E=>{const $=Pc(E);return Ei(E,$)},Ei=(E,$)=>{const j=En($,Se=>fi(E,Se).getOr(Se));return tn(j)},yc=E=>/\btox\-/.test(E.className),Hi=(E,$)=>Me(E,q,In).exists(j=>j.nodeName===$&&!yc(j)),Js=(E,$)=>$!==null&&E.dom.getContentEditableParent($)==="false",ha=E=>{const $=Bc(E);return Js(E,$)},X=(E,$)=>{const j=E.dom.getParent($,"ol,ul,dl");return Js(E,j)},Ce=(E,$)=>{const j=E.selection.getNode();return $({parents:E.dom.getParents(j),element:j}),E.on("NodeChange",$),()=>E.off("NodeChange",$)},Fe=(E,$)=>{const Se=($||document).createDocumentFragment();return St(E,He=>{Se.appendChild(He.dom)}),We.fromDom(Se)},Ct=(E,$,j)=>E.dispatch("ListMutation",{action:$,element:j}),mo=(E=>$=>$.replace(E,""))(/^\s+|\s+$/g),Ko=E=>E.length>0,Er=E=>!Ko(E),Ls=E=>E.style!==void 0&&Nn(E.style.getPropertyValue),Nr=(E,$,j)=>{if(!en(j))throw console.error("Invalid call to CSS.set. Property ",$,":: Value ",j,":: Element ",E),new Error("CSS value must be a string: "+j);Ls(E)&&E.style.setProperty($,j)},_r=(E,$,j)=>{const Se=E.dom;Nr(Se,$,j)},$r=(E,$)=>{On(E.item,$.list)},Ia=E=>{for(let $=1;$<E.length;$++)$r(E[$-1],E[$])},Gr=(E,$)=>{jt(Ae(E),Ie($),$r)},Qr=(E,$)=>{const j={list:We.fromTag($,E),item:We.fromTag("li",E)};return On(j.list,j.item),j},Jc=(E,$,j)=>{const Se=[];for(let He=0;He<j;He++)Se.push(Qr(E,$.listType));return Se},Qc=(E,$)=>{for(let j=0;j<E.length-1;j++)_r(E[j].item,"list-style-type","none");Ae(E).each(j=>{ys(j.list,$.listAttributes),ys(j.item,$.itemAttributes),Ro(j.item,$.content)})},To=(E,$)=>{Y(E.list)!==$.listType&&(E.list=Is(E.list,$.listType)),ys(E.list,$.listAttributes)},us=(E,$,j)=>{const Se=We.fromTag("li",E);return ys(Se,$),Ro(Se,j),Se},sr=(E,$)=>{On(E.list,$),E.item=$},B=(E,$,j)=>{const Se=$.slice(0,j.depth);return Ae(Se).each(He=>{const wn=us(E,j.itemAttributes,j.content);sr(He,wn),To(He,j)}),Se},J=(E,$,j)=>{const Se=Jc(E,j,j.depth-$.length);return Ia(Se),Qc(Se,j),Gr($,Se),$.concat(Se)},de=(E,$)=>{const j=it($,(Se,He)=>He.depth>Se.length?J(E,Se,He):B(E,Se,He),[]);return Ie(j).map(Se=>Se.list)},Xe=E=>re(E,"OL,UL"),$n=E=>kn(E).exists(Xe),Mo=E=>ao(E).exists(Xe),zn=E=>E.depth>0,Ir=E=>E.isSelected,gr=E=>{const $=uo(E),j=Mo(E)?$.slice(0,-1):$;return En(j,mr)},Pt=(E,$,j)=>Yt(E).filter(Be).map(Se=>({depth:$,dirty:!1,isSelected:j,content:gr(E),itemAttributes:cs(E),listAttributes:cs(Se),listType:Y(Se)})),ra=(E,$)=>{switch(E){case"Indent":$.depth++;break;case"Outdent":$.depth--;break;case"Flatten":$.depth=0}$.dirty=!0},Qs=(E,$)=>{E.listType=$.listType,E.listAttributes={...$.listAttributes}},Ur=E=>{E.listAttributes=bs(E.listAttributes,($,j)=>j!=="start")},nl=(E,$)=>{const j=E[$].depth,Se=wn=>wn.depth===j&&!wn.dirty,He=wn=>wn.depth<j;return Me(ge(E.slice(0,$)),Se,He).orThunk(()=>Me(E.slice($+1),Se,He))},Po=E=>(St(E,($,j)=>{nl(E,j).fold(()=>{$.dirty&&Ur($)},Se=>Qs($,Se))}),E),ne=E=>{let $=E;return{get:()=>$,set:He=>{$=He}}},me=(E,$,j,Se)=>kn(Se).filter(Xe).fold(()=>{$.each(So=>{ae(So.start,Se)&&j.set(!0)});const He=Pt(Se,E,j.get());$.each(So=>{ae(So.end,Se)&&j.set(!1)});const wn=ao(Se).filter(Xe).map(So=>tt(E,$,j,So)).getOr([]);return He.toArray().concat(wn)},He=>tt(E,$,j,He)),tt=(E,$,j,Se)=>_(uo(Se),He=>{const wn=Xe(He)?tt:me,So=E+1;return wn(So,$,j,He)}),ft=(E,$)=>{const j=ne(!1),Se=0;return En(E,He=>({sourceList:He,entries:tt(Se,$,j,He)}))},Vn=(E,$)=>{const j=Po($);return En(j,Se=>{const He=Fe(Se.content);return We.fromDom(Hn(E,He.dom))})},oo=(E,$)=>{const j=Po($);return de(E.contentDocument,j).toArray()},qs=(E,$)=>_(Q($,zn),j=>Ie(j).exists(zn)?oo(E,j):Vn(E,j)),Yo=(E,$)=>{St(he(E,Ir),j=>ra($,j))},zi=E=>{const $=En(Li(E),We.fromDom);return jt(De($,Ze($n)),De(ge($),Ze($n)),(j,Se)=>({start:j,end:Se}))},Qo=(E,$,j)=>{const Se=ft($,zi(E));St(Se,He=>{Yo(He.entries,j);const wn=qs(E,He.entries);St(wn,So=>{Ct(E,j==="Indent"?"IndentList":"OutdentList",So.dom)}),Tn(He.sourceList,wn),qe(He.sourceList)})},Ds=(E,$)=>{const j=Jt(sa(E)),Se=Jt(zs(E));let He=!1;if(j.length||Se.length){const wn=E.selection.getBookmark();Qo(E,j,$),ls(E,$,Se),E.selection.moveToBookmark(wn),E.selection.setRng(xs(E.selection.getRng())),E.nodeChanged(),He=!0}return He},Ea=(E,$)=>!ha(E)&&Ds(E,$),cc=E=>Ea(E,"Indent"),Vi=E=>Ea(E,"Outdent"),hr=E=>Ea(E,"Flatten");var or=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Rs=fa.DOM,Lr=E=>{const $={},j=Se=>{let He=E[Se?"startContainer":"endContainer"],wn=E[Se?"startOffset":"endOffset"];if(ye(He)){const So=Rs.create("span",{"data-mce-type":"bookmark"});He.hasChildNodes()?(wn=Math.min(wn,He.childNodes.length-1),Se?He.insertBefore(So,He.childNodes[wn]):Rs.insertAfter(So,He.childNodes[wn])):He.appendChild(So),He=So,wn=0}$[Se?"startContainer":"endContainer"]=He,$[Se?"startOffset":"endOffset"]=wn};return j(!0),E.collapsed||j(),$},wc=E=>{const $=Se=>{const He=ns=>{var jo;let to=(jo=ns.parentNode)===null||jo===void 0?void 0:jo.firstChild,os=0;for(;to;){if(to===ns)return os;(!ye(to)||to.getAttribute("data-mce-type")!=="bookmark")&&os++,to=to.nextSibling}return-1};let wn=E[Se?"startContainer":"endContainer"],So=E[Se?"startOffset":"endOffset"];if(wn){if(ye(wn)&&wn.parentNode){const ns=wn;So=He(wn),wn=wn.parentNode,Rs.remove(ns),!wn.hasChildNodes()&&Rs.isBlock(wn)&&wn.appendChild(Rs.create("br"))}E[Se?"startContainer":"endContainer"]=wn,E[Se?"startOffset":"endOffset"]=So}};$(!0),$();const j=Rs.createRng();return j.setStart(E.startContainer,E.startOffset),E.endContainer&&j.setEnd(E.endContainer,E.endOffset),xs(j)},El=E=>{switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},qr=(E,$,j)=>{const Se=j["list-style-type"]?j["list-style-type"]:null;E.setStyle($,"list-style-type",Se)},Gl=(E,$)=>{jr.each($,(j,Se)=>{E.setAttribute(Se,j)})},Cu=(E,$,j)=>{Gl($,j["list-attributes"]),jr.each(E.select("li",$),Se=>{Gl(Se,j["list-item-attributes"])})},ic=(E,$,j)=>{qr(E,$,j),Cu(E,$,j)},Su=(E,$,j)=>{jr.each(j,Se=>E.setStyle($,Se,""))},Qg=(E,$,j,Se)=>{let He=$[j?"startContainer":"endContainer"];const wn=$[j?"startOffset":"endOffset"];for(ye(He)&&(He=He.childNodes[Math.min(wn,He.childNodes.length-1)]||He),!j&&is(He.nextSibling)&&(He=He.nextSibling);He.parentNode!==Se;){const So=He.parentNode;if(ko(E,He)||/^(TD|TH)$/.test(So.nodeName))return He;He=So}return He},Fc=(E,$,j)=>{const Se=[],He=E.dom,wn=Qg(E,$,!0,j),So=Qg(E,$,!1,j);let ns;const jo=[];for(let to=wn;to&&(jo.push(to),to!==So);to=to.nextSibling);return jr.each(jo,to=>{var os;if(ko(E,to)){Se.push(to),ns=null;return}if(He.isBlock(to)||is(to)){is(to)&&He.remove(to),ns=null;return}const Ar=to.nextSibling;if(or.isBookmarkNode(to)&&(q(Ar)||ko(E,Ar)||!Ar&&to.parentNode===j)){ns=null;return}ns||(ns=He.create("p"),(os=to.parentNode)===null||os===void 0||os.insertBefore(ns,to),Se.push(ns)),ns.appendChild(to)}),Se},_l=(E,$,j)=>{const Se=E.getStyle($,"list-style-type");let He=j?j["list-style-type"]:"";return He=He===null?"":He,Se===He},cd=(E,$,j)=>{const Se=E.selection.getRng();let He="LI";const wn=ac(E,E.selection.getStart(!0)),So=E.dom;if(So.getContentEditable(E.selection.getNode())==="false")return;$=$.toUpperCase(),$==="DL"&&(He="DT");const ns=Lr(Se),jo=Fc(E,Se,wn);jr.each(jo,to=>{let os;const Ar=to.previousSibling,Ka=to.parentNode;Zn(Ka)||(Ar&&q(Ar)&&Ar.nodeName===$&&_l(So,Ar,j)?(os=Ar,to=So.rename(to,He),Ar.appendChild(to)):(os=So.create($),Ka.insertBefore(os,to),os.appendChild(to),to=So.rename(to,He)),Su(So,to,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ic(So,os,j),ql(E.dom,os))}),E.selection.setRng(wc(ns))},La=(E,$)=>q(E)&&E.nodeName===($==null?void 0:$.nodeName),ol=(E,$,j)=>{const Se=E.getStyle($,"list-style-type",!0),He=E.getStyle(j,"list-style-type",!0);return Se===He},xu=(E,$)=>E.className===$.className,Vd=(E,$,j)=>La($,j)&&ol(E,$,j)&&xu($,j),ql=(E,$)=>{let j,Se=$.nextSibling;if(Vd(E,$,Se)){const He=Se;for(;j=He.firstChild;)$.appendChild(j);E.remove(He)}if(Se=$.previousSibling,Vd(E,$,Se)){const He=Se;for(;j=He.lastChild;)$.insertBefore(j,$.firstChild);E.remove(He)}},Bm=(E,$,j,Se)=>{if($.nodeName!==j){const He=E.dom.rename($,j);ic(E.dom,He,Se),Ct(E,El(j),He)}else ic(E.dom,$,Se),Ct(E,El(j),$)},Ud=(E,$,j,Se,He)=>{const wn=q($);if(wn&&$.nodeName===Se&&!_i(He))hr(E);else{cd(E,Se,He);const So=Lr(E.selection.getRng()),ns=wn?[$,...j]:j;jr.each(ns,jo=>{Bm(E,jo,Se,He)}),E.selection.setRng(wc(So))}},_i=E=>"list-style-type"in E,eh=(E,$,j,Se)=>{if($!==E.getBody())if($)if($.nodeName===j&&!_i(Se)&&!yc($))hr(E);else{const He=Lr(E.selection.getRng());ic(E.dom,$,Se);const wn=E.dom.rename($,j);ql(E.dom,wn),E.selection.setRng(wc(He)),cd(E,j,Se),Ct(E,El(j),wn)}else cd(E,j,Se),Ct(E,El(j),$)},Pm=(E,$,j)=>{const Se=Bc(E);if(X(E,Se))return;const He=Ti(E),wn=Gt(j)?j:{};He.length>0?Ud(E,Se,He,$,wn):eh(E,Se,$,wn)},ku=fa.DOM,Wd=(E,$)=>{const j=$.parentElement;if(j&&j.nodeName==="LI"&&j.firstChild===$){const Se=j.previousSibling;Se&&Se.nodeName==="LI"?(Se.appendChild($),fe(E,j)&&ku.remove(j)):ku.setStyle(j,"listStyleType","none")}if(q(j)){const Se=j.previousSibling;Se&&Se.nodeName==="LI"&&Se.appendChild($)}},Ai=(E,$)=>{const j=jr.grep(E.select("ol,ul",$));jr.each(j,Se=>{Wd(E,Se)})},ve=(E,$,j,Se)=>{let He=$.startContainer;const wn=$.startOffset;if(Ta(He)&&(j?wn<He.data.length:wn>0))return He;const So=E.schema.getNonEmptyElements();ye(He)&&(He=Le.getNode(He,wn));const ns=new un(He,Se);j&&Wt(E.dom,He)&&ns.next();const jo=j?ns.next.bind(ns):ns.prev2.bind(ns);for(;He=jo();)if(He.nodeName==="LI"&&!He.hasChildNodes()||So[He.nodeName]||Ta(He)&&He.data.length>0)return He;return null},Kl=(E,$)=>{const j=$.childNodes;return j.length===1&&!q(j[0])&&E.isBlock(j[0])},Oi=(E,$)=>{Kl(E,$)&&E.remove($.firstChild,!0)},Fm=(E,$,j)=>{let Se;const He=Kl(E,j)?j.firstChild:j;if(Oi(E,$),!fe(E,$,!0))for(;Se=$.firstChild;)He.appendChild(Se)},Im=(E,$,j)=>{let Se;const He=$.parentNode;if(!be(E,$)||!be(E,j))return;q(j.lastChild)&&(Se=j.lastChild),He===j.lastChild&&is(He.previousSibling)&&E.remove(He.previousSibling);const wn=j.lastChild;wn&&is(wn)&&$.hasChildNodes()&&E.remove(wn),fe(E,j,!0)&&ks(We.fromDom(j)),Fm(E,$,j),Se&&j.appendChild(Se);const ns=se(We.fromDom(j),We.fromDom($))?E.getParents($,q,j):[];E.remove($),St(ns,jo=>{fe(E,jo)&&jo!==E.getRoot()&&E.remove(jo)})},th=(E,$,j)=>{ks(We.fromDom(j)),Im(E.dom,$,j),E.selection.setCursorLocation(j,0)},Bs=(E,$,j,Se)=>{const He=E.dom;if(He.isEmpty(Se))th(E,j,Se);else{const wn=Lr($);Im(He,j,Se),E.selection.setRng(wc(wn))}},qa=(E,$,j,Se)=>{const He=Lr($);Im(E.dom,j,Se);const wn=wc(He);E.selection.setRng(wn)},Vf=(E,$)=>{const j=E.dom,Se=E.selection,He=Se.getStart(),wn=mi(E,He),So=j.getParent(Se.getStart(),"LI",wn);if(So){const ns=So.parentElement;if(ns===E.getBody()&&fe(j,ns))return!0;const jo=xs(Se.getRng()),to=j.getParent(ve(E,jo,$,wn),"LI",wn);if(to&&to!==So)return E.undoManager.transact(()=>{$?Bs(E,jo,to,So):ts(So)?Vi(E):qa(E,jo,So,to)}),!0;if(!to&&!$&&jo.startOffset===0&&jo.endOffset===0)return E.undoManager.transact(()=>{hr(E)}),!0}return!1},Ui=(E,$,j)=>{const Se=E.getParent($.parentNode,E.isBlock,j);E.remove($),Se&&E.isEmpty(Se)&&E.remove(Se)},Lm=(E,$)=>{const j=E.dom,Se=E.selection.getStart(),He=mi(E,Se),wn=j.getParent(Se,j.isBlock,He);if(wn&&j.isEmpty(wn)){const So=xs(E.selection.getRng()),ns=j.getParent(ve(E,So,$,He),"LI",He);if(ns){const jo=Ka=>K(["td","th","caption"],Y(Ka)),to=Ka=>Ka.dom===He,os=Ye(We.fromDom(ns),jo,to),Ar=Ye(We.fromDom(So.startContainer),jo,to);return ze(os,Ar,ae)?(E.undoManager.transact(()=>{Ui(j,wn,He),ql(j,ns.parentNode),E.selection.select(ns,!0),E.selection.collapse($)}),!0):!1}}return!1},Tu=(E,$)=>Vf(E,$)||Lm(E,$),Cc=E=>{const $=E.selection.getStart(),j=mi(E,$);return E.dom.getParent($,"LI,DT,DD",j)||Li(E).length>0},Uf=E=>Cc(E)?(E.undoManager.transact(()=>{E.execCommand("Delete"),Ai(E.dom,E.getBody())}),!0):!1,id=(E,$)=>{const j=E.selection;return!X(E,j.getNode())&&(j.isCollapsed()?Tu(E,$):Uf(E))},nh=E=>{E.on("ExecCommand",$=>{const j=$.command.toLowerCase();(j==="delete"||j==="forwarddelete")&&Cc(E)&&Ai(E.dom,E.getBody())}),E.on("keydown",$=>{$.keyCode===ln.BACKSPACE?id(E,!1)&&$.preventDefault():$.keyCode===ln.DELETE&&id(E,!0)&&$.preventDefault()})},Ic=E=>({backspaceDelete:$=>{id(E,$)}}),Zd=(E,$)=>{const j=Bc(E);j===null||X(E,j)||E.undoManager.transact(()=>{Gt($.styles)&&E.dom.setStyles(j,$.styles),Gt($.attrs)&&Ts($.attrs,(Se,He)=>E.dom.setAttrib(j,He,Se))})},Hm=E=>{const $=ge(mo(E).split("")),j=En($,(Se,He)=>{const wn=Se.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,He)*wn});return it(j,(Se,He)=>Se+He,0)},ld=E=>{if(E--,E<0)return"";{const $=E%26,j=Math.floor(E/26),Se=ld(j),He=String.fromCharCode("A".charCodeAt(0)+$);return Se+He}},pa=E=>/^[A-Z]+$/.test(E),jd=E=>/^[a-z]+$/.test(E),Wf=E=>/^[0-9]+$/.test(E),zm=E=>Wf(E)?2:pa(E)?0:jd(E)?1:Er(E)?3:4,Eu=E=>{switch(zm(E)){case 2:return Ee.some({listStyleType:Ee.none(),start:E});case 0:return Ee.some({listStyleType:Ee.some("upper-alpha"),start:Hm(E).toString()});case 1:return Ee.some({listStyleType:Ee.some("lower-alpha"),start:Hm(E).toString()});case 3:return Ee.some({listStyleType:Ee.none(),start:""});case 4:return Ee.none()}},oh=E=>{const $=parseInt(E.start,10);return dn(E.listStyleType,"upper-alpha")?ld($):dn(E.listStyleType,"lower-alpha")?ld($).toLowerCase():E.start},Vm=E=>{const $=Bc(E);!wt($)||X(E,$)||E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:oh({start:E.dom.getAttrib($,"start","1"),listStyleType:Ee.from(E.dom.getStyle($,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:j=>{const Se=j.getData();Eu(Se.start).each(He=>{E.execCommand("mceListUpdate",!1,{attrs:{start:He.start==="1"?"":He.start},styles:{"list-style-type":He.listStyleType.getOr("")}})}),j.close()}})},Sc=(E,$)=>()=>{const j=Bc(E);return mn(j)&&j.nodeName===$},sh=E=>{E.addCommand("mceListProps",()=>{Vm(E)})},sl=E=>{E.on("BeforeExecCommand",$=>{const j=$.command.toLowerCase();j==="indent"?cc(E):j==="outdent"&&Vi(E)}),E.addCommand("InsertUnorderedList",($,j)=>{Pm(E,"UL",j)}),E.addCommand("InsertOrderedList",($,j)=>{Pm(E,"OL",j)}),E.addCommand("InsertDefinitionList",($,j)=>{Pm(E,"DL",j)}),E.addCommand("RemoveList",()=>{hr(E)}),sh(E),E.addCommand("mceListUpdate",($,j)=>{Gt(j)&&Zd(E,j)}),E.addQueryStateHandler("InsertUnorderedList",Sc(E,"UL")),E.addQueryStateHandler("InsertOrderedList",Sc(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",Sc(E,"DL"))},ud=E=>{E.on("keydown",$=>{$.keyCode!==ln.TAB||ln.metaKeyPressed($)||E.undoManager.transact(()=>{($.shiftKey?Vi(E):cc(E))&&$.preventDefault()})})},Yl=E=>{hn(E)&&ud(E),nh(E)},Wi=(E,$)=>j=>Ce(E,He=>{j.setActive(Hi(He.parents,$)),j.setEnabled(!X(E,He.element))}),rh=E=>{const $=j=>()=>E.execCommand(j);E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:$("InsertOrderedList"),onSetup:Wi(E,"OL")}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:$("InsertUnorderedList"),onSetup:Wi(E,"UL")}))},ah=(E,$)=>j=>Ce(E,He=>j.setEnabled(Hi(He.parents,$)&&!X(E,He.element))),Zf=E=>{const $={text:"List properties...",icon:"ordered-list",onAction:()=>E.execCommand("mceListProps"),onSetup:ah(E,"OL")};E.ui.registry.addMenuItem("listprops",$),E.ui.registry.addContextMenu("lists",{update:j=>{const Se=Bc(E,j);return wt(Se)?["listprops"]:[]}})};var rl=()=>{_t.add("lists",E=>(an(E),E.hasPlugin("rtc",!0)?sh(E):(Yl(E),sl(E)),rh(E),Zf(E),Ic(E)))};rl()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(ye,q,lt)=>{var wt;return lt(ye,q.prototype)?!0:((wt=ye.constructor)===null||wt===void 0?void 0:wt.name)===q.name},gt=ye=>{const q=typeof ye;return ye===null?"null":q==="object"&&Array.isArray(ye)?"array":q==="object"&&It(ye,String,(lt,wt)=>wt.isPrototypeOf(lt))?"string":q},Ut=ye=>q=>gt(q)===ye,$t=Ut("string"),en=Ut("object"),Gt=Ut("array"),Tt=ye=>ye==null,Et=ye=>!Tt(ye);class rt{constructor(q,lt){this.tag=q,this.value=lt}static some(q){return new rt(!0,q)}static none(){return rt.singletonNone}fold(q,lt){return this.tag?lt(this.value):q()}isSome(){return this.tag}isNone(){return!this.tag}map(q){return this.tag?rt.some(q(this.value)):rt.none()}bind(q){return this.tag?q(this.value):rt.none()}exists(q){return this.tag&&q(this.value)}forall(q){return!this.tag||q(this.value)}filter(q){return!this.tag||q(this.value)?this:rt.none()}getOr(q){return this.tag?this.value:q}or(q){return this.tag?this:q}getOrThunk(q){return this.tag?this.value:q()}orThunk(q){return this.tag?this:q()}getOrDie(q){if(this.tag)return this.value;throw new Error(q??"Called getOrDie on None")}static from(q){return Et(q)?rt.some(q):rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(q){this.tag&&q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}rt.singletonNone=new rt(!1);const mn=Array.prototype.push,Nn=(ye,q)=>{for(let lt=0,wt=ye.length;lt<wt;lt++){const Zn=ye[lt];q(Zn,lt)}},Ot=ye=>{const q=[];for(let lt=0,wt=ye.length;lt<wt;++lt){if(!Gt(ye[lt]))throw new Error("Arr.flatten item "+lt+" was not an array, input: "+ye);mn.apply(q,ye[lt])}return q},ct=ye=>{let q=ye;return{get:()=>q,set:Zn=>{q=Zn}}},Bt=Object.keys,cn=Object.hasOwnProperty,Ze=(ye,q)=>{const lt=Bt(ye);for(let wt=0,Zn=lt.length;wt<Zn;wt++){const eo=lt[wt],In=ye[eo];q(In,eo)}},et=(ye,q)=>Ee(ye,q)?rt.from(ye[q]):rt.none(),Ee=(ye,q)=>cn.call(ye,q),te=ye=>q=>q.options.get(ye),Je=ye=>{const q=ye.options.register;q("audio_template_callback",{processor:"function"}),q("video_template_callback",{processor:"function"}),q("iframe_template_callback",{processor:"function"}),q("media_live_embeds",{processor:"boolean",default:!0}),q("media_filter_html",{processor:"boolean",default:!0}),q("media_url_resolver",{processor:"function"}),q("media_alt_source",{processor:"boolean",default:!0}),q("media_poster",{processor:"boolean",default:!0}),q("media_dimensions",{processor:"boolean",default:!0})},Ht=te("audio_template_callback"),yt=te("video_template_callback"),K=te("iframe_template_callback"),xt=te("media_live_embeds"),En=te("media_filter_html"),St=te("media_url_resolver"),he=te("media_alt_source"),Q=te("media_poster"),it=te("media_dimensions");var Me=tinymce.util.Tools.resolve("tinymce.util.Tools"),De=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ft=tinymce.util.Tools.resolve("tinymce.html.DomParser");const _=De.DOM,ge=ye=>ye.replace(/px$/,""),Ue=ye=>{const q=ye.attr("style"),lt=q?_.parseStyle(q):{};return{type:"ephox-embed-iri",source:ye.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:et(lt,"max-width").map(ge).getOr(""),height:et(lt,"max-height").map(ge).getOr("")}},Ie=(ye,q)=>{let lt={};const Zn=Ft({validate:!1,forced_root_block:!1},q).parse(ye);for(let eo=Zn;eo;eo=eo.walk())if(eo.type===1){const In=eo.name;if(eo.attr("data-ephox-embed-iri")){lt=Ue(eo);break}else!lt.source&&In==="param"&&(lt.source=eo.attr("movie")),(In==="iframe"||In==="object"||In==="embed"||In==="video"||In==="audio")&&(lt.type||(lt.type=In),lt=Me.extend(eo.attributes.map,lt)),In==="script"&&(lt={type:"script",source:eo.attr("src")}),In==="source"&&(lt.source?lt.altsource||(lt.altsource=eo.attr("src")):lt.source=eo.attr("src")),In==="img"&&!lt.poster&&(lt.poster=eo.attr("src"))}return lt.source=lt.source||lt.src||"",lt.altsource=lt.altsource||"",lt.poster=lt.poster||"",lt},Ae=ye=>{var q;const lt={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},wt=(q=ye.toLowerCase().split(".").pop())!==null&&q!==void 0?q:"";return et(lt,wt).getOr("")};var tn=tinymce.util.Tools.resolve("tinymce.html.Node"),dn=tinymce.util.Tools.resolve("tinymce.html.Serializer");const ze=(ye,q={})=>Ft({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...q},ye),jt=De.DOM,Nt=ye=>/^[0-9.]+$/.test(ye)?ye+"px":ye,Ve=(ye,q)=>{const lt=q.attr("style"),wt=lt?jt.parseStyle(lt):{};Et(ye.width)&&(wt["max-width"]=Nt(ye.width)),Et(ye.height)&&(wt["max-height"]=Nt(ye.height)),q.attr("style",jt.serializeStyle(wt))},R=["source","altsource"],qn=(ye,q,lt,wt)=>{let Zn=0,eo=0;const In=ze(wt);In.addNodeFilter("source",ts=>Zn=ts.length);const is=In.parse(ye);for(let ts=is;ts;ts=ts.walk())if(ts.type===1){const ko=ts.name;if(ts.attr("data-ephox-embed-iri")){Ve(q,ts);break}else{switch(ko){case"video":case"object":case"embed":case"img":case"iframe":q.height!==void 0&&q.width!==void 0&&(ts.attr("width",q.width),ts.attr("height",q.height));break}if(lt)switch(ko){case"video":ts.attr("poster",q.poster),ts.attr("src",null);for(let Wt=Zn;Wt<2;Wt++)if(q[R[Wt]]){const fe=new tn("source",1);fe.attr("src",q[R[Wt]]),fe.attr("type",q[R[Wt]+"mime"]||null),ts.append(fe)}break;case"iframe":ts.attr("src",q.source);break;case"object":const ar=ts.getAll("img").length>0;if(q.poster&&!ar){ts.attr("src",q.poster);const Wt=new tn("img",1);Wt.attr("src",q.poster),Wt.attr("width",q.width),Wt.attr("height",q.height),ts.append(Wt)}break;case"source":if(eo<2&&(ts.attr("src",q[R[eo]]),ts.attr("type",q[R[eo]+"mime"]||null),!q[R[eo]])){ts.remove();continue}eo++;break;case"img":q.poster||ts.remove();break}}}return dn({},wt).serialize(is)},_e=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],xe=ye=>{const q=ye.match(/^(https?:\/\/|www\.)(.+)$/i);return q&&q.length>1?q[1]==="www."?"https://":q[1]:"https://"},We=(ye,q)=>{const lt=xe(q),wt=ye.regex.exec(q);let Zn=lt+ye.url;if(Et(wt))for(let eo=0;eo<wt.length;eo++)Zn=Zn.replace("$"+eo,()=>wt[eo]?wt[eo]:"");return Zn.replace(/\?$/,"")},ke=ye=>{const q=_e.filter(lt=>lt.regex.test(ye));return q.length>0?Me.extend({},q[0],{url:We(q[0],ye)}):null},ae=(ye,q)=>{if(q)return q(ye);{const lt=ye.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ye.source+'" width="'+ye.width+'" height="'+ye.height+'"'+lt+"></iframe>"}},se=ye=>{let q='<object data="'+ye.source+'" width="'+ye.width+'" height="'+ye.height+'" type="application/x-shockwave-flash">';return ye.poster&&(q+='<img src="'+ye.poster+'" width="'+ye.width+'" height="'+ye.height+'" />'),q+="</object>",q},re=(ye,q)=>q?q(ye):'<audio controls="controls" src="'+ye.source+'">'+(ye.altsource?`
<source src="`+ye.altsource+'"'+(ye.altsourcemime?' type="'+ye.altsourcemime+'"':"")+` />
`:"")+"</audio>",z=(ye,q)=>q?q(ye):'<video width="'+ye.width+'" height="'+ye.height+'"'+(ye.poster?' poster="'+ye.poster+'"':"")+` controls="controls">
<source src="`+ye.source+'"'+(ye.sourcemime?' type="'+ye.sourcemime+'"':"")+` />
`+(ye.altsource?'<source src="'+ye.altsource+'"'+(ye.altsourcemime?' type="'+ye.altsourcemime+'"':"")+` />
`:"")+"</video>",Y=ye=>'<script src="'+ye.source+'"><\/script>',H=(ye,q)=>{var lt;const wt=Me.extend({},q);if(!wt.source&&(Me.extend(wt,Ie((lt=wt.embed)!==null&&lt!==void 0?lt:"",ye.schema)),!wt.source))return"";wt.altsource||(wt.altsource=""),wt.poster||(wt.poster=""),wt.source=ye.convertURL(wt.source,"source"),wt.altsource=ye.convertURL(wt.altsource,"source"),wt.sourcemime=Ae(wt.source),wt.altsourcemime=Ae(wt.altsource),wt.poster=ye.convertURL(wt.poster,"poster");const Zn=ke(wt.source);if(Zn&&(wt.source=Zn.url,wt.type=Zn.type,wt.allowfullscreen=Zn.allowFullscreen,wt.width=wt.width||String(Zn.w),wt.height=wt.height||String(Zn.h)),wt.embed)return qn(wt.embed,wt,!0,ye.schema);{const eo=Ht(ye),In=yt(ye),is=K(ye);return wt.width=wt.width||"300",wt.height=wt.height||"150",Me.each(wt,(ts,ko)=>{wt[ko]=ye.dom.encode(""+ts)}),wt.type==="iframe"?ae(wt,is):wt.sourcemime==="application/x-shockwave-flash"?se(wt):wt.sourcemime.indexOf("audio")!==-1?re(wt,eo):wt.type==="script"?Y(wt):z(wt,In)}},Z=ye=>ye.hasAttribute("data-mce-object")||ye.hasAttribute("data-ephox-embed-iri"),Be=ye=>{ye.on("click keyup touchend",()=>{const q=ye.selection.getNode();q&&ye.dom.hasClass(q,"mce-preview-object")&&ye.dom.getAttrib(q,"data-mce-selected")&&q.setAttribute("data-mce-selected","2")}),ye.on("ObjectSelected",q=>{q.target.getAttribute("data-mce-object")==="script"&&q.preventDefault()}),ye.on("ObjectResized",q=>{const lt=q.target;if(lt.getAttribute("data-mce-object")){let wt=lt.getAttribute("data-mce-html");wt&&(wt=unescape(wt),lt.setAttribute("data-mce-html",escape(qn(wt,{width:String(q.width),height:String(q.height)},!1,ye.schema))))}})},Pe={},Yt=(ye,q,lt)=>new Promise((wt,Zn)=>{const eo=In=>(In.html&&(Pe[ye.source]=In),wt({url:ye.source,html:In.html?In.html:q(ye)}));Pe[ye.source]?eo(Pe[ye.source]):lt({url:ye.source},eo,Zn)}),rn=(ye,q)=>Promise.resolve({html:q(ye),url:ye.source}),ro=ye=>q=>H(ye,q),uo=(ye,q)=>{const lt=St(ye);return lt?Yt(q,ro(ye),lt):rn(q,ro(ye))},Qn=ye=>Ee(Pe,ye),kn=(ye,q)=>et(q,ye).bind(lt=>et(lt,"meta")),ao=(ye,q,lt)=>wt=>{const Zn=()=>et(ye,wt),eo=()=>et(q,wt),In=ko=>et(ko,"value").bind(ar=>ar.length>0?rt.some(ar):rt.none()),is=()=>Zn().bind(ko=>en(ko)?In(ko).orThunk(eo):eo().orThunk(()=>rt.from(ko))),ts=()=>eo().orThunk(()=>Zn().bind(ko=>en(ko)?In(ko):rt.from(ko)));return{[wt]:(wt===lt?is():ts()).getOr("")}},Re=(ye,q)=>{const lt={};return et(ye,"dimensions").each(wt=>{Nn(["width","height"],Zn=>{et(q,Zn).orThunk(()=>et(wt,Zn)).each(eo=>lt[Zn]=eo)})}),lt},Ye=(ye,q)=>{const lt=q&&q!=="dimensions"?kn(q,ye).getOr({}):{},wt=ao(ye,lt,q);return{...wt("source"),...wt("altsource"),...wt("poster"),...wt("embed"),...Re(ye,lt)}},Lt=ye=>{const q={...ye,source:{value:et(ye,"source").getOr("")},altsource:{value:et(ye,"altsource").getOr("")},poster:{value:et(ye,"poster").getOr("")}};return Nn(["width","height"],lt=>{et(ye,lt).each(wt=>{const Zn=q.dimensions||{};Zn[lt]=wt,q.dimensions=Zn})}),q},fn=ye=>q=>{const lt=q&&q.msg?"Media embed handler error: "+q.msg:"Media embed handler threw unknown error.";ye.notificationManager.open({type:"error",text:lt})},On=ye=>{const q=ye.selection.getNode(),lt=Z(q)?ye.serializer.serialize(q,{selection:!0}):"";return{embed:lt,...Ie(lt,ye.schema)}},Tn=(ye,q)=>lt=>{if($t(lt.url)&&lt.url.trim().length>0){const wt=lt.html,eo={...Ie(wt,q.schema),source:lt.url,embed:wt};ye.setData(Lt(eo))}},Ro=(ye,q)=>{const lt=ye.dom.select("*[data-mce-object]");for(let wt=0;wt<q.length;wt++)for(let Zn=lt.length-1;Zn>=0;Zn--)q[wt]===lt[Zn]&&lt.splice(Zn,1);ye.selection.select(lt[0])},ks=(ye,q)=>{const lt=ye.dom.select("*[data-mce-object]");ye.insertContent(q),Ro(ye,lt),ye.nodeChanged()},qe=(ye,q,lt)=>{var wt;q.embed=qn((wt=q.embed)!==null&&wt!==void 0?wt:"",q,!1,lt.schema),q.embed&&(ye.source===q.source||Qn(q.source))?ks(lt,q.embed):uo(lt,q).then(Zn=>{ks(lt,Zn.html)}).catch(fn(lt))},Le=ye=>{const q=On(ye),lt=ct(q),wt=Lt(q),Zn=(Pn,yn)=>{const Hn=Ye(yn.getData(),"source");Pn.source!==Hn.source&&(Tn(hn,ye)({url:Hn.source,html:""}),uo(ye,Hn).then(Tn(hn,ye)).catch(fn(ye)))},eo=Pn=>{var yn;const Hn=Ye(Pn.getData()),no=Ie((yn=Hn.embed)!==null&&yn!==void 0?yn:"",ye.schema);Pn.setData(Lt(no))},In=(Pn,yn)=>{const Hn=Ye(Pn.getData(),yn),no=H(ye,Hn);Pn.setData(Lt({...Hn,embed:no}))},is=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],ts=it(ye)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],ko={title:"General",name:"general",items:Ot([is,ts])},Wt={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},fe=[];he(ye)&&fe.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Q(ye)&&fe.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const be={title:"Advanced",name:"advanced",items:fe},Rt=[ko,Wt];fe.length>0&&Rt.push(be);const an={type:"tabpanel",tabs:Rt},hn=ye.windowManager.open({title:"Insert/Edit Media",size:"normal",body:an,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Pn=>{const yn=Ye(Pn.getData());qe(lt.get(),yn,ye),Pn.close()},onChange:(Pn,yn)=>{switch(yn.name){case"source":Zn(lt.get(),Pn);break;case"embed":eo(Pn);break;case"dimensions":case"altsource":case"poster":In(Pn,yn.name);break}lt.set(Ye(Pn.getData()))},initialData:wt})},un=ye=>({showDialog:()=>{Le(ye)}}),ln=ye=>{const q=()=>{Le(ye)};ye.addCommand("mceMedia",q)},Jt=(ye,q,lt)=>q===""||ye.length>=q.length&&ye.substr(lt,lt+q.length)===q,Kn=(ye,q)=>Jt(ye,q,0);var Ts=tinymce.util.Tools.resolve("tinymce.Env");const Tr=ye=>{const q=ye.name;return q==="iframe"||q==="video"||q==="audio"},ma=(ye,q,lt,wt=null)=>{const Zn=ye.attr(lt);return Et(Zn)?Zn:Ee(q,lt)?null:wt},bs=(ye,q,lt)=>{const wt=q.name==="img"||ye.name==="video",Zn=wt?"300":null,eo=ye.name==="audio"?"30":"150",In=wt?eo:null;q.attr({width:ma(ye,lt,"width",Zn),height:ma(ye,lt,"height",In)})},vc=(ye,q,lt,wt)=>{const Zn=ze(ye.schema).parse(wt,{context:q});for(;Zn.firstChild;)lt.append(Zn.firstChild)},ys=(ye,q)=>{const lt=q.name,wt=new tn("img",1);return go(ye,q,wt),bs(q,wt,{}),wt.attr({style:q.attr("style"),src:Ts.transparentSrc,"data-mce-object":lt,class:"mce-object mce-object-"+lt}),wt},cs=(ye,q)=>{var lt;const wt=q.name,Zn=new tn("span",1);Zn.attr({contentEditable:"false",style:q.attr("style"),"data-mce-object":wt,class:"mce-preview-object mce-object-"+wt}),go(ye,q,Zn);const eo=ye.dom.parseStyle((lt=q.attr("style"))!==null&&lt!==void 0?lt:""),In=new tn(wt,1);if(bs(q,In,eo),In.attr({src:q.attr("src"),style:q.attr("style"),class:q.attr("class")}),wt==="iframe")In.attr({allowfullscreen:q.attr("allowfullscreen"),frameborder:"0"});else{Nn(["controls","crossorigin","currentTime","loop","muted","poster","preload"],ar=>{In.attr(ar,q.attr(ar))});const ko=Zn.attr("data-mce-html");Et(ko)&&vc(ye,wt,In,unescape(ko))}const is=new tn("span",1);return is.attr("class","mce-shim"),Zn.append(In),Zn.append(is),Zn},go=(ye,q,lt)=>{var wt;const Zn=(wt=q.attributes)!==null&&wt!==void 0?wt:[];let eo=Zn.length;for(;eo--;){const ko=Zn[eo].name;let ar=Zn[eo].value;ko!=="width"&&ko!=="height"&&ko!=="style"&&!Kn(ko,"data-mce-")&&((ko==="data"||ko==="src")&&(ar=ye.convertURL(ar,ko)),lt.attr("data-mce-p-"+ko,ar))}const In=dn({inner:!0},ye.schema),is=new tn("div",1);Nn(q.children(),ko=>is.append(ko));const ts=In.serialize(is);ts&&(lt.attr("data-mce-html",escape(ts)),lt.empty())},mr=ye=>{const q=ye.attr("class");return $t(q)&&/\btiny-pageembed\b/.test(q)},Zr=ye=>{let q=ye;for(;q=q.parent;)if(q.attr("data-ephox-embed-iri")||mr(q))return!0;return!1},Is=ye=>q=>{let lt=q.length,wt;for(;lt--;)wt=q[lt],wt.parent&&(wt.parent.attr("data-mce-object")||(Tr(wt)&&xt(ye)?Zr(wt)||wt.replace(cs(ye,wt)):Zr(wt)||wt.replace(ys(ye,wt))))},fa=(ye,q,lt)=>{const wt=En(ye);return ze(ye.schema,{validate:wt}).parse(lt,{context:q})},jr=ye=>{ye.on("PreInit",()=>{const{schema:q,serializer:lt,parser:wt}=ye,Zn=q.getBoolAttrs();Nn("webkitallowfullscreen mozallowfullscreen".split(" "),eo=>{Zn[eo]={}}),Ze({embed:["wmode"]},(eo,In)=>{const is=q.getElementRule(In);is&&Nn(eo,ts=>{is.attributes[ts]={},is.attributesOrder.push(ts)})}),wt.addNodeFilter("iframe,video,audio,object,embed,script",Is(ye)),lt.addAttributeFilter("data-mce-object",(eo,In)=>{var is;let ts=eo.length;for(;ts--;){const ko=eo[ts];if(!ko.parent)continue;const ar=ko.attr(In),Wt=new tn(ar,1);if(ar!=="audio"&&ar!=="script"){const an=ko.attr("class");an&&an.indexOf("mce-preview-object")!==-1&&ko.firstChild?Wt.attr({width:ko.firstChild.attr("width"),height:ko.firstChild.attr("height")}):Wt.attr({width:ko.attr("width"),height:ko.attr("height")})}Wt.attr({style:ko.attr("style")});const fe=(is=ko.attributes)!==null&&is!==void 0?is:[];let be=fe.length;for(;be--;){const an=fe[be].name;an.indexOf("data-mce-p-")===0&&Wt.attr(an.substr(11),fe[be].value)}ar==="script"&&Wt.attr("type","text/javascript");const Rt=ko.attr("data-mce-html");if(Rt){const an=fa(ye,ar,unescape(Rt));Nn(an.children(),hn=>Wt.append(hn))}ko.replace(Wt)}})}),ye.on("SetContent",()=>{const q=ye.dom;Nn(q.select("span.mce-preview-object"),lt=>{q.select("span.mce-shim",lt).length===0&&q.add(lt,"span",{class:"mce-shim"})})})},rc=ye=>{ye.on("ResolveName",q=>{let lt;q.target.nodeType===1&&(lt=q.target.getAttribute("data-mce-object"))&&(q.name=lt)})},Xs=ye=>{const q=()=>ye.execCommand("mceMedia");ye.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:q,onSetup:lt=>{const wt=ye.selection;return lt.setActive(Z(wt.getNode())),wt.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",lt.setActive).unbind}}),ye.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:q})};var Ta=()=>{_t.add("media",ye=>(Je(ye),ln(ye),Xs(ye),rc(ye),jr(ye),Be(ye),un(ye)))};Ta()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=Ze=>et=>typeof et===Ze,gt=It("boolean"),Ut=It("number"),$t=Ze=>et=>et.options.get(Ze),en=Ze=>{const et=Ze.options.register;et("nonbreaking_force_tab",{processor:Ee=>gt(Ee)?{value:Ee?3:0,valid:!0}:Ut(Ee)?{value:Ee,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),et("nonbreaking_wrap",{processor:"boolean",default:!0})},Gt=$t("nonbreaking_force_tab"),Tt=$t("nonbreaking_wrap"),Et=(Ze,et)=>{let Ee="";for(let te=0;te<et;te++)Ee+=Ze;return Ee},rt=Ze=>Ze.plugins.visualchars?Ze.plugins.visualchars.isEnabled():!1,mn=(Ze,et)=>{const Ee=()=>rt(Ze)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",te=()=>`<span class="${Ee()}" contenteditable="false">${Et("&nbsp;",et)}</span>`,Ht=Tt(Ze)||Ze.plugins.visualchars?te():Et("&nbsp;",et);Ze.undoManager.transact(()=>Ze.insertContent(Ht))},Nn=Ze=>{Ze.addCommand("mceNonBreaking",()=>{mn(Ze,1)})};var Ot=tinymce.util.Tools.resolve("tinymce.util.VK");const ct=Ze=>{const et=Gt(Ze);et>0&&Ze.on("keydown",Ee=>{if(Ee.keyCode===Ot.TAB&&!Ee.isDefaultPrevented()){if(Ee.shiftKey)return;Ee.preventDefault(),Ee.stopImmediatePropagation(),mn(Ze,et)}})},Bt=Ze=>{const et=()=>Ze.execCommand("mceNonBreaking");Ze.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:et}),Ze.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:et})};var cn=()=>{_t.add("nonbreaking",Ze=>{en(Ze),Nn(Ze),Bt(Ze),ct(Ze)})};cn()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager"),It=tinymce.util.Tools.resolve("tinymce.Env");const gt=ct=>Bt=>Bt.options.get(ct),Ut=ct=>{const Bt=ct.options.register;Bt("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Bt("pagebreak_split_block",{processor:"boolean",default:!1})},$t=gt("pagebreak_separator"),en=gt("pagebreak_split_block"),Gt="mce-pagebreak",Tt=ct=>{const Bt=`<img src="${It.transparentSrc}" class="${Gt}" data-mce-resize="false" data-mce-placeholder />`;return ct?`<p>${Bt}</p>`:Bt},Et=ct=>{const Bt=$t(ct),cn=()=>en(ct),Ze=new RegExp(Bt.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,et=>"\\"+et),"gi");ct.on("BeforeSetContent",et=>{et.content=et.content.replace(Ze,Tt(cn()))}),ct.on("PreInit",()=>{ct.serializer.addNodeFilter("img",et=>{let Ee=et.length,te,Je;for(;Ee--;)if(te=et[Ee],Je=te.attr("class"),Je&&Je.indexOf(Gt)!==-1){const Ht=te.parent;if(Ht&&ct.schema.getBlockElements()[Ht.name]&&cn()){Ht.type=3,Ht.value=Bt,Ht.raw=!0,te.remove();continue}te.type=3,te.value=Bt,te.raw=!0}})})},rt=ct=>{ct.addCommand("mcePageBreak",()=>{ct.insertContent(Tt(en(ct)))})},mn=ct=>{ct.on("ResolveName",Bt=>{Bt.target.nodeName==="IMG"&&ct.dom.hasClass(Bt.target,Gt)&&(Bt.name="pagebreak")})},Nn=ct=>{const Bt=()=>ct.execCommand("mcePageBreak");ct.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Bt}),ct.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Bt})};var Ot=()=>{_t.add("pagebreak",ct=>{Ut(ct),rt(ct),Nn(ct),Et(ct),mn(ct)})};Ot()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager"),It=tinymce.util.Tools.resolve("tinymce.Env"),gt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ut=ct=>Bt=>Bt.options.get(ct),$t=Ut("content_style"),en=Ut("content_css_cors"),Gt=Ut("body_class"),Tt=Ut("body_id"),Et=ct=>{var Bt;let cn="";const Ze=ct.dom.encode,et=(Bt=$t(ct))!==null&&Bt!==void 0?Bt:"";cn+='<base href="'+Ze(ct.documentBaseURI.getURI())+'">';const Ee=en(ct)?' crossorigin="anonymous"':"";gt.each(ct.contentCSS,St=>{cn+='<link type="text/css" rel="stylesheet" href="'+Ze(ct.documentBaseURI.toAbsolute(St))+'"'+Ee+">"}),et&&(cn+='<style type="text/css">'+et+"</style>");const te=Tt(ct),Je=Gt(ct),yt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(It.os.isMacOS()||It.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",K=ct.getBody().dir,xt=K?' dir="'+Ze(K)+'"':"";return"<!DOCTYPE html><html><head>"+cn+'</head><body id="'+Ze(te)+'" class="mce-content-body '+Ze(Je)+'"'+xt+">"+ct.getContent()+yt+"</body></html>"},rt=ct=>{const Bt=Et(ct);ct.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Bt}}).focus("close")},mn=ct=>{ct.addCommand("mcePreview",()=>{rt(ct)})},Nn=ct=>{const Bt=()=>ct.execCommand("mcePreview");ct.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Bt}),ct.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Bt})};var Ot=()=>{_t.add("preview",ct=>{mn(ct),Nn(ct)})};Ot()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(_e,xe,We)=>{var ke;return We(_e,xe.prototype)?!0:((ke=_e.constructor)===null||ke===void 0?void 0:ke.name)===xe.name},gt=_e=>{const xe=typeof _e;return _e===null?"null":xe==="object"&&Array.isArray(_e)?"array":xe==="object"&&It(_e,String,(We,ke)=>ke.isPrototypeOf(We))?"string":xe},Ut=_e=>xe=>gt(xe)===_e,$t=_e=>xe=>typeof xe===_e,en=Ut("string"),Gt=$t("boolean"),Tt=_e=>_e==null,Et=_e=>!Tt(_e),rt=$t("function"),mn=_e=>xe=>xe.options.get(_e),Nn=_e=>{const xe=_e.options.register,We=re=>z=>{const Y=Gt(z)||en(z);return Y?Gt(z)?{value:z?re:"",valid:Y}:{value:z.trim(),valid:Y}:{valid:!1,message:"Must be a boolean or string."}},ke="bold italic | quicklink h2 h3 blockquote";xe("quickbars_selection_toolbar",{processor:We(ke),default:ke});const ae="quickimage quicktable";xe("quickbars_insert_toolbar",{processor:We(ae),default:ae});const se="alignleft aligncenter alignright";xe("quickbars_image_toolbar",{processor:We(se),default:se})},Ot=mn("quickbars_selection_toolbar"),ct=mn("quickbars_insert_toolbar"),Bt=mn("quickbars_image_toolbar");let cn=0;const Ze=_e=>{const We=new Date().getTime(),ke=Math.floor(Math.random()*1e9);return cn++,_e+"_"+ke+cn+String(We)},et=(_e,xe,We)=>{_e.execCommand("mceInsertTable",!1,{rows:We,columns:xe})},Ee=(_e,xe,We)=>{const ke=_e.editorUpload.blobCache,ae=ke.create(Ze("mceu"),We,xe);ke.add(ae),_e.insertContent(_e.dom.createHTML("img",{src:ae.blobUri()}))},te=_e=>new Promise(xe=>{const We=new FileReader;We.onloadend=()=>{xe(We.result.split(",")[1])},We.readAsDataURL(_e)});var Je=tinymce.util.Tools.resolve("tinymce.Env"),Ht=tinymce.util.Tools.resolve("tinymce.util.Delay");const yt=_e=>new Promise(xe=>{const We=document.createElement("input");We.type="file",We.accept="image/*",We.style.position="fixed",We.style.left="0",We.style.top="0",We.style.opacity="0.001",document.body.appendChild(We);const ke=se=>{xe(Array.prototype.slice.call(se.target.files))};We.addEventListener("change",ke);const ae=se=>{const re=()=>{var z;xe([]),(z=We.parentNode)===null||z===void 0||z.removeChild(We)};Je.os.isAndroid()&&se.type!=="remove"?Ht.setEditorTimeout(_e,re,0):re(),_e.off("focusin remove",ae)};_e.on("focusin remove",ae),We.click()}),K=_e=>{_e.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{yt(_e).then(xe=>{if(xe.length>0){const We=xe[0];te(We).then(ke=>{Ee(_e,ke,We)})}})}}),_e.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{et(_e,2,2)}})},En=(_e=>()=>_e)(!1);class St{constructor(xe,We){this.tag=xe,this.value=We}static some(xe){return new St(!0,xe)}static none(){return St.singletonNone}fold(xe,We){return this.tag?We(this.value):xe()}isSome(){return this.tag}isNone(){return!this.tag}map(xe){return this.tag?St.some(xe(this.value)):St.none()}bind(xe){return this.tag?xe(this.value):St.none()}exists(xe){return this.tag&&xe(this.value)}forall(xe){return!this.tag||xe(this.value)}filter(xe){return!this.tag||xe(this.value)?this:St.none()}getOr(xe){return this.tag?this.value:xe}or(xe){return this.tag?this:xe}getOrThunk(xe){return this.tag?this.value:xe()}orThunk(xe){return this.tag?this:xe()}getOrDie(xe){if(this.tag)return this.value;throw new Error(xe??"Called getOrDie on None")}static from(xe){return Et(xe)?St.some(xe):St.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(xe){this.tag&&xe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}St.singletonNone=new St(!1),typeof window<"u"||Function("return this;")();const he=1,Q=_e=>_e.dom.nodeName.toLowerCase(),it=(_e,xe)=>{const We=_e.dom;return We&&We.hasAttribute?We.hasAttribute(xe):!1};var Me=(_e,xe,We,ke,ae)=>_e(We,ke)?St.some(We):rt(ae)&&ae(We)?St.none():xe(We,ke,ae);const De=(_e,xe)=>{const ke=(xe||document).createElement("div");if(ke.innerHTML=_e,!ke.hasChildNodes()||ke.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,_e),new Error(ae)}return ge(ke.childNodes[0])},Ft=(_e,xe)=>{const ke=(xe||document).createElement(_e);return ge(ke)},_=(_e,xe)=>{const ke=(xe||document).createTextNode(_e);return ge(ke)},ge=_e=>{if(_e==null)throw new Error("Node cannot be null or undefined");return{dom:_e}},Ie={fromHtml:De,fromTag:Ft,fromText:_,fromDom:ge,fromPoint:(_e,xe,We)=>St.from(_e.dom.elementFromPoint(xe,We)).map(ge)},Ae=(_e,xe)=>{const We=_e.dom;if(We.nodeType!==he)return!1;{const ke=We;if(ke.matches!==void 0)return ke.matches(xe);if(ke.msMatchesSelector!==void 0)return ke.msMatchesSelector(xe);if(ke.webkitMatchesSelector!==void 0)return ke.webkitMatchesSelector(xe);if(ke.mozMatchesSelector!==void 0)return ke.mozMatchesSelector(xe);throw new Error("Browser lacks native selectors")}},tn=(_e,xe,We)=>{let ke=_e.dom;const ae=rt(We)?We:En;for(;ke.parentNode;){ke=ke.parentNode;const se=Ie.fromDom(ke);if(xe(se))return St.some(se);if(ae(se))break}return St.none()},dn=(_e,xe,We)=>Me((ae,se)=>se(ae),tn,_e,xe,We),ze=(_e,xe,We)=>dn(_e,xe,We).isSome(),jt=(_e,xe,We)=>tn(_e,ke=>Ae(ke,xe),We),Nt=(_e,xe,We)=>Me((ae,se)=>Ae(ae,se),jt,_e,xe,We),Ve=_e=>{const xe=ct(_e);xe.length>0&&_e.ui.registry.addContextToolbar("quickblock",{predicate:We=>{const ke=Ie.fromDom(We),ae=_e.schema.getTextBlockElements(),se=re=>re.dom===_e.getBody();return!it(ke,"data-mce-bogus")&&Nt(ke,'table,[data-mce-bogus="all"]',se).fold(()=>ze(ke,re=>Q(re)in ae&&_e.dom.isEmpty(re.dom),se),En)},items:xe,position:"line",scope:"editor"})},R=_e=>{const xe=se=>_e.dom.getContentEditableParent(se)!=="false",We=se=>se.nodeName==="IMG"||se.nodeName==="FIGURE"&&/image/i.test(se.className),ke=Bt(_e);ke.length>0&&_e.ui.registry.addContextToolbar("imageselection",{predicate:We,items:ke,position:"node"});const ae=Ot(_e);ae.length>0&&_e.ui.registry.addContextToolbar("textselection",{predicate:se=>!We(se)&&!_e.selection.isCollapsed()&&xe(se),items:ae,position:"selection",scope:"editor"})};var qn=()=>{_t.add("quickbars",_e=>{Nn(_e),K(_e),Ve(_e),R(_e)})};qn()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const gt=(et=>Ee=>typeof Ee===et)("function");var Ut=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$t=tinymce.util.Tools.resolve("tinymce.util.Tools");const en=et=>Ee=>Ee.options.get(et),Gt=et=>{const Ee=et.options.register;Ee("save_enablewhendirty",{processor:"boolean",default:!0}),Ee("save_onsavecallback",{processor:"function"}),Ee("save_oncancelcallback",{processor:"function"})},Tt=en("save_enablewhendirty"),Et=en("save_onsavecallback"),rt=en("save_oncancelcallback"),mn=(et,Ee)=>{et.notificationManager.open({text:Ee,type:"error"})},Nn=et=>{const Ee=Ut.DOM.getParent(et.id,"form");if(Tt(et)&&!et.isDirty())return;et.save();const te=Et(et);if(gt(te)){te.call(et,et),et.nodeChanged();return}Ee?(et.setDirty(!1),(!Ee.onsubmit||Ee.onsubmit())&&(typeof Ee.submit=="function"?Ee.submit():mn(et,"Error: Form submit field collision.")),et.nodeChanged()):mn(et,"Error: No form element found.")},Ot=et=>{const Ee=$t.trim(et.startContent),te=rt(et);if(gt(te)){te.call(et,et);return}et.resetContent(Ee)},ct=et=>{et.addCommand("mceSave",()=>{Nn(et)}),et.addCommand("mceCancel",()=>{Ot(et)})},Bt=et=>Ee=>{const te=()=>{Ee.setEnabled(!Tt(et)||et.isDirty())};return te(),et.on("NodeChange dirty",te),()=>et.off("NodeChange dirty",te)},cn=et=>{et.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>et.execCommand("mceSave"),onSetup:Bt(et)}),et.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>et.execCommand("mceCancel"),onSetup:Bt(et)}),et.addShortcut("Meta+S","","mceSave")};var Ze=()=>{_t.add("save",et=>{Gt(et),cn(et),ct(et)})};Ze()})();(function(){const _t=fe=>{let be=fe;return{get:()=>be,set:hn=>{be=hn}}};var It=tinymce.util.Tools.resolve("tinymce.PluginManager");const gt=(fe,be,Rt)=>{var an;return Rt(fe,be.prototype)?!0:((an=fe.constructor)===null||an===void 0?void 0:an.name)===be.name},Ut=fe=>{const be=typeof fe;return fe===null?"null":be==="object"&&Array.isArray(fe)?"array":be==="object"&&gt(fe,String,(Rt,an)=>an.isPrototypeOf(Rt))?"string":be},$t=fe=>be=>Ut(be)===fe,en=fe=>be=>typeof be===fe,Gt=$t("string"),Tt=$t("array"),Et=en("boolean"),rt=fe=>fe==null,mn=fe=>!rt(fe),Nn=en("number"),Ot=()=>{},ct=fe=>()=>fe,Bt=ct(!0),Ze=ct("[!-#%-*,-\\/:;?@\\[-\\]_{}Â¡Â«Â·Â»Â¿;Â·Õ-ÕÖÖÖ¾××××³×´ØØØØØØØÙª-Ù­ÛÜ-Üß·-ß¹à °-à ¾à¡à¥¤à¥¥à¥°à·´à¹à¹à¹à¼-à¼à¼º-à¼½à¾à¿-à¿à¿à¿á-áá»á¡-á¨áá­á®ááá«-á­áµá¶á-áá-áá -á á¥á¥á¨á¨áª -áª¦áª¨-áª­á­-á­ á¯¼-á¯¿á°»-á°¿á±¾á±¿á³â-â§â°-ââ-ââ-ââ½â¾ââããâ¨-âµâââ¦-â¯â¦-â¦â§-â§â§¼â§½â³¹-â³¼â³¾â³¿âµ°â¸-â¸®â¸°â¸±ã-ãã-ãã-ãã°ã½ã ã»ê¾ê¿ê-êê³ê¾ê²-ê·ê¡´-ê¡·ê£ê£ê£¸-ê£ºê¤®ê¤¯ê¥ê§-ê§ê§ê§ê©-ê©ê«ê«ê¯«ï´¾ï´¿ï¸-ï¸ï¸°-ï¹ï¹-ï¹¡ï¹£ï¹¨ï¹ªï¹«ï¼-ï¼ï¼-ï¼ï¼-ï¼ï¼ï¼ï¼ï¼ ï¼»-ï¼½ï¼¿ï½ï½ï½-ï½¥]");class et{constructor(be,Rt){this.tag=be,this.value=Rt}static some(be){return new et(!0,be)}static none(){return et.singletonNone}fold(be,Rt){return this.tag?Rt(this.value):be()}isSome(){return this.tag}isNone(){return!this.tag}map(be){return this.tag?et.some(be(this.value)):et.none()}bind(be){return this.tag?be(this.value):et.none()}exists(be){return this.tag&&be(this.value)}forall(be){return!this.tag||be(this.value)}filter(be){return!this.tag||be(this.value)?this:et.none()}getOr(be){return this.tag?this.value:be}or(be){return this.tag?this:be}getOrThunk(be){return this.tag?this.value:be()}orThunk(be){return this.tag?this:be()}getOrDie(be){if(this.tag)return this.value;throw new Error(be??"Called getOrDie on None")}static from(be){return mn(be)?et.some(be):et.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(be){this.tag&&be(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}et.singletonNone=new et(!1);const Ee=Ze;var te=tinymce.util.Tools.resolve("tinymce.Env"),Je=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ht=Array.prototype.slice,yt=Array.prototype.push,K=(fe,be)=>{const Rt=fe.length,an=new Array(Rt);for(let hn=0;hn<Rt;hn++){const Pn=fe[hn];an[hn]=be(Pn,hn)}return an},xt=(fe,be)=>{for(let Rt=0,an=fe.length;Rt<an;Rt++){const hn=fe[Rt];be(hn,Rt)}},En=(fe,be)=>{for(let Rt=fe.length-1;Rt>=0;Rt--){const an=fe[Rt];be(an,Rt)}},St=(fe,be)=>{if(fe.length===0)return[];{let Rt=be(fe[0]);const an=[];let hn=[];for(let Pn=0,yn=fe.length;Pn<yn;Pn++){const Hn=fe[Pn],no=be(Hn);no!==Rt&&(an.push(hn),hn=[]),Rt=no,hn.push(Hn)}return hn.length!==0&&an.push(hn),an}},he=(fe,be,Rt)=>(xt(fe,(an,hn)=>{Rt=be(Rt,an,hn)}),Rt),Q=fe=>{const be=[];for(let Rt=0,an=fe.length;Rt<an;++Rt){if(!Tt(fe[Rt]))throw new Error("Arr.flatten item "+Rt+" was not an array, input: "+fe);yt.apply(be,fe[Rt])}return be},it=(fe,be)=>Q(K(fe,be)),Me=(fe,be)=>{const Rt=Ht.call(fe,0);return Rt.sort(be),Rt},De=Object.hasOwnProperty,Ft=(fe,be)=>De.call(fe,be);typeof window<"u"||Function("return this;")();const _=9,ge=11,Ue=1,Ie=3,Ae=fe=>fe.dom.nodeType,dn=(fe=>be=>Ae(be)===fe)(Ie),ze=(fe,be,Rt)=>{if(Gt(Rt)||Et(Rt)||Nn(Rt))fe.setAttribute(be,Rt+"");else throw console.error("Invalid call to Attribute.set. Key ",be,":: Value ",Rt,":: Element ",fe),new Error("Attribute value was not simple")},jt=(fe,be,Rt)=>{ze(fe.dom,be,Rt)},Nt=(fe,be)=>{const an=(be||document).createElement("div");if(an.innerHTML=fe,!an.hasChildNodes()||an.childNodes.length>1){const hn="HTML does not have a single root node";throw console.error(hn,fe),new Error(hn)}return qn(an.childNodes[0])},Ve=(fe,be)=>{const an=(be||document).createElement(fe);return qn(an)},R=(fe,be)=>{const an=(be||document).createTextNode(fe);return qn(an)},qn=fe=>{if(fe==null)throw new Error("Node cannot be null or undefined");return{dom:fe}},xe={fromHtml:Nt,fromTag:Ve,fromText:R,fromDom:qn,fromPoint:(fe,be,Rt)=>et.from(fe.dom.elementFromPoint(be,Rt)).map(qn)},We=fe=>fe.nodeType!==Ue&&fe.nodeType!==_&&fe.nodeType!==ge||fe.childElementCount===0,ke=(fe,be)=>{const Rt=be===void 0?document:be.dom;return We(Rt)?[]:K(Rt.querySelectorAll(fe),xe.fromDom)},ae=fe=>et.from(fe.dom.parentNode).map(xe.fromDom),se=fe=>K(fe.dom.childNodes,xe.fromDom),re=(fe,be)=>({element:fe,offset:be}),z=(fe,be)=>{const Rt=se(fe);return Rt.length>0&&be<Rt.length?re(Rt[be],0):re(fe,be)},Y=(fe,be)=>{ae(fe).each(an=>{an.dom.insertBefore(be.dom,fe.dom)})},H=(fe,be)=>{fe.dom.appendChild(be.dom)},Z=(fe,be)=>{Y(fe,be),H(be,fe)},Pe=((fe,be)=>{const Rt=Pn=>{if(!fe(Pn))throw new Error("Can only get "+be+" value of a "+be+" node");return an(Pn).getOr("")},an=Pn=>fe(Pn)?et.from(Pn.dom.nodeValue):et.none();return{get:Rt,getOption:an,set:(Pn,yn)=>{if(!fe(Pn))throw new Error("Can only set raw "+be+" value of a "+be+" node");Pn.dom.nodeValue=yn}}})(dn,"text"),Yt=fe=>Pe.get(fe),rn=(fe,be,Rt)=>(fe.compareDocumentPosition(be)&Rt)!==0,ro=(fe,be)=>rn(fe,be,Node.DOCUMENT_POSITION_PRECEDING),uo=(fe,be)=>ke(be,fe);var Qn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const kn=(fe,be)=>fe.isBlock(be)||Ft(fe.schema.getVoidElements(),be.nodeName),ao=(fe,be)=>fe.getContentEditable(be)==="false",Re=(fe,be)=>fe.getContentEditable(be)==="true"&&be.parentNode&&fe.getContentEditableParent(be.parentNode)==="false",Ye=(fe,be)=>!fe.isBlock(be)&&Ft(fe.schema.getWhitespaceElements(),be.nodeName),Lt=(fe,be)=>kn(fe,be)||ao(fe,be)||Ye(fe,be)||Re(fe,be),fn=fe=>fe.nodeType===3,On=()=>({sOffset:0,fOffset:0,elements:[]}),Tn=(fe,be)=>z(xe.fromDom(fe),be),Ro=(fe,be,Rt,an,hn,Pn=!0)=>{let yn=Pn?be(!1):Rt;for(;yn;){const Hn=ao(fe,yn);if(Hn||Ye(fe,yn)){if(Hn?an.cef(yn):an.boundary(yn))break;yn=be(!0);continue}else if(kn(fe,yn)){if(an.boundary(yn))break}else fn(yn)&&an.text(yn);if(yn===hn)break;yn=be(!1)}},ks=(fe,be,Rt,an,hn)=>{var Pn;if(Lt(fe,Rt))return;const yn=(Pn=fe.getParent(an,fe.isBlock))!==null&&Pn!==void 0?Pn:fe.getRoot(),Hn=new Qn(Rt,yn),no=hn?Hn.next.bind(Hn):Hn.prev.bind(Hn);Ro(fe,no,Rt,{boundary:Bt,cef:Bt,text:Co=>{hn?be.fOffset+=Co.length:be.sOffset+=Co.length,be.elements.push(xe.fromDom(Co))}})},qe=(fe,be,Rt,an,hn,Pn=!0)=>{const yn=new Qn(Rt,be),Hn=[];let no=On();ks(fe,no,Rt,be,!1);const Co=()=>(no.elements.length>0&&(Hn.push(no),no=On()),!1);return Ro(fe,yn.next.bind(yn),Rt,{boundary:Co,cef:Os=>(Co(),hn&&Hn.push(...hn.cef(Os)),!1),text:Os=>{no.elements.push(xe.fromDom(Os)),hn&&hn.text(Os,no)}},an,Pn),an&&ks(fe,no,an,be,!0),Co(),Hn},Le=(fe,be)=>{const Rt=Tn(be.startContainer,be.startOffset),an=Rt.element.dom,hn=Tn(be.endContainer,be.endOffset),Pn=hn.element.dom;return qe(fe,be.commonAncestorContainer,an,Pn,{text:(yn,Hn)=>{yn===Pn?Hn.fOffset+=yn.length-hn.offset:yn===an&&(Hn.sOffset+=Rt.offset)},cef:yn=>{const Hn=it(uo(xe.fromDom(yn),"*[contenteditable=true]"),no=>{const Co=no.dom;return qe(fe,Co,Co)});return Me(Hn,(no,Co)=>ro(no.elements[0].dom,Co.elements[0].dom)?1:-1)}},!1)},un=(fe,be)=>be.collapsed?[]:Le(fe,be),ln=(fe,be)=>{const Rt=fe.createRng();return Rt.selectNode(be),un(fe,Rt)},Jt=(fe,be)=>it(be,Rt=>ln(fe,Rt)),Kn=(fe,be,Rt=0,an=fe.length)=>{const hn=be.regex;hn.lastIndex=Rt;const Pn=[];let yn;for(;yn=hn.exec(fe);){const Hn=yn[be.matchIndex],no=yn.index+yn[0].indexOf(Hn),Co=no+Hn.length;if(Co>an)break;Pn.push({start:no,finish:Co}),hn.lastIndex=Co}return Pn},Ts=(fe,be)=>{const Rt=he(fe,(an,hn)=>{const Pn=Yt(hn),yn=an.last,Hn=yn+Pn.length,no=it(be,(Co,Os)=>Co.start<Hn&&Co.finish>yn?[{element:hn,start:Math.max(yn,Co.start)-yn,finish:Math.min(Hn,Co.finish)-yn,matchId:Os}]:[]);return{results:an.results.concat(no),last:Hn}},{results:[],last:0}).results;return St(Rt,an=>an.matchId)},Tr=(fe,be)=>it(be,Rt=>{const an=Rt.elements,hn=K(an,Yt).join(""),Pn=Kn(hn,fe,Rt.sOffset,hn.length-Rt.fOffset);return Ts(an,Pn)}),ma=(fe,be)=>{En(fe,(Rt,an)=>{En(Rt,hn=>{const Pn=xe.fromDom(be.cloneNode(!1));jt(Pn,"data-mce-index",an);const yn=hn.element.dom;if(yn.length===hn.finish&&hn.start===0)Z(hn.element,Pn);else{yn.length!==hn.finish&&yn.splitText(hn.finish);const Hn=yn.splitText(hn.start);Z(xe.fromDom(Hn),Pn)}})})},bs=(fe,be,Rt,an)=>{const hn=ln(fe,Rt),Pn=Tr(be,hn);return ma(Pn,an),Pn.length},vc=(fe,be,Rt,an)=>{const hn=Rt.getBookmark(),Pn=fe.select("td[data-mce-selected],th[data-mce-selected]"),yn=Pn.length>0?Jt(fe,Pn):un(fe,Rt.getRng()),Hn=Tr(be,yn);return ma(Hn,an),Rt.moveToBookmark(hn),Hn.length},ys=fe=>fe.getAttribute("data-mce-index"),cs=(fe,be,Rt,an)=>{const hn=fe.dom.create("span",{"data-mce-bogus":1});hn.className="mce-match-marker";const Pn=fe.getBody();return q(fe,be,!1),an?vc(fe.dom,Rt,fe.selection,hn):bs(fe.dom,Rt,Pn,hn)},go=fe=>{var be;const Rt=fe.parentNode;fe.firstChild&&Rt.insertBefore(fe.firstChild,fe),(be=fe.parentNode)===null||be===void 0||be.removeChild(fe)},mr=(fe,be)=>{const Rt=[],an=Je.toArray(fe.getBody().getElementsByTagName("span"));if(an.length)for(let hn=0;hn<an.length;hn++){const Pn=ys(an[hn]);Pn===null||!Pn.length||Pn===be.toString()&&Rt.push(an[hn])}return Rt},Zr=(fe,be,Rt)=>{const an=be.get();let hn=an.index;const Pn=fe.dom;Rt?hn+1===an.count?hn=0:hn++:hn-1===-1?hn=an.count-1:hn--,Pn.removeClass(mr(fe,an.index),"mce-match-marker-selected");const yn=mr(fe,hn);return yn.length?(Pn.addClass(mr(fe,hn),"mce-match-marker-selected"),fe.selection.scrollIntoView(yn[0]),hn):-1},Is=(fe,be)=>{const Rt=be.parentNode;fe.remove(be),Rt&&fe.isEmpty(Rt)&&fe.remove(Rt)},fa=(fe,be)=>{const an="("+fe.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return be?`(?:^|\\s|${Ee()})`+an+`(?=$|\\s|${Ee()})`:an},jr=(fe,be,Rt,an,hn,Pn)=>{const yn=fe.selection,Hn=fa(Rt,hn),no=yn.isForward(),Co={regex:new RegExp(Hn,an?"g":"gi"),matchIndex:1},Os=cs(fe,be,Co,Pn);if(te.browser.isSafari()&&yn.setRng(yn.getRng(),no),Os){const fr=Zr(fe,be,!0);be.set({index:fr,count:Os,text:Rt,matchCase:an,wholeWord:hn,inSelection:Pn})}return Os},rc=(fe,be)=>{const Rt=Zr(fe,be,!0);be.set({...be.get(),index:Rt})},Xs=(fe,be)=>{const Rt=Zr(fe,be,!1);be.set({...be.get(),index:Rt})},Ta=fe=>{const be=ys(fe);return be!==null&&be.length>0},ye=(fe,be,Rt,an,hn)=>{const Pn=be.get(),yn=Pn.index;let Hn,no=yn;an=an!==!1;const Co=fe.getBody(),Os=Je.grep(Je.toArray(Co.getElementsByTagName("span")),Ta);for(let fr=0;fr<Os.length;fr++){const qo=ys(Os[fr]);let Kc=Hn=parseInt(qo,10);if(hn||Kc===Pn.index){for(Rt.length?(Os[fr].innerText=Rt,go(Os[fr])):Is(fe.dom,Os[fr]);Os[++fr];)if(Kc=parseInt(ys(Os[fr]),10),Kc===Hn)Is(fe.dom,Os[fr]);else{fr--;break}an&&no--}else Hn>yn&&Os[fr].setAttribute("data-mce-index",String(Hn-1))}return be.set({...Pn,count:hn?0:Pn.count-1,index:no}),an?rc(fe,be):Xs(fe,be),!hn&&be.get().count>0},q=(fe,be,Rt)=>{let an,hn;const Pn=be.get(),yn=Je.toArray(fe.getBody().getElementsByTagName("span"));for(let Hn=0;Hn<yn.length;Hn++){const no=ys(yn[Hn]);no!==null&&no.length&&(no===Pn.index.toString()&&(an||(an=yn[Hn].firstChild),hn=yn[Hn].firstChild),go(yn[Hn]))}if(be.set({...Pn,index:-1,count:0,text:""}),an&&hn){const Hn=fe.dom.createRng();return Hn.setStart(an,0),Hn.setEnd(hn,hn.data.length),Rt!==!1&&fe.selection.setRng(Hn),Hn}else return},lt=(fe,be)=>be.get().count>1,wt=(fe,be)=>be.get().count>1,Zn=(fe,be)=>({done:Hn=>q(fe,be,Hn),find:(Hn,no,Co,Os=!1)=>jr(fe,be,Hn,no,Co,Os),next:()=>rc(fe,be),prev:()=>Xs(fe,be),replace:(Hn,no,Co)=>ye(fe,be,Hn,no,Co)}),eo=fe=>{const be=_t(et.none()),Rt=()=>be.get().each(fe);return{clear:()=>{Rt(),be.set(et.none())},isSet:()=>be.get().isSome(),get:()=>be.get(),set:Hn=>{Rt(),be.set(et.some(Hn))}}},In=()=>{const fe=eo(Ot);return{...fe,on:Rt=>fe.get().each(Rt)}},is=(fe,be)=>{const Rt=In();fe.undoManager.add();const an=Je.trim(fe.selection.getContent({format:"text"})),hn=ls=>{ls.setEnabled("next",lt(fe,be)),ls.setEnabled("prev",wt(fe,be))},Pn=ls=>{const Cs=ls.getData(),xs=be.get();be.set({...xs,matchCase:Cs.matchcase,wholeWord:Cs.wholewords,inSelection:Cs.inselection})},yn=(ls,Cs)=>{xt(["replace","replaceall","prev","next"],Mr=>ls.setEnabled(Mr,!Cs))},Hn=ls=>{fe.windowManager.alert("Could not find the specified string.",()=>{ls.focus("findtext")})},no=(ls,Cs)=>{te.browser.isSafari()&&te.deviceType.isTouch()&&(Cs==="find"||Cs==="replace"||Cs==="replaceall")&&ls.focus(Cs)},Co=ls=>{q(fe,be,!1),yn(ls,!0),hn(ls)},Os=ls=>{const Cs=ls.getData(),xs=be.get();if(!Cs.findtext.length){Co(ls);return}if(xs.text===Cs.findtext&&xs.matchCase===Cs.matchcase&&xs.wholeWord===Cs.wholewords)rc(fe,be);else{const Fr=jr(fe,be,Cs.findtext,Cs.matchcase,Cs.wholewords,Cs.inselection);Fr<=0&&Hn(ls),yn(ls,Fr===0)}hn(ls)},fr=be.get(),qo={findtext:an,replacetext:"",wholewords:fr.wholeWord,matchcase:fr.matchCase,inselection:fr.inSelection},Kc={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:qo,onChange:(ls,Cs)=>{Cs.name==="findtext"&&be.get().count>0&&Co(ls)},onAction:(ls,Cs)=>{const xs=ls.getData();switch(Cs.name){case"find":Os(ls);break;case"replace":ye(fe,be,xs.replacetext)?hn(ls):Co(ls);break;case"replaceall":ye(fe,be,xs.replacetext,!0,!0),Co(ls);break;case"prev":Xs(fe,be),hn(ls);break;case"next":rc(fe,be),hn(ls);break;case"matchcase":case"wholewords":case"inselection":Pn(ls),Co(ls);break}no(ls,Cs.name)},onSubmit:ls=>{Os(ls),no(ls,"find")},onClose:()=>{fe.focus(),q(fe,be),fe.undoManager.add()}};Rt.set(fe.windowManager.open(Kc,{inline:"toolbar"}))},ts=(fe,be)=>{fe.addCommand("SearchReplace",()=>{is(fe,be)})},ko=(fe,be)=>()=>{is(fe,be)},ar=(fe,be)=>{fe.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:ko(fe,be),icon:"search"}),fe.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:ko(fe,be),icon:"search"}),fe.shortcuts.add("Meta+F","",ko(fe,be))};var Wt=()=>{It.add("searchreplace",fe=>{const be=_t({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return ts(fe,be),ar(fe,be),Zn(fe,be)})};Wt()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(C,k,I)=>{var V;return I(C,k.prototype)?!0:((V=C.constructor)===null||V===void 0?void 0:V.name)===k.name},gt=C=>{const k=typeof C;return C===null?"null":k==="object"&&Array.isArray(C)?"array":k==="object"&&It(C,String,(I,V)=>V.isPrototypeOf(I))?"string":k},Ut=C=>k=>gt(k)===C,$t=C=>k=>typeof k===C,en=C=>k=>C===k,Gt=Ut("string"),Tt=Ut("array"),Et=$t("boolean"),rt=en(void 0),mn=C=>C==null,Nn=C=>!mn(C),Ot=$t("function"),ct=$t("number"),Bt=()=>{},cn=(C,k)=>I=>C(k(I)),Ze=C=>()=>C,et=C=>C,Ee=(C,k)=>C===k;function te(C,...k){return(...I)=>{const V=k.concat(I);return C.apply(null,V)}}const Je=C=>{C()},Ht=Ze(!1),yt=Ze(!0);class K{constructor(k,I){this.tag=k,this.value=I}static some(k){return new K(!0,k)}static none(){return K.singletonNone}fold(k,I){return this.tag?I(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?K.some(k(this.value)):K.none()}bind(k){return this.tag?k(this.value):K.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:K.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k??"Called getOrDie on None")}static from(k){return Nn(k)?K.some(k):K.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}K.singletonNone=new K(!1);const xt=Object.keys,En=Object.hasOwnProperty,St=(C,k)=>{const I=xt(C);for(let V=0,Te=I.length;V<Te;V++){const ht=I[V],Kt=C[ht];k(Kt,ht)}},he=C=>(k,I)=>{C[I]=k},Q=(C,k,I,V)=>{St(C,(Te,ht)=>{(k(Te,ht)?I:V)(Te,ht)})},it=(C,k)=>{const I={};return Q(C,k,he(I),Bt),I},Me=(C,k)=>{const I=[];return St(C,(V,Te)=>{I.push(k(V,Te))}),I},De=C=>Me(C,et),Ft=C=>xt(C).length,_=(C,k)=>ge(C,k)?K.from(C[k]):K.none(),ge=(C,k)=>En.call(C,k),Ue=(C,k)=>ge(C,k)&&C[k]!==void 0&&C[k]!==null,Ie=Array.prototype.indexOf,Ae=Array.prototype.push,tn=(C,k)=>Ie.call(C,k),dn=(C,k)=>tn(C,k)>-1,ze=(C,k)=>{for(let I=0,V=C.length;I<V;I++){const Te=C[I];if(k(Te,I))return!0}return!1},jt=(C,k)=>{const I=[];for(let V=0;V<C;V++)I.push(k(V));return I},Nt=(C,k)=>{const I=C.length,V=new Array(I);for(let Te=0;Te<I;Te++){const ht=C[Te];V[Te]=k(ht,Te)}return V},Ve=(C,k)=>{for(let I=0,V=C.length;I<V;I++){const Te=C[I];k(Te,I)}},R=(C,k)=>{for(let I=C.length-1;I>=0;I--){const V=C[I];k(V,I)}},qn=(C,k)=>{const I=[],V=[];for(let Te=0,ht=C.length;Te<ht;Te++){const Kt=C[Te];(k(Kt,Te)?I:V).push(Kt)}return{pass:I,fail:V}},_e=(C,k)=>{const I=[];for(let V=0,Te=C.length;V<Te;V++){const ht=C[V];k(ht,V)&&I.push(ht)}return I},xe=(C,k,I)=>(R(C,(V,Te)=>{I=k(I,V,Te)}),I),We=(C,k,I)=>(Ve(C,(V,Te)=>{I=k(I,V,Te)}),I),ke=(C,k,I)=>{for(let V=0,Te=C.length;V<Te;V++){const ht=C[V];if(k(ht,V))return K.some(ht);if(I(ht,V))break}return K.none()},ae=(C,k)=>ke(C,k,Ht),se=C=>{const k=[];for(let I=0,V=C.length;I<V;++I){if(!Tt(C[I]))throw new Error("Arr.flatten item "+I+" was not an array, input: "+C);Ae.apply(k,C[I])}return k},re=(C,k)=>se(Nt(C,k)),z=(C,k)=>{for(let I=0,V=C.length;I<V;++I){const Te=C[I];if(k(Te,I)!==!0)return!1}return!0},Y=(C,k)=>{const I={};for(let V=0,Te=C.length;V<Te;V++){const ht=C[V];I[String(ht)]=k(ht,V)}return I},H=(C,k)=>k>=0&&k<C.length?K.some(C[k]):K.none(),Z=C=>H(C,0),Be=C=>H(C,C.length-1),Pe=(C,k)=>{for(let I=0;I<C.length;I++){const V=k(C[I],I);if(V.isSome())return V}return K.none()},Yt=(C,k)=>{const V=(k||document).createElement("div");if(V.innerHTML=C,!V.hasChildNodes()||V.childNodes.length>1){const Te="HTML does not have a single root node";throw console.error(Te,C),new Error(Te)}return uo(V.childNodes[0])},rn=(C,k)=>{const V=(k||document).createElement(C);return uo(V)},ro=(C,k)=>{const V=(k||document).createTextNode(C);return uo(V)},uo=C=>{if(C==null)throw new Error("Node cannot be null or undefined");return{dom:C}},kn={fromHtml:Yt,fromTag:rn,fromText:ro,fromDom:uo,fromPoint:(C,k,I)=>K.from(C.dom.elementFromPoint(k,I)).map(uo)};typeof window<"u"||Function("return this;")();const ao=8,Re=9,Ye=11,Lt=1,fn=3,On=C=>C.dom.nodeName.toLowerCase(),Tn=C=>C.dom.nodeType,Ro=C=>k=>Tn(k)===C,ks=C=>Tn(C)===ao||On(C)==="#comment",qe=Ro(Lt),Le=Ro(fn),un=Ro(Re),ln=Ro(Ye),Jt=C=>k=>qe(k)&&On(k)===C,Kn=(C,k)=>{const I=C.dom;if(I.nodeType!==Lt)return!1;{const V=I;if(V.matches!==void 0)return V.matches(k);if(V.msMatchesSelector!==void 0)return V.msMatchesSelector(k);if(V.webkitMatchesSelector!==void 0)return V.webkitMatchesSelector(k);if(V.mozMatchesSelector!==void 0)return V.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},Ts=C=>C.nodeType!==Lt&&C.nodeType!==Re&&C.nodeType!==Ye||C.childElementCount===0,Tr=(C,k)=>{const I=k===void 0?document:k.dom;return Ts(I)?[]:Nt(I.querySelectorAll(C),kn.fromDom)},ma=(C,k)=>{const I=k===void 0?document:k.dom;return Ts(I)?K.none():K.from(I.querySelector(C)).map(kn.fromDom)},bs=(C,k)=>C.dom===k.dom,vc=Kn,ys=C=>kn.fromDom(C.dom.ownerDocument),cs=C=>un(C)?C:ys(C),go=C=>K.from(C.dom.parentNode).map(kn.fromDom),mr=(C,k)=>{const I=Ot(k)?k:Ht;let V=C.dom;const Te=[];for(;V.parentNode!==null&&V.parentNode!==void 0;){const ht=V.parentNode,Kt=kn.fromDom(ht);if(Te.push(Kt),I(Kt)===!0)break;V=ht}return Te},Zr=C=>K.from(C.dom.previousSibling).map(kn.fromDom),Is=C=>K.from(C.dom.nextSibling).map(kn.fromDom),fa=C=>Nt(C.dom.childNodes,kn.fromDom),jr=(C,k)=>{const I=C.dom.childNodes;return K.from(I[k]).map(kn.fromDom)},rc=C=>jr(C,0),Xs=C=>ln(C)&&Nn(C.dom.host),ye=Ot(Element.prototype.attachShadow)&&Ot(Node.prototype.getRootNode)?C=>kn.fromDom(C.dom.getRootNode()):cs,q=C=>{const k=ye(C);return Xs(k)?K.some(k):K.none()},lt=C=>kn.fromDom(C.dom.host),wt=C=>{const k=Le(C)?C.dom.parentNode:C.dom;if(k==null||k.ownerDocument===null)return!1;const I=k.ownerDocument;return q(kn.fromDom(k)).fold(()=>I.body.contains(k),cn(wt,lt))},Zn=(C,k)=>_e(fa(C),k),eo=(C,k)=>{let I=[];return Ve(fa(C),V=>{k(V)&&(I=I.concat([V])),I=I.concat(eo(V,k))}),I},In=(C,k)=>Zn(C,I=>Kn(I,k)),is=(C,k)=>Tr(k,C);var ts=(C,k,I,V,Te)=>C(I,V)?K.some(I):Ot(Te)&&Te(I)?K.none():k(I,V,Te);const ko=(C,k,I)=>{let V=C.dom;const Te=Ot(I)?I:Ht;for(;V.parentNode;){V=V.parentNode;const ht=kn.fromDom(V);if(k(ht))return K.some(ht);if(Te(ht))break}return K.none()},ar=(C,k)=>{const I=Te=>k(kn.fromDom(Te));return ae(C.dom.childNodes,I).map(kn.fromDom)},Wt=(C,k,I)=>ko(C,V=>Kn(V,k),I),fe=(C,k)=>ar(C,I=>Kn(I,k)),be=(C,k)=>ma(k,C),Rt=(C,k,I)=>ts((Te,ht)=>Kn(Te,ht),Wt,C,k,I),an=(C,k,I)=>{if(Gt(I)||Et(I)||ct(I))C.setAttribute(k,I+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",I,":: Element ",C),new Error("Attribute value was not simple")},hn=(C,k,I)=>{an(C.dom,k,I)},Pn=(C,k)=>{const I=C.dom;St(k,(V,Te)=>{an(I,Te,V)})},yn=(C,k)=>{const I=C.dom.getAttribute(k);return I===null?void 0:I},Hn=(C,k)=>K.from(yn(C,k)),no=(C,k)=>{C.dom.removeAttribute(k)},Co=C=>We(C.dom.attributes,(k,I)=>(k[I.name]=I.value,k),{}),Os=(C,k,I=Ee)=>C.exists(V=>I(V,k)),fr=C=>{const k=[],I=V=>{k.push(V)};for(let V=0;V<C.length;V++)C[V].each(I);return k},qo=(C,k,I)=>C.isSome()&&k.isSome()?K.some(I(C.getOrDie(),k.getOrDie())):K.none(),Kc=C=>C.bind(et),ls=(C,k)=>C?K.some(k):K.none(),Cs=(C,k)=>C.substring(k),xs=(C,k,I)=>k===""||C.length>=k.length&&C.substr(I,I+k.length)===k,Fr=(C,k)=>Mr(C,k)?Cs(C,k.length):C,Mr=(C,k)=>xs(C,k,0),Fa=(C=>k=>k.replace(C,""))(/^\s+|\s+$/g),Yc=C=>C.length>0,Ti=C=>!Yc(C),Xc=(C,k=10)=>{const I=parseInt(C,k);return isNaN(I)?K.none():K.some(I)},Li=C=>{const k=parseFloat(C);return isNaN(k)?K.none():K.some(k)},zs=C=>C.style!==void 0&&Ot(C.style.getPropertyValue),mi=(C,k,I)=>{if(!Gt(I))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",I,":: Element ",C),new Error("CSS value must be a string: "+I);zs(C)&&C.style.setProperty(k,I)},ga=(C,k)=>{zs(C)&&C.style.removeProperty(k)},ac=(C,k,I)=>{const V=C.dom;mi(V,k,I)},fi=(C,k)=>{const I=C.dom,Te=window.getComputedStyle(I).getPropertyValue(k);return Te===""&&!wt(C)?Pc(I,k):Te},Pc=(C,k)=>zs(C)?C.style.getPropertyValue(k):"",sa=(C,k)=>{const I=C.dom,V=Pc(I,k);return K.from(V).filter(Te=>Te.length>0)},Ei=(C,k)=>{const I=C.dom;ga(I,k),Os(Hn(C,"style").map(Fa),"")&&no(C,"style")},yc=(C,k,I=0)=>Hn(C,k).map(V=>parseInt(V,10)).getOr(I),Hi=(C,k)=>Js(C,k,yt),Js=(C,k,I)=>re(fa(C),V=>Kn(V,k)?I(V)?[V]:[]:Js(V,k,I)),ha=["tfoot","thead","tbody","colgroup"],X=C=>dn(ha,C),Ce=(C,k)=>({rows:C,columns:k}),Fe=(C,k,I)=>({element:C,rowspan:k,colspan:I}),Ct=(C,k,I,V,Te,ht)=>({element:C,rowspan:k,colspan:I,row:V,column:Te,isLocked:ht}),Xt=(C,k,I)=>({element:C,cells:k,section:I}),mo=(C,k,I,V)=>({startRow:C,startCol:k,finishRow:I,finishCol:V}),Ko=(C,k,I)=>({element:C,colspan:k,column:I}),Er=(C,k)=>({element:C,columns:k}),Ls=(C,k,I=Ht)=>{if(I(k))return K.none();if(dn(C,On(k)))return K.some(k);const V=Te=>Kn(Te,"table")||I(Te);return Wt(k,C.join(","),V)},Nr=(C,k)=>Ls(["td","th"],C,k),_r=C=>Hi(C,"th,td"),$r=C=>Kn(C,"colgroup")?In(C,"col"):re(Qr(C),k=>In(k,"col")),Ia=(C,k)=>Rt(C,"table",k),Gr=C=>Hi(C,"tr"),Qr=C=>Ia(C).fold(Ze([]),k=>In(k,"colgroup")),Jc=(C,k)=>Nt(C,I=>{if(On(I)==="colgroup"){const V=Nt($r(I),Te=>{const ht=yc(Te,"span",1);return Fe(Te,1,ht)});return Xt(I,V,"colgroup")}else{const V=Nt(_r(I),Te=>{const ht=yc(Te,"rowspan",1),Kt=yc(Te,"colspan",1);return Fe(Te,ht,Kt)});return Xt(I,V,k(I))}}),Qc=C=>go(C).map(k=>{const I=On(k);return X(I)?I:"tbody"}).getOr("tbody"),To=C=>{const k=Gr(C),V=[...Qr(C),...k];return Jc(V,Qc)},us="data-snooker-locked-cols",sr=C=>Hn(C,us).bind(k=>K.from(k.match(/\d+/g))).map(k=>Y(k,yt)),B=(C,k)=>C+","+k,J=(C,k,I)=>K.from(C.access[B(k,I)]),de=(C,k,I)=>{const V=Xe(C,Te=>I(k,Te.element));return V.length>0?K.some(V[0]):K.none()},Xe=(C,k)=>{const I=re(C.all,V=>V.cells);return _e(I,k)},$n=C=>{const k={};let I=0;return Ve(C.cells,V=>{const Te=V.colspan;jt(Te,ht=>{const Kt=I+ht;k[Kt]=Ko(V.element,Te,Kt)}),I+=Te}),k},Mo=C=>{const k={},I=[],Te=Z(C).map(oi=>oi.element).bind(Ia).bind(sr).getOr({});let ht=0,Kt=0,Mn=0;const{pass:Lo,fail:Go}=qn(C,oi=>oi.section==="colgroup");Ve(Go,oi=>{const ul=[];Ve(oi.cells,Ru=>{let hd=0;for(;k[B(Mn,hd)]!==void 0;)hd++;const ph=Ue(Te,hd.toString()),pd=Ct(Ru.element,Ru.rowspan,Ru.colspan,Mn,hd,ph);for(let Mu=0;Mu<Ru.colspan;Mu++)for(let Jm=0;Jm<Ru.rowspan;Jm++){const Nu=Mn+Jm,bi=hd+Mu,bh=B(Nu,bi);k[bh]=pd,Kt=Math.max(Kt,bi+1)}ul.push(pd)}),ht++,I.push(Xt(oi.element,ul,oi.section)),Mn++});const{columns:ir,colgroups:Ws}=Be(Lo).map(oi=>{const ul=$n(oi);return{colgroups:[Er(oi.element,De(ul))],columns:ul}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Ce(ht,Kt),access:k,all:I,columns:ir,colgroups:Ws}},Qs={fromTable:C=>{const k=To(C);return Mo(k)},generate:Mo,getAt:J,findItem:de,filterItems:Xe,justCells:C=>re(C.all,k=>k.cells),justColumns:C=>De(C.columns),hasColumns:C=>xt(C.columns).length>0,getColumnAt:(C,k)=>K.from(C.columns[k])};var Ur=tinymce.util.Tools.resolve("tinymce.util.Tools");const nl=(C,k,I)=>{const V=C.select("td,th",k);let Te;for(let ht=0;ht<V.length;ht++){const Kt=C.getStyle(V[ht],I);if(rt(Te)&&(Te=Kt),Te!==Kt)return""}return Te},Po=(C,k,I)=>{Ur.each("left center right".split(" "),V=>{V!==I&&C.formatter.remove("align"+V,{},k)}),I&&C.formatter.apply("align"+I,{},k)},ne=(C,k,I)=>{Ur.each("top middle bottom".split(" "),V=>{V!==I&&C.formatter.remove("valign"+V,{},k)}),I&&C.formatter.apply("valign"+I,{},k)},me=(C,k,I)=>{C.dispatch("TableModified",{...I,table:k})},tt=(C,k)=>Li(C).getOr(k),ft=(C,k,I)=>tt(fi(C,k),I),Vn=(C,k,I,V)=>{const Te=ft(C,`padding-${I}`,0),ht=ft(C,`padding-${V}`,0),Kt=ft(C,`border-${I}-width`,0),Mn=ft(C,`border-${V}-width`,0);return k-Te-ht-Kt-Mn},oo=(C,k)=>{const I=C.dom,V=I.getBoundingClientRect().width||I.offsetWidth;return k==="border-box"?V:Vn(C,V,"left","right")},Yo=C=>oo(C,"content-box");var zi=tinymce.util.Tools.resolve("tinymce.Env");const Qo="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Ds=jt(5,C=>{const k=`${C+1}px`;return{title:k,value:k}}),Ea=Nt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],C=>({title:C,value:C.toLowerCase()})),cc="100%",Vi=C=>{var k;const I=C.dom,V=(k=I.getParent(C.selection.getStart(),I.isBlock))!==null&&k!==void 0?k:C.getBody();return Yo(kn.fromDom(V))+"px"},hr=(C,k)=>Bm(C)||!Fc(C)?k:ql(C)?{...k,width:Vi(C)}:{...k,width:cc},or=(C,k)=>Bm(C)||Fc(C)?k:ql(C)?{...k,width:Vi(C)}:{...k,width:cc},Rs=C=>k=>k.options.get(C),Lr=C=>{const k=C.options.register;k("table_border_widths",{processor:"object[]",default:Ds}),k("table_border_styles",{processor:"object[]",default:Ea}),k("table_cell_advtab",{processor:"boolean",default:!0}),k("table_row_advtab",{processor:"boolean",default:!0}),k("table_advtab",{processor:"boolean",default:!0}),k("table_appearance_options",{processor:"boolean",default:!0}),k("table_grid",{processor:"boolean",default:!zi.deviceType.isTouch()}),k("table_cell_class_list",{processor:"object[]",default:[]}),k("table_row_class_list",{processor:"object[]",default:[]}),k("table_class_list",{processor:"object[]",default:[]}),k("table_toolbar",{processor:"string",default:Qo}),k("table_background_color_map",{processor:"object[]",default:[]}),k("table_border_color_map",{processor:"object[]",default:[]})},wc=Rs("table_sizing_mode"),El=Rs("table_border_widths"),qr=Rs("table_border_styles"),Gl=Rs("table_cell_advtab"),Cu=Rs("table_row_advtab"),ic=Rs("table_advtab"),Su=Rs("table_appearance_options"),Qg=Rs("table_grid"),Fc=Rs("table_style_by_css"),_l=Rs("table_cell_class_list"),cd=Rs("table_row_class_list"),La=Rs("table_class_list"),ol=Rs("table_toolbar"),xu=Rs("table_background_color_map"),Vd=Rs("table_border_color_map"),ql=C=>wc(C)==="fixed",Bm=C=>wc(C)==="responsive",Ud=C=>{const k=C.options,I=k.get("table_default_styles");return k.isSet("table_default_styles")?I:hr(C,I)},_i=C=>{const k=C.options,I=k.get("table_default_attributes");return k.isSet("table_default_attributes")?I:or(C,I)},eh=C=>C.nodeName.toLowerCase(),Pm=C=>kn.fromDom(C.getBody()),ku=C=>k=>bs(k,Pm(C)),Wd=C=>C?C.replace(/px$/,""):"",Ai=C=>/^\d+(\.\d+)?$/.test(C)?C+"px":C,ve=C=>kn.fromDom(C.selection.getStart()),Kl=C=>kn.fromDom(C.selection.getEnd()),Oi=(C,k)=>k.column>=C.startCol&&k.column+k.colspan-1<=C.finishCol&&k.row>=C.startRow&&k.row+k.rowspan-1<=C.finishRow,Fm=(C,k)=>{let I=!0;const V=te(Oi,k);for(let Te=k.startRow;Te<=k.finishRow;Te++)for(let ht=k.startCol;ht<=k.finishCol;ht++)I=I&&Qs.getAt(C,Te,ht).exists(V);return I?K.some(k):K.none()},Im=(C,k)=>mo(Math.min(C.row,k.row),Math.min(C.column,k.column),Math.max(C.row+C.rowspan-1,k.row+k.rowspan-1),Math.max(C.column+C.colspan-1,k.column+k.colspan-1)),th=(C,k,I)=>{const V=Qs.findItem(C,k,bs),Te=Qs.findItem(C,I,bs);return V.bind(ht=>Te.map(Kt=>Im(ht,Kt)))},Bs=(C,k,I)=>th(C,k,I).bind(V=>Fm(C,V)),qa=(C,k,I)=>{const V=Vf(C);return Bs(V,k,I)},Vf=Qs.fromTable,Ui=(C,k)=>{go(C).each(V=>{V.dom.insertBefore(k.dom,C.dom)})},Lm=(C,k)=>{Is(C).fold(()=>{go(C).each(Te=>{Cc(Te,k)})},V=>{Ui(V,k)})},Tu=(C,k)=>{rc(C).fold(()=>{Cc(C,k)},V=>{C.dom.insertBefore(k.dom,V.dom)})},Cc=(C,k)=>{C.dom.appendChild(k.dom)},Uf=(C,k)=>{Ui(C,k),Cc(k,C)},id=(C,k)=>{Ve(k,(I,V)=>{const Te=V===0?C:k[V-1];Lm(Te,I)})},nh=(C,k)=>{Ve(k,I=>{Cc(C,I)})},Ic=C=>{const k=C.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},Zd=C=>{const k=fa(C);k.length>0&&id(C,k),Ic(C)},ld=((C,k)=>{const I=ht=>{if(!C(ht))throw new Error("Can only get "+k+" value of a "+k+" node");return V(ht).getOr("")},V=ht=>C(ht)?K.from(ht.dom.nodeValue):K.none();return{get:I,getOption:V,set:(ht,Kt)=>{if(!C(ht))throw new Error("Can only set raw "+k+" value of a "+k+" node");ht.dom.nodeValue=Kt}}})(Le,"text"),pa=C=>ld.get(C),jd=(C,k)=>ld.set(C,k);var Wf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],zm=()=>{const C=Go=>kn.fromDom(Go.dom.cloneNode(!1)),k=Go=>cs(Go).dom,I=Go=>qe(Go)?On(Go)==="body"?!0:dn(Wf,On(Go)):!1,V=Go=>qe(Go)?dn(["br","img","hr","input"],On(Go)):!1,Te=Go=>qe(Go)&&yn(Go,"contenteditable")==="false",ht=(Go,ir)=>Go.dom.compareDocumentPosition(ir.dom),Kt=(Go,ir)=>{const Ws=Co(Go);Pn(ir,Ws)},Mn=Go=>{const ir=On(Go);return dn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ir)},Lo=Go=>qe(Go)?Hn(Go,"lang"):K.none();return{up:Ze({selector:Wt,closest:Rt,predicate:ko,all:mr}),down:Ze({selector:is,predicate:eo}),styles:Ze({get:fi,getRaw:sa,set:ac,remove:Ei}),attrs:Ze({get:yn,set:hn,remove:no,copyTo:Kt}),insert:Ze({before:Ui,after:Lm,afterAll:id,append:Cc,appendAll:nh,prepend:Tu,wrap:Uf}),remove:Ze({unwrap:Zd,remove:Ic}),create:Ze({nu:kn.fromTag,clone:C,text:kn.fromText}),query:Ze({comparePosition:ht,prevSibling:Zr,nextSibling:Is}),property:Ze({children:fa,name:On,parent:go,document:k,isText:Le,isComment:ks,isElement:qe,isSpecial:Mn,getLanguage:Lo,getText:pa,setText:jd,isBoundary:I,isEmptyTag:V,isNonEditable:Te}),eq:bs,is:vc}};const Eu=(C,k,I,V)=>{const Te=I[0],ht=I.slice(1);return V(C,k,Te,ht)},oh=(C,k,I)=>I.length>0?Eu(C,k,I,Vm):K.none(),Vm=(C,k,I,V)=>{const Te=k(C,I);return xe(V,(ht,Kt)=>{const Mn=k(C,Kt);return Sc(C,ht,Mn)},Te)},Sc=(C,k,I)=>k.bind(V=>I.filter(te(C.eq,V))),sh=oh,sl=zm(),ud=(C,k)=>sh(sl,(I,V)=>C(V),k),Yl=C=>Wt(C,"table"),Wi=(C,k)=>{const I=is(C,k);return I.length>0?K.some(I):K.none()},rh=(C,k,I)=>be(C,k).bind(V=>be(C,I).bind(Te=>ud(Yl,[V,Te]).map(ht=>({first:V,last:Te,table:ht})))),ah=(C,k)=>Wi(C,k),Zf=(C,k,I)=>rh(C,k,I).bind(V=>{const Te=Lo=>bs(C,Lo),ht="thead,tfoot,tbody,table",Kt=Wt(V.first,ht,Te),Mn=Wt(V.last,ht,Te);return Kt.bind(Lo=>Mn.bind(Go=>bs(Lo,Go)?qa(V.table,V.first,V.last):K.none()))}),rl=C=>Nt(C,kn.fromDom),E="data-mce-selected",$="td["+E+"],th["+E+"]",j="data-mce-first-selected",Se="td["+j+"],th["+j+"]",He="data-mce-last-selected",wn="td["+He+"],th["+He+"]",So={selected:E,selectedSelector:$,firstSelected:j,firstSelectedSelector:Se,lastSelected:He,lastSelectedSelector:wn},ns=C=>Ia(C).bind(k=>ah(k,So.firstSelectedSelector)).fold(Ze(C),k=>k[0]),jo=C=>(k,I)=>{const V=On(k),Te=V==="col"||V==="colgroup"?ns(k):k;return Rt(Te,C,I)},to=jo("th,td,caption"),os=jo("th,td"),Ar=C=>rl(C.model.table.getSelectedCells()),Ka=(C,k)=>{const I=os(C),V=I.bind(Te=>Ia(Te)).map(Te=>Gr(Te));return qo(I,V,(Te,ht)=>_e(ht,Kt=>ze(rl(Kt.dom.cells),Mn=>yn(Mn,k)==="1"||bs(Mn,Te)))).getOr([])},ea=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Um=C=>({value:C}),P0=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Fo=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Hr=C=>P0.test(C)||Fo.test(C),Ps=C=>Fr(C,"#").toUpperCase(),lc=C=>Hr(C)?K.some({value:Ps(C)}):K.none(),Ha=C=>{const k=C.toString(16);return(k.length===1?"0"+k:k).toUpperCase()},jf=C=>{const k=Ha(C.red)+Ha(C.green)+Ha(C.blue);return Um(k)},Gf=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ch=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Xl=(C,k,I,V)=>({red:C,green:k,blue:I,alpha:V}),qf=(C,k,I,V)=>{const Te=parseInt(C,10),ht=parseInt(k,10),Kt=parseInt(I,10),Mn=parseFloat(V);return Xl(Te,ht,Kt,Mn)},F0=C=>{if(C==="transparent")return K.some(Xl(0,0,0,0));const k=Gf.exec(C);if(k!==null)return K.some(qf(k[1],k[2],k[3],"1"));const I=ch.exec(C);return I!==null?K.some(qf(I[1],I[2],I[3],I[4])):K.none()},BC=C=>lc(C).orThunk(()=>F0(C).map(jf)).getOrThunk(()=>{const k=document.createElement("canvas");k.height=1,k.width=1;const I=k.getContext("2d");I.clearRect(0,0,k.width,k.height),I.fillStyle="#FFFFFF",I.fillStyle=C,I.fillRect(0,0,1,1);const V=I.getImageData(0,0,1,1).data,Te=V[0],ht=V[1],Kt=V[2],Mn=V[3];return jf(Xl(Te,ht,Kt,Mn))}),Kr=C=>F0(C).map(jf).map(k=>"#"+k.value).getOr(C),ih=C=>{let k=C;return{get:()=>k,set:Te=>{k=Te}}},g1=C=>{const k=ih(K.none()),I=()=>k.get().each(C);return{clear:()=>{I(),k.set(K.none())},isSet:()=>k.get().isSome(),get:()=>k.get(),set:Mn=>{I(),k.set(K.some(Mn))}}},Tp=()=>g1(C=>C.unbind()),Kf=(C,k,I)=>V=>{const Te=Tp(),ht=Ti(I),Kt=()=>{const Mn=Ar(C),Lo=Go=>C.formatter.match(k,{value:I},Go.dom,ht);ht?(V.setActive(!ze(Mn,Lo)),Te.set(C.formatter.formatChanged(k,Go=>V.setActive(!Go),!0))):(V.setActive(z(Mn,Lo)),Te.set(C.formatter.formatChanged(k,V.setActive,!1,{value:I})))};return C.initialized?Kt():C.on("init",Kt),Te.clear},h1=C=>Ue(C,"menu"),dd=C=>Nt(C,k=>{const I=k.text||k.title||"";return h1(k)?{text:I,items:dd(k.menu)}:{text:I,value:k.value}}),pr=(C,k,I,V)=>Nt(k,Te=>{const ht=Te.text||Te.title;return h1(Te)?{type:"nestedmenuitem",text:ht,getSubmenuItems:()=>pr(C,Te.menu,I,V)}:{text:ht,type:"togglemenuitem",onAction:()=>V(Te.value),onSetup:Kf(C,I,Te.value)}}),Ho=(C,k)=>I=>{C.execCommand("mceTableApplyCellStyle",!1,{[k]:I})},uc=C=>re(C,k=>h1(k)?[{...k,menu:uc(k.menu)}]:Yc(k.value)?[k]:[]),Jl=(C,k,I,V)=>Te=>Te(pr(C,k,I,V)),_u=(C,k,I)=>{const V=Nt(k,Te=>({text:Te.title,value:"#"+BC(Te.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:V.length>0?V:void 0,allowCustomColors:!1},onAction:Te=>{const ht=Te.value==="remove"?"":Te.value;C.execCommand("mceTableApplyCellStyle",!1,{[I]:ht})}}]},lh=C=>()=>{const I=C.queryCommandValue("mceTableRowType")==="header"?"body":"header";C.execCommand("mceTableRowType",!1,{type:I})},Wm=C=>()=>{const I=C.queryCommandValue("mceTableColType")==="th"?"td":"th";C.execCommand("mceTableColType",!1,{type:I})},p1=C=>{const k=dd(_l(C));return k.length>0?K.some({name:"class",type:"listbox",label:"Class",items:k}):K.none()},b1=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ea}],Zm=C=>b1.concat(p1(C).toArray()),uh=(C,k)=>{const V=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(dd(qr(C)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:k==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(V):V}},Al={normal:(C,k)=>{const I=C.dom;return{setAttrib:(Kt,Mn)=>{I.setAttrib(k,Kt,Mn)},setStyle:(Kt,Mn)=>{I.setStyle(k,Kt,Mn)},setFormat:(Kt,Mn)=>{Mn===""?C.formatter.remove(Kt,{value:null},k,!0):C.formatter.apply(Kt,{value:Mn},k)}}}},Ol=Jt("th"),I0=(C,k)=>C&&k?"sectionCells":C?"section":"cells",md=C=>{const k=C.section==="thead",I=Os(Au(C.cells),"th");return C.section==="tfoot"?{type:"footer"}:k||I?{type:"header",subType:I0(k,I)}:{type:"body"}},Au=C=>{const k=_e(C,I=>Ol(I.element));return k.length===0?K.some("td"):k.length===C.length?K.some("th"):K.none()},Yf=C=>{const k=Nt(C,Te=>md(Te).type),I=dn(k,"header"),V=dn(k,"footer");if(!I&&!V)return K.some("body");{const Te=dn(k,"body");return I&&!Te&&!V?K.some("header"):!I&&!Te&&V?K.some("footer"):K.none()}},fd=C=>{let k=!1,I;return(...V)=>(k||(k=!0,I=C.apply(null,V)),I)},dh=(C,k)=>Pe(C.all,I=>ae(I.cells,V=>bs(k,V.element))),ba=(C,k,I)=>{const V=Nt(k.selection,ht=>Nr(ht).bind(Kt=>dh(C,Kt)).filter(I)),Te=fr(V);return ls(Te.length>0,Te)},Zi=(C,k)=>k.mergable,Gm=(C,k)=>k.unmergable,Bn=(C,k)=>ba(C,k,yt),qm=(C,k)=>dh(C,k).exists(I=>!I.isLocked),al=(C,k)=>z(k,I=>qm(C,I)),mh=(C,k)=>Zi(C,k).filter(I=>al(C,I.cells)),fh=(C,k)=>Gm(C,k).filter(I=>al(C,I));({...{generate:C=>{if(!Tt(C))throw new Error("cases must be an array");if(C.length===0)throw new Error("there must be at least one case");const k=[],I={};return Ve(C,(V,Te)=>{const ht=xt(V);if(ht.length!==1)throw new Error("one and only one name per case");const Kt=ht[0],Mn=V[Kt];if(I[Kt]!==void 0)throw new Error("duplicate key detected:"+Kt);if(Kt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Tt(Mn))throw new Error("case arguments must be an array");k.push(Kt),I[Kt]=(...Lo)=>{const Go=Lo.length;if(Go!==Mn.length)throw new Error("Wrong number of arguments to case "+Kt+". Expected "+Mn.length+" ("+Mn+"), got "+Go);return{fold:(...Ws)=>{if(Ws.length!==C.length)throw new Error("Wrong number of arguments to fold. Expected "+C.length+", got "+Ws.length);return Ws[Te].apply(null,Lo)},match:Ws=>{const er=xt(Ws);if(k.length!==er.length)throw new Error("Wrong number of arguments to match. Expected: "+k.join(",")+`
Actual: `+er.join(","));if(!z(k,ul=>dn(er,ul)))throw new Error("Not all branches were specified when using match. Specified: "+er.join(", ")+`
Required: `+k.join(", "));return Ws[Kt].apply(null,Lo)},log:Ws=>{console.log(Ws,{constructors:k,constructor:Kt,params:Lo})}}}}),I}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const lo=(C,k)=>{const I=Qs.fromTable(C);return Bn(I,k).bind(Te=>{const ht=Te[Te.length-1],Kt=Te[0].row,Mn=ht.row+ht.rowspan,Lo=I.all.slice(Kt,Mn);return Yf(Lo)}).getOr("")},ei=C=>Mr(C,"rgb")?Kr(C):C,qt=C=>{const k=kn.fromDom(C);return{borderwidth:sa(k,"border-width").getOr(""),borderstyle:sa(k,"border-style").getOr(""),bordercolor:sa(k,"border-color").map(ei).getOr(""),backgroundcolor:sa(k,"background-color").map(ei).getOr("")}},v1=C=>{const k=C[0],I=C.slice(1);return Ve(I,V=>{Ve(xt(k),Te=>{St(V,(ht,Kt)=>{const Mn=k[Te];Mn!==""&&Te===Kt&&Mn!==ht&&(k[Te]="")})})}),k},y1=(C,k,I,V)=>ae(C,Te=>!rt(I.formatter.matchNode(V,k+Te))).getOr(""),cl=te(y1,["left","center","right"],"align"),ti=te(y1,["top","middle","bottom"],"valign"),Km=(C,k)=>{const I=Ud(C),V=_i(C),Te=()=>({borderstyle:_(I,"border-style").getOr(""),bordercolor:ei(_(I,"border-color").getOr("")),backgroundcolor:ei(_(I,"background-color").getOr(""))}),ht={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},Kt=()=>{const ir=I["border-width"];return Fc(C)&&ir?{border:ir}:_(V,"border").fold(()=>({}),Ws=>({border:Ws}))},Mn=k?Te():{},Lo=()=>{const ir=_(I,"border-spacing").or(_(V,"cellspacing")).fold(()=>({}),er=>({cellspacing:er})),Ws=_(I,"border-padding").or(_(V,"cellpadding")).fold(()=>({}),er=>({cellpadding:er}));return{...ir,...Ws}};return{...ht,...I,...V,...Mn,...Kt(),...Lo()}},Wr=C=>Ia(kn.fromDom(C)).map(k=>{const I={selection:rl(C.cells)};return lo(k,I)}).getOr(""),_a=(C,k,I)=>{const V=(Mn,Lo)=>{const Go=sa(kn.fromDom(Lo),"border-width");return Fc(C)&&Go.isSome()?Go.getOr(""):Mn.getAttrib(Lo,"border")||nl(C.dom,Lo,"border-width")||nl(C.dom,Lo,"border")||""},Te=C.dom,ht=Fc(C)?Te.getStyle(k,"border-spacing")||Te.getAttrib(k,"cellspacing"):Te.getAttrib(k,"cellspacing")||Te.getStyle(k,"border-spacing"),Kt=Fc(C)?nl(Te,k,"padding")||Te.getAttrib(k,"cellpadding"):Te.getAttrib(k,"cellpadding")||nl(Te,k,"padding");return{width:Te.getStyle(k,"width")||Te.getAttrib(k,"width"),height:Te.getStyle(k,"height")||Te.getAttrib(k,"height"),cellspacing:ht??"",cellpadding:Kt??"",border:V(Te,k),caption:!!Te.select("caption",k)[0],class:Te.getAttrib(k,"class",""),align:cl(C,k),...I?qt(k):{}}},ni=(C,k,I)=>{const V=C.dom;return{height:V.getStyle(k,"height")||V.getAttrib(k,"height"),class:V.getAttrib(k,"class",""),type:Wr(k),align:cl(C,k),...I?qt(k):{}}},cr=(C,k,I,V)=>{const Te=C.dom,ht=V.getOr(k),Kt=(Mn,Lo)=>Te.getStyle(Mn,Lo)||Te.getAttrib(Mn,Lo);return{width:Kt(ht,"width"),height:Kt(k,"height"),scope:Te.getAttrib(k,"scope"),celltype:eh(k),class:Te.getAttrib(k,"class",""),halign:cl(C,k),valign:ti(C,k),...I?qt(k):{}}},Du=(C,k)=>{const I=Qs.fromTable(C),V=Qs.justCells(I),Te=_e(V,ht=>ze(k,Kt=>bs(ht.element,Kt)));return Nt(Te,ht=>({element:ht.element.dom,column:Qs.getColumnAt(I,ht.column).map(Kt=>Kt.element.dom)}))},w1=(C,k,I,V)=>{V("scope")&&C.setAttrib("scope",I.scope),V("class")&&C.setAttrib("class",I.class),V("height")&&C.setStyle("height",Ai(I.height)),V("width")&&k.setStyle("width",Ai(I.width))},Ql=(C,k,I)=>{I("backgroundcolor")&&C.setFormat("tablecellbackgroundcolor",k.backgroundcolor),I("bordercolor")&&C.setFormat("tablecellbordercolor",k.bordercolor),I("borderstyle")&&C.setFormat("tablecellborderstyle",k.borderstyle),I("borderwidth")&&C.setFormat("tablecellborderwidth",Ai(k.borderwidth))},gh=(C,k,I,V)=>{const Te=k.length===1;Ve(k,ht=>{const Kt=ht.element,Mn=Te?yt:V,Lo=Al.normal(C,Kt),Go=ht.column.map(ir=>Al.normal(C,ir)).getOr(Lo);w1(Lo,Go,I,Mn),Gl(C)&&Ql(Lo,I,Mn),V("halign")&&Po(C,Kt,I.halign),V("valign")&&ne(C,Kt,I.valign)})},Ym=(C,k)=>{C.execCommand("mceTableCellType",!1,{type:k.celltype,no_events:!0})},aa=(C,k,I,V)=>{const Te=it(V,(ht,Kt)=>I[Kt]!==ht);Ft(Te)>0&&k.length>=1&&Ia(k[0]).each(ht=>{const Kt=Du(ht,k),Mn=Ft(it(Te,(Go,ir)=>ir!=="scope"&&ir!=="celltype"))>0,Lo=ge(Te,"celltype");(Mn||ge(Te,"scope"))&&gh(C,Kt,V,te(ge,Te)),Lo&&Ym(C,V),me(C,ht.dom,{structure:Lo,style:Mn})})},hh=(C,k,I,V)=>{const Te=V.getData();V.close(),C.undoManager.transact(()=>{aa(C,k,I,Te),C.focus()})},Xm=(C,k)=>{const I=Ia(k[0]).map(V=>Nt(Du(V,k),Te=>cr(C,Te.element,Gl(C),Te.column)));return v1(I.getOrDie())},Ms=C=>{const k=Ar(C);if(k.length===0)return;const I=Xm(C,k),V={type:"tabpanel",tabs:[{title:"General",name:"general",items:Zm(C)},uh(C,"cell")]},Te={type:"panel",items:[{type:"grid",columns:2,items:Zm(C)}]};C.windowManager.open({title:"Cell Properties",size:"normal",body:Gl(C)?V:Te,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:I,onSubmit:te(hh,C,k,I)})},eu=C=>{const k=dd(cd(C));return k.length>0?K.some({name:"class",type:"listbox",label:"Class",items:k}):K.none()},xc=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],tu=C=>xc.concat(eu(C).toArray()),gi=(C,k,I)=>{I("class")&&C.setAttrib("class",k.class),I("height")&&C.setStyle("height",Ai(k.height))},C1=(C,k,I)=>{I("backgroundcolor")&&C.setStyle("background-color",k.backgroundcolor),I("bordercolor")&&C.setStyle("border-color",k.bordercolor),I("borderstyle")&&C.setStyle("border-style",k.borderstyle)},Xa=(C,k,I,V)=>{const ht=k.length===1?yt:V;Ve(k,Kt=>{const Mn=Al.normal(C,Kt);gi(Mn,I,ht),Cu(C)&&C1(Mn,I,ht),V("align")&&Po(C,Kt,I.align)})},kc=(C,k)=>{C.execCommand("mceTableRowType",!1,{type:k.type,no_events:!0})},Ep=(C,k,I,V)=>{const Te=it(V,(ht,Kt)=>I[Kt]!==ht);if(Ft(Te)>0){const ht=ge(Te,"type"),Kt=ht?Ft(Te)>1:!0;Kt&&Xa(C,k,V,te(ge,Te)),ht&&kc(C,V),Ia(kn.fromDom(k[0])).each(Mn=>me(C,Mn.dom,{structure:ht,style:Kt}))}},Mt=(C,k,I,V)=>{const Te=V.getData();V.close(),C.undoManager.transact(()=>{Ep(C,k,I,Te),C.focus()})},Di=C=>{const k=Ka(ve(C),So.selected);if(k.length===0)return;const I=Nt(k,Kt=>ni(C,Kt.dom,Cu(C))),V=v1(I),Te={type:"tabpanel",tabs:[{title:"General",name:"general",items:tu(C)},uh(C,"row")]},ht={type:"panel",items:[{type:"grid",columns:2,items:tu(C)}]};C.windowManager.open({title:"Row Properties",size:"normal",body:Cu(C)?Te:ht,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:V,onSubmit:te(Mt,C,Nt(k,Kt=>Kt.dom),V)})},L0=(C,k,I)=>{const V=I?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Te=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],ht=Su(C)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Kt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Mn=k.length>0?[{type:"listbox",name:"class",label:"Class",items:k}]:[];return V.concat(Te).concat(ht).concat(Kt).concat(Mn)},ca=(C,k,I,V)=>{if(k.tagName==="TD"||k.tagName==="TH")Gt(I)&&Nn(V)?C.setStyle(k,I,V):C.setStyles(k,I);else if(k.children)for(let Te=0;Te<k.children.length;Te++)ca(C,k.children[Te],I,V)},Xf=(C,k,I)=>{const V=C.dom,Te={},ht={};if(rt(I.class)||(Te.class=I.class),ht.height=Ai(I.height),Fc(C)?ht.width=Ai(I.width):V.getAttrib(k,"width")&&(Te.width=Wd(I.width)),Fc(C)?(ht["border-width"]=Ai(I.border),ht["border-spacing"]=Ai(I.cellspacing)):(Te.border=I.border,Te.cellpadding=I.cellpadding,Te.cellspacing=I.cellspacing),Fc(C)&&k.children)for(let Kt=0;Kt<k.children.length;Kt++)ca(V,k.children[Kt],{"border-width":Ai(I.border),padding:Ai(I.cellpadding)}),ic(C)&&ca(V,k.children[Kt],{"border-color":I.bordercolor});if(ic(C)){const Kt=I;ht["background-color"]=Kt.backgroundcolor,ht["border-color"]=Kt.bordercolor,ht["border-style"]=Kt.borderstyle}Te.style=V.serializeStyle({...Ud(C),...ht}),V.setAttribs(k,{..._i(C),...Te})},gd=(C,k,I,V)=>{const Te=C.dom,ht=V.getData(),Kt=it(ht,(Mn,Lo)=>I[Lo]!==Mn);V.close(),ht.class===""&&delete ht.class,C.undoManager.transact(()=>{if(!k){const Mn=Xc(ht.cols).getOr(1),Lo=Xc(ht.rows).getOr(1);C.execCommand("mceInsertTable",!1,{rows:Lo,columns:Mn}),k=os(ve(C),ku(C)).bind(Go=>Ia(Go,ku(C))).map(Go=>Go.dom).getOrDie()}if(Ft(Kt)>0){Xf(C,k,ht);const Mn=Te.select("caption",k)[0];(Mn&&!ht.caption||!Mn&&ht.caption)&&C.execCommand("mceTableToggleCaption"),Po(C,k,ht.align)}if(C.focus(),C.addVisual(),Ft(Kt)>0){const Mn=ge(Kt,"caption"),Lo=Mn?Ft(Kt)>1:!0;me(C,k,{structure:Mn,style:Lo})}})},va=(C,k)=>{const I=C.dom;let V,Te=Km(C,ic(C));k?(Te.cols="1",Te.rows="1",ic(C)&&(Te.borderstyle="",Te.bordercolor="",Te.backgroundcolor="")):(V=I.getParent(C.selection.getStart(),"table",C.getBody()),V?Te=_a(C,V,ic(C)):ic(C)&&(Te.borderstyle="",Te.bordercolor="",Te.backgroundcolor=""));const ht=dd(La(C));ht.length>0&&Te.class&&(Te.class=Te.class.replace(/\s*mce\-item\-table\s*/g,""));const Kt={type:"grid",columns:2,items:L0(C,ht,k)},Mn=()=>({type:"panel",items:[Kt]}),Lo=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[Kt]},uh(C,"table")]}),Go=ic(C)?Lo():Mn();C.windowManager.open({title:"Table Properties",size:"normal",body:Go,onSubmit:te(gd,C,V,Te),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Te})},H0=C=>{St({mceTableProps:te(va,C,!1),mceTableRowProps:te(Di,C),mceTableCellProps:te(Ms,C)},(k,I)=>C.addCommand(I,()=>k())),C.addCommand("mceInsertTableDialog",k=>{va(C,!0)})},il=(C,k)=>fe(C,k).isSome(),nu=et,hi=C=>{const k=(V,Te)=>Hn(V,Te).exists(ht=>parseInt(ht,10)>1),I=V=>k(V,"rowspan")||k(V,"colspan");return C.length>0&&z(C,I)?K.some(C):K.none()},Ns=(C,k,I)=>k.length<=1?K.none():Zf(C,I.firstSelectedSelector,I.lastSelectedSelector).map(V=>({bounds:V,cells:k})),ji=C=>({element:C,mergable:K.none(),unmergable:K.none(),selection:[C]}),Gd=(C,k,I)=>({element:I,mergable:Ns(k,C,So),unmergable:hi(C),selection:nu(C)}),Ja=C=>{const k=ih(K.none()),I=ih([]);let V=K.none();const Te=Jt("caption"),ht=Ao=>V.forall(tr=>!tr[Ao]),Kt=()=>to(ve(C),ku(C)),Mn=()=>to(Kl(C),ku(C)),Lo=()=>Kt().bind(Ao=>Kc(qo(Ia(Ao),Mn().bind(Ia),(tr,za)=>bs(tr,za)?Te(Ao)?K.some(ji(Ao)):K.some(Gd(Ar(C),tr,Ao)):K.none()))),Go=Ao=>Ia(Ao.element).map(za=>{const Lc=Qs.fromTable(za),Dl=Bn(Lc,Ao).getOr([]),Hc=We(Dl,(Ri,$u)=>($u.isLocked&&(Ri.onAny=!0,$u.column===0?Ri.onFirst=!0:$u.column+$u.colspan>=Lc.grid.columns&&(Ri.onLast=!0)),Ri),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:mh(Lc,Ao).isSome(),unmergeable:fh(Lc,Ao).isSome(),locked:Hc}}),ir=()=>{k.set(fd(Lo)()),V=k.get().bind(Go),Ve(I.get(),Je)},Ws=Ao=>(Ao(),I.set(I.get().concat([Ao])),()=>{I.set(_e(I.get(),tr=>tr!==Ao))}),er=(Ao,tr)=>Ws(()=>k.get().fold(()=>{Ao.setEnabled(!1)},za=>{Ao.setEnabled(!tr(za))})),oi=(Ao,tr,za)=>Ws(()=>k.get().fold(()=>{Ao.setEnabled(!1),Ao.setActive(!1)},Lc=>{Ao.setEnabled(!tr(Lc)),Ao.setActive(za(Lc))})),ul=Ao=>V.exists(tr=>tr.locked[Ao]),Ru=Ao=>er(Ao,tr=>!1),hd=Ao=>er(Ao,tr=>Te(tr.element)),ph=Ao=>tr=>er(tr,za=>Te(za.element)||ul(Ao)),pd=Ao=>tr=>er(tr,za=>Te(za.element)||Ao().isNone()),Mu=(Ao,tr)=>za=>er(za,Lc=>Te(Lc.element)||Ao().isNone()||ul(tr)),Jm=Ao=>er(Ao,tr=>ht("mergeable")),Nu=Ao=>er(Ao,tr=>ht("unmergeable")),bi=Ao=>oi(Ao,Ht,tr=>Ia(tr.element,ku(C)).exists(Lc=>il(Lc,"caption"))),bh=(Ao,tr)=>za=>oi(za,Lc=>Te(Lc.element),()=>C.queryCommandValue(Ao)===tr),Ap=bh("mceTableRowType","header"),z0=bh("mceTableColType","th");return C.on("NodeChange ExecCommand TableSelectorChange",ir),{onSetupTable:Ru,onSetupCellOrRow:hd,onSetupColumn:ph,onSetupPasteable:pd,onSetupPasteableColumn:Mu,onSetupMergeable:Jm,onSetupUnmergeable:Nu,resetTargets:ir,onSetupTableWithCaption:bi,onSetupTableRowHeaders:Ap,onSetupTableColumnHeaders:z0,targets:k.get}};var Jf=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Qf="x-tinymce/dom-table-",eg=Qf+"rows",pi=Qf+"columns",_p=C=>{var k;const I=(k=Jf.read())!==null&&k!==void 0?k:[];return Pe(I,V=>K.from(V.getType(C)))},Ke=()=>_p(eg),Aa=()=>_p(pi),S1=(C,k)=>{C.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:Mn=>Mn("inserttable | cell row column | advtablesort | tableprops deletetable")});const I=Mn=>()=>C.execCommand(Mn),V=(Mn,Lo)=>{C.queryCommandSupported(Lo.command)&&C.ui.registry.addButton(Mn,{...Lo,onAction:Ot(Lo.onAction)?Lo.onAction:I(Lo.command)})},Te=(Mn,Lo)=>{C.queryCommandSupported(Lo.command)&&C.ui.registry.addToggleButton(Mn,{...Lo,onAction:Ot(Lo.onAction)?Lo.onAction:I(Lo.command)})};V("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:k.onSetupTable}),V("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:k.onSetupTable}),V("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:k.onSetupCellOrRow}),V("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:k.onSetupMergeable}),V("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:k.onSetupUnmergeable}),V("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:k.onSetupCellOrRow}),V("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:k.onSetupCellOrRow}),V("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:k.onSetupCellOrRow}),V("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:k.onSetupCellOrRow}),V("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:k.onSetupColumn("onFirst")}),V("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:k.onSetupColumn("onLast")}),V("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:k.onSetupColumn("onAny")}),V("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:k.onSetupCellOrRow}),V("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:k.onSetupCellOrRow}),V("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:k.onSetupPasteable(Ke)}),V("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:k.onSetupPasteable(Ke)}),V("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:k.onSetupColumn("onAny")}),V("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:k.onSetupColumn("onAny")}),V("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:k.onSetupPasteableColumn(Aa,"onFirst")}),V("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:k.onSetupPasteableColumn(Aa,"onLast")}),V("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const ht=uc(La(C));ht.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Jl(C,ht,"tableclass",Mn=>C.execCommand("mceTableToggleClass",!1,Mn)),onSetup:k.onSetupTable});const Kt=uc(_l(C));Kt.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Jl(C,Kt,"tablecellclass",Mn=>C.execCommand("mceTableCellToggleClass",!1,Mn)),onSetup:k.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Jl(C,ea,"tablecellverticalalign",Ho(C,"vertical-align")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Jl(C,El(C),"tablecellborderwidth",Ho(C,"border-width")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Jl(C,qr(C),"tablecellborderstyle",Ho(C,"border-style")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Mn=>Mn(_u(C,xu(C),"background-color")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Mn=>Mn(_u(C,Vd(C),"border-color")),onSetup:k.onSetupCellOrRow})),Te("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),Te("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:lh(C),onSetup:k.onSetupTableRowHeaders}),Te("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Wm(C),onSetup:k.onSetupTableColumnHeaders})},wr=C=>{const k=V=>C.dom.is(V,"table")&&C.getBody().contains(V),I=ol(C);I.length>0&&C.ui.registry.addContextToolbar("table",{predicate:k,items:I,scope:"node",position:"node"})},ll=(C,k)=>{const I=Ws=>()=>C.execCommand(Ws),V=(Ws,er)=>C.queryCommandSupported(er.command)?(C.ui.registry.addMenuItem(Ws,{...er,onAction:Ot(er.onAction)?er.onAction:I(er.command)}),!0):!1,Te=(Ws,er)=>{C.queryCommandSupported(er.command)&&C.ui.registry.addToggleMenuItem(Ws,{...er,onAction:Ot(er.onAction)?er.onAction:I(er.command)})},ht=Ws=>{C.execCommand("mceInsertTable",!1,{rows:Ws.numRows,columns:Ws.numColumns})},Kt=[V("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:k.onSetupCellOrRow}),V("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:k.onSetupCellOrRow}),V("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:k.onSetupCellOrRow}),V("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:k.onSetupCellOrRow}),V("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:k.onSetupCellOrRow}),V("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:k.onSetupCellOrRow}),V("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:k.onSetupPasteable(Ke)}),V("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:k.onSetupPasteable(Ke)})],Mn=[V("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:k.onSetupColumn("onFirst")}),V("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:k.onSetupColumn("onLast")}),V("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:k.onSetupColumn("onAny")}),V("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:k.onSetupColumn("onAny")}),V("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:k.onSetupColumn("onAny")}),V("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:k.onSetupPasteableColumn(Aa,"onFirst")}),V("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:k.onSetupPasteableColumn(Aa,"onLast")})],Lo=[V("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:k.onSetupCellOrRow}),V("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:k.onSetupMergeable}),V("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:k.onSetupUnmergeable})];Qg(C)?C.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:ht}]}):C.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:I("mceInsertTableDialog")}),C.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:I("mceInsertTableDialog")}),V("tableprops",{text:"Table properties",onSetup:k.onSetupTable,command:"mceTableProps"}),V("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:k.onSetupTable,command:"mceTableDelete"}),dn(Kt,!0)&&C.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ze("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),dn(Mn,!0)&&C.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ze("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),dn(Lo,!0)&&C.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ze("tablecellprops tablemergecells tablesplitcells")}),C.ui.registry.addContextMenu("table",{update:()=>(k.resetTargets(),k.targets().fold(Ze(""),Ws=>On(Ws.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Go=uc(La(C));Go.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>pr(C,Go,"tableclass",Ws=>C.execCommand("mceTableToggleClass",!1,Ws)),onSetup:k.onSetupTable});const ir=uc(_l(C));ir.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>pr(C,ir,"tablecellclass",Ws=>C.execCommand("mceTableCellToggleClass",!1,Ws)),onSetup:k.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>pr(C,ea,"tablecellverticalalign",Ho(C,"vertical-align")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>pr(C,El(C),"tablecellborderwidth",Ho(C,"border-width")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>pr(C,qr(C),"tablecellborderstyle",Ho(C,"border-style")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>_u(C,xu(C),"background-color"),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>_u(C,Vd(C),"border-color"),onSetup:k.onSetupCellOrRow})),Te("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),Te("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:lh(C),onSetup:k.onSetupTableRowHeaders}),Te("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Wm(C),onSetup:k.onSetupTableRowHeaders})},Oa=C=>{const k=Ja(C);Lr(C),H0(C),ll(C,k),S1(C,k),wr(C)};var Da=()=>{_t.add("table",Oa)};Da()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const It=(H,Z,Be)=>{var Pe;return Be(H,Z.prototype)?!0:((Pe=H.constructor)===null||Pe===void 0?void 0:Pe.name)===Z.name},gt=H=>{const Z=typeof H;return H===null?"null":Z==="object"&&Array.isArray(H)?"array":Z==="object"&&It(H,String,(Be,Pe)=>Pe.isPrototypeOf(Be))?"string":Z},Ut=H=>Z=>gt(Z)===H,$t=H=>Z=>typeof Z===H,en=Ut("string"),Gt=Ut("object"),Tt=Ut("array"),Et=H=>H==null,rt=H=>!Et(H),mn=$t("function"),Nn=(H,Z)=>{if(Tt(H)){for(let Be=0,Pe=H.length;Be<Pe;++Be)if(!Z(H[Be]))return!1;return!0}return!1},Ot=H=>()=>H;function ct(H,...Z){return(...Be)=>{const Pe=Z.concat(Be);return H.apply(null,Pe)}}const Bt=Ot(!1),cn=H=>H.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var Ze=tinymce.util.Tools.resolve("tinymce.util.Tools");const et=H=>Z=>Z.options.get(H),Ee=H=>{const Z=H.options.register;Z("template_cdate_classes",{processor:"string",default:"cdate"}),Z("template_mdate_classes",{processor:"string",default:"mdate"}),Z("template_selected_content_classes",{processor:"string",default:"selcontent"}),Z("template_preview_replace_values",{processor:"object"}),Z("template_replace_values",{processor:"object"}),Z("templates",{processor:Be=>en(Be)||Nn(Be,Gt)||mn(Be),default:[]}),Z("template_cdate_format",{processor:"string",default:H.translate("%Y-%m-%d")}),Z("template_mdate_format",{processor:"string",default:H.translate("%Y-%m-%d")})},te=et("template_cdate_classes"),Je=et("template_mdate_classes"),Ht=et("template_selected_content_classes"),yt=et("template_preview_replace_values"),K=et("template_replace_values"),xt=et("templates"),En=et("template_cdate_format"),St=et("template_mdate_format"),he=et("content_style"),Q=et("content_css_cors"),it=et("body_class"),Me=(H,Z)=>{if(H=""+H,H.length<Z)for(let Be=0;Be<Z-H.length;Be++)H="0"+H;return H},De=(H,Z,Be=new Date)=>{const Pe="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Yt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),rn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ro="January February March April May June July August September October November December".split(" ");return Z=Z.replace("%D","%m/%d/%Y"),Z=Z.replace("%r","%I:%M:%S %p"),Z=Z.replace("%Y",""+Be.getFullYear()),Z=Z.replace("%y",""+Be.getYear()),Z=Z.replace("%m",Me(Be.getMonth()+1,2)),Z=Z.replace("%d",Me(Be.getDate(),2)),Z=Z.replace("%H",""+Me(Be.getHours(),2)),Z=Z.replace("%M",""+Me(Be.getMinutes(),2)),Z=Z.replace("%S",""+Me(Be.getSeconds(),2)),Z=Z.replace("%I",""+((Be.getHours()+11)%12+1)),Z=Z.replace("%p",Be.getHours()<12?"AM":"PM"),Z=Z.replace("%B",""+H.translate(ro[Be.getMonth()])),Z=Z.replace("%b",""+H.translate(rn[Be.getMonth()])),Z=Z.replace("%A",""+H.translate(Yt[Be.getDay()])),Z=Z.replace("%a",""+H.translate(Pe[Be.getDay()])),Z=Z.replace("%%","%"),Z};class Ft{constructor(Z,Be){this.tag=Z,this.value=Be}static some(Z){return new Ft(!0,Z)}static none(){return Ft.singletonNone}fold(Z,Be){return this.tag?Be(this.value):Z()}isSome(){return this.tag}isNone(){return!this.tag}map(Z){return this.tag?Ft.some(Z(this.value)):Ft.none()}bind(Z){return this.tag?Z(this.value):Ft.none()}exists(Z){return this.tag&&Z(this.value)}forall(Z){return!this.tag||Z(this.value)}filter(Z){return!this.tag||Z(this.value)?this:Ft.none()}getOr(Z){return this.tag?this.value:Z}or(Z){return this.tag?this:Z}getOrThunk(Z){return this.tag?this.value:Z()}orThunk(Z){return this.tag?this:Z()}getOrDie(Z){if(this.tag)return this.value;throw new Error(Z??"Called getOrDie on None")}static from(Z){return rt(Z)?Ft.some(Z):Ft.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Z){this.tag&&Z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ft.singletonNone=new Ft(!1);const _=(H,Z)=>{for(let Be=0,Pe=H.length;Be<Pe;Be++){const Yt=H[Be];if(Z(Yt,Be))return!0}return!1},ge=(H,Z)=>{const Be=H.length,Pe=new Array(Be);for(let Yt=0;Yt<Be;Yt++){const rn=H[Yt];Pe[Yt]=Z(rn,Yt)}return Pe},Ue=(H,Z,Be)=>{for(let Pe=0,Yt=H.length;Pe<Yt;Pe++){const rn=H[Pe];if(Z(rn,Pe))return Ft.some(rn);if(Be(rn,Pe))break}return Ft.none()},Ie=(H,Z)=>Ue(H,Z,Bt),Ae=Object.hasOwnProperty,tn=(H,Z)=>dn(H,Z)?Ft.from(H[Z]):Ft.none(),dn=(H,Z)=>Ae.call(H,Z),ze={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},jt=H=>H.replace(/["'<>&]/g,Z=>tn(ze,Z).getOr(Z)),Nt=(H,Z,Be)=>_(Be.split(/\s+/),Pe=>H.hasClass(Z,Pe)),Ve=(H,Z)=>()=>{const Be=xt(H);mn(Be)?Be(Z):en(Be)?fetch(Be).then(Pe=>{Pe.ok&&Pe.json().then(Z)}):Z(Be)},R=(H,Z)=>(Ze.each(Z,(Be,Pe)=>{mn(Be)&&(Be=Be(Pe)),H=H.replace(new RegExp("\\{\\$"+cn(Pe)+"\\}","g"),Be)}),H),qn=(H,Z)=>{const Be=H.dom,Pe=K(H);Ze.each(Be.select("*",Z),Yt=>{Ze.each(Pe,(rn,ro)=>{Be.hasClass(Yt,ro)&&mn(rn)&&rn(Yt)})})},_e=(H,Z,Be)=>{const Pe=H.dom,Yt=H.selection.getContent();Be=R(Be,K(H));let rn=Pe.create("div",{},Be);const ro=Pe.select(".mceTmpl",rn);ro&&ro.length>0&&(rn=Pe.create("div"),rn.appendChild(ro[0].cloneNode(!0))),Ze.each(Pe.select("*",rn),uo=>{Nt(Pe,uo,te(H))&&(uo.innerHTML=De(H,En(H))),Nt(Pe,uo,Je(H))&&(uo.innerHTML=De(H,St(H))),Nt(Pe,uo,Ht(H))&&(uo.innerHTML=Yt)}),qn(H,rn),H.execCommand("mceInsertContent",!1,rn.innerHTML),H.addVisual()};var xe=tinymce.util.Tools.resolve("tinymce.Env");const We=(H,Z)=>{var Be;if(Z.indexOf("<html>")===-1){let Pe="";const Yt=(Be=he(H))!==null&&Be!==void 0?Be:"",rn=Q(H)?' crossorigin="anonymous"':"";Ze.each(H.contentCSS,Ye=>{Pe+='<link type="text/css" rel="stylesheet" href="'+H.documentBaseURI.toAbsolute(Ye)+'"'+rn+">"}),Yt&&(Pe+='<style type="text/css">'+Yt+"</style>");const ro=it(H),uo=H.dom.encode,kn='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(xe.os.isMacOS()||xe.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",ao=H.getBody().dir,Re=ao?' dir="'+uo(ao)+'"':"";Z='<!DOCTYPE html><html><head><base href="'+uo(H.documentBaseURI.getURI())+'">'+Pe+kn+'</head><body class="'+uo(ro)+'"'+Re+">"+Z+"</body></html>"}return R(Z,yt(H))},ke=(H,Z)=>{const Be=()=>{if(!Z||Z.length===0){const Re=H.translate("No templates defined.");return H.notificationManager.open({text:Re,type:"info"}),Ft.none()}return Ft.from(Ze.map(Z,(Re,Ye)=>{const Lt=fn=>fn.url!==void 0;return{selected:Ye===0,text:Re.title,value:{url:Lt(Re)?Ft.from(Re.url):Ft.none(),content:Lt(Re)?Ft.none():Ft.from(Re.content),description:Re.description}}}))},Pe=Re=>ge(Re,Ye=>({text:Ye.text,value:Ye.text})),Yt=(Re,Ye)=>Ie(Re,Lt=>Lt.text===Ye),rn=Re=>{H.windowManager.alert("Could not load the specified template.",()=>Re.focus("template"))},ro=Re=>Re.value.url.fold(()=>Promise.resolve(Re.value.content.getOr("")),Ye=>fetch(Ye).then(Lt=>Lt.ok?Lt.text():Promise.reject())),uo=(Re,Ye)=>(Lt,fn)=>{if(fn.name==="template"){const On=Lt.getData().template;Yt(Re,On).each(Tn=>{Lt.block("Loading..."),ro(Tn).then(Ro=>{Ye(Lt,Tn,Ro)}).catch(()=>{Ye(Lt,Tn,""),Lt.setEnabled("save",!1),rn(Lt)})})}},Qn=Re=>Ye=>{const Lt=Ye.getData();Yt(Re,Lt.template).each(fn=>{ro(fn).then(On=>{H.execCommand("mceInsertTemplate",!1,On),Ye.close()}).catch(()=>{Ye.setEnabled("save",!1),rn(Ye)})})},kn=Re=>{const Ye=Pe(Re),Lt=(Tn,Ro)=>({title:"Insert Template",size:"large",body:{type:"panel",items:Tn},initialData:Ro,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Qn(Re),onChange:uo(Re,fn)}),fn=(Tn,Ro,ks)=>{const qe=We(H,ks),Le=[{type:"selectbox",name:"template",label:"Templates",items:Ye},{type:"htmlpanel",html:`<p aria-live="polite">${jt(Ro.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],un={template:Ro.text,preview:qe};Tn.unblock(),Tn.redial(Lt(Le,un)),Tn.focus("template")},On=H.windowManager.open(Lt([],{template:"",preview:""}));On.block("Loading..."),ro(Re[0]).then(Tn=>{fn(On,Re[0],Tn)}).catch(()=>{fn(On,Re[0],""),On.setEnabled("save",!1),rn(On)})};Be().each(kn)},ae=H=>Z=>{ke(H,Z)},se=H=>{H.addCommand("mceInsertTemplate",ct(_e,H)),H.addCommand("mceTemplate",Ve(H,ae(H)))},re=H=>{H.on("PreProcess",Z=>{const Be=H.dom,Pe=St(H);Ze.each(Be.select("div",Z.node),Yt=>{Be.hasClass(Yt,"mceTmpl")&&(Ze.each(Be.select("*",Yt),rn=>{Nt(Be,rn,Je(H))&&(rn.innerHTML=De(H,Pe))}),qn(H,Yt))})})},z=H=>{const Z=()=>H.execCommand("mceTemplate");H.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:Z}),H.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:Z})};var Y=()=>{_t.add("template",H=>{Ee(H),z(H),se(H),re(H)})};Y()})();(function(){const _t=Ot=>{let ct=Ot;return{get:()=>ct,set:Ze=>{ct=Ze}}};var It=tinymce.util.Tools.resolve("tinymce.PluginManager");const gt=(Ot,ct)=>{Ot.dispatch("VisualBlocks",{state:ct})},Ut=(Ot,ct,Bt)=>{Ot.dom.toggleClass(Ot.getBody(),"mce-visualblocks"),Bt.set(!Bt.get()),gt(Ot,Bt.get())},$t=(Ot,ct,Bt)=>{Ot.addCommand("mceVisualBlocks",()=>{Ut(Ot,ct,Bt)})},en=Ot=>ct=>ct.options.get(Ot),Gt=Ot=>{const ct=Ot.options.register;ct("visualblocks_default_state",{processor:"boolean",default:!1})},Tt=en("visualblocks_default_state"),Et=(Ot,ct,Bt)=>{Ot.on("PreviewFormats AfterPreviewFormats",cn=>{Bt.get()&&Ot.dom.toggleClass(Ot.getBody(),"mce-visualblocks",cn.type==="afterpreviewformats")}),Ot.on("init",()=>{Tt(Ot)&&Ut(Ot,ct,Bt)})},rt=(Ot,ct)=>Bt=>{Bt.setActive(ct.get());const cn=Ze=>Bt.setActive(Ze.state);return Ot.on("VisualBlocks",cn),()=>Ot.off("VisualBlocks",cn)},mn=(Ot,ct)=>{const Bt=()=>Ot.execCommand("mceVisualBlocks");Ot.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:Bt,onSetup:rt(Ot,ct)}),Ot.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:Bt,onSetup:rt(Ot,ct)})};var Nn=()=>{It.add("visualblocks",(Ot,ct)=>{Gt(Ot);const Bt=_t(!1);$t(Ot,ct,Bt),mn(Ot,Bt),Et(Ot,ct,Bt)})};Nn()})();(function(){const _t=qe=>{let Le=qe;return{get:()=>Le,set:Jt=>{Le=Jt}}};var It=tinymce.util.Tools.resolve("tinymce.PluginManager");const gt=qe=>({isEnabled:()=>qe.get()}),Ut=(qe,Le)=>qe.dispatch("VisualChars",{state:Le}),$t=(qe,Le,un)=>{var ln;return un(qe,Le.prototype)?!0:((ln=qe.constructor)===null||ln===void 0?void 0:ln.name)===Le.name},en=qe=>{const Le=typeof qe;return qe===null?"null":Le==="object"&&Array.isArray(qe)?"array":Le==="object"&&$t(qe,String,(un,ln)=>ln.isPrototypeOf(un))?"string":Le},Gt=qe=>Le=>en(Le)===qe,Tt=qe=>Le=>typeof Le===qe,Et=qe=>Le=>qe===Le,rt=Gt("string"),mn=Et(null),Nn=Tt("boolean"),Ot=qe=>qe==null,ct=qe=>!Ot(qe),Bt=Tt("number");class cn{constructor(Le,un){this.tag=Le,this.value=un}static some(Le){return new cn(!0,Le)}static none(){return cn.singletonNone}fold(Le,un){return this.tag?un(this.value):Le()}isSome(){return this.tag}isNone(){return!this.tag}map(Le){return this.tag?cn.some(Le(this.value)):cn.none()}bind(Le){return this.tag?Le(this.value):cn.none()}exists(Le){return this.tag&&Le(this.value)}forall(Le){return!this.tag||Le(this.value)}filter(Le){return!this.tag||Le(this.value)?this:cn.none()}getOr(Le){return this.tag?this.value:Le}or(Le){return this.tag?this:Le}getOrThunk(Le){return this.tag?this.value:Le()}orThunk(Le){return this.tag?this:Le()}getOrDie(Le){if(this.tag)return this.value;throw new Error(Le??"Called getOrDie on None")}static from(Le){return ct(Le)?cn.some(Le):cn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Le){this.tag&&Le(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}cn.singletonNone=new cn(!1);const Ze=(qe,Le)=>{const un=qe.length,ln=new Array(un);for(let Jt=0;Jt<un;Jt++){const Kn=qe[Jt];ln[Jt]=Le(Kn,Jt)}return ln},et=(qe,Le)=>{for(let un=0,ln=qe.length;un<ln;un++){const Jt=qe[un];Le(Jt,un)}},Ee=(qe,Le)=>{const un=[];for(let ln=0,Jt=qe.length;ln<Jt;ln++){const Kn=qe[ln];Le(Kn,ln)&&un.push(Kn)}return un},te=Object.keys,Je=(qe,Le)=>{const un=te(qe);for(let ln=0,Jt=un.length;ln<Jt;ln++){const Kn=un[ln],Ts=qe[Kn];Le(Ts,Kn)}};typeof window<"u"||Function("return this;")();const Ht=3,yt=qe=>qe.dom.nodeType,K=qe=>qe.dom.nodeValue,En=(qe=>Le=>yt(Le)===qe)(Ht),St=(qe,Le,un)=>{if(rt(un)||Nn(un)||Bt(un))qe.setAttribute(Le,un+"");else throw console.error("Invalid call to Attribute.set. Key ",Le,":: Value ",un,":: Element ",qe),new Error("Attribute value was not simple")},he=(qe,Le,un)=>{St(qe.dom,Le,un)},Q=(qe,Le)=>{const un=qe.dom.getAttribute(Le);return un===null?void 0:un},it=(qe,Le)=>{qe.dom.removeAttribute(Le)},Me=(qe,Le)=>{const un=Q(qe,Le);return un===void 0||un===""?[]:un.split(" ")},De=(qe,Le,un)=>{const Jt=Me(qe,Le).concat([un]);return he(qe,Le,Jt.join(" ")),!0},Ft=(qe,Le,un)=>{const ln=Ee(Me(qe,Le),Jt=>Jt!==un);return ln.length>0?he(qe,Le,ln.join(" ")):it(qe,Le),!1},_=qe=>qe.dom.classList!==void 0,ge=qe=>Me(qe,"class"),Ue=(qe,Le)=>De(qe,"class",Le),Ie=(qe,Le)=>Ft(qe,"class",Le),Ae=(qe,Le)=>{_(qe)?qe.dom.classList.add(Le):Ue(qe,Le)},tn=qe=>{(_(qe)?qe.dom.classList:ge(qe)).length===0&&it(qe,"class")},dn=(qe,Le)=>{_(qe)?qe.dom.classList.remove(Le):Ie(qe,Le),tn(qe)},ze=(qe,Le)=>{const ln=(Le||document).createElement("div");if(ln.innerHTML=qe,!ln.hasChildNodes()||ln.childNodes.length>1){const Jt="HTML does not have a single root node";throw console.error(Jt,qe),new Error(Jt)}return Ve(ln.childNodes[0])},jt=(qe,Le)=>{const ln=(Le||document).createElement(qe);return Ve(ln)},Nt=(qe,Le)=>{const ln=(Le||document).createTextNode(qe);return Ve(ln)},Ve=qe=>{if(qe==null)throw new Error("Node cannot be null or undefined");return{dom:qe}},qn={fromHtml:ze,fromTag:jt,fromText:Nt,fromDom:Ve,fromPoint:(qe,Le,un)=>cn.from(qe.dom.elementFromPoint(Le,un)).map(Ve)},_e={"Â ":"nbsp","Â­":"shy"},xe=(qe,Le)=>{let un="";return Je(qe,(ln,Jt)=>{un+=Jt}),new RegExp("["+un+"]",Le?"g":"")},We=qe=>{let Le="";return Je(qe,un=>{Le&&(Le+=","),Le+="span.mce-"+un}),Le},ke=xe(_e),ae=xe(_e,!0),se=We(_e),re="mce-nbsp",z=qe=>'<span data-mce-bogus="1" class="mce-'+_e[qe]+'">'+qe+"</span>",Y=qe=>{const Le=K(qe);return En(qe)&&rt(Le)&&ke.test(Le)},H=(qe,Le)=>{let un=[];const ln=qe.dom,Jt=Ze(ln.childNodes,qn.fromDom);return et(Jt,Kn=>{Le(Kn)&&(un=un.concat([Kn])),un=un.concat(H(Kn,Le))}),un},Z=(qe,Le)=>{for(;qe.parentNode;){if(qe.parentNode===Le)return Le;qe=qe.parentNode}},Be=qe=>qe.replace(ae,z),Pe=qe=>qe.nodeName.toLowerCase()==="span"&&qe.classList.contains("mce-nbsp-wrap"),Yt=(qe,Le)=>{const un=qe.dom,ln=H(qn.fromDom(Le),Y);et(ln,Jt=>{var Kn;const Ts=Jt.dom.parentNode;if(Pe(Ts))Ae(qn.fromDom(Ts),re);else{const Tr=Be(un.encode((Kn=K(Jt))!==null&&Kn!==void 0?Kn:"")),ma=un.create("div",{},Tr);let bs;for(;bs=ma.lastChild;)un.insertAfter(bs,Jt.dom);qe.dom.remove(Jt.dom)}})},rn=(qe,Le)=>{const un=qe.dom.select(se,Le);et(un,ln=>{Pe(ln)?dn(qn.fromDom(ln),re):qe.dom.remove(ln,!0)})},ro=qe=>{const Le=qe.getBody(),un=qe.selection.getBookmark();let ln=Z(qe.selection.getNode(),Le);ln=ln!==void 0?ln:Le,rn(qe,ln),Yt(qe,ln),qe.selection.moveToBookmark(un)},uo=(qe,Le)=>{Ut(qe,Le.get());const un=qe.getBody();Le.get()===!0?Yt(qe,un):rn(qe,un)},Qn=(qe,Le)=>{Le.set(!Le.get());const un=qe.selection.getBookmark();uo(qe,Le),qe.selection.moveToBookmark(un)},kn=(qe,Le)=>{qe.addCommand("mceVisualChars",()=>{Qn(qe,Le)})},ao=qe=>Le=>Le.options.get(qe),Re=qe=>{const Le=qe.options.register;Le("visualchars_default_state",{processor:"boolean",default:!1})},Ye=ao("visualchars_default_state"),Lt=(qe,Le)=>{qe.on("init",()=>{uo(qe,Le)})},fn=(qe,Le)=>{let un=null;return{cancel:()=>{mn(un)||(clearTimeout(un),un=null)},throttle:(...Kn)=>{mn(un)&&(un=setTimeout(()=>{un=null,qe.apply(null,Kn)},Le))}}},On=(qe,Le)=>{const un=fn(()=>{ro(qe)},300);qe.on("keydown",ln=>{Le.get()===!0&&(ln.keyCode===13?ro(qe):un.throttle())}),qe.on("remove",un.cancel)},Tn=(qe,Le)=>un=>{un.setActive(Le.get());const ln=Jt=>un.setActive(Jt.state);return qe.on("VisualChars",ln),()=>qe.off("VisualChars",ln)},Ro=(qe,Le)=>{const un=()=>qe.execCommand("mceVisualChars");qe.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:un,onSetup:Tn(qe,Le)}),qe.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:un,onSetup:Tn(qe,Le)})};var ks=()=>{It.add("visualchars",qe=>{Re(qe);const Le=_t(Ye(qe));return kn(qe,Le),Ro(qe,Le),On(qe,Le),Lt(qe,Le),gt(Le)})};ks()})();(function(){var _t=tinymce.util.Tools.resolve("tinymce.PluginManager");const gt=(ae=>se=>ae===se)(null),Ut=ae=>ae,$t="\uFEFF",en=ae=>ae.replace(/\uFEFF/g,""),Gt=(ae,se)=>{const re=ae.length,z=new Array(re);for(let Y=0;Y<re;Y++){const H=ae[Y];z[Y]=se(H,Y)}return z},Et={aletter:"[A-Za-zÂªÂµÂºÃ-ÃÃ-Ã¶Ã¸-ËË-ËË -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½ÎÎ-ÎÎÎ-Î¡Î£-ÏµÏ·-ÒÒ-Ô§Ô±-ÕÕÕ¡-Ö×-×ª×°-×³Ø -ÙÙ®Ù¯Ù±-ÛÛÛ¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ-Ü¯Ý-Þ¥Þ±ß-ßªß´ßµßºà -à à à ¤à ¨à¡-à¡à¤-à¤¹à¤½à¥à¥-à¥¡à¥±-à¥·à¥¹-à¥¿à¦-à¦à¦à¦à¦-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§à§à§à§-à§¡à§°à§±à¨-à¨à¨à¨à¨-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©-à©à©à©²-à©´àª-àªàª-àªàª-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à¬-à¬à¬à¬à¬-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­à­à­-à­¡à­±à®à®-à®à®-à®à®-à®à®à®à®à®à®à®£à®¤à®¨-à®ªà®®-à®¹à¯à°-à°à°-à°à°-à°¨à°ª-à°³à°µ-à°¹à°½à±à±à± à±¡à²-à²à²-à²à²-à²¨à²ª-à²³à²µ-à²¹à²½à³à³ à³¡à³±à³²à´-à´à´-à´à´-à´ºà´½àµàµ àµ¡àµº-àµ¿à¶-à¶à¶-à¶±à¶³-à¶»à¶½à·-à·à¼à½-à½à½-à½¬à¾-à¾á -áá-áºá¼á-áá-áá-ááá-áá -áá-áá-á°á²-áµá¸-á¾áá-áá-áá-áá-áá-áá-áá -á´á-á¬á¯-á¿á-áá -áªá®-á°á-áá-áá -á±á-áá -á¬á®-á°á  -á¡·á¢-á¢¨á¢ªá¢°-á£µá¤-á¤á¨-á¨á¬-á¬³á­-á­á®-á® á®®á®¯á¯-á¯¥á°-á°£á±-á±á±-á±½á³©-á³¬á³®-á³±á´-á¶¿á¸-á¼á¼-á¼á¼ -á½á½-á½á½-á½á½á½á½á½-á½½á¾-á¾´á¾¶-á¾¼á¾¾á¿-á¿á¿-á¿á¿-á¿á¿-á¿á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â-ââââ-âââ-ââ¤â¦â¨âª-â­â¯-â¹â¼-â¿â-âââ -ââ¶-â©â°-â°®â°°-â±â± -â³¤â³«-â³®â´-â´¥â´°-âµ¥âµ¯â¶-â¶â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·-â·â·-â·â·-â·â·-â·â¸¯ãã»ã¼ã-ã­ã±-ãã -ãºê-êê-ê½ê-êê-êêªê«ê-ê®ê¿-êê -ê¯ê-êê¢-êê-êêêê -ê©êº-ê ê -ê ê -ê ê -ê ¢ê¡-ê¡³ê¢-ê¢³ê£²-ê£·ê£»ê¤-ê¤¥ê¤°-ê¥ê¥ -ê¥¼ê¦-ê¦²ê§ê¨-ê¨¨ê©-ê©ê©-ê©ê¬-ê¬ê¬-ê¬ê¬-ê¬ê¬ -ê¬¦ê¬¨-ê¬®ê¯-ê¯¢ê°-í£í°-íí-í»ï¬-ï¬ï¬-ï¬ï¬ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­ï­ï­ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½ï¾ -ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿]",midnumlet:"[-'\\.âââ¤ï¹ï¼ï¼]",midletter:"[:Â·Â·×´â§ï¸ï¹ï¼]",midnum:"[Â±+*/,;;ÖØØÙ¬ß¸âï¸ï¸ï¹ï¹ï¼ï¼]",numeric:"[0-9Ù -Ù©Ù«Û°-Û¹ß-ßà¥¦-à¥¯à§¦-à§¯à©¦-à©¯à«¦-à«¯à­¦-à­¯à¯¦-à¯¯à±¦-à±¯à³¦-à³¯àµ¦-àµ¯à¹-à¹à»-à»à¼ -à¼©á-áá-áá -á©á -á á¥-á¥á§-á§áª-áªáª-áªá­-á­á®°-á®¹á±-á±á±-á±ê -ê©ê£-ê£ê¤-ê¤ê§-ê§ê©-ê©ê¯°-ê¯¹]",cr:"\\r",lf:"\\n",newline:"[\v\fÂ\u2028\u2029]",extend:"[Ì-Í¯Ò-ÒÖ-Ö½Ö¿×××××Ø-ØÙ-ÙÙ°Û-ÛÛ-Û¤Û§Û¨Ûª-Û­ÜÜ°-ÝÞ¦-Þ°ß«-ß³à -à à -à £à ¥-à §à ©-à ­à¡-à¡à¤-à¤à¤º-à¤¼à¤¾-à¥à¥-à¥à¥¢à¥£à¦-à¦à¦¼à¦¾-à§à§à§à§-à§à§à§¢à§£à¨-à¨à¨¼à¨¾-à©à©à©à©-à©à©à©°à©±à©µàª-àªàª¼àª¾-à«à«-à«à«-à«à«¢à«£à¬-à¬à¬¼à¬¾-à­à­à­à­-à­à­à­à­¢à­£à®à®¾-à¯à¯-à¯à¯-à¯à¯à°-à°à°¾-à±à±-à±à±-à±à±à±à±¢à±£à²à²à²¼à²¾-à³à³-à³à³-à³à³à³à³¢à³£à´à´à´¾-àµàµ-àµàµ-àµàµàµ¢àµ£à¶à¶à·à·-à·à·à·-à·à·²à·³à¸±à¸´-à¸ºà¹-à¹àº±àº´-àº¹àº»àº¼à»-à»à¼à¼à¼µà¼·à¼¹à¼¾à¼¿à½±-à¾à¾à¾à¾-à¾à¾-à¾¼à¿á«-á¾á-áá-á á¢-á¤á§-á­á±-á´á-ááá-áá-áá-áá²-á´ááá²á³á¶-ááá -á á¢©á¤ -á¤«á¤°-á¤»á¦°-á§á§á§á¨-á¨á©-á©á© -á©¼á©¿á¬-á¬á¬´-á­á­«-á­³á®-á®á®¡-á®ªá¯¦-á¯³á°¤-á°·á³-á³á³-á³¨á³­á³²á·-á·¦á·¼-á·¿âââ-â°â³¯-â³±âµ¿â· -â·¿ãª-ã¯ããê¯-ê²ê¼ê½ê°ê±ê ê ê ê £-ê §ê¢ê¢ê¢´-ê£ê£ -ê£±ê¤¦-ê¤­ê¥-ê¥ê¦-ê¦ê¦³-ê§ê¨©-ê¨¶ê©ê©ê©ê©»êª°êª²-êª´êª·êª¸êª¾êª¿ê«ê¯£-ê¯ªê¯¬ê¯­ï¬ï¸-ï¸ï¸ -ï¸¦ï¾ï¾]",format:"[Â­Ø-ØÛÜá´áµâââª-â®â -â¤âª-â¯\uFEFFï¿¹-ï¿»]",katakana:"[ã±-ãµããã -ãºã¼-ã¿ã°-ã¿ã-ã¾ã-ãï½¦-ï¾]",extendnumlet:"[=_â¿ââï¸³ï¸´ï¹-ï¹ï¼¿â-â¿<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}Â¡Â«Â·Â»Â¿;Â·Õ-ÕÖÖÖ¾××××³×´ØØØØØØØÙª-Ù­ÛÜ-Üß·-ß¹à °-à ¾à¡à¥¤à¥¥à¥°à·´à¹à¹à¹à¼-à¼à¼º-à¼½à¾à¿-à¿à¿à¿á-áá»á¡-á¨áá­á®ááá«-á­áµá¶á-áá-áá -á á¥á¥á¨á¨áª -áª¦áª¨-áª­á­-á­ á¯¼-á¯¿á°»-á°¿á±¾á±¿á³â-â§â°-ââ-ââ-ââ½â¾ââããâ¨-âµâââ¦-â¯â¦-â¦â§-â§â§¼â§½â³¹-â³¼â³¾â³¿âµ°â¸-â¸®â¸°â¸±ã-ãã-ãã-ãã°ã½ã ã»ê¾ê¿ê-êê³ê¾ê²-ê·ê¡´-ê¡·ê£ê£ê£¸-ê£ºê¤®ê¤¯ê¥ê§-ê§ê§ê§ê©-ê©ê«ê«ê¯«ï´¾ï´¿ï¸-ï¸ï¸°-ï¹ï¹-ï¹¡ï¹£ï¹¨ï¹ªï¹«ï¼-ï¼ï¼-ï¼ï¼-ï¼ï¼ï¼ï¼ï¼ ï¼»-ï¼½ï¼¿ï½ï½ï½-ï½¥]"},rt={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},mn=[new RegExp(Et.aletter),new RegExp(Et.midnumlet),new RegExp(Et.midletter),new RegExp(Et.midnum),new RegExp(Et.numeric),new RegExp(Et.cr),new RegExp(Et.lf),new RegExp(Et.newline),new RegExp(Et.extend),new RegExp(Et.format),new RegExp(Et.katakana),new RegExp(Et.extendnumlet),new RegExp("@")],Nn="",Ot=new RegExp("^"+Et.punctuation+"$"),ct=/^\s+$/,Bt=mn,cn=rt.OTHER,Ze=ae=>{let se=cn;const re=Bt.length;for(let z=0;z<re;++z){const Y=Bt[z];if(Y&&Y.test(ae)){se=z;break}}return se},et=ae=>{const se={};return re=>{if(se[re])return se[re];{const z=ae(re);return se[re]=z,z}}},Ee=ae=>{const se=et(Ze);return Gt(ae,se)},te=(ae,se)=>{const re=ae[se],z=ae[se+1];if(se<0||se>ae.length-1&&se!==0||re===rt.ALETTER&&z===rt.ALETTER)return!1;const Y=ae[se+2];if(re===rt.ALETTER&&(z===rt.MIDLETTER||z===rt.MIDNUMLET||z===rt.AT)&&Y===rt.ALETTER)return!1;const H=ae[se-1];return(re===rt.MIDLETTER||re===rt.MIDNUMLET||z===rt.AT)&&z===rt.ALETTER&&H===rt.ALETTER||(re===rt.NUMERIC||re===rt.ALETTER)&&(z===rt.NUMERIC||z===rt.ALETTER)||(re===rt.MIDNUM||re===rt.MIDNUMLET)&&z===rt.NUMERIC&&H===rt.NUMERIC||re===rt.NUMERIC&&(z===rt.MIDNUM||z===rt.MIDNUMLET)&&Y===rt.NUMERIC||re===rt.EXTEND||re===rt.FORMAT||H===rt.EXTEND||H===rt.FORMAT||z===rt.EXTEND||z===rt.FORMAT||re===rt.CR&&z===rt.LF?!1:re===rt.NEWLINE||re===rt.CR||re===rt.LF||z===rt.NEWLINE||z===rt.CR||z===rt.LF?!0:!(re===rt.KATAKANA&&z===rt.KATAKANA||z===rt.EXTENDNUMLET&&(re===rt.ALETTER||re===rt.NUMERIC||re===rt.KATAKANA||re===rt.EXTENDNUMLET)||re===rt.EXTENDNUMLET&&(z===rt.ALETTER||z===rt.NUMERIC||z===rt.KATAKANA)||re===rt.AT)},Je=Nn,Ht=ct,yt=Ot,K=ae=>ae==="http"||ae==="https",xt=(ae,se)=>{let re;for(re=se;re<ae.length&&!Ht.test(ae[re]);re++);return re},En=(ae,se)=>{const re=xt(ae,se+1);return ae.slice(se+1,re).join(Je).substr(0,3)==="://"?re:se},St=(ae,se,re,z)=>{const Y=[];let H=[];for(let Z=0;Z<re.length;++Z)if(H.push(ae[Z]),te(re,Z)){const Be=se[Z];if((z.includeWhitespace||!Ht.test(Be))&&(z.includePunctuation||!yt.test(Be))){const Pe=Z-H.length+1,Yt=Z+1,rn=se.slice(Pe,Yt).join(Je);if(K(rn)){const ro=En(se,Z),uo=ae.slice(Yt,ro);Array.prototype.push.apply(H,uo),Z=ro}Y.push(H)}H=[]}return Y},he=()=>({includeWhitespace:!1,includePunctuation:!1}),it=(ae,se,re)=>{re={...he(),...re};const z=[],Y=[];for(let Z=0;Z<ae.length;Z++){const Be=se(ae[Z]);Be!==$t&&(z.push(ae[Z]),Y.push(Be))}const H=Ee(Y);return St(z,Y,H,re)};var Me=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const De=(ae,se)=>{const re=se.getBlockElements(),z=se.getVoidElements(),Y=Yt=>re[Yt.nodeName]||z[Yt.nodeName],H=[];let Z="";const Be=new Me(ae,ae);let Pe;for(;Pe=Be.next();)Pe.nodeType===3?Z+=en(Pe.data):Y(Pe)&&Z.length&&(H.push(Z),Z="");return Z.length&&H.push(Z),H},Ft=ae=>ae.replace(/\u200B/g,""),_=ae=>ae.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,ge=(ae,se)=>{const re=Ft(De(ae,se).join(`
`));return it(re.split(""),Ut).length},Ue=(ae,se)=>{const re=De(ae,se).join("");return _(re)},Ie=(ae,se)=>{const re=De(ae,se).join("").replace(/\s/g,"");return _(re)},Ae=(ae,se)=>()=>se(ae.getBody(),ae.schema),tn=(ae,se)=>()=>se(ae.selection.getRng().cloneContents(),ae.schema),dn=ae=>Ae(ae,ge),ze=ae=>({body:{getWordCount:dn(ae),getCharacterCount:Ae(ae,Ue),getCharacterCountWithoutSpaces:Ae(ae,Ie)},selection:{getWordCount:tn(ae,ge),getCharacterCount:tn(ae,Ue),getCharacterCountWithoutSpaces:tn(ae,Ie)},getCount:dn(ae)}),jt=(ae,se)=>{ae.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(se.body.getWordCount()),String(se.selection.getWordCount())],["Characters (no spaces)",String(se.body.getCharacterCountWithoutSpaces()),String(se.selection.getCharacterCountWithoutSpaces())],["Characters",String(se.body.getCharacterCount()),String(se.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Nt=(ae,se)=>{ae.addCommand("mceWordCount",()=>jt(ae,se))},Ve=(ae,se)=>{let re=null;return{cancel:()=>{gt(re)||(clearTimeout(re),re=null)},throttle:(...H)=>{gt(re)&&(re=setTimeout(()=>{re=null,ae.apply(null,H)},se))}}};var R=tinymce.util.Tools.resolve("tinymce.util.Delay");const qn=(ae,se)=>{ae.dispatch("wordCountUpdate",{wordCount:{words:se.body.getWordCount(),characters:se.body.getCharacterCount(),charactersWithoutSpaces:se.body.getCharacterCountWithoutSpaces()}})},_e=(ae,se)=>{qn(ae,se)},xe=(ae,se,re)=>{const z=Ve(()=>_e(ae,se),re);ae.on("init",()=>{_e(ae,se),R.setEditorTimeout(ae,()=>{ae.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",z.throttle)},0),ae.on("remove",z.cancel)})},We=ae=>{const se=()=>ae.execCommand("mceWordCount");ae.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:se}),ae.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:se})};var ke=(ae=300)=>{_t.add("wordcount",se=>{const re=ze(se);return Nt(se,re),We(se),xe(se,re,ae),re})};ke()})();const sq="advlist anchor autolink autoresize charmap code directionality emoticons fullscreen help image importcss autosave insertdatetime link lists media nonbreaking pagebreak preview quickbars save searchreplace table template visualblocks visualchars wordcount",rq=["id"],aq=zf({__name:"Tinymce",props:{modelValue:{type:String,default:""},id:{type:String,required:!0},disabled:{type:Boolean,default:!1},plugins:{type:String,default:sq},toolbar:{type:String,default:"undo redo |   formatselect | forecolor backcolor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent lists image | fullscreen | preview insertCode"},width:{type:[Number,String],default:"auto"},height:{type:[Number,String],default:"400px"}},emits:["update:modelValue"],setup(_t,{emit:It}){const gt=_t,Ut=SZ(),$t={selector:`#${gt.id}`,language_url:"tinymce/langs/zh-Hans.js",language:"zh-Hans",skin_url:"tinymce/skins/ui/oxide",content_css:"tinymce/skins/content/default/content.min.css",emoticons_database_url:"tinymce/plugins/emoticons/js/emojis.min.js",promotion:!1,branding:!1,plugins:gt.plugins,toolbar:gt.toolbar,width:gt.width,height:gt.height,init_instance_callback:en=>{en.on("input",()=>{var Gt;It("update:modelValue",(Gt=kF.get(gt.id))==null?void 0:Gt.getContent())}),en.on("ExecCommand",()=>{var Gt;It("update:modelValue",(Gt=kF.get(gt.id))==null?void 0:Gt.getContent())})},setup:en=>{en.ui.registry.addIcon("icode",'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 256 256"><path fill="#888888" d="M216 88a7.7 7.7 0 0 0-2.4-5.7l-55.9-56A8.1 8.1 0 0 0 152 24H56a16 16 0 0 0-16 16v176a16 16 0 0 0 16 16h144a16 16 0 0 0 16-16V88Zm-56-36.7L188.7 80H160ZM200 216H56V40h88v48a8 8 0 0 0 8 8h48v120Zm-22.3-69.7a8.1 8.1 0 0 1 0 11.4l-24 24a8.5 8.5 0 0 1-5.7 2.3a8.3 8.3 0 0 1-5.7-2.3a8.1 8.1 0 0 1 0-11.4l18.4-18.3l-18.4-18.3a8.1 8.1 0 0 1 11.4-11.4Zm-64-12.6L95.3 152l18.4 18.3a8.1 8.1 0 0 1 0 11.4a8.5 8.5 0 0 1-5.7 2.3a8.3 8.3 0 0 1-5.7-2.3l-24-24a8.1 8.1 0 0 1 0-11.4l24-24a8.1 8.1 0 0 1 11.4 11.4Z"/></svg>'),en.ui.registry.addButton("insertCode",{text:"insert",onAction:function(){Ut.$patch(Gt=>{Gt.insertCodeDialogVisible=!0})}})}};return EF(()=>{kF.init($t)}),aG(()=>{}),(en,Gt)=>(yu(),$0("textarea",{id:_t.id},null,8,rq))}});let cq=(_t=21)=>crypto.getRandomValues(new Uint8Array(_t)).reduce((It,gt)=>(gt&=63,gt<36?It+=gt.toString(36):gt<62?It+=(gt-26).toString(36).toUpperCase():gt>62?It+="-":It+="_",It),"");const iq={class:"dialog-footer"},vq=zf({__name:"Tinymce",setup(_t){const{t:It}=cG(),gt=$m(""),Ut=$m("tinymce"+cq()),$t=SZ(),{insertCodeDialogVisible:en}=iG($t);let Gt=$m("");function Tt(){var Et;if(Gt.value==="")return nq.warning(It("content is null"));(Et=kF.get(Ut.value))==null||Et.insertContent(Gt.value),$t.$patch(rt=>{rt.insertCodeDialogVisible=!1}),Gt.value=""}return(Et,rt)=>{const mn=uG,Nn=lG,Ot=zG;return yu(),$0(wZ,null,[Nm(aq,{modelValue:gt.value,"onUpdate:modelValue":rt[0]||(rt[0]=ct=>gt.value=ct),id:Ut.value,ref:"editor"},null,8,["modelValue","id"]),aU(" "+iT(gt.value)+" ",1),Nm(Ot,{modelValue:bo(en),"onUpdate:modelValue":rt[3]||(rt[3]=ct=>hZ(en)?en.value=ct:null),title:bo(It)("insert code"),width:"30%"},{footer:ad(()=>[B0("span",iq,[Nm(Nn,{onClick:Tt},{default:ad(()=>[aU(iT(bo(It)("insert")),1)]),_:1}),Nm(Nn,{type:"primary",onClick:rt[2]||(rt[2]=ct=>en.value=!1)},{default:ad(()=>[aU(iT(bo(It)("cancel")),1)]),_:1})])]),default:ad(()=>[Nm(mn,{type:"textarea",modelValue:Gt.value,"onUpdate:modelValue":rt[1]||(rt[1]=ct=>Gt.value=ct),rows:3},null,8,["modelValue"])]),_:1},8,["modelValue","title"])],64)}}});export{vq as default};
